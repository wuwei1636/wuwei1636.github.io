<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>UE5C++ä½¿ç”¨å¢å¼ºè¾“å…¥</title>
      <link href="/2025/12/19/UE5C++%E4%BD%BF%E7%94%A8%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5/"/>
      <url>/2025/12/19/UE5C++%E4%BD%BF%E7%94%A8%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒæ–‡ç« å’Œè§†é¢‘ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/470949422">UE5 â€“ EnhancedInput(å¢å¼ºè¾“å…¥ç³»ç»Ÿ)</a></p><p><a href="https://www.bilibili.com/video/BV1WW4y1d7ZJ/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=6d070e5f2a4f28fd128440195fce3d9a">UE5è™šå¹»å¼•æ“C++ã€ç¬¬ä¸€æœŸã€‘ä½¿ç”¨å¢å¼ºè¾“å…¥ç³»ç»Ÿ</a></p></blockquote><blockquote><p>UE5ä½¿ç”¨äº†æ–°çš„è¾“å…¥ç³»ç»Ÿï¼šå¢å¼ºè¾“å…¥ç³»ç»Ÿ</p><p>åŸç³»ç»Ÿçš„ç¼ºç‚¹ï¼š</p><ol><li>å®ç°çš„æ˜¯åŸºç¡€ç®€å•çš„åŠŸèƒ½ï¼Œæƒ³è¦å¤æ‚çš„è¾“å…¥æœºåˆ¶å°±éœ€è¦åœ¨Userå±‚åšæ›´å¤šçš„å·¥ä½œã€‚</li><li>è¿‡äºç®€é™‹ï¼Œéœ€è‡ªå·±å®ç°ä¼—å¤šè¡Œä¸ºã€‚ä¾‹å¦‚æŒ‰ä½ã€åŒå‡»ã€è”åˆè¾“å…¥ç­‰éƒ½éœ€è¦ç”¨æˆ·è‡ªå·±å®ç°ã€‚</li></ol><p>å¢å¼ºè¾“å…¥ç³»ç»Ÿï¼š</p><p>å®ƒä»¥æ¨¡å—åŒ–çš„æ–¹å¼è§£è€¦äº†ä»è¾“å…¥çš„æŒ‰é”®é…ç½®åˆ°äº‹ä»¶å¤„ç†çš„é€»è¾‘å¤„ç†è¿‡ç¨‹ï¼Œé€šè¿‡æä¾›è¾“å…¥åŠ¨ä½œ(<code>UInputAction</code>)ã€è¾“å…¥ä¿®æ”¹å™¨ï¼ˆ<code>UInputModifier</code>)ã€è¾“å…¥è§¦å‘å™¨ï¼ˆ<code>UInputTrigger</code>ï¼‰å’Œè¾“å…¥æ˜ å°„ç¯å¢ƒï¼ˆ<code>UInputMappingContext</code>ï¼‰è¿™äº›å¯ç»„åˆåŠŸèƒ½ï¼Œåœ¨æ–°çš„å¢å¼ºç©å®¶è¾“å…¥(<code>UEnhancedPlayerInput</code>)å’Œå¢å¼ºè¾“å…¥ç»„ä»¶( <code>UEnhancedInputComponent</code>)çš„é…åˆä¸‹æä¾›äº†æ›´çµæ´»å’Œæ›´ä¾¿åˆ©çš„è¾“å…¥é…ç½®å’Œå¤„ç†åŠŸèƒ½ã€‚</p></blockquote><h1 id="1-åœ¨xx-Build-csä¸­æ·»åŠ -EnhancedInputæ¨¡å—"><a href="#1-åœ¨xx-Build-csä¸­æ·»åŠ -EnhancedInputæ¨¡å—" class="headerlink" title="1.åœ¨xx.Build.csä¸­æ·»åŠ  EnhancedInputæ¨¡å—"></a>1.åœ¨<code>xx.Build.cs</code>ä¸­æ·»åŠ  <code>EnhancedInput</code>æ¨¡å—</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PublicDependencyModuleNames.AddRange(<span class="keyword">new</span> <span class="built_in">string</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="string">&quot;EnhancedInput&quot;</span></span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h1 id="2-åœ¨UEC-ä¸­åˆ›å»ºç›¸åº”çš„å˜é‡"><a href="#2-åœ¨UEC-ä¸­åˆ›å»ºç›¸åº”çš„å˜é‡" class="headerlink" title="2. åœ¨UEC++ä¸­åˆ›å»ºç›¸åº”çš„å˜é‡"></a>2. åœ¨UEC++ä¸­åˆ›å»ºç›¸åº”çš„å˜é‡</h1><blockquote><p>åœ¨<code>xxxxcharacter.h</code>ä¸­è¿›è¡Œé…ç½®ï¼ˆè‡ªå·±çš„characterä¸­è¿›è¡Œé…ç½®ï¼‰</p><p>è¿™é‡Œçš„<code>UInputAction</code>å¯ä»¥è®¾ç½®å¤šä¸ªï¼Œå› ä¸ºæˆ‘è®¾ç½®äº†ä¸€ä¸ªé”®ç›˜æŒ‰é”®ï¼Œæ‰€ä»¥åªä½¿ç”¨äº†ä¸€ä¸ª</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//character.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetupPlayerInputComponent</span><span class="params">(<span class="keyword">class</span> UInputComponent* PlayerInputComponent)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// input system</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">TObjectPtr&lt;UInputMappingContext&gt; InputMappingContext;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">TObjectPtr&lt;UInputAction&gt; StartMove;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºåè¿è¡Œï¼Œæ‰“å¼€ç›¸åº”çš„characterè“å›¾ç»†èŠ‚ï¼Œå‡ºç°å³ä¾§çš„éƒ¨åˆ†å³ä¸ºè®¾ç½®æˆåŠŸ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554343.png" alt="image-20251219131042330"></p><h1 id="3-åœ¨è“å›¾ä¸­åˆ›å»ºå¯¹åº”çš„æ˜ å°„æ–‡ä»¶"><a href="#3-åœ¨è“å›¾ä¸­åˆ›å»ºå¯¹åº”çš„æ˜ å°„æ–‡ä»¶" class="headerlink" title="3. åœ¨è“å›¾ä¸­åˆ›å»ºå¯¹åº”çš„æ˜ å°„æ–‡ä»¶"></a>3. åœ¨è“å›¾ä¸­åˆ›å»ºå¯¹åº”çš„æ˜ å°„æ–‡ä»¶</h1><blockquote><p>é…ç½®æ–‡ä»¶ä¸ºï¼š<code>InputMappingContext</code>å’Œ<code>InputAction</code></p></blockquote><h2 id="åˆ›å»ºæ–‡ä»¶å¦‚ä¸‹"><a href="#åˆ›å»ºæ–‡ä»¶å¦‚ä¸‹" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¦‚ä¸‹"></a>åˆ›å»ºæ–‡ä»¶å¦‚ä¸‹</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554344.png" alt="image-20251219131248737"></p><h2 id="æ–°å»ºè¾“å…¥æ˜ å°„æƒ…æ™¯-InputMappingContext"><a href="#æ–°å»ºè¾“å…¥æ˜ å°„æƒ…æ™¯-InputMappingContext" class="headerlink" title="æ–°å»ºè¾“å…¥æ˜ å°„æƒ…æ™¯(InputMappingContext)"></a>æ–°å»ºè¾“å…¥æ˜ å°„æƒ…æ™¯(<code>InputMappingContext</code>)</h2><blockquote><p>å‘½åä¸º<code>IMC_InputMapping</code>ï¼Œå¹¶è¿›è¡Œä¸€ä¸‹é…ç½®</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554345.png" alt="image-20251219153921122"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554346.png" alt="image-20251219131310579"></p><h2 id="æ–°å»ºè¾“å…¥æ“ä½œ-InputAction"><a href="#æ–°å»ºè¾“å…¥æ“ä½œ-InputAction" class="headerlink" title="æ–°å»ºè¾“å…¥æ“ä½œ(InputAction)"></a>æ–°å»ºè¾“å…¥æ“ä½œ(<code>InputAction</code>)</h2><blockquote><p>å‘½åä¸º<code>IA_startMove</code>ï¼Œå¹¶è¿›è¡Œä¸€ä¸‹é…ç½®</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554347.png" alt="image-20251219154028449"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554348.png" alt="image-20251219131325144"></p><p>åˆ›å»ºå¥½åå›åˆ°characterçš„ç»†èŠ‚ä¸­ï¼Œè®¾ç½®UEC++ä¸­è®¾ç½®å¥½çš„å˜é‡</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202512191554350.png" alt="image-20251219131442912"></p><h1 id="4-è¿”å›UEC-è®¾ç½®é…ç½®å‡½æ•°"><a href="#4-è¿”å›UEC-è®¾ç½®é…ç½®å‡½æ•°" class="headerlink" title="4. è¿”å›UEC++è®¾ç½®é…ç½®å‡½æ•°"></a>4. è¿”å›UEC++è®¾ç½®é…ç½®å‡½æ•°</h1><blockquote><p>é…ç½®å‡½æ•°è®¾ç½®åœ¨<code>xxxcharacter.cpp</code>ä¸­</p><p>é…ç½®çš„è¯¦ç»†è§£é‡Šéƒ½åœ¨æ³¨é‡Šä¸­</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief è®¾ç½®ç©å®¶è¾“å…¥ç»„ä»¶ï¼Œåˆå§‹åŒ–å¢å¼ºè¾“å…¥ç³»ç»Ÿçš„æ˜ å°„ä¸Šä¸‹æ–‡å’ŒåŠ¨ä½œç»‘å®š</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è¯¥å‡½æ•°é‡å†™äº†çˆ¶ç±»çš„SetupPlayerInputComponentæ–¹æ³•ï¼Œç”¨äºé…ç½®è§’è‰²çš„è¾“å…¥ç³»ç»Ÿã€‚</span></span><br><span class="line"><span class="comment"> * ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</span></span><br><span class="line"><span class="comment"> * - æ·»åŠ è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡ï¼ˆInput Mapping Contextï¼‰</span></span><br><span class="line"><span class="comment"> * - ç»‘å®šStartMoveåŠ¨ä½œåˆ°MoveBySplineå‡½æ•°</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param PlayerInputComponent æŒ‡å‘ç©å®¶è¾“å…¥ç»„ä»¶çš„æŒ‡é’ˆï¼Œç”±å¼•æ“è‡ªåŠ¨ä¼ å…¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACourseWorkTest1Character::SetupPlayerInputComponent</span><span class="params">(<span class="keyword">class</span> UInputComponent* PlayerInputComponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">SetupPlayerInputComponent</span>(PlayerInputComponent);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief åˆå§‹åŒ–ç©å®¶è¾“å…¥ç³»ç»Ÿå¹¶ç»‘å®šç§»åŠ¨åŠ¨ä½œ</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¯¥å‡½æ•°è´Ÿè´£è®¾ç½®å¢å¼ºè¾“å…¥ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ·»åŠ è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡å’Œç»‘å®šæ¸¸æˆåŠ¨ä½œã€‚</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆè·å–ç©å®¶æ§åˆ¶å™¨ï¼Œç„¶åé€šè¿‡æœ¬åœ°ç©å®¶è·å–å¢å¼ºè¾“å…¥å­ç³»ç»Ÿå®ä¾‹ï¼Œ</span></span><br><span class="line"><span class="comment"> * å°†æŒ‡å®šçš„è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡æ·»åŠ åˆ°å­ç³»ç»Ÿä¸­ã€‚</span></span><br><span class="line"><span class="comment"> * æ¥ç€å°†è¾“å…¥ç»„ä»¶è½¬æ¢ä¸ºå¢å¼ºè¾“å…¥ç»„ä»¶ï¼Œå¹¶å°†StartMoveåŠ¨ä½œä¸è§’è‰²çš„MoveBySplineå‡½æ•°è¿›è¡Œç»‘å®šã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @note è¯¥ä»£ç æ®µå‡è®¾GetController()èƒ½æ­£ç¡®è¿”å›æ§åˆ¶å™¨å®ä¾‹</span></span><br><span class="line"><span class="comment"> * @note éœ€è¦ç¡®ä¿InputMappingContextå’ŒStartMoveå·²æ­£ç¡®å®šä¹‰å’Œåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span> (APlayerController* PlayerController = <span class="built_in">Cast</span>&lt;APlayerController&gt;(<span class="built_in">GetController</span>()))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è·å–å¢å¼ºè¾“å…¥å­ç³»ç»Ÿå¹¶æ·»åŠ æ˜ å°„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">// é€šè¿‡æœ¬åœ°ç©å®¶è·å–UEnhancedInputLocalPlayerSubsystemå­ç³»ç»Ÿå®ä¾‹ï¼Œ</span></span><br><span class="line"><span class="comment">// å¦‚æœè·å–æˆåŠŸï¼Œåˆ™å°†æŒ‡å®šçš„è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡æ·»åŠ åˆ°å­ç³»ç»Ÿä¸­</span></span><br><span class="line"><span class="keyword">if</span> (UEnhancedInputLocalPlayerSubsystem* Subsystem =</span><br><span class="line">ULocalPlayer::<span class="built_in">GetSubsystem</span>&lt;UEnhancedInputLocalPlayerSubsystem&gt;(PlayerController-&gt;<span class="built_in">GetLocalPlayer</span>()))</span><br><span class="line">&#123;</span><br><span class="line">Subsystem -&gt; <span class="built_in">AddMappingContext</span>(InputMappingContext, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥å¹¶è½¬æ¢è¾“å…¥ç»„ä»¶ä¸ºå¢å¼ºè¾“å…¥ç»„ä»¶ï¼Œå¦‚æœè½¬æ¢æˆåŠŸåˆ™ç»‘å®šç§»åŠ¨åŠ¨ä½œ</span></span><br><span class="line"><span class="comment">// è¯¥ä»£ç å—çš„ä½œç”¨æ˜¯å°†StartMoveåŠ¨ä½œä¸è§’è‰²çš„MoveBySplineå‡½æ•°è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="comment">// å½“è§¦å‘StartMoveåŠ¨ä½œæ—¶ï¼Œä¼šè°ƒç”¨ACourseWorkTest1Characterç±»çš„MoveBySplineæ–¹æ³•</span></span><br><span class="line"><span class="keyword">if</span> (UEnhancedInputComponent* EnhancedInputComponent = <span class="built_in">CastChecked</span>&lt;UEnhancedInputComponent&gt;(PlayerInputComponent))</span><br><span class="line">&#123;</span><br><span class="line">EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(StartMove, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;ACourseWorkTest1Character::MoveBySpline);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEå’ŒSpring Bootçš„é€šä¿¡</title>
      <link href="/2025/12/15/UE%E5%92%8CSpringBoot%E9%80%9A%E4%BF%A1/"/>
      <url>/2025/12/15/UE%E5%92%8CSpringBoot%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>UEå’ŒSpring Bootçš„é€šä¿¡æ–¹å¼å¸¸è§çš„æœ‰ä¸‰ç§ï¼šREST API ã€WebSocketå’Œ gRPCã€‚</p></blockquote><h1 id="æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”"><a href="#æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”"></a>æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”</h1><table><thead><tr><th>ç»´åº¦</th><th>REST API</th><th>WebSocket</th><th>gRPC</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td>è¯·æ±‚-å“åº”ï¼ˆå•å‘ï¼‰</td><td>å…¨åŒå·¥åŒå‘ï¼ˆé•¿è¿æ¥ï¼‰</td><td>æ”¯æŒå•å‘&#x2F;åŒå‘æµï¼ˆåŸºäº HTTP&#x2F;2ï¼‰</td></tr><tr><td><strong>è¿æ¥ç±»å‹</strong></td><td>çŸ­è¿æ¥ï¼ˆæ¯æ¬¡è¯·æ±‚æ–°å»ºï¼‰</td><td>é•¿è¿æ¥ï¼ˆä¸€æ¬¡æ¡æ‰‹ï¼ŒæŒä¹…é€šä¿¡ï¼‰</td><td>é•¿è¿æ¥ï¼ˆå¤ç”¨ HTTP&#x2F;2 å¤šè·¯å¤ç”¨ï¼‰</td></tr><tr><td><strong>æ•°æ®æ ¼å¼</strong></td><td>JSON &#x2F; XMLï¼ˆæ–‡æœ¬ï¼‰</td><td>ä»»æ„ï¼ˆé€šå¸¸ JSON æ–‡æœ¬æˆ–äºŒè¿›åˆ¶ï¼‰</td><td>Protocol Buffersï¼ˆäºŒè¿›åˆ¶ï¼Œé«˜æ•ˆï¼‰</td></tr><tr><td><strong>æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âœ… æ”¯æŒï¼ˆé€šè¿‡ Server Streamingï¼‰</td></tr><tr><td><strong>å»¶è¿Ÿ</strong></td><td>é«˜ï¼ˆéœ€å®Œæ•´ HTTP è¯·æ±‚ï¼‰</td><td>æä½ï¼ˆæ¯«ç§’çº§ï¼‰</td><td>æä½ï¼ˆäºŒè¿›åˆ¶ + HTTP&#x2F;2ï¼‰</td></tr><tr><td><strong>å¸¦å®½æ•ˆç‡</strong></td><td>ä½ï¼ˆå†—ä½™ HTTP å¤´ï¼‰</td><td>é«˜ï¼ˆä»… payloadï¼‰</td><td>æé«˜ï¼ˆç´§å‡‘äºŒè¿›åˆ¶ç¼–ç ï¼‰</td></tr><tr><td><strong>UE æ”¯æŒ</strong></td><td>âœ… å†…ç½® <code>HttpModule</code></td><td>âœ… å†…ç½® <code>WebSocketsModule</code></td><td>âŒ éœ€é›†æˆç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ gRPC C++ï¼‰</td></tr><tr><td><strong>Spring Boot æ”¯æŒ</strong></td><td>âœ… åŸç”Ÿï¼ˆ<code>@RestController</code>ï¼‰</td><td>âœ… åŸç”Ÿï¼ˆ<code>WebSocketHandler</code>ï¼‰</td><td>âœ… éœ€é¢å¤–ä¾èµ–ï¼ˆ<code>grpc-spring-boot-starter</code>ï¼‰</td></tr><tr><td><strong>è·¨å¹³å°å…¼å®¹æ€§</strong></td><td>âœ… æä½³ï¼ˆæ‰€æœ‰è®¾å¤‡æ”¯æŒ HTTPï¼‰</td><td>âœ… è‰¯å¥½ï¼ˆç°ä»£æµè§ˆå™¨&#x2F;å¼•æ“æ”¯æŒï¼‰</td><td>âš ï¸ è¾ƒå·®ï¼ˆéœ€ç¼–è¯‘ native åº“ï¼‰</td></tr><tr><td><strong>è°ƒè¯•éš¾åº¦</strong></td><td>âœ… ç®€å•ï¼ˆPostmanã€curlï¼‰</td><td>âš ï¸ ä¸­ç­‰ï¼ˆéœ€ä¸“ç”¨å·¥å…·ï¼‰</td><td>âŒ å›°éš¾ï¼ˆäºŒè¿›åˆ¶åè®®ï¼Œéœ€ proto å®šä¹‰ï¼‰</td></tr></tbody></table><p>æ ¹æ®ä¸Šè¿°åˆ†ææˆ‘ä»¬ä¸éš¾å‘ç°ï¼š</p><ul><li>REST APIé€‚ç”¨çš„åœºæ™¯æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·æ“ä½œï¼šç™»å½•ï¼Œè´­ä¹°ï¼Œæäº¤è¡¨å•ç­‰ã€‚ä¸é€‚ç”¨äºé«˜é¢‘é€šä¿¡å’ŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€ç­‰æ“ä½œã€‚</li><li>WebSocketé€‚åˆæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€ç³»ç»Ÿé€šçŸ¥ï¼Œä»»åŠ¡æ›´æ–°ï¼›ä½é¢‘åˆ°ä¸­é¢‘çš„çŠ¶æ€åŒæ­¥ç­‰ã€‚</li><li>gRPç”¨äºé€šè®¯æœ‰ç‚¹å¤§æå°ç”¨ï¼Œè¿™é‡Œä¸å†è¯¦ç»†ä»‹ç»</li></ul><p>å› æ­¤æ ¹æ®éœ€æ±‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„é€šä¿¡æ–¹å¼æ¥å®ç°UEå’ŒSpring Bootçš„é€šä¿¡ï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»WebSocketçš„é€šä¿¡æ–¹å¼ã€‚</p><h1 id="ä½¿ç”¨WebSocketé€šä¿¡"><a href="#ä½¿ç”¨WebSocketé€šä¿¡" class="headerlink" title="ä½¿ç”¨WebSocketé€šä¿¡"></a>ä½¿ç”¨WebSocketé€šä¿¡</h1><h2 id="UEç«¯"><a href="#UEç«¯" class="headerlink" title="UEç«¯"></a>UEç«¯</h2><h3 id="1-å¯ç”¨æ¨¡å—ï¼ˆxx-Build-csï¼‰"><a href="#1-å¯ç”¨æ¨¡å—ï¼ˆxx-Build-csï¼‰" class="headerlink" title="1.å¯ç”¨æ¨¡å—ï¼ˆxx.Build.csï¼‰"></a>1.å¯ç”¨æ¨¡å—ï¼ˆ<code>xx.Build.cs</code>ï¼‰</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PublicDependencyModuleNames.AddRange(<span class="keyword">new</span> <span class="built_in">string</span>[] &#123;</span><br><span class="line">    <span class="string">&quot;Core&quot;</span>, <span class="string">&quot;CoreUObject&quot;</span>, <span class="string">&quot;Engine&quot;</span>, <span class="string">&quot;WebSockets&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºWebSocketç®¡ç†å™¨"><a href="#2-åˆ›å»ºWebSocketç®¡ç†å™¨" class="headerlink" title="2.åˆ›å»ºWebSocketç®¡ç†å™¨"></a>2.åˆ›å»ºWebSocketç®¡ç†å™¨</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebSocketManager.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;WebSocketsModule.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;IWebSocket.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å§”æ‰˜ç±»å‹ï¼šæ¥æ”¶åŸå§‹æ¶ˆæ¯å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">DECLARE_MULTICAST_DELEGATE_OneParam</span>(FOnWebSocketMessageReceived, <span class="type">const</span> FString&amp;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FWebSocketManager</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// å…¬å…±å§”æ‰˜ï¼Œä¾›å…¶ä»–ç³»ç»Ÿç»‘å®š</span></span><br><span class="line">    <span class="type">static</span> FOnWebSocketMessageReceived OnMessageReceived;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">Connect</span><span class="params">(<span class="type">const</span> FString&amp; Url)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">Disconnect</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">SendMessage</span><span class="params">(<span class="type">const</span> FString&amp; Message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> TSharedPtr&lt;IWebSocket&gt; WebSocket;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">OnConnected</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">OnMessage</span><span class="params">(<span class="type">const</span> FString&amp; Message)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">OnClosed</span><span class="params">(int32 StatusCode, <span class="type">const</span> FString&amp; Reason, <span class="type">bool</span> bWasClean)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebSocketManager.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;WebSocketManager.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Misc/Paths.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Misc/CommandLine.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/Engine.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é™æ€å§”æ‰˜å®ä¾‹</span></span><br><span class="line">FOnWebSocketMessageReceived FWebSocketManager::OnMessageReceived;</span><br><span class="line">TSharedPtr&lt;IWebSocket&gt; FWebSocketManager::WebSocket = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::Connect</span><span class="params">(<span class="type">const</span> FString&amp; Url)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (WebSocket.<span class="built_in">IsValid</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Already connected&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    WebSocket = FWebSocketsModule::<span class="built_in">Get</span>().<span class="built_in">CreateWebSocket</span>(Url, <span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    WebSocket-&gt;<span class="built_in">OnConnected</span>().<span class="built_in">AddStatic</span>(&amp;FWebSocketManager::OnConnected);</span><br><span class="line">    WebSocket-&gt;<span class="built_in">OnMessage</span>().<span class="built_in">AddStatic</span>(&amp;FWebSocketManager::OnMessage);</span><br><span class="line">    WebSocket-&gt;<span class="built_in">OnClosed</span>().<span class="built_in">AddStatic</span>(&amp;FWebSocketManager::OnClosed);</span><br><span class="line"></span><br><span class="line">    WebSocket-&gt;<span class="built_in">Connect</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::Disconnect</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (WebSocket.<span class="built_in">IsValid</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        WebSocket-&gt;<span class="built_in">Close</span>();</span><br><span class="line">        WebSocket.<span class="built_in">Reset</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::SendMessage</span><span class="params">(<span class="type">const</span> FString&amp; Message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (WebSocket.<span class="built_in">IsValid</span>() &amp;&amp; WebSocket-&gt;<span class="built_in">IsConnected</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        WebSocket-&gt;<span class="built_in">Send</span>(Message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::OnConnected</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;WebSocket connected to server&quot;</span>));</span><br><span class="line">    <span class="comment">// å¯å‘é€è®¤è¯ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// SendMessage(TEXT(&quot;&#123;\&quot;cmd\&quot;:\&quot;auth\&quot;,\&quot;token\&quot;:\&quot;abc123\&quot;&#125;&quot;));</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::OnMessage</span><span class="params">(<span class="type">const</span> FString&amp; Message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Received from server: %s&quot;</span>), *Message);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ğŸ”” å¹¿æ’­ç»™æ‰€æœ‰ç›‘å¬è€…</span></span><br><span class="line">    OnMessageReceived.<span class="built_in">Broadcast</span>(Message);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹ï¼šè§£æ JSON</span></span><br><span class="line">    TSharedPtr&lt;FJsonObject&gt; JsonObject;</span><br><span class="line">    TSharedRef&lt;TJsonReader&lt;&gt;&gt; Reader = TJsonReaderFactory&lt;&gt;::<span class="built_in">Create</span>(Message);</span><br><span class="line">    <span class="keyword">if</span> (FJsonSerializer::<span class="built_in">Deserialize</span>(Reader, JsonObject) &amp;&amp; JsonObject.<span class="built_in">IsValid</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        FString Type = JsonObject-&gt;<span class="built_in">GetStringField</span>(<span class="string">&quot;type&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (Type == <span class="built_in">TEXT</span>(<span class="string">&quot;system&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å¤„ç†ç³»ç»Ÿæ¨é€</span></span><br><span class="line">            FString Content = JsonObject-&gt;<span class="built_in">GetStringField</span>(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">            GEngine-&gt;<span class="built_in">AddOnScreenDebugMessage</span>(<span class="number">-1</span>, <span class="number">10.f</span>, FColor::Yellow, Content);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::OnClosed</span><span class="params">(int32 StatusCode, <span class="type">const</span> FString&amp; Reason, <span class="type">bool</span> bWasClean)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;WebSocket closed: %s (Code: %d)&quot;</span>), *Reason, StatusCode);</span><br><span class="line">    WebSocket.<span class="built_in">Reset</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼šè‡ªåŠ¨é‡è¿ï¼ˆé¿å…é¢‘ç¹é‡è¯•ï¼‰</span></span><br><span class="line">    <span class="comment">// FTimerHandle Handle;</span></span><br><span class="line">    <span class="comment">// GWorld-&gt;GetTimerManager().SetTimer(Handle, []&#123; FWebSocketManager::Connect(TEXT(&quot;wss://...&quot;)); &#125;, 5.0f, false);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-åœ¨æ¸¸æˆé€»è¾‘ä¸­è°ƒç”¨"><a href="#3-åœ¨æ¸¸æˆé€»è¾‘ä¸­è°ƒç”¨" class="headerlink" title="3.åœ¨æ¸¸æˆé€»è¾‘ä¸­è°ƒç”¨"></a>3.åœ¨æ¸¸æˆé€»è¾‘ä¸­è°ƒç”¨</h3><p>ä¾‹å¦‚åœ¨<code>BeginPlay()</code>ä¸­è¿æ¥ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ChatSystem.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UChatSystem::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿æ¥socket</span></span><br><span class="line">    FWebSocketManager::<span class="built_in">Connect</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;ws://127.0.0.1:8080/ws&quot;</span>));</span><br><span class="line">    <span class="comment">// ç»‘å®šåˆ° WebSocket æ¥æ”¶æ¶ˆæ¯çš„å‡½æ•°ï¼šHandleWebSocketMessage</span></span><br><span class="line">    FWebSocketManager::OnMessageReceived.<span class="built_in">AddUObject</span>(<span class="keyword">this</span>, &amp;UChatSystem::HandleWebSocketMessage);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UChatSystem::HandleWebSocketMessage</span><span class="params">(<span class="type">const</span> FString&amp; Message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TSharedPtr&lt;FJsonObject&gt; Json;</span><br><span class="line">    TSharedRef&lt;TJsonReader&lt;&gt;&gt; Reader = TJsonReaderFactory&lt;&gt;::<span class="built_in">Create</span>(Message);</span><br><span class="line">    <span class="keyword">if</span> (FJsonSerializer::<span class="built_in">Deserialize</span>(Reader, Json) &amp;&amp; Json.<span class="built_in">IsValid</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Json-&gt;<span class="built_in">GetStringField</span>(<span class="string">&quot;type&quot;</span>) == <span class="built_in">TEXT</span>(<span class="string">&quot;chat&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            FString Content = Json-&gt;<span class="built_in">GetStringField</span>(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">            <span class="built_in">AddChatMessage</span>(Content);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ«å¿˜äº†åœ¨é”€æ¯æ—¶è§£ç»‘ï¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UChatSystem::EndPlay</span><span class="params">(<span class="type">const</span> EEndPlayReason::Type EndPlayReason)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FWebSocketManager::OnMessageReceived.<span class="built_in">RemoveAll</span>(<span class="keyword">this</span>);</span><br><span class="line">    Super::<span class="built_in">EndPlay</span>(EndPlayReason);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Spring-Bootç«¯"><a href="#Spring-Bootç«¯" class="headerlink" title="Spring Bootç«¯"></a>Spring Bootç«¯</h2><h3 id="1-æ·»åŠ ä¾èµ–ï¼ˆpom-xmlï¼‰"><a href="#1-æ·»åŠ ä¾èµ–ï¼ˆpom-xmlï¼‰" class="headerlink" title="1.æ·»åŠ ä¾èµ–ï¼ˆpom.xmlï¼‰"></a>1.æ·»åŠ ä¾èµ–ï¼ˆ<code>pom.xml</code>ï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®WebSocketï¼ˆå¯ç”¨-è·¯ç”±ï¼‰"><a href="#2-é…ç½®WebSocketï¼ˆå¯ç”¨-è·¯ç”±ï¼‰" class="headerlink" title="2.é…ç½®WebSocketï¼ˆå¯ç”¨+è·¯ç”±ï¼‰"></a>2.é…ç½®WebSocketï¼ˆå¯ç”¨+è·¯ç”±ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebSocketConfig.java</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSocket</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title class_">WebSocketConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†ŒWebSocketå¤„ç†å™¨</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºäº†ä¸€ä¸ªGameWebSocketHandlerå¯¹è±¡ï¼Œç”¨å®ƒæ¥å¤„ç†WebSocketè¿æ¥å’Œæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * å°†å¤„ç†å™¨æ˜ å°„åˆ° /ws è·¯å¾„ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è¿™ä¸ªç«¯å£å»ºç«‹websocketè¿æ¥ï¼Œå¹¶å…è®¸è·¨åŸŸè®¿é—® ï¼ˆå¼€å‘é˜¶æ®µï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// å…è®¸è·¨åŸŸï¼ˆå¼€å‘é˜¶æ®µï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒåº”é™åˆ¶ origin</span></span><br><span class="line">        registry.addHandler(<span class="keyword">new</span> <span class="title class_">GameWebSocketHandler</span>(), <span class="string">&quot;/ws&quot;</span>)</span><br><span class="line">                .setAllowedOrigins(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å®ç°æ¶ˆæ¯å¤„ç†å™¨"><a href="#3-å®ç°æ¶ˆæ¯å¤„ç†å™¨" class="headerlink" title="3.å®ç°æ¶ˆæ¯å¤„ç†å™¨"></a>3.å®ç°æ¶ˆæ¯å¤„ç†å™¨</h3><blockquote><p>åˆ›å»ºå¯¹è±¡+JSONåºåˆ—åŒ–åº“ï¼Œæ¥ä¼ è¾“JSONæ•°æ®</p></blockquote><p>ï¼ˆ1ï¼‰å®šä¹‰æ¶ˆæ¯DTOç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendSocketMessage</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åœ¨æ¶ˆæ¯å¤„ç†å™¨ä¸­ä½¿ç”¨å®šä¹‰çš„DTOç±»å‘é€JSONæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GameWebSocketHandler.java</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GameWebSocketHandler</span> <span class="keyword">extends</span> <span class="title class_">TextWebSocketHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜å‚¨æ‰€æœ‰è¿æ¥ï¼ˆå®é™…é¡¹ç›®å»ºè®®æŒ‰ç”¨æˆ·IDåˆ†ç»„ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;WebSocketSession&gt; sessions = ConcurrentHashMap.newKeySet();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        sessions.add(session);</span><br><span class="line">        System.out.println(<span class="string">&quot;Client connected: &quot;</span> + session.getId());</span><br><span class="line">        session.sendMessage(<span class="keyword">new</span> <span class="title class_">TextMessage</span>(<span class="string">&quot;&#123;\&quot;type\&quot;:\&quot;welcome\&quot;,\&quot;msg\&quot;:\&quot;Connected to server\&quot;&#125;&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">handleTextMessage</span><span class="params">(WebSocketSession session, TextMessage message)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">payload</span> <span class="operator">=</span> message.getPayload();</span><br><span class="line">        System.out.println(<span class="string">&quot;Received from client: &quot;</span> + payload);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å›æ˜¾æ¶ˆæ¯ï¼ˆæˆ–å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼‰</span></span><br><span class="line">        session.sendMessage(<span class="keyword">new</span> <span class="title class_">TextMessage</span>(<span class="string">&quot;&#123;\&quot;echo\&quot;:&quot;</span> + payload + <span class="string">&quot;&#125;&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterConnectionClosed</span><span class="params">(WebSocketSession session, CloseStatus status)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        sessions.remove(session);</span><br><span class="line">        System.out.println(<span class="string">&quot;Client disconnected: &quot;</span> + session.getId());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æä¾›å…¨å±€å¹¿æ’­æ–¹æ³•ï¼ˆç”¨äºç³»ç»Ÿæ¨é€ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">broadcast</span><span class="params">(Object message)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> objectMapper.writeValueAsString(message);</span><br><span class="line">            broadcastJSON(json);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Broadcast failed:&quot;</span>+e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">broadcastJSON</span><span class="params">(String json)</span> &#123;</span><br><span class="line">        sessions.forEach(session -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (session.isOpen()) &#123;</span><br><span class="line">                    session.sendMessage(<span class="keyword">new</span> <span class="title class_">TextMessage</span>(json));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="comment">// handle</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-æ¶ˆæ¯æ¨é€ç¤ºä¾‹"><a href="#4-æ¶ˆæ¯æ¨é€ç¤ºä¾‹" class="headerlink" title="4.æ¶ˆæ¯æ¨é€ç¤ºä¾‹"></a>4.æ¶ˆæ¯æ¨é€ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/start&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨websocket å‘UEç«¯å‘é€æ¶ˆæ¯</span></span><br><span class="line">    gameWebSocketHandler.broadcast(<span class="keyword">new</span> <span class="title class_">SendSocketMessage</span>(<span class="string">&quot;moveMessage&quot;</span>,<span class="string">&quot;å¼€å§‹ç§»åŠ¨&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(<span class="string">&quot;BoxMoveStart&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸»ç±»æ·»åŠ <code>@EnableScheduling</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;org.wms.pre.mapper&quot;)</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BackendApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(BackendApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ"><a href="#æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ" class="headerlink" title="æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ"></a>æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ</h2><h3 id="1-UEç«¯æŸ¥çœ‹ç›‘å¬çš„OnConnected-å›è°ƒå‡½æ•°"><a href="#1-UEç«¯æŸ¥çœ‹ç›‘å¬çš„OnConnected-å›è°ƒå‡½æ•°" class="headerlink" title="1.UEç«¯æŸ¥çœ‹ç›‘å¬çš„OnConnected()å›è°ƒå‡½æ•°"></a>1.UEç«¯æŸ¥çœ‹ç›‘å¬çš„<code>OnConnected()</code>å›è°ƒå‡½æ•°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">FWebSocketManager::OnConnected</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;WebSocket connected to server&quot;</span>));</span><br><span class="line">    <span class="comment">// å¯å‘é€è®¤è¯ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// SendMessage(TEXT(&quot;&#123;\&quot;cmd\&quot;:\&quot;auth\&quot;,\&quot;token\&quot;:\&quot;abc123\&quot;&#125;&quot;));</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æŸ¥çœ‹æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å°è¾“å‡ºè¯¥å­—ç¬¦ä¸²ï¼Œåªè¦ <code>OnConnected()</code> è¢«è§¦å‘ï¼Œå°±è¯´æ˜ TCP æ¡æ‰‹ + WebSocket åè®®å‡çº§æˆåŠŸï¼Œé€šä¿¡é€šé“å·²å»ºç«‹ã€‚</p></blockquote><h3 id="2-Spring-BootæœåŠ¡ç«¯æŸ¥çœ‹afterConnectionEstablishedæ˜¯å¦è¢«è§¦å‘"><a href="#2-Spring-BootæœåŠ¡ç«¯æŸ¥çœ‹afterConnectionEstablishedæ˜¯å¦è¢«è§¦å‘" class="headerlink" title="2.Spring BootæœåŠ¡ç«¯æŸ¥çœ‹afterConnectionEstablishedæ˜¯å¦è¢«è§¦å‘"></a>2.Spring BootæœåŠ¡ç«¯æŸ¥çœ‹<code>afterConnectionEstablished</code>æ˜¯å¦è¢«è§¦å‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    sessions.add(session);</span><br><span class="line">    System.out.println(<span class="string">&quot;Client connected: &quot;</span> + session.getId());</span><br><span class="line">    session.sendMessage(<span class="keyword">new</span> <span class="title class_">TextMessage</span>(<span class="string">&quot;&#123;\&quot;type\&quot;:\&quot;welcome\&quot;,\&quot;msg\&quot;:\&quot;Connected to server\&quot;&#125;&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åªè¦è¿™ä¸ªæ–¹æ³•æ‰§è¡Œï¼Œè¯´æ˜WebSocketæ¡æ‰‹å®Œæˆï¼Œè¿æ¥å·²ç»å»ºç«‹æˆåŠŸ</p><p>åŒæ—¶åœ¨UEç«¯æŸ¥çœ‹æ˜¯å¦æ”¶åˆ°äº†ä¼ æ¥çš„ç¡®è®¤æ¶ˆæ¯ï¼ŒUE å®¢æˆ·ç«¯æ”¶åˆ°è¯¥æ¶ˆæ¯åï¼Œå¯è§†ä¸º åŒå‘é€šä¿¡éªŒè¯æˆåŠŸ</p></blockquote><h1 id="ä½¿ç”¨REST-APIé€šä¿¡"><a href="#ä½¿ç”¨REST-APIé€šä¿¡" class="headerlink" title="ä½¿ç”¨REST APIé€šä¿¡"></a>ä½¿ç”¨REST APIé€šä¿¡</h1><h2 id="UEç«¯-1"><a href="#UEç«¯-1" class="headerlink" title="UEç«¯"></a>UEç«¯</h2><blockquote><p>ç”±äºè¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œä¸”ç”¨çš„ä¸å¤šï¼Œä»‹ç»çš„å¹¶ä¸è¯¦ç»†ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯UEç«¯å‘é€è¯·æ±‚ï¼ŒSpring Bootæ¥æ”¶è¯·æ±‚å¹¶è¿”å›ç›¸åº”çš„æ•°æ®ã€‚</p><p>åŸç†ä¸ Vueå’ŒSpring Booté€šä¿¡æœºåˆ¶ç›¸åŒ</p></blockquote><h3 id="1-å¯åŠ¨æ¨¡å—xx-Build-cs"><a href="#1-å¯åŠ¨æ¨¡å—xx-Build-cs" class="headerlink" title="1.å¯åŠ¨æ¨¡å—xx.Build.cs"></a>1.å¯åŠ¨æ¨¡å—<code>xx.Build.cs</code></h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PublicDependencyModuleNames.AddRange(<span class="keyword">new</span> <span class="built_in">string</span>[] &#123;</span><br><span class="line">    <span class="string">&quot;Http&quot;</span>,<span class="string">&quot;Json&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºHttpè¯·æ±‚å‡½æ•°å’Œå›è°ƒå‡½æ•°"><a href="#2-åˆ›å»ºHttpè¯·æ±‚å‡½æ•°å’Œå›è°ƒå‡½æ•°" class="headerlink" title="2.åˆ›å»ºHttpè¯·æ±‚å‡½æ•°å’Œå›è°ƒå‡½æ•°"></a>2.åˆ›å»ºHttpè¯·æ±‚å‡½æ•°å’Œå›è°ƒå‡½æ•°</h3><blockquote><p>SendGetHelloRequestä¸ºè¯·æ±‚å‡½æ•°ï¼ŒOnGetHelloResponseä¸ºå›è°ƒå‡½æ•°ã€‚</p><p>è¯·æ±‚æ—¶åªéœ€è°ƒç”¨SendGetHelloRequestå³å¯ï¼Œå¯ä»¥ç”¨tickè°ƒç”¨æˆ–æ¸¸æˆåˆšå¼€å§‹è¿è¡Œæ—¶å€™å¯åŠ¨å‡å¯ä»¥ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AHttpCommunicationActor::SendGetHelloRequest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!bisStartMove)</span><br><span class="line">&#123;</span><br><span class="line">TSharedRef&lt;IHttpRequest&gt; Request = FHttpModule::<span class="built_in">Get</span>().<span class="built_in">CreateRequest</span>();</span><br><span class="line">Request-&gt;<span class="built_in">SetURL</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;http://localhost:8080/api/setBoxMove&quot;</span>));</span><br><span class="line">Request-&gt;<span class="built_in">SetVerb</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;POST&quot;</span>));</span><br><span class="line">Request-&gt;<span class="built_in">SetHeader</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;User-Agent&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;UE5-Client&quot;</span>));</span><br><span class="line">Request-&gt;<span class="built_in">OnProcessRequestComplete</span>().<span class="built_in">BindUObject</span>(<span class="keyword">this</span>, &amp;AHttpCommunicationActor::OnGetHelloResponse);</span><br><span class="line">Request-&gt;<span class="built_in">ProcessRequest</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AHttpCommunicationActor::OnGetHelloResponse</span><span class="params">(FHttpRequestPtr Request, FHttpResponsePtr Response,</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="type">bool</span> bWasSuccessful)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (bWasSuccessful &amp;&amp; Response.<span class="built_in">IsValid</span>() &amp;&amp; EHttpResponseCodes::<span class="built_in">IsOk</span>(Response-&gt;<span class="built_in">GetResponseCode</span>()))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åœæ­¢æ¯å¸§å¯¹åç«¯æ¥å£æ•°æ®çš„è®¿é—®</span></span><br><span class="line">bisStartMove = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;[GET] Request successful! Response code: %d&quot;</span>), Response-&gt;<span class="built_in">GetResponseCode</span>());</span><br><span class="line"><span class="comment">// æŸ¥æ‰¾åœºæ™¯ä¸­çš„ABoxMove Actorå¹¶è°ƒç”¨MoveBySpline,å®ç°äººç‰©ç§»åŠ¨</span></span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;ABoxMove&gt; <span class="built_in">It</span>(<span class="built_in">GetWorld</span>()); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">ABoxMove* BoxMoveActor = *It;</span><br><span class="line"><span class="keyword">if</span> (BoxMoveActor)</span><br><span class="line">&#123;</span><br><span class="line">BoxMoveActor-&gt;<span class="built_in">MoveBySpline</span>();</span><br><span class="line"><span class="keyword">break</span>; <span class="comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°±åœæ­¢</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// UE_LOG(LogTemp, Error, TEXT(&quot;[GET] Request failed! Response code: %d&quot;),</span></span><br><span class="line"><span class="comment">//    Response.IsValid() ? Response-&gt;GetResponseCode() : -1);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Spring-Bootç«¯-1"><a href="#Spring-Bootç«¯-1" class="headerlink" title="Spring Bootç«¯"></a>Spring Bootç«¯</h2><h3 id="åˆ›å»ºControllerè¯·æ±‚å¤„ç†å³å¯"><a href="#åˆ›å»ºControllerè¯·æ±‚å¤„ç†å³å¯" class="headerlink" title="åˆ›å»ºControllerè¯·æ±‚å¤„ç†å³å¯"></a>åˆ›å»ºControllerè¯·æ±‚å¤„ç†å³å¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ueController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> GameWebSocketHandler gameWebSocketHandler;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  <span class="type">boolean</span> <span class="variable">isStart</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">boolean</span> <span class="variable">isStop</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CrossOrigin</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/setBoxMove&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">setBoxMove</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( isStart &amp;&amp; !isStop)&#123;</span><br><span class="line">            <span class="comment">// 5såæ¢å¤isStartçš„å€¼</span></span><br><span class="line">            <span class="comment">// åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåœ¨5ç§’åå°†isStartè®¾ä¸ºfalse,ç”¨æ¥é‡å¤æµ‹è¯•ç§»åŠ¨æ•ˆæœ</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">                    isStart = <span class="literal">false</span>;</span><br><span class="line">                    isStop = <span class="literal">false</span>; <span class="comment">// åŒæ—¶é‡ç½®isStopçŠ¶æ€</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">            isStop = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.ok(<span class="string">&quot;BoxMoveStart&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦åˆ™è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.badRequest().body(<span class="string">&quot;BoxMoveStart need isStart true&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/start&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        isStart = true;</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨websocket å‘UEç«¯å‘é€æ¶ˆæ¯</span></span><br><span class="line">        gameWebSocketHandler.broadcast(<span class="keyword">new</span> <span class="title class_">SendSocketMessage</span>(<span class="string">&quot;moveMessage&quot;</span>,<span class="string">&quot;å¼€å§‹ç§»åŠ¨&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="string">&quot;BoxMoveStart&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3å¤„ç†è·¨åŸŸè¯·æ±‚</title>
      <link href="/2025/11/14/vue3%E5%A4%84%E7%90%86%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/"/>
      <url>/2025/11/14/vue3%E5%A4%84%E7%90%86%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://cloud.tencent.com/developer/article/2584785https://dev.epicgames.com/documentation/zh-cn/unreal-engine/delegates-and-lambda-functions-in-unreal-engine">https://cloud.tencent.com/developer/article/2584785https://dev.epicgames.com/documentation/zh-cn/unreal-engine/delegates-and-lambda-functions-in-unreal-engine</a>)</p></blockquote><p>æˆ‘ä»¬å…ˆå›ç­”ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaTexè®ºæ–‡å†™ä½œçš„é…ç½®</title>
      <link href="/2025/10/09/LaTex%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>/2025/10/09/LaTex%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>ç¬”è€…ä½¿ç”¨çš„æ˜¯texlive+texstudioçš„ç»„åˆã€‚</p><h1 id="texliveçš„ä¸‹è½½"><a href="#texliveçš„ä¸‹è½½" class="headerlink" title="texliveçš„ä¸‹è½½"></a>texliveçš„ä¸‹è½½</h1><p>è¿›å…¥æ¸…åå¤§å­¦é•œåƒç½‘ç«™è¿›è¡Œä¸‹è½½ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/Images/">https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/Images/</a></p><p>ä¸‹è½½texlive.iso</p><p><img src="/D:/env\typora\localImg\image-20251009161934741.png" alt="image-20251009161934741"></p><p>ä¸‹è½½å®Œæˆåï¼Œå³é”®è¿›è¡ŒæŒ‚è½½å³å¯å®‰è£…åœ¨ç”µè„‘ä¸Š</p><h1 id="texstudioçš„ä¸‹è½½"><a href="#texstudioçš„ä¸‹è½½" class="headerlink" title="texstudioçš„ä¸‹è½½"></a>texstudioçš„ä¸‹è½½</h1><p>åŒæ ·æ˜¯æ¸…åå¤§å­¦é•œåƒç½‘ç«™ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/github-release/texstudio-org/texstudio/4.8.9/">https://mirrors.tuna.tsinghua.edu.cn/github-release/texstudio-org/texstudio/4.8.9/</a></p><p>æˆ‘ä»¬é€‰æ‹©ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/github-release/texstudio-org/texstudio/4.8.9/texstudio-4.8.9-win-portable-qt6.zip">texstudio-4.8.9-win-portable-qt6.zip</a></p><p><img src="/D:/env\typora\localImg\image-20251009162053668.png" alt="image-20251009162053668"></p><h1 id="texstudioçš„é…ç½®"><a href="#texstudioçš„é…ç½®" class="headerlink" title="texstudioçš„é…ç½®"></a>texstudioçš„é…ç½®</h1><p>æ‰“å¼€texstudioï¼Œé€‰é¡¹-è®¾ç½®texstudio-å‘½ä»¤</p><p>ä¿®æ”¹ BibTexï¼ŒBibTex 8ä½ï¼ŒBiberçš„åœ°å€ä¸ºtexliveä¸­å¯¹åº”çš„exeæ–‡ä»¶</p><p><img src="/D:/env\typora\localImg\image-20251009162437267.png" alt="image-20251009162437267"></p><p>é€‰é¡¹-è®¾ç½®texstudio-æ„å»º</p><p>ä¿®æ”¹é»˜è®¤ç¼–è¯‘å™¨ä¸ºXeLaTexï¼Œé»˜è®¤æ–‡çŒ®å·¥å…·ä¸ºBibTex</p><p><img src="/D:/env\typora\localImg\image-20251009162532989.png" alt="image-20251009162532989"></p>]]></content>
      
      
      <categories>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaåŸºç¡€è¯­æ³•</title>
      <link href="/2025/09/10/Java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/2025/09/10/Java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç¬”è€…ä¹‹å‰å­¦ä¹ è¿‡Springç³»åˆ—çš„ä½¿ç”¨ï¼Œä½†æ˜¯å¯¹Javaçš„åˆå§‹è¯­æ³•ä¸€ç›´ä¸å¤ªæ˜ç™½ã€‚åœ¨leetcodeåˆ·é¢˜è¿‡ç¨‹ï¼Œå‘ç°å¾ˆå¤šJavaåŸºç¡€çš„æ–¹æ³•éƒ½ä¸ä¼šï¼Œå› æ­¤é€šè¿‡å†™è¿™ä¸ªæ–‡æ¡£æ¥è¿›è¡Œåˆå§‹è¯­æ³•çš„å­¦ä¹ </p></blockquote><h1 id="Javaä¸­è¯­æ³•çš„é—®é¢˜"><a href="#Javaä¸­è¯­æ³•çš„é—®é¢˜" class="headerlink" title="Javaä¸­è¯­æ³•çš„é—®é¢˜"></a>Javaä¸­è¯­æ³•çš„é—®é¢˜</h1><h2 id="Javaå¦‚ä½•å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ ï¼Ÿ"><a href="#Javaå¦‚ä½•å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ ï¼Ÿ" class="headerlink" title="Javaå¦‚ä½•å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ ï¼Ÿ"></a>Javaå¦‚ä½•å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ ï¼Ÿ</h2><blockquote><p>Javaä¸­çš„æ•°ç»„ä¸­é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½æ”¹å˜å¤§å°</p></blockquote><h3 id="æ–¹æ³•1ï¼šåˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶æ‰‹åŠ¨å¤åˆ¶æ’å…¥"><a href="#æ–¹æ³•1ï¼šåˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶æ‰‹åŠ¨å¤åˆ¶æ’å…¥" class="headerlink" title="æ–¹æ³•1ï¼šåˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶æ‰‹åŠ¨å¤åˆ¶æ’å…¥"></a>æ–¹æ³•1ï¼šåˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶æ‰‹åŠ¨å¤åˆ¶æ’å…¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] oldArray = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">newValue</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">insertIndex</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°æ•°ç»„ï¼Œé•¿åº¦+1</span></span><br><span class="line"><span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[oldArray.length + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤åˆ¶å‰é¢çš„å…ƒç´ </span></span><br><span class="line">System.arraycopy(oldArray, <span class="number">0</span>, newArray, <span class="number">0</span>, insertIndex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥æ–°å€¼</span></span><br><span class="line">newArray[insertIndex] = newValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤åˆ¶åé¢çš„å…ƒç´ </span></span><br><span class="line">System.arraycopy(oldArray, insertIndex, newArray, insertIndex + <span class="number">1</span>, oldArray.length - insertIndex);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„ç»“æœï¼š<code>&#123;1ï¼Œ2ï¼Œ3ï¼Œ4&#125;</code></p><h3 id="æ–¹æ³•2ï¼šä½¿ç”¨ArrayListï¼ˆæ¨èç”¨äºé¢‘ç¹å¢åˆ ï¼‰"><a href="#æ–¹æ³•2ï¼šä½¿ç”¨ArrayListï¼ˆæ¨èç”¨äºé¢‘ç¹å¢åˆ ï¼‰" class="headerlink" title="æ–¹æ³•2ï¼šä½¿ç”¨ArrayListï¼ˆæ¨èç”¨äºé¢‘ç¹å¢åˆ ï¼‰"></a>æ–¹æ³•2ï¼šä½¿ç”¨<code>ArrayList</code>ï¼ˆæ¨èç”¨äºé¢‘ç¹å¢åˆ ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line">list.add(<span class="number">1</span>, <span class="number">10</span>); <span class="comment">// åœ¨ç´¢å¼•1å¤„æ’å…¥10 â†’ [1, 10, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœéè¦è½¬å›æ•°ç»„</span></span><br><span class="line">Integer[] arr = list.toArray(<span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">// æˆ–è€… int[] ï¼ˆéœ€è¦é¢å¤–è½¬æ¢ï¼‰</span></span><br></pre></td></tr></table></figure><p><code>ArrayList</code>æ”¯æŒåŠ¨æ€æ‰©å®¹ï¼Œæ˜¯æ¶åŒ–éœ€è¦é¢‘ç¹æ’å…¥&#x2F;åˆ é™¤çš„åœºæ™¯ã€‚</p><p>åœ¨ Java ä¸­ï¼Œ<code>Map</code> æ¥å£æä¾›äº†ä¸°å¯Œçš„å¸¸ç”¨æ–¹æ³•ï¼Œç”¨äºæ“ä½œé”®å€¼å¯¹ï¼ˆkey-value pairsï¼‰ã€‚ä»¥ä¸‹æ˜¯ <code>Map</code> æœ€å¸¸ç”¨çš„å‡½æ•°åŠå…¶è¯¦ç»†è¯´æ˜ã€ç”¨æ³•å’Œç¤ºä¾‹ã€‚</p><hr><h2 id="Javaä¸­Listå¦‚ä½•åˆå§‹åŒ–"><a href="#Javaä¸­Listå¦‚ä½•åˆå§‹åŒ–" class="headerlink" title="Javaä¸­List&lt;List&lt;String&gt;&gt;å¦‚ä½•åˆå§‹åŒ–"></a>Javaä¸­<code>List&lt;List&lt;String&gt;&gt;</code>å¦‚ä½•åˆå§‹åŒ–</h2><p><code>List&lt;list&lt;String&gt;&gt;</code>æ˜¯ä¸€ä¸ªåŒå±‚åˆ—è¡¨ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„</p><p>Javaä¸­å¯¹äºè¿™ç§æ•°ç»„çš„åˆ›å»ºï¼Œä¸€èˆ¬é‡‡ç”¨å…ˆåˆ›å»ºå¤–å±‚çš„ç©ºåˆ—è¡¨ï¼Œåç»­ä¾æ®éœ€æ±‚æ·»åŠ å†…å±‚åˆ—è¡¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;List&lt;String&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ç¬¬ä¸€ç»„</span></span><br><span class="line">result.add(Arrays.asList(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ç¬¬äºŒç»„å¯å˜åˆ—è¡¨</span></span><br><span class="line">List&lt;String&gt; group2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">group2.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">group2.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">result.add(group2);</span><br></pre></td></tr></table></figure><hr><h1 id="Javaä¸­Mapçš„å¸¸ç”¨å®ç°ç±»"><a href="#Javaä¸­Mapçš„å¸¸ç”¨å®ç°ç±»" class="headerlink" title="Javaä¸­Mapçš„å¸¸ç”¨å®ç°ç±»"></a>Javaä¸­Mapçš„å¸¸ç”¨å®ç°ç±»</h1><blockquote><p>è¯¥éƒ¨åˆ†ç”±é€šä¹‰åƒé—®ç”Ÿæˆ</p></blockquote><p>åœ¨ Java ä¸­ï¼Œ<code>Map</code> æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¥å£ï¼Œç”¨äºå­˜å‚¨ <strong>é”®å€¼å¯¹ï¼ˆkey-value pairsï¼‰</strong>ï¼Œå³é€šè¿‡ä¸€ä¸ªâ€œé”®â€æ¥æŸ¥æ‰¾å¯¹åº”çš„â€œå€¼â€ã€‚å®ƒç±»ä¼¼äºæ•°å­¦ä¸­çš„æ˜ å°„å…³ç³»ã€‚</p><hr><h2 id="ğŸ“š-ä¸€ã€Map-çš„å¸¸ç”¨å®ç°ç±»ï¼ˆæ ¸å¿ƒï¼‰"><a href="#ğŸ“š-ä¸€ã€Map-çš„å¸¸ç”¨å®ç°ç±»ï¼ˆæ ¸å¿ƒï¼‰" class="headerlink" title="ğŸ“š ä¸€ã€Map çš„å¸¸ç”¨å®ç°ç±»ï¼ˆæ ¸å¿ƒï¼‰"></a>ğŸ“š ä¸€ã€<code>Map</code> çš„å¸¸ç”¨å®ç°ç±»ï¼ˆæ ¸å¿ƒï¼‰</h2><p>ä»¥ä¸‹æ˜¯ Java ä¸­æœ€å¸¸ç”¨çš„ <code>Map</code> å®ç°ç±»åŠå…¶ç‰¹ç‚¹ï¼š</p><table><thead><tr><th>å®ç°ç±»</th><th>æ˜¯å¦æœ‰åº</th><th>çº¿ç¨‹å®‰å…¨</th><th>å…è®¸ null é”®&#x2F;å€¼</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>HashMap</code></td><td>âŒ æ— åº</td><td>âŒ ä¸å®‰å…¨</td><td>âœ… å…è®¸ä¸€ä¸ª null é”®ï¼Œå¤šä¸ª null å€¼</td><td>â­â­â­â­ å¹³å‡ O(1)</td><td>é»˜è®¤é¦–é€‰ï¼Œé«˜æ€§èƒ½</td></tr><tr><td><code>LinkedHashMap</code></td><td>âœ… æŒ‰æ’å…¥&#x2F;è®¿é—®é¡ºåº</td><td>âŒ ä¸å®‰å…¨</td><td>âœ… å…è®¸</td><td>â­â­â­ ç¨æ…¢äº HashMap</td><td>éœ€è¦é¡ºåºè¾“å‡º</td></tr><tr><td><code>TreeMap</code></td><td>âœ… æŒ‰é”®è‡ªç„¶æ’åºæˆ–è‡ªå®šä¹‰æ’åº</td><td>âŒ ä¸å®‰å…¨</td><td>âŒ ä¸å…è®¸ null é”®ï¼ˆä¼šæŠ›å¼‚å¸¸ï¼‰ï¼Œå€¼å¯ä¸º null</td><td>â­â­ O(log n)</td><td>éœ€è¦æ’åºçš„åœºæ™¯</td></tr><tr><td><code>Hashtable</code></td><td>âŒ æ— åº</td><td>âœ… å®‰å…¨ï¼ˆæ–¹æ³•åŠ é”ï¼‰</td><td>âŒ ä¸å…è®¸ null é”®æˆ–å€¼</td><td>â­â­ è¾ƒæ…¢ï¼ˆåŒæ­¥å¼€é”€ï¼‰</td><td>è€æ—§ï¼ŒåŸºæœ¬è¢«å–ä»£</td></tr><tr><td><code>ConcurrentHashMap</code></td><td>âŒ æ— åºï¼ˆJava 8+ï¼‰</td><td>âœ… é«˜å¹¶å‘å®‰å…¨</td><td>âŒ ä¸å…è®¸ null é”®æˆ–å€¼</td><td>â­â­â­â­ é«˜å¹¶å‘ä¸‹æ€§èƒ½å¥½</td><td>å¤šçº¿ç¨‹ç¯å¢ƒ</td></tr></tbody></table><hr><h2 id="ğŸ”-äºŒã€è¯¦ç»†è¯´æ˜æ¯ä¸ªå®ç°ç±»"><a href="#ğŸ”-äºŒã€è¯¦ç»†è¯´æ˜æ¯ä¸ªå®ç°ç±»" class="headerlink" title="ğŸ” äºŒã€è¯¦ç»†è¯´æ˜æ¯ä¸ªå®ç°ç±»"></a>ğŸ” äºŒã€è¯¦ç»†è¯´æ˜æ¯ä¸ªå®ç°ç±»</h2><h3 id="1-HashMap-âœ…-æœ€å¸¸ç”¨"><a href="#1-HashMap-âœ…-æœ€å¸¸ç”¨" class="headerlink" title="1. HashMap&lt;K, V&gt; âœ… æœ€å¸¸ç”¨"></a>1. <code>HashMap&lt;K, V&gt;</code> âœ… <strong>æœ€å¸¸ç”¨</strong></h3><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>åŸºäºå“ˆå¸Œè¡¨å®ç°ï¼ŒæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º **O(1)**ã€‚</li><li>ä¸ä¿è¯é¡ºåºï¼ˆéå†é¡ºåºå¯èƒ½å˜åŒ–ï¼‰ã€‚</li><li>å…è®¸ <strong>ä¸€ä¸ª <strong><code>null</code></strong> é”®</strong> å’Œ <strong>ä»»æ„å¤šä¸ª <strong><code>null</code></strong> å€¼</strong>ã€‚</li><li><strong>éçº¿ç¨‹å®‰å…¨</strong>ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å‡ºé”™ã€‚</li></ul></li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<ul><li>ç»å¤§å¤šæ•°å•çº¿ç¨‹åœºæ™¯ä¸‹çš„é”®å€¼æ˜ å°„ã€‚</li><li>å¦‚ç¼“å­˜ã€è®¡æ•°å™¨ã€Two Sum ç®—æ³•ç­‰ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>);</span><br><span class="line">map.put(<span class="string">&quot;Bob&quot;</span>, <span class="number">30</span>);</span><br><span class="line">System.out.println(map.get(<span class="string">&quot;Alice&quot;</span>)); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-LinkedHashMap"><a href="#2-LinkedHashMap" class="headerlink" title="2. LinkedHashMap&lt;K, V&gt;"></a>2. <code>LinkedHashMap&lt;K, V&gt;</code></h3><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>ç»§æ‰¿è‡ª <code>HashMap</code>ï¼Œä½†å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚</li><li>ä¿æŒ <strong>æ’å…¥é¡ºåº</strong> æˆ– <strong>è®¿é—®é¡ºåº</strong>ï¼ˆå¯é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®ï¼‰ã€‚</li><li>å…è®¸ <code>null</code> é”®å’Œ <code>null</code> å€¼ã€‚</li><li>æ€§èƒ½ç•¥ä½äº <code>HashMap</code>ï¼ˆå› ç»´æŠ¤é“¾è¡¨ï¼‰ã€‚</li><li>éçº¿ç¨‹å®‰å…¨ã€‚</li></ul></li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<ul><li>éœ€è¦æŒ‰æ’å…¥é¡ºåºéå†çš„åœºæ™¯ã€‚</li><li>å®ç° LRU ç¼“å­˜ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;First&quot;</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">&quot;Second&quot;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// éå†æ—¶é¡ºåº = æ’å…¥é¡ºåº</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ å®ç° LRU ç¤ºä¾‹ï¼ˆç®€åŒ–ï¼‰ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// accessOrder=true è¡¨ç¤ºæŒ‰è®¿é—®é¡ºåºæ’åº</span></span><br><span class="line">LinkedHashMap&lt;Integer, Integer&gt; cache = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;(<span class="number">16</span>, <span class="number">0.75f</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="3-TreeMap"><a href="#3-TreeMap" class="headerlink" title="3. TreeMap&lt;K, V&gt;"></a>3. <code>TreeMap&lt;K, V&gt;</code></h3><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>åŸºäºçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼‰å®ç°ã€‚</li><li>é”®ï¼ˆkeyï¼‰ä¼šè‡ªåŠ¨æŒ‰ <strong>è‡ªç„¶é¡ºåº</strong> æˆ– <strong>è‡ªå®šä¹‰ Comparator</strong> æ’åºã€‚</li><li>ä¸å…è®¸ <code>null</code> é”®ï¼ˆä¼šæŠ› <code>NullPointerException</code>ï¼‰ï¼Œå€¼å¯ä»¥ä¸º <code>null</code>ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ä¸º **O(log n)**ã€‚</li><li>éçº¿ç¨‹å®‰å…¨ã€‚</li></ul></li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<ul><li>éœ€è¦æŒ‰é”®æ’åºçš„åœºæ™¯ã€‚</li><li>èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾ 10~50 ä¹‹é—´çš„é”®ï¼‰ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, String&gt; sortedMap = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">sortedMap.put(<span class="number">3</span>, <span class="string">&quot;Three&quot;</span>);</span><br><span class="line">sortedMap.put(<span class="number">1</span>, <span class="string">&quot;One&quot;</span>);</span><br><span class="line">sortedMap.put(<span class="number">2</span>, <span class="string">&quot;Two&quot;</span>);</span><br><span class="line"><span class="comment">// éå†è¾“å‡ºï¼š1, 2, 3ï¼ˆæœ‰åºï¼‰</span></span><br></pre></td></tr></table></figure><hr><h3 id="4-Hashtable-âŒ-å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰"><a href="#4-Hashtable-âŒ-å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="4. Hashtable âŒ å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰"></a>4. <code>Hashtable</code> âŒ <strong>å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰</strong></h3><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>æ—©æœŸçš„çº¿ç¨‹å®‰å…¨å“ˆå¸Œè¡¨ã€‚</li><li>æ–¹æ³•éƒ½åŠ äº† <code>synchronized</code> å…³é”®å­—ï¼Œæ€§èƒ½è¾ƒå·®ã€‚</li><li><strong>ä¸å…è®¸ <strong><code>null</code></strong> é”®æˆ– <strong><code>null</code></strong> å€¼</strong>ï¼ˆå¦åˆ™æŠ› <code>NullPointerException</code>ï¼‰ã€‚</li><li>æ— åºã€‚</li></ul></li><li><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š<code>ConcurrentHashMap</code> æˆ– <code>Collections.synchronizedMap()</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;(); <span class="comment">// ä¸æ¨è</span></span><br></pre></td></tr></table></figure><hr><h3 id="5-ConcurrentHashMap-âœ…-é«˜å¹¶å‘é¦–é€‰"><a href="#5-ConcurrentHashMap-âœ…-é«˜å¹¶å‘é¦–é€‰" class="headerlink" title="5. ConcurrentHashMap&lt;K, V&gt; âœ… é«˜å¹¶å‘é¦–é€‰"></a>5. <code>ConcurrentHashMap&lt;K, V&gt;</code> âœ… <strong>é«˜å¹¶å‘é¦–é€‰</strong></h3><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>ä¸“ä¸ºå¹¶å‘ç¯å¢ƒè®¾è®¡ã€‚</li><li>ä½¿ç”¨ <strong>åˆ†æ®µé”ï¼ˆJava 7ï¼‰</strong> æˆ– <strong>CAS + synchronizedï¼ˆJava 8+ï¼‰</strong> å®ç°é«˜æ•ˆå¹¶å‘ã€‚</li><li>ä¸å…è®¸ <code>null</code> é”®æˆ– <code>null</code> å€¼ï¼ˆé¿å…æ­§ä¹‰ï¼‰ã€‚</li><li>æ€§èƒ½åœ¨é«˜å¹¶å‘ä¸‹è¿œä¼˜äº <code>Hashtable</code> å’Œ <code>synchronizedMap</code>ã€‚</li></ul></li><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<ul><li>å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å…±äº«çš„ç¼“å­˜ã€è®¡æ•°å™¨ç­‰ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Long&gt; counter = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">counter.put(<span class="string">&quot;requests&quot;</span>, <span class="number">100L</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ› -ä¸‰ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„-Map-å®ç°ï¼Ÿ"><a href="#ğŸ› -ä¸‰ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„-Map-å®ç°ï¼Ÿ" class="headerlink" title="ğŸ›  ä¸‰ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„ Map å®ç°ï¼Ÿ"></a>ğŸ›  ä¸‰ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„ Map å®ç°ï¼Ÿ</h2><table><thead><tr><th>éœ€æ±‚</th><th>æ¨èå®ç°ç±»</th></tr></thead><tbody><tr><td>å•çº¿ç¨‹ï¼Œé«˜æ€§èƒ½ï¼Œæ— åº</td><td><code>HashMap</code></td></tr><tr><td>éœ€è¦ä¿æŒæ’å…¥é¡ºåº</td><td><code>LinkedHashMap</code></td></tr><tr><td>éœ€è¦æŒ‰é”®æ’åº</td><td><code>TreeMap</code></td></tr><tr><td>å¤šçº¿ç¨‹ï¼Œé«˜æ€§èƒ½å¹¶å‘</td><td><code>ConcurrentHashMap</code></td></tr><tr><td>è€é¡¹ç›®å…¼å®¹</td><td><code>Hashtable</code>ï¼ˆä¸æ¨èï¼‰</td></tr></tbody></table><hr><h2 id="ğŸ§©-å››ã€å…¶ä»–ç›¸å…³å·¥å…·"><a href="#ğŸ§©-å››ã€å…¶ä»–ç›¸å…³å·¥å…·" class="headerlink" title="ğŸ§© å››ã€å…¶ä»–ç›¸å…³å·¥å…·"></a>ğŸ§© å››ã€å…¶ä»–ç›¸å…³å·¥å…·</h2><h3 id="1-Collections-synchronizedMap"><a href="#1-Collections-synchronizedMap" class="headerlink" title="1. Collections.synchronizedMap()"></a>1. <code>Collections.synchronizedMap()</code></h3><p>å°†æ™®é€š Map åŒ…è£…æˆçº¿ç¨‹å®‰å…¨çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; syncMap = Collections.synchronizedMap(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;());</span><br></pre></td></tr></table></figure><h3 id="2-Map-of-Java-9"><a href="#2-Map-of-Java-9" class="headerlink" title="2. Map.of() (Java 9+)"></a>2. <code>Map.of()</code> (Java 9+)</h3><p>åˆ›å»ºä¸å¯å˜çš„å° Mapï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = Map.of(<span class="string">&quot;A&quot;</span>, <span class="number">1</span>, <span class="string">&quot;B&quot;</span>, <span class="number">2</span>); <span class="comment">// æœ€å¤š 10 å¯¹</span></span><br></pre></td></tr></table></figure><h3 id="3-Map-ofEntries-Java-9"><a href="#3-Map-ofEntries-Java-9" class="headerlink" title="3. Map.ofEntries() (Java 9+)"></a>3. <code>Map.ofEntries()</code> (Java 9+)</h3><p>åˆ›å»ºæ›´çµæ´»çš„ä¸å¯å˜ Mapï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = Map.ofEntries(</span><br><span class="line">    Map.entry(<span class="string">&quot;A&quot;</span>, <span class="number">1</span>),</span><br><span class="line">    Map.entry(<span class="string">&quot;B&quot;</span>, <span class="number">2</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><hr><h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… æ€»ç»“</h2><table><thead><tr><th>å®ç°ç±»</th><th>æ¨èç¨‹åº¦</th><th>å…³é”®è¯</th></tr></thead><tbody><tr><td><code>HashMap</code></td><td>â­â­â­â­â­</td><td>é«˜æ€§èƒ½ã€æ— åºã€é»˜è®¤é€‰æ‹©</td></tr><tr><td><code>LinkedHashMap</code></td><td>â­â­â­â­â˜†</td><td>ä¿æŒé¡ºåºã€LRU</td></tr><tr><td><code>TreeMap</code></td><td>â­â­â­â˜†â˜†</td><td>æ’åºã€èŒƒå›´æŸ¥è¯¢</td></tr><tr><td><code>ConcurrentHashMap</code></td><td>â­â­â­â­â­</td><td>é«˜å¹¶å‘ã€çº¿ç¨‹å®‰å…¨</td></tr><tr><td><code>Hashtable</code></td><td>â­â˜†â˜†â˜†â˜†</td><td>è¿‡æ—¶ã€ä¸æ¨è</td></tr></tbody></table><hr><p>ğŸ“Œ <strong>ä¸€å¥è¯å»ºè®®</strong>ï¼š</p><blockquote><p>æ—¥å¸¸å¼€å‘ç”¨ <code>HashMap</code>ï¼Œéœ€è¦é¡ºåºç”¨ <code>LinkedHashMap</code>ï¼Œè¦æ’åºç”¨ <code>TreeMap</code>ï¼Œå¤šçº¿ç¨‹ç”¨ <code>ConcurrentHashMap</code>ã€‚</p></blockquote><p>å¦‚æœä½ æœ‰å…·ä½“ä½¿ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚ç¼“å­˜ã€æ’åºã€å¹¶å‘ï¼‰ï¼Œæˆ‘å¯ä»¥å¸®ä½ æ¨èæœ€åˆé€‚çš„ <code>Map</code> å®ç°ï¼</p><hr><h1 id="Javaä¸­Mapçš„å¸¸ç”¨å‡½æ•°åŠä½¿ç”¨"><a href="#Javaä¸­Mapçš„å¸¸ç”¨å‡½æ•°åŠä½¿ç”¨" class="headerlink" title="Javaä¸­Mapçš„å¸¸ç”¨å‡½æ•°åŠä½¿ç”¨"></a>Javaä¸­Mapçš„å¸¸ç”¨å‡½æ•°åŠä½¿ç”¨</h1><blockquote><p>è¯¥éƒ¨åˆ†ç”±é€šä¹‰åƒé—®ç”Ÿæˆ</p></blockquote><h2 id="ğŸ“š-ä¸€ã€Map-çš„å¸¸ç”¨å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ä¸€è§ˆ"><a href="#ğŸ“š-ä¸€ã€Map-çš„å¸¸ç”¨å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ä¸€è§ˆ" class="headerlink" title="ğŸ“š ä¸€ã€Map çš„å¸¸ç”¨å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ä¸€è§ˆ"></a>ğŸ“š ä¸€ã€Map çš„å¸¸ç”¨å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ä¸€è§ˆ</h2><table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>è¿”å›ç±»å‹</th><th>æ˜¯å¦ä¿®æ”¹ Map</th></tr></thead><tbody><tr><td><code>put(K, V)</code></td><td>æ·»åŠ æˆ–æ›´æ–°é”®å€¼å¯¹</td><td><code>V</code>ï¼ˆæ—§å€¼ï¼Œè‹¥å­˜åœ¨ï¼‰</td><td>âœ… æ˜¯</td></tr><tr><td><code>get(Object)</code></td><td>æ ¹æ®é”®è·å–å€¼</td><td><code>V</code></td><td>âŒ å¦</td></tr><tr><td><code>containsKey(Object)</code></td><td>æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªé”®</td><td><code>boolean</code></td><td>âŒ å¦</td></tr><tr><td><code>containsValue(Object)</code></td><td>æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼</td><td><code>boolean</code></td><td>âŒ å¦</td></tr><tr><td><code>remove(Object)</code></td><td>åˆ é™¤æŒ‡å®šé”®çš„æ˜ å°„</td><td><code>V</code>ï¼ˆè¢«åˆ é™¤çš„å€¼ï¼‰</td><td>âœ… æ˜¯</td></tr><tr><td><code>size()</code></td><td>è·å–é”®å€¼å¯¹çš„æ•°é‡</td><td><code>int</code></td><td>âŒ å¦</td></tr><tr><td><code>isEmpty()</code></td><td>åˆ¤æ–­æ˜¯å¦ä¸ºç©º</td><td><code>boolean</code></td><td>âŒ å¦</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºæ‰€æœ‰æ˜ å°„</td><td><code>void</code></td><td>âœ… æ˜¯</td></tr><tr><td><code>keySet()</code></td><td>è·å–æ‰€æœ‰é”®çš„é›†åˆ</td><td><code>Set&lt;K&gt;</code></td><td>âŒ å¦ï¼ˆä½†é›†åˆæ˜¯è§†å›¾ï¼‰</td></tr><tr><td><code>values()</code></td><td>è·å–æ‰€æœ‰å€¼çš„é›†åˆ</td><td><code>Collection&lt;V&gt;</code></td><td>âŒ å¦ï¼ˆä½†é›†åˆæ˜¯è§†å›¾ï¼‰</td></tr><tr><td><code>entrySet()</code></td><td>è·å–æ‰€æœ‰é”®å€¼å¯¹çš„é›†åˆ</td><td><code>Set&lt;Map.Entry&lt;K,V&gt;&gt;</code></td><td>âŒ å¦ï¼ˆä½†é›†åˆæ˜¯è§†å›¾ï¼‰</td></tr><tr><td><code>getOrDefault(Object, V)</code></td><td>è·å–å€¼ï¼Œè‹¥é”®ä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼</td><td><code>V</code></td><td>âŒ å¦</td></tr><tr><td><code>putIfAbsent(K, V)</code></td><td>è‹¥é”®ä¸å­˜åœ¨æ‰æ·»åŠ </td><td><code>V</code>ï¼ˆå½“å‰å€¼ï¼‰</td><td>âœ… å¯èƒ½</td></tr><tr><td><code>computeIfAbsent(K, Function)</code></td><td>è‹¥é”®ä¸å­˜åœ¨ï¼Œç”¨å‡½æ•°ç”Ÿæˆå€¼å¹¶æ”¾å…¥</td><td><code>V</code></td><td>âœ… å¯èƒ½</td></tr><tr><td><code>forEach(BiConsumer)</code></td><td>éå†æ‰€æœ‰é”®å€¼å¯¹</td><td><code>void</code></td><td>âŒ å¦</td></tr></tbody></table><hr><h2 id="ğŸ”-äºŒã€è¯¦ç»†è¯´æ˜ä¸ç¤ºä¾‹"><a href="#ğŸ”-äºŒã€è¯¦ç»†è¯´æ˜ä¸ç¤ºä¾‹" class="headerlink" title="ğŸ” äºŒã€è¯¦ç»†è¯´æ˜ä¸ç¤ºä¾‹"></a>ğŸ” äºŒã€è¯¦ç»†è¯´æ˜ä¸ç¤ºä¾‹</h2><p>æˆ‘ä»¬ä»¥ <code>HashMap&lt;String, Integer&gt;</code> ä¸ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>);</span><br><span class="line">map.put(<span class="string">&quot;Bob&quot;</span>, <span class="number">30</span>);</span><br><span class="line">map.put(<span class="string">&quot;Charlie&quot;</span>, <span class="number">35</span>);</span><br></pre></td></tr></table></figure><h3 id="1-put-K-key-V-value"><a href="#1-put-K-key-V-value" class="headerlink" title="1. put(K key, V value)"></a>1. <code>put(K key, V value)</code></h3><p>æ·»åŠ æˆ–æ›´æ–°ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.put(<span class="string">&quot;David&quot;</span>, <span class="number">28</span>); <span class="comment">// æ·»åŠ æ–°é”®å€¼å¯¹</span></span><br><span class="line">map.put(<span class="string">&quot;Alice&quot;</span>, <span class="number">26</span>); <span class="comment">// æ›´æ–°å·²æœ‰é”®çš„å€¼</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿”å›å€¼ï¼šå¦‚æœé”®å·²å­˜åœ¨ï¼Œè¿”å›<strong>æ—§å€¼</strong>ï¼›å¦åˆ™è¿”å› <code>null</code>ã€‚</p></blockquote><hr><h3 id="2-get-Object-key"><a href="#2-get-Object-key" class="headerlink" title="2. get(Object key)"></a>2. <code>get(Object key)</code></h3><p>æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> map.get(<span class="string">&quot;Alice&quot;</span>); <span class="comment">// è¿”å› 26</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">unknown</span> <span class="operator">=</span> map.get(<span class="string">&quot;Eve&quot;</span>); <span class="comment">// è¿”å› nullï¼ˆé”®ä¸å­˜åœ¨ï¼‰</span></span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å› <code>null</code>ã€‚å»ºè®®é…åˆ <code>containsKey</code> ä½¿ç”¨ï¼Œæˆ–ç”¨ <code>getOrDefault</code>ã€‚</p></blockquote><hr><h3 id="3-containsKey-Object-key"><a href="#3-containsKey-Object-key" class="headerlink" title="3. containsKey(Object key)"></a>3. <code>containsKey(Object key)</code></h3><p>æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªé”®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">hasAlice</span> <span class="operator">=</span> map.containsKey(<span class="string">&quot;Alice&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">hasEve</span> <span class="operator">=</span> map.containsKey(<span class="string">&quot;Eve&quot;</span>);     <span class="comment">// false</span></span><br></pre></td></tr></table></figure><hr><h3 id="4-containsValue-Object-value"><a href="#4-containsValue-Object-value" class="headerlink" title="4. containsValue(Object value)"></a>4. <code>containsValue(Object value)</code></h3><p>æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">hasAge30</span> <span class="operator">=</span> map.containsValue(<span class="number">30</span>); <span class="comment">// true (Bob)</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">hasAge50</span> <span class="operator">=</span> map.containsValue(<span class="number">50</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ æ€§èƒ½è¾ƒå·®ï¼ˆO(n)ï¼‰ï¼Œå› ä¸ºè¦éå†æ‰€æœ‰å€¼ã€‚</p></blockquote><hr><h3 id="5-remove-Object-key"><a href="#5-remove-Object-key" class="headerlink" title="5. remove(Object key)"></a>5. <code>remove(Object key)</code></h3><p>åˆ é™¤æŒ‡å®šé”®çš„æ˜ å°„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">removed</span> <span class="operator">=</span> map.remove(<span class="string">&quot;Bob&quot;</span>); <span class="comment">// è¿”å› 30ï¼Œå¹¶åˆ é™¤</span></span><br><span class="line">System.out.println(map.containsKey(<span class="string">&quot;Bob&quot;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><hr><h3 id="6-size"><a href="#6-size" class="headerlink" title="6. size()"></a>6. <code>size()</code></h3><p>è¿”å›é”®å€¼å¯¹çš„æ•°é‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> map.size(); <span class="comment">// 3ï¼ˆAlice, Charlie, Davidï¼‰</span></span><br></pre></td></tr></table></figure><hr><h3 id="7-isEmpty"><a href="#7-isEmpty" class="headerlink" title="7. isEmpty()"></a>7. <code>isEmpty()</code></h3><p>åˆ¤æ–­ Map æ˜¯å¦ä¸ºç©ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">isEmpty</span> <span class="operator">=</span> map.isEmpty(); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><hr><h3 id="8-clear"><a href="#8-clear" class="headerlink" title="8. clear()"></a>8. <code>clear()</code></h3><p>æ¸…ç©ºæ‰€æœ‰é”®å€¼å¯¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.clear();</span><br><span class="line">System.out.println(map.size()); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><hr><h3 id="9-keySet"><a href="#9-keySet" class="headerlink" title="9. keySet()"></a>9. <code>keySet()</code></h3><p>è¿”å›æ‰€æœ‰é”®çš„é›†åˆï¼ˆ<code>Set&lt;K&gt;</code>ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; keys = map.keySet();</span><br><span class="line"><span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">    System.out.println(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šAlice, Bob, Charlie, David</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ”” è¿”å›çš„æ˜¯<strong>è§†å›¾ï¼ˆviewï¼‰</strong>ï¼Œä¿®æ”¹ <code>keys</code> ä¼šå½±å“åŸ <code>map</code>ã€‚</p></blockquote><hr><h3 id="10-values"><a href="#10-values" class="headerlink" title="10. values()"></a>10. <code>values()</code></h3><p>è¿”å›æ‰€æœ‰å€¼çš„é›†åˆï¼ˆ<code>Collection&lt;V&gt;</code>ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;Integer&gt; values = map.values();</span><br><span class="line"><span class="keyword">for</span> (Integer value : values) &#123;</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š26, 30, 35, 28</span></span><br></pre></td></tr></table></figure><hr><h3 id="11-entrySet"><a href="#11-entrySet" class="headerlink" title="11. entrySet()"></a>11. <code>entrySet()</code></h3><p>è¿”å›æ‰€æœ‰é”®å€¼å¯¹çš„é›†åˆï¼ˆ<code>Set&lt;Map.Entry&lt;K,V&gt;&gt;</code>ï¼‰ï¼Œç”¨äºéå†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">    System.out.println(entry.getKey() + <span class="string">&quot; -&gt; &quot;</span> + entry.getValue());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// Alice -&gt; 26</span></span><br><span class="line"><span class="comment">// Bob -&gt; 30</span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><blockquote><p>âœ… è¿™æ˜¯<strong>éå† Map çš„æ¨èæ–¹å¼</strong>ã€‚</p></blockquote><hr><h3 id="12-getOrDefault-Object-key-V-defaultValue"><a href="#12-getOrDefault-Object-key-V-defaultValue" class="headerlink" title="12. getOrDefault(Object key, V defaultValue)"></a>12. <code>getOrDefault(Object key, V defaultValue)</code></h3><p>è·å–å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> map.getOrDefault(<span class="string">&quot;Eve&quot;</span>, <span class="number">18</span>); <span class="comment">// è¿”å› 18</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">aliceAge</span> <span class="operator">=</span> map.getOrDefault(<span class="string">&quot;Alice&quot;</span>, <span class="number">0</span>); <span class="comment">// è¿”å› 26</span></span><br></pre></td></tr></table></figure><blockquote><p>âœ… é¿å… <code>null</code> å€¼å¸¦æ¥çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p></blockquote><hr><h3 id="13-putIfAbsent-K-key-V-value"><a href="#13-putIfAbsent-K-key-V-value" class="headerlink" title="13. putIfAbsent(K key, V value)"></a>13. <code>putIfAbsent(K key, V value)</code></h3><p>åªæœ‰å½“é”®<strong>ä¸å­˜åœ¨</strong>æ—¶æ‰æ’å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.putIfAbsent(<span class="string">&quot;Alice&quot;</span>, <span class="number">20</span>); <span class="comment">// Alice å·²å­˜åœ¨ï¼Œä¸æ›´æ–°</span></span><br><span class="line">map.putIfAbsent(<span class="string">&quot;Eve&quot;</span>, <span class="number">22</span>);   <span class="comment">// Eve ä¸å­˜åœ¨ï¼Œæ’å…¥</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿”å›å½“å‰å€¼ï¼ˆå¯èƒ½æ˜¯æ—§å€¼æˆ–æ–°æ’å…¥çš„å€¼ï¼‰ã€‚</p></blockquote><hr><h3 id="14-computeIfAbsent-K-key-Function-mappingFunction"><a href="#14-computeIfAbsent-K-key-Function-mappingFunction" class="headerlink" title="14. computeIfAbsent(K key, Function&lt;K,V&gt; mappingFunction)"></a>14. <code>computeIfAbsent(K key, Function&lt;K,V&gt; mappingFunction)</code></h3><p>å¦‚æœé”®ä¸å­˜åœ¨ï¼Œä½¿ç”¨å‡½æ•°è®¡ç®—å€¼å¹¶æ”¾å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map.computeIfAbsent(<span class="string">&quot;Frank&quot;</span>, k -&gt; k.length()); <span class="comment">// k=&quot;Frank&quot; â†’ é•¿åº¦=5</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºï¼šå¦‚æœ Frank ä¸å­˜åœ¨ï¼Œå°± put(&quot;Frank&quot;, 5)</span></span><br></pre></td></tr></table></figure><blockquote><p>âœ… å¸¸ç”¨äºå»¶è¿Ÿåˆå§‹åŒ–ã€ç¼“å­˜ç­‰åœºæ™¯ã€‚</p></blockquote><hr><h3 id="15-forEach-BiConsumer-action"><a href="#15-forEach-BiConsumer-action" class="headerlink" title="15. forEach(BiConsumer&lt;K,V&gt; action)"></a>15. <code>forEach(BiConsumer&lt;K,V&gt; action)</code></h3><p>éå†æ‰€æœ‰é”®å€¼å¯¹ï¼ˆJava 8+ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map.forEach((key, value) -&gt; &#123;</span><br><span class="line">    System.out.println(key + <span class="string">&quot; = &quot;</span> + value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>âœ… ç®€æ´çš„ Lambda å†™æ³•ã€‚</p></blockquote><hr><h2 id="ğŸ§©-ä¸‰ã€Map-Entry-å¸¸ç”¨æ–¹æ³•"><a href="#ğŸ§©-ä¸‰ã€Map-Entry-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="ğŸ§© ä¸‰ã€Map.Entry&lt;K,V&gt; å¸¸ç”¨æ–¹æ³•"></a>ğŸ§© ä¸‰ã€Map.Entry&lt;K,V&gt; å¸¸ç”¨æ–¹æ³•</h2><p>å½“ä½ ä½¿ç”¨ <code>entrySet()</code> æ—¶ï¼Œä¼šå¾—åˆ° <code>Map.Entry</code> å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map.Entry&lt;String, Integer&gt; entry = ...;</span><br><span class="line">entry.getKey();    <span class="comment">// è·å–é”®</span></span><br><span class="line">entry.getValue();  <span class="comment">// è·å–å€¼</span></span><br><span class="line">entry.setValue(<span class="number">40</span>); <span class="comment">// ä¿®æ”¹å€¼ï¼ˆå…è®¸ï¼‰</span></span><br></pre></td></tr></table></figure><hr><h2 id="âœ…-å››ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•ï¼ˆTop-10ï¼‰"><a href="#âœ…-å››ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•ï¼ˆTop-10ï¼‰" class="headerlink" title="âœ… å››ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•ï¼ˆTop 10ï¼‰"></a>âœ… å››ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•ï¼ˆTop 10ï¼‰</h2><table><thead><tr><th>æ’å</th><th>æ–¹æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>1ï¸âƒ£</td><td><code>put(K,V)</code></td><td>æ·»åŠ &#x2F;æ›´æ–°</td></tr><tr><td>2ï¸âƒ£</td><td><code>get(K)</code></td><td>æŸ¥æ‰¾å€¼</td></tr><tr><td>3ï¸âƒ£</td><td><code>containsKey(K)</code></td><td>åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨</td></tr><tr><td>4ï¸âƒ£</td><td><code>getOrDefault(K, default)</code></td><td>å®‰å…¨è·å–å€¼</td></tr><tr><td>5ï¸âƒ£</td><td><code>entrySet()</code> + <code>forEach</code></td><td>éå†æ‰€æœ‰é”®å€¼å¯¹</td></tr><tr><td>6ï¸âƒ£</td><td><code>keySet()</code></td><td>è·å–æ‰€æœ‰é”®</td></tr><tr><td>7ï¸âƒ£</td><td><code>values()</code></td><td>è·å–æ‰€æœ‰å€¼</td></tr><tr><td>8ï¸âƒ£</td><td><code>remove(K)</code></td><td>åˆ é™¤</td></tr><tr><td>9ï¸âƒ£</td><td><code>size()</code> &#x2F; <code>isEmpty()</code></td><td>åˆ¤æ–­å¤§å°</td></tr><tr><td>ğŸ”Ÿ</td><td><code>computeIfAbsent(K, func)</code></td><td>æ‡’åŠ è½½ã€é¿å…é‡å¤åˆ›å»º</td></tr></tbody></table><hr><h2 id="ğŸ’¡-å°è´´å£«"><a href="#ğŸ’¡-å°è´´å£«" class="headerlink" title="ğŸ’¡ å°è´´å£«"></a>ğŸ’¡ å°è´´å£«</h2><ul><li>ä½¿ç”¨ <code>Map.of()</code>ï¼ˆJava 9+ï¼‰åˆ›å»ºä¸å¯å˜å° Mapï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = Map.of(<span class="string">&quot;A&quot;</span>, <span class="number">1</span>, <span class="string">&quot;B&quot;</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>Map.ofEntries()</code> åˆ›å»ºæ›´çµæ´»çš„ä¸å¯å˜ Mapã€‚</li><li>å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼˜å…ˆä½¿ç”¨ <code>ConcurrentHashMap</code>ã€‚</li></ul><hr><p>å¦‚æœä½ æœ‰å…·ä½“ä½¿ç”¨åœºæ™¯ï¼ˆå¦‚ç¼“å­˜ã€è®¡æ•°ã€åˆ†ç»„ï¼‰ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ è¯¥ç”¨å“ªä¸ªæ–¹æ³•ç»„åˆï¼æ¬¢è¿ç»§ç»­æé—® ğŸ˜Š</p><h1 id="Javaä¸­Listçš„å®ç°ç±»"><a href="#Javaä¸­Listçš„å®ç°ç±»" class="headerlink" title="Javaä¸­Listçš„å®ç°ç±»"></a>Javaä¸­<code>List</code>çš„å®ç°ç±»</h1><p>åœ¨ Java ä¸­ï¼Œ<code>List</code> æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„<strong>æ¥å£</strong>ï¼Œå±äº <code>java.util</code> åŒ…ï¼Œæ˜¯ <strong>Collection</strong> æ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ª<strong>æœ‰åºçš„é›†åˆ</strong>ï¼ˆä¹Ÿç§°ä¸ºåºåˆ—ï¼‰ï¼Œå…è®¸é‡å¤å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰è®¿é—®å…ƒç´ ã€‚</p><hr><h2 id="ğŸ“š-ä¸€ã€List-çš„æ ¸å¿ƒç‰¹ç‚¹"><a href="#ğŸ“š-ä¸€ã€List-çš„æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="ğŸ“š ä¸€ã€List çš„æ ¸å¿ƒç‰¹ç‚¹"></a>ğŸ“š ä¸€ã€<code>List</code> çš„æ ¸å¿ƒç‰¹ç‚¹</h2><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… æœ‰åº</td><td>å…ƒç´ æŒ‰æ’å…¥é¡ºåºæ’åˆ—ï¼ˆæˆ–æŒ‡å®šé¡ºåºï¼‰</td></tr><tr><td>âœ… å¯é‡å¤</td><td>å…è®¸å­˜å‚¨ç›¸åŒçš„å…ƒç´ å¤šæ¬¡</td></tr><tr><td>âœ… å¯ç´¢å¼•è®¿é—®</td><td>å¯ä»¥é€šè¿‡ <code>get(index)</code> è·å–æŒ‡å®šä½ç½®çš„å…ƒç´ </td></tr><tr><td>âœ… åŠ¨æ€å¤§å°</td><td>å¤§å¤šæ•°å®ç°æ”¯æŒåŠ¨æ€æ‰©å®¹</td></tr></tbody></table><hr><h2 id="ğŸ”-äºŒã€List-çš„ä¸»è¦å®ç°ç±»"><a href="#ğŸ”-äºŒã€List-çš„ä¸»è¦å®ç°ç±»" class="headerlink" title="ğŸ” äºŒã€List çš„ä¸»è¦å®ç°ç±»"></a>ğŸ” äºŒã€<code>List</code> çš„ä¸»è¦å®ç°ç±»</h2><p>Java ä¸­æœ€å¸¸ç”¨çš„ <code>List</code> å®ç°ç±»æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><table><thead><tr><th>å®ç°ç±»</th><th>åº•å±‚ç»“æ„</th><th>æ˜¯å¦å¯å˜</th><th>çº¿ç¨‹å®‰å…¨</th><th>æ€§èƒ½ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>ArrayList</code></td><td>åŠ¨æ€æ•°ç»„</td><td>âœ… å¯å˜</td><td>âŒ ä¸å®‰å…¨</td><td>éšæœºè®¿é—®å¿« O(1)ï¼Œæ’å…¥&#x2F;åˆ é™¤æ…¢ O(n)</td><td>é»˜è®¤é¦–é€‰</td></tr><tr><td><code>LinkedList</code></td><td>åŒå‘é“¾è¡¨</td><td>âœ… å¯å˜</td><td>âŒ ä¸å®‰å…¨</td><td>æ’å…¥&#x2F;åˆ é™¤å¿« O(1)ï¼Œéšæœºè®¿é—®æ…¢ O(n)</td><td>é¢‘ç¹å¢åˆ </td></tr><tr><td><code>Vector</code></td><td>åŠ¨æ€æ•°ç»„</td><td>âœ… å¯å˜</td><td>âœ… å®‰å…¨ï¼ˆæ–¹æ³•åŒæ­¥ï¼‰</td><td>æ…¢ï¼ˆåŒæ­¥å¼€é”€ï¼‰</td><td>è€æ—§ï¼ŒåŸºæœ¬è¢«å–ä»£</td></tr><tr><td><code>Stack</code></td><td>ç»§æ‰¿ <code>Vector</code></td><td>âœ… å¯å˜</td><td>âœ… å®‰å…¨</td><td>åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰</td><td>å·²è¿‡æ—¶ï¼Œå»ºè®®ç”¨ <code>Deque</code></td></tr><tr><td><code>CopyOnWriteArrayList</code></td><td>å†™æ—¶å¤åˆ¶æ•°ç»„</td><td>âœ… å¯å˜</td><td>âœ… å®‰å…¨</td><td>è¯»å¿«å†™æ…¢ï¼Œé€‚åˆè¯»å¤šå†™å°‘</td><td>å¹¶å‘åœºæ™¯</td></tr></tbody></table><hr><h2 id="ğŸ§©-ä¸‰ã€è¯¦ç»†è§£ææ¯ä¸ªå®ç°ç±»"><a href="#ğŸ§©-ä¸‰ã€è¯¦ç»†è§£ææ¯ä¸ªå®ç°ç±»" class="headerlink" title="ğŸ§© ä¸‰ã€è¯¦ç»†è§£ææ¯ä¸ªå®ç°ç±»"></a>ğŸ§© ä¸‰ã€è¯¦ç»†è§£ææ¯ä¸ªå®ç°ç±»</h2><h3 id="1-ArrayList-âœ…-æœ€å¸¸ç”¨"><a href="#1-ArrayList-âœ…-æœ€å¸¸ç”¨" class="headerlink" title="1. ArrayList&lt;E&gt; âœ… æœ€å¸¸ç”¨"></a>1. <code>ArrayList&lt;E&gt;</code> âœ… <strong>æœ€å¸¸ç”¨</strong></h3><ul><li><strong>åº•å±‚ç»“æ„</strong>ï¼šåŠ¨æ€æ•°ç»„ï¼ˆåŸºäº <code>Object[]</code>ï¼‰</li><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li>æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼ˆ<code>get(index)</code> æ—¶é—´å¤æ‚åº¦ O(1)ï¼‰</li><li>éå†æ•ˆç‡é«˜</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li>åœ¨ä¸­é—´æ’å…¥æˆ–åˆ é™¤å…ƒç´ è¾ƒæ…¢ï¼ˆéœ€è¦ç§»åŠ¨å…ƒç´ ï¼ŒO(n)ï¼‰</li><li>æ‰©å®¹æ—¶ä¼šåˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶æ•°æ®</li></ul></li><li><strong>é»˜è®¤åˆå§‹å®¹é‡</strong>ï¼š10ï¼ˆé¦–æ¬¡æ·»åŠ å…ƒç´ æ—¶æ‰©å®¹ï¼‰</li><li><strong>æ‰©å®¹æœºåˆ¶</strong>ï¼šæ¯æ¬¡å¢é•¿çº¦ 50%ï¼ˆ<code>oldCapacity + (oldCapacity &gt;&gt; 1)</code>ï¼‰</li></ul><blockquote><p>âœ… <strong>æ¨èä½œä¸º <strong><code>List</code></strong> çš„é»˜è®¤é€‰æ‹©</strong>ï¼Œé™¤éä½ æœ‰ç‰¹æ®Šéœ€æ±‚ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">System.out.println(list.get(<span class="number">0</span>)); <span class="comment">// &quot;A&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-LinkedList-ğŸ”„-é“¾è¡¨ç»“æ„"><a href="#2-LinkedList-ğŸ”„-é“¾è¡¨ç»“æ„" class="headerlink" title="2. LinkedList&lt;E&gt; ğŸ”„ é“¾è¡¨ç»“æ„"></a>2. <code>LinkedList&lt;E&gt;</code> ğŸ”„ é“¾è¡¨ç»“æ„</h3><ul><li><strong>åº•å±‚ç»“æ„</strong>ï¼šåŒå‘é“¾è¡¨ï¼ˆæ¯ä¸ªèŠ‚ç‚¹åŒ…å«å‰é©±å’Œåç»§æŒ‡é’ˆï¼‰</li><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li>åœ¨å¤´éƒ¨&#x2F;å°¾éƒ¨&#x2F;ä¸­é—´æ’å…¥ã€åˆ é™¤æ•ˆç‡é«˜ï¼ˆO(1)ï¼Œå¦‚æœå·²æœ‰èŠ‚ç‚¹å¼•ç”¨ï¼‰</li><li>æ— éœ€æ‰©å®¹</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li>éšæœºè®¿é—®æ…¢ï¼ˆå¿…é¡»ä»å¤´æˆ–å°¾éå†ï¼ŒO(n)ï¼‰</li><li>å ç”¨æ›´å¤šå†…å­˜ï¼ˆæ¯ä¸ªèŠ‚ç‚¹è¦å­˜æŒ‡é’ˆï¼‰</li></ul></li></ul><blockquote><p>âœ… é€‚åˆ<strong>é¢‘ç¹åœ¨ä¸­é—´æ’å…¥&#x2F;åˆ é™¤</strong>çš„åœºæ™¯ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">list.addFirst(<span class="string">&quot;A&quot;</span>); <span class="comment">// å¤´éƒ¨æ’å…¥</span></span><br><span class="line">list.addLast(<span class="string">&quot;C&quot;</span>);  <span class="comment">// å°¾éƒ¨æ’å…¥</span></span><br><span class="line">list.add(<span class="number">1</span>, <span class="string">&quot;B&quot;</span>);   <span class="comment">// ä¸­é—´æ’å…¥</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ æ³¨æ„ï¼š<code>LinkedList</code> è¿˜å®ç°äº† <code>Deque</code> æ¥å£ï¼Œå¯ä»¥ç”¨ä½œé˜Ÿåˆ—æˆ–æ ˆã€‚</p></blockquote><hr><h3 id="3-Vector-âš ï¸-å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰"><a href="#3-Vector-âš ï¸-å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="3. Vector&lt;E&gt; âš ï¸ å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰"></a>3. <code>Vector&lt;E&gt;</code> âš ï¸ <strong>å·²è¿‡æ—¶ï¼ˆä¸æ¨èï¼‰</strong></h3><ul><li><strong>åº•å±‚ç»“æ„</strong>ï¼šåŠ¨æ€æ•°ç»„ï¼ˆç±»ä¼¼ <code>ArrayList</code>ï¼‰</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>æ–¹æ³•éƒ½æ˜¯ <code>synchronized</code> çš„ï¼Œ<strong>çº¿ç¨‹å®‰å…¨</strong></li><li>æ€§èƒ½è¾ƒå·®ï¼ˆåŒæ­¥å¼€é”€å¤§ï¼‰</li><li>é»˜è®¤æ‰©å®¹ç¿»å€ï¼ˆæ¯” <code>ArrayList</code> æµªè´¹ç©ºé—´ï¼‰</li></ul></li></ul><blockquote><p>âŒ <strong>ä¸æ¨èä½¿ç”¨</strong>ï¼Œé™¤éç»´æŠ¤è€ä»£ç ã€‚</p></blockquote><p>âœ… æ›¿ä»£æ–¹æ¡ˆï¼š</p><ul><li>éœ€è¦çº¿ç¨‹å®‰å…¨ â†’ <code>Collections.synchronizedList(new ArrayList&lt;&gt;())</code></li><li>æˆ–ä½¿ç”¨ <code>CopyOnWriteArrayList</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = Collections.synchronizedList(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br></pre></td></tr></table></figure><hr><h3 id="4-Stack-âš ï¸-å·²è¿‡æ—¶"><a href="#4-Stack-âš ï¸-å·²è¿‡æ—¶" class="headerlink" title="4. Stack&lt;E&gt; âš ï¸ å·²è¿‡æ—¶"></a>4. <code>Stack&lt;E&gt;</code> âš ï¸ <strong>å·²è¿‡æ—¶</strong></h3><ul><li>**ç»§æ‰¿è‡ª **<code>Vector</code></li><li>æä¾› <code>push()</code>ã€<code>pop()</code>ã€<code>peek()</code> ç­‰æ ˆæ“ä½œ</li><li><strong>é—®é¢˜</strong>ï¼š<ul><li>åŸºäº <code>Vector</code>ï¼Œæ€§èƒ½å·®</li><li>è®¾è®¡ä¸åˆç†ï¼ˆåº”è¯¥ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ï¼‰</li></ul></li></ul><blockquote><p>âœ… <strong>æ¨èæ›¿ä»£</strong>ï¼šä½¿ç”¨ <code>Deque</code> å®ç°æ ˆ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Deque&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">stack.push(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">stack.push(<span class="string">&quot;B&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">top</span> <span class="operator">=</span> stack.pop(); <span class="comment">// &quot;B&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="5-CopyOnWriteArrayList-âœ…-é«˜å¹¶å‘åœºæ™¯"><a href="#5-CopyOnWriteArrayList-âœ…-é«˜å¹¶å‘åœºæ™¯" class="headerlink" title="5. CopyOnWriteArrayList&lt;E&gt; âœ… é«˜å¹¶å‘åœºæ™¯"></a>5. <code>CopyOnWriteArrayList&lt;E&gt;</code> âœ… é«˜å¹¶å‘åœºæ™¯</h3><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>â€œå†™æ—¶å¤åˆ¶â€æœºåˆ¶ï¼šæ¯æ¬¡ä¿®æ”¹éƒ½åˆ›å»ºæ–°æ•°ç»„ï¼Œè¯»æ“ä½œä¸åŠ é”</li><li><strong>çº¿ç¨‹å®‰å…¨</strong></li><li>è¯»æ“ä½œéå¸¸å¿«ï¼Œå†™æ“ä½œè¾ƒæ…¢ï¼ˆå› ä¸ºè¦å¤åˆ¶æ•°ç»„ï¼‰</li></ul></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<ul><li>è¯»å¤šå†™å°‘çš„å¹¶å‘ç¯å¢ƒï¼ˆå¦‚ç›‘å¬å™¨åˆ—è¡¨ã€è§‚å¯Ÿè€…æ¨¡å¼ï¼‰</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">CopyOnWriteArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line"><span class="comment">// å¤šä¸ªçº¿ç¨‹å¯ä»¥å®‰å…¨åœ°è¯»å–</span></span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ ä¸é€‚åˆå†™é¢‘ç¹çš„åœºæ™¯ï¼Œå¦åˆ™æ€§èƒ½å¾ˆå·®ã€‚</p></blockquote><hr><h2 id="ğŸ› -å››ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„-List-å®ç°ï¼Ÿ"><a href="#ğŸ› -å››ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„-List-å®ç°ï¼Ÿ" class="headerlink" title="ğŸ›  å››ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„ List å®ç°ï¼Ÿ"></a>ğŸ›  å››ã€å¦‚ä½•é€‰æ‹©åˆé€‚çš„ List å®ç°ï¼Ÿ</h2><table><thead><tr><th>éœ€æ±‚</th><th>æ¨èå®ç°ç±»</th></tr></thead><tbody><tr><td>ä¸€èˆ¬ç”¨é€”ï¼Œéšæœºè®¿é—®å¤š</td><td><code>ArrayList</code> âœ…</td></tr><tr><td>é¢‘ç¹åœ¨å¤´éƒ¨&#x2F;ä¸­é—´æ’å…¥åˆ é™¤</td><td><code>LinkedList</code></td></tr><tr><td>å¤šçº¿ç¨‹ç¯å¢ƒï¼Œè¯»å¤šå†™å°‘</td><td><code>CopyOnWriteArrayList</code></td></tr><tr><td>å¤šçº¿ç¨‹ç¯å¢ƒï¼Œè¯»å†™å‡è¡¡</td><td><code>Collections.synchronizedList(new ArrayList&lt;&gt;())</code></td></tr><tr><td>å®ç°æ ˆï¼ˆLIFOï¼‰</td><td><code>ArrayDeque</code>ï¼ˆç”¨ <code>push</code>&#x2F;<code>pop</code>ï¼‰</td></tr><tr><td>å®ç°é˜Ÿåˆ—ï¼ˆFIFOï¼‰</td><td><code>ArrayDeque</code> æˆ– <code>LinkedList</code></td></tr></tbody></table><hr><h2 id="ğŸ§ª-äº”ã€åˆ›å»ºä¸å¯å˜-Listï¼ˆJava-9-ï¼‰"><a href="#ğŸ§ª-äº”ã€åˆ›å»ºä¸å¯å˜-Listï¼ˆJava-9-ï¼‰" class="headerlink" title="ğŸ§ª äº”ã€åˆ›å»ºä¸å¯å˜ Listï¼ˆJava 9+ï¼‰"></a>ğŸ§ª äº”ã€åˆ›å»ºä¸å¯å˜ Listï¼ˆJava 9+ï¼‰</h2><p>å¦‚æœä½ ä¸éœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥åˆ›å»ºä¸å¯å˜åˆ—è¡¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java 9+</span></span><br><span class="line">List&lt;String&gt; list = List.of(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>); <span class="comment">// ä¸å¯å˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–ä½¿ç”¨ Arrays.asListï¼ˆå›ºå®šå¤§å°ï¼Œä¸å¯ add/removeï¼‰</span></span><br><span class="line">List&lt;String&gt; fixed = Arrays.asList(<span class="string">&quot;X&quot;</span>, <span class="string">&quot;Y&quot;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ <code>List.of()</code> å’Œ <code>Arrays.asList()</code> è¿”å›çš„åˆ—è¡¨éƒ½ä¸èƒ½æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</p></blockquote><hr><h2 id="âœ…-å…­ã€æ€»ç»“ï¼šæ¨èä½¿ç”¨æŒ‡å—"><a href="#âœ…-å…­ã€æ€»ç»“ï¼šæ¨èä½¿ç”¨æŒ‡å—" class="headerlink" title="âœ… å…­ã€æ€»ç»“ï¼šæ¨èä½¿ç”¨æŒ‡å—"></a>âœ… å…­ã€æ€»ç»“ï¼šæ¨èä½¿ç”¨æŒ‡å—</h2><table><thead><tr><th>å®ç°ç±»</th><th>æ¨èç¨‹åº¦</th><th>ä¸€å¥è¯æ€»ç»“</th></tr></thead><tbody><tr><td><code>ArrayList</code></td><td>â­â­â­â­â­</td><td>é»˜è®¤é¦–é€‰ï¼Œæ€§èƒ½å¥½ï¼Œä½¿ç”¨æœ€å¹¿æ³›</td></tr><tr><td><code>LinkedList</code></td><td>â­â­â­â˜†â˜†</td><td>ä»…åœ¨é¢‘ç¹æ’å…¥&#x2F;åˆ é™¤æ—¶ä½¿ç”¨</td></tr><tr><td><code>CopyOnWriteArrayList</code></td><td>â­â­â­â­â˜†</td><td>å¹¶å‘è¯»å¤šå†™å°‘åœºæ™¯</td></tr><tr><td><code>Vector</code> &#x2F; <code>Stack</code></td><td>â­â˜†â˜†â˜†â˜†</td><td>å·²è¿‡æ—¶ï¼Œé¿å…ä½¿ç”¨</td></tr></tbody></table><hr><p>ğŸ“Œ <strong>ä¸€å¥è¯å»ºè®®</strong>ï¼š</p><blockquote><p>æ—¥å¸¸å¼€å‘ç”¨ <code>ArrayList</code>ï¼Œå¹¶å‘è¯»å¤šå†™å°‘ç”¨ <code>CopyOnWriteArrayList</code>ï¼Œå®ç°æ ˆ&#x2F;é˜Ÿåˆ—ç”¨ <code>ArrayDeque</code>ã€‚</p></blockquote><p>å¦‚æœä½ æœ‰å…·ä½“åœºæ™¯ï¼ˆæ¯”å¦‚â€œæˆ‘è¦å®ç°ä¸€ä¸ªç¼“å­˜â€æˆ–â€œé«˜é¢‘å¢åˆ çš„åˆ—è¡¨â€ï¼‰ï¼Œæˆ‘å¯ä»¥å¸®ä½ æ¨èæœ€åˆé€‚çš„ <code>List</code> å®ç°ï¼</p><p>åœ¨ Java ä¸­ï¼Œ<code>List</code> æ¥å£ç»§æ‰¿è‡ª <code>Collection</code>ï¼Œæä¾›äº†æ¯”æ™®é€šé›†åˆæ›´ä¸°å¯Œçš„æ“ä½œæ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯<strong>åŸºäºç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰çš„æ“ä½œ</strong>ã€‚å®ƒæ˜¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„é›†åˆç±»å‹ä¹‹ä¸€ã€‚</p><hr><h1 id="Javaä¸­Listä¸­çš„å¸¸ç”¨æ–¹æ³•"><a href="#Javaä¸­Listä¸­çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Javaä¸­Listä¸­çš„å¸¸ç”¨æ–¹æ³•"></a>Javaä¸­<code>List</code>ä¸­çš„å¸¸ç”¨æ–¹æ³•</h1><h2 id="ğŸ“š-ä¸€ã€List-çš„æ ¸å¿ƒç‰¹ç‚¹å›é¡¾"><a href="#ğŸ“š-ä¸€ã€List-çš„æ ¸å¿ƒç‰¹ç‚¹å›é¡¾" class="headerlink" title="ğŸ“š ä¸€ã€List çš„æ ¸å¿ƒç‰¹ç‚¹å›é¡¾"></a>ğŸ“š ä¸€ã€<code>List</code> çš„æ ¸å¿ƒç‰¹ç‚¹å›é¡¾</h2><ul><li>âœ… <strong>æœ‰åº</strong>ï¼šå…ƒç´ æŒ‰æ’å…¥é¡ºåºæ’åˆ—</li><li>âœ… <strong>å¯é‡å¤</strong>ï¼šå…è®¸å­˜å‚¨ç›¸åŒçš„å…ƒç´ </li><li>âœ… <strong>å¯ç´¢å¼•è®¿é—®</strong>ï¼šå¯ä»¥é€šè¿‡ <code>index</code>ï¼ˆä¸‹æ ‡ï¼‰è·å–æˆ–ä¿®æ”¹å…ƒç´ </li><li>âœ… <strong>åŠ¨æ€å¤§å°</strong>ï¼šå¤§å¤šæ•°å®ç°æ”¯æŒè‡ªåŠ¨æ‰©å®¹</li></ul><hr><h2 id="ğŸ”-äºŒã€List-çš„å¸¸ç”¨æ–¹æ³•ä¸€è§ˆè¡¨"><a href="#ğŸ”-äºŒã€List-çš„å¸¸ç”¨æ–¹æ³•ä¸€è§ˆè¡¨" class="headerlink" title="ğŸ” äºŒã€List çš„å¸¸ç”¨æ–¹æ³•ä¸€è§ˆè¡¨"></a>ğŸ” äºŒã€<code>List</code> çš„å¸¸ç”¨æ–¹æ³•ä¸€è§ˆè¡¨</h2><table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>è¿”å›ç±»å‹</th><th>æ˜¯å¦ä¿®æ”¹ List</th></tr></thead><tbody><tr><td><code>add(E e)</code></td><td>åœ¨æœ«å°¾æ·»åŠ å…ƒç´ </td><td><code>boolean</code></td><td>âœ… æ˜¯</td></tr><tr><td><code>add(int index, E element)</code></td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </td><td><code>void</code></td><td>âœ… æ˜¯</td></tr><tr><td><code>get(int index)</code></td><td>è·å–æŒ‡å®šä½ç½®çš„å…ƒç´ </td><td><code>E</code></td><td>âŒ å¦</td></tr><tr><td><code>set(int index, E element)</code></td><td>æ›¿æ¢æŒ‡å®šä½ç½®çš„å…ƒç´ </td><td><code>E</code>ï¼ˆæ—§å€¼ï¼‰</td><td>âœ… æ˜¯</td></tr><tr><td><code>remove(int index)</code></td><td>åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </td><td><code>E</code>ï¼ˆè¢«åˆ é™¤çš„å…ƒç´ ï¼‰</td><td>âœ… æ˜¯</td></tr><tr><td><code>remove(Object o)</code></td><td>åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ </td><td><code>boolean</code></td><td>âœ… æ˜¯</td></tr><tr><td><code>size()</code></td><td>è·å–å…ƒç´ ä¸ªæ•°</td><td><code>int</code></td><td>âŒ å¦</td></tr><tr><td><code>isEmpty()</code></td><td>åˆ¤æ–­æ˜¯å¦ä¸ºç©º</td><td><code>boolean</code></td><td>âŒ å¦</td></tr><tr><td><code>contains(Object o)</code></td><td>åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </td><td><code>boolean</code></td><td>âŒ å¦</td></tr><tr><td><code>indexOf(Object o)</code></td><td>è¿”å›é¦–æ¬¡å‡ºç°çš„ç´¢å¼•</td><td><code>int</code>ï¼ˆ-1 è¡¨ç¤ºä¸å­˜åœ¨ï¼‰</td><td>âŒ å¦</td></tr><tr><td><code>lastIndexOf(Object o)</code></td><td>è¿”å›æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</td><td><code>int</code></td><td>âŒ å¦</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºæ‰€æœ‰å…ƒç´ </td><td><code>void</code></td><td>âœ… æ˜¯</td></tr><tr><td><code>subList(int from, int to)</code></td><td>æˆªå–å­åˆ—è¡¨ï¼ˆè§†å›¾ï¼‰</td><td><code>List&lt;E&gt;</code></td><td>âœ… è§†å›¾å¯ä¿®æ”¹åŸ list</td></tr><tr><td><code>toArray()</code></td><td>è½¬ä¸ºæ•°ç»„</td><td><code>Object[]</code></td><td>âŒ å¦</td></tr><tr><td><code>equals(Object o)</code></td><td>æ¯”è¾ƒä¸¤ä¸ª List æ˜¯å¦ç›¸ç­‰</td><td><code>boolean</code></td><td>âŒ å¦</td></tr><tr><td><code>toString()</code></td><td>è¿”å›å­—ç¬¦ä¸²è¡¨ç¤º</td><td><code>String</code></td><td>âŒ å¦</td></tr></tbody></table><blockquote><p>ğŸ’¡ æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ <code>java.util.List&lt;E&gt;</code> æ¥å£ä¸­ï¼Œ<code>ArrayList</code>ã€<code>LinkedList</code> ç­‰å®ç°ç±»éƒ½ä¼šæä¾›è¿™äº›æ–¹æ³•ã€‚</p></blockquote><hr><h2 id="ğŸ§©-ä¸‰ã€è¯¦ç»†è¯´æ˜ä¸ä»£ç ç¤ºä¾‹"><a href="#ğŸ§©-ä¸‰ã€è¯¦ç»†è¯´æ˜ä¸ä»£ç ç¤ºä¾‹" class="headerlink" title="ğŸ§© ä¸‰ã€è¯¦ç»†è¯´æ˜ä¸ä»£ç ç¤ºä¾‹"></a>ğŸ§© ä¸‰ã€è¯¦ç»†è¯´æ˜ä¸ä»£ç ç¤ºä¾‹</h2><p>æˆ‘ä»¬ä»¥ <code>ArrayList&lt;String&gt;</code> ä¸ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>); <span class="comment">// å…è®¸é‡å¤</span></span><br></pre></td></tr></table></figure><h3 id="1-add-E-e-â€”â€”-æ·»åŠ åˆ°æœ«å°¾"><a href="#1-add-E-e-â€”â€”-æ·»åŠ åˆ°æœ«å°¾" class="headerlink" title="1. add(E e) â€”â€” æ·»åŠ åˆ°æœ«å°¾"></a>1. <code>add(E e)</code> â€”â€” æ·»åŠ åˆ°æœ«å°¾</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.add(<span class="string">&quot;D&quot;</span>); <span class="comment">// [A, B, C, B, D]</span></span><br></pre></td></tr></table></figure><h3 id="2-add-int-index-E-element-â€”â€”-æ’å…¥åˆ°æŒ‡å®šä½ç½®"><a href="#2-add-int-index-E-element-â€”â€”-æ’å…¥åˆ°æŒ‡å®šä½ç½®" class="headerlink" title="2. add(int index, E element) â€”â€” æ’å…¥åˆ°æŒ‡å®šä½ç½®"></a>2. <code>add(int index, E element)</code> â€”â€” æ’å…¥åˆ°æŒ‡å®šä½ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.add(<span class="number">1</span>, <span class="string">&quot;X&quot;</span>); <span class="comment">// åœ¨ç´¢å¼•1å¤„æ’å…¥ &quot;X&quot;</span></span><br><span class="line"><span class="comment">// ç»“æœï¼š[A, X, B, C, B, D]</span></span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ å¦‚æœ <code>index</code> è¶…å‡ºèŒƒå›´ï¼ˆ<code>index &lt; 0 || index &gt; size()</code>ï¼‰ï¼ŒæŠ› <code>IndexOutOfBoundsException</code></p></blockquote><hr><h3 id="3-get-int-index-â€”â€”-è·å–å…ƒç´ "><a href="#3-get-int-index-â€”â€”-è·å–å…ƒç´ " class="headerlink" title="3. get(int index) â€”â€” è·å–å…ƒç´ "></a>3. <code>get(int index)</code> â€”â€” è·å–å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">elem</span> <span class="operator">=</span> list.get(<span class="number">0</span>); <span class="comment">// è¿”å› &quot;A&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="4-set-int-index-E-element-â€”â€”-ä¿®æ”¹å…ƒç´ "><a href="#4-set-int-index-E-element-â€”â€”-ä¿®æ”¹å…ƒç´ " class="headerlink" title="4. set(int index, E element) â€”â€” ä¿®æ”¹å…ƒç´ "></a>4. <code>set(int index, E element)</code> â€”â€” ä¿®æ”¹å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">old</span> <span class="operator">=</span> list.set(<span class="number">0</span>, <span class="string">&quot;Z&quot;</span>); <span class="comment">// å°†ç´¢å¼•0çš„å…ƒç´ æ”¹ä¸º &quot;Z&quot;ï¼Œè¿”å›æ—§å€¼ &quot;A&quot;</span></span><br><span class="line"><span class="comment">// ç»“æœï¼š[Z, X, B, C, B, D]</span></span><br></pre></td></tr></table></figure><hr><h3 id="5-remove-int-index-â€”â€”-æŒ‰ç´¢å¼•åˆ é™¤"><a href="#5-remove-int-index-â€”â€”-æŒ‰ç´¢å¼•åˆ é™¤" class="headerlink" title="5. remove(int index) â€”â€” æŒ‰ç´¢å¼•åˆ é™¤"></a>5. <code>remove(int index)</code> â€”â€” æŒ‰ç´¢å¼•åˆ é™¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">removed</span> <span class="operator">=</span> list.remove(<span class="number">1</span>); <span class="comment">// åˆ é™¤ç´¢å¼•1çš„å…ƒç´  &quot;X&quot;ï¼Œè¿”å›å®ƒ</span></span><br><span class="line"><span class="comment">// ç»“æœï¼š[Z, B, C, B, D]</span></span><br></pre></td></tr></table></figure><hr><h3 id="6-remove-Object-o-â€”â€”-æŒ‰å¯¹è±¡åˆ é™¤"><a href="#6-remove-Object-o-â€”â€”-æŒ‰å¯¹è±¡åˆ é™¤" class="headerlink" title="6. remove(Object o) â€”â€” æŒ‰å¯¹è±¡åˆ é™¤"></a>6. <code>remove(Object o)</code> â€”â€” æŒ‰å¯¹è±¡åˆ é™¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">isRemoved</span> <span class="operator">=</span> list.remove(<span class="string">&quot;B&quot;</span>); <span class="comment">// åˆ é™¤ç¬¬ä¸€ä¸ª &quot;B&quot;</span></span><br><span class="line"><span class="comment">// ç»“æœï¼š[Z, C, B, D]ï¼Œè¿”å› true</span></span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ åªåˆ é™¤<strong>ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹</strong></p></blockquote><hr><h3 id="7-size-â€”â€”-è·å–å¤§å°"><a href="#7-size-â€”â€”-è·å–å¤§å°" class="headerlink" title="7. size() â€”â€” è·å–å¤§å°"></a>7. <code>size()</code> â€”â€” è·å–å¤§å°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> list.size(); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><hr><h3 id="8-isEmpty-â€”â€”-åˆ¤æ–­æ˜¯å¦ä¸ºç©º"><a href="#8-isEmpty-â€”â€”-åˆ¤æ–­æ˜¯å¦ä¸ºç©º" class="headerlink" title="8. isEmpty() â€”â€” åˆ¤æ–­æ˜¯å¦ä¸ºç©º"></a>8. <code>isEmpty()</code> â€”â€” åˆ¤æ–­æ˜¯å¦ä¸ºç©º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">empty</span> <span class="operator">=</span> list.isEmpty(); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><hr><h3 id="9-contains-Object-o-â€”â€”-åˆ¤æ–­æ˜¯å¦åŒ…å«"><a href="#9-contains-Object-o-â€”â€”-åˆ¤æ–­æ˜¯å¦åŒ…å«" class="headerlink" title="9. contains(Object o) â€”â€” åˆ¤æ–­æ˜¯å¦åŒ…å«"></a>9. <code>contains(Object o)</code> â€”â€” åˆ¤æ–­æ˜¯å¦åŒ…å«</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">hasC</span> <span class="operator">=</span> list.contains(<span class="string">&quot;C&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">hasX</span> <span class="operator">=</span> list.contains(<span class="string">&quot;X&quot;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨ <code>equals()</code> åˆ¤æ–­ç›¸ç­‰æ€§ã€‚</p></blockquote><hr><h3 id="10-indexOf-Object-o-å’Œ-lastIndexOf-Object-o"><a href="#10-indexOf-Object-o-å’Œ-lastIndexOf-Object-o" class="headerlink" title="10. indexOf(Object o) å’Œ lastIndexOf(Object o)"></a>10. <code>indexOf(Object o)</code> å’Œ <code>lastIndexOf(Object o)</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.indexOf(<span class="string">&quot;B&quot;</span>);     <span class="comment">// è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• â†’ 2</span></span><br><span class="line">list.lastIndexOf(<span class="string">&quot;B&quot;</span>); <span class="comment">// è¿”å›æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼• â†’ 2ï¼ˆåªæœ‰ä¸€ä¸ªï¼‰</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› <code>-1</code></p></blockquote><hr><h3 id="11-clear-â€”â€”-æ¸…ç©º"><a href="#11-clear-â€”â€”-æ¸…ç©º" class="headerlink" title="11. clear() â€”â€” æ¸…ç©º"></a>11. <code>clear()</code> â€”â€” æ¸…ç©º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.clear();</span><br><span class="line">System.out.println(list.size()); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><hr><h3 id="12-subList-int-from-int-to-â€”â€”-æˆªå–å­åˆ—è¡¨"><a href="#12-subList-int-from-int-to-â€”â€”-æˆªå–å­åˆ—è¡¨" class="headerlink" title="12. subList(int from, int to) â€”â€” æˆªå–å­åˆ—è¡¨"></a>12. <code>subList(int from, int to)</code> â€”â€” æˆªå–å­åˆ—è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; sub = list.subList(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// å·¦é—­å³å¼€ [1,3) â†’ ç´¢å¼•1å’Œ2</span></span><br><span class="line"><span class="comment">// sub = [&quot;X&quot;, &quot;B&quot;]</span></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ”” <strong>é‡è¦</strong>ï¼š<code>subList</code> è¿”å›çš„æ˜¯åŸ <code>List</code> çš„<strong>è§†å›¾ï¼ˆviewï¼‰</strong>ï¼Œä¿®æ”¹ <code>sub</code> ä¼šå½±å“åŸ <code>list</code>ï¼</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sub.remove(<span class="number">0</span>); <span class="comment">// åˆ é™¤ &quot;X&quot;</span></span><br><span class="line"><span class="comment">// åŸ list å˜ä¸ºï¼š[&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;B&quot;]</span></span><br></pre></td></tr></table></figure><hr><h3 id="13-toArray-â€”â€”-è½¬ä¸ºæ•°ç»„"><a href="#13-toArray-â€”â€”-è½¬ä¸ºæ•°ç»„" class="headerlink" title="13. toArray() â€”â€” è½¬ä¸ºæ•°ç»„"></a>13. <code>toArray()</code> â€”â€” è½¬ä¸ºæ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object[] arr = list.toArray();</span><br></pre></td></tr></table></figure><p>æˆ–è€…æŒ‡å®šç±»å‹ï¼ˆæ¨èï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String[] arr = list.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><hr><h3 id="14-equals-Object-o-â€”â€”-æ¯”è¾ƒä¸¤ä¸ª-List"><a href="#14-equals-Object-o-â€”â€”-æ¯”è¾ƒä¸¤ä¸ª-List" class="headerlink" title="14. equals(Object o) â€”â€” æ¯”è¾ƒä¸¤ä¸ª List"></a>14. <code>equals(Object o)</code> â€”â€” æ¯”è¾ƒä¸¤ä¸ª List</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; a = Arrays.asList(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>);</span><br><span class="line">List&lt;String&gt; b = Arrays.asList(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>);</span><br><span class="line">System.out.println(a.equals(b)); <span class="comment">// trueï¼ˆå†…å®¹ç›¸åŒå³ç›¸ç­‰ï¼‰</span></span><br></pre></td></tr></table></figure><blockquote><p>âœ… <code>List</code> çš„ <code>equals</code> æ¯”è¾ƒçš„æ˜¯<strong>å…ƒç´ å†…å®¹å’Œé¡ºåº</strong>ï¼Œä¸æ˜¯å¼•ç”¨ã€‚</p></blockquote><hr><h3 id="15-toString-â€”â€”-æŸ¥çœ‹å†…å®¹"><a href="#15-toString-â€”â€”-æŸ¥çœ‹å†…å®¹" class="headerlink" title="15. toString() â€”â€” æŸ¥çœ‹å†…å®¹"></a>15. <code>toString()</code> â€”â€” æŸ¥çœ‹å†…å®¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(list); </span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š[A, B, C, B]</span></span><br></pre></td></tr></table></figure><blockquote><p>æ–¹ä¾¿è°ƒè¯•ï¼Œè‡ªåŠ¨è°ƒç”¨ã€‚</p></blockquote><hr><h2 id="ğŸ”„-å››ã€éå†-List-çš„-4-ç§æ–¹å¼"><a href="#ğŸ”„-å››ã€éå†-List-çš„-4-ç§æ–¹å¼" class="headerlink" title="ğŸ”„ å››ã€éå† List çš„ 4 ç§æ–¹å¼"></a>ğŸ”„ å››ã€éå† List çš„ 4 ç§æ–¹å¼</h2><h3 id="æ–¹å¼-1ï¼šå¢å¼º-for-å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰"><a href="#æ–¹å¼-1ï¼šå¢å¼º-for-å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰" class="headerlink" title="æ–¹å¼ 1ï¼šå¢å¼º for å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰"></a>æ–¹å¼ 1ï¼šå¢å¼º for å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼-2ï¼šæ™®é€š-for-å¾ªç¯ï¼ˆé€‚åˆéœ€è¦ç´¢å¼•ï¼‰"><a href="#æ–¹å¼-2ï¼šæ™®é€š-for-å¾ªç¯ï¼ˆé€‚åˆéœ€è¦ç´¢å¼•ï¼‰" class="headerlink" title="æ–¹å¼ 2ï¼šæ™®é€š for å¾ªç¯ï¼ˆé€‚åˆéœ€è¦ç´¢å¼•ï¼‰"></a>æ–¹å¼ 2ï¼šæ™®é€š for å¾ªç¯ï¼ˆé€‚åˆéœ€è¦ç´¢å¼•ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">    System.out.println(i + <span class="string">&quot;: &quot;</span> + list.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼-3ï¼šè¿­ä»£å™¨ï¼ˆIteratorï¼‰"><a href="#æ–¹å¼-3ï¼šè¿­ä»£å™¨ï¼ˆIteratorï¼‰" class="headerlink" title="æ–¹å¼ 3ï¼šè¿­ä»£å™¨ï¼ˆIteratorï¼‰"></a>æ–¹å¼ 3ï¼šè¿­ä»£å™¨ï¼ˆIteratorï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    System.out.println(it.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ éå†æ—¶ä¸èƒ½ç”¨ <code>list.remove()</code>ï¼Œè¦ç”¨ <code>it.remove()</code></p></blockquote><h3 id="æ–¹å¼-4ï¼šforEach-Lambdaï¼ˆJava-8-ï¼‰"><a href="#æ–¹å¼-4ï¼šforEach-Lambdaï¼ˆJava-8-ï¼‰" class="headerlink" title="æ–¹å¼ 4ï¼šforEach + Lambdaï¼ˆJava 8+ï¼‰"></a>æ–¹å¼ 4ï¼šforEach + Lambdaï¼ˆJava 8+ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list.forEach(System.out::println);</span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line">list.forEach(item -&gt; System.out.println(<span class="string">&quot;Item: &quot;</span> + item));</span><br></pre></td></tr></table></figure><hr><h2 id="âš ï¸-äº”ã€å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-äº”ã€å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸ äº”ã€å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹"></a>âš ï¸ äº”ã€å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹</h2><table><thead><tr><th>é”™è¯¯</th><th>æ­£ç¡®åšæ³•</th></tr></thead><tbody><tr><td><code>list.get(100)</code> ç´¢å¼•è¶Šç•Œ</td><td>å…ˆåˆ¤æ–­ <code>index &lt; list.size()</code></td></tr><tr><td>éå†æ—¶ç”¨ <code>list.remove()</code></td><td>æ”¹ç”¨ <code>Iterator.remove()</code></td></tr><tr><td>è®¤ä¸º <code>Arrays.asList()</code> è¿”å›å¯å˜åˆ—è¡¨</td><td>å®ƒè¿”å›å›ºå®šå¤§å°åˆ—è¡¨ï¼Œä¸èƒ½ <code>add/remove</code></td></tr><tr><td>ç›´æ¥æ¯”è¾ƒä¸¤ä¸ª List å¼•ç”¨</td><td>åº”ä½¿ç”¨ <code>list1.equals(list2)</code> æ¯”è¾ƒå†…å®¹</td></tr></tbody></table><hr><h2 id="âœ…-å…­ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨æ–¹æ³•-Top-10"><a href="#âœ…-å…­ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨æ–¹æ³•-Top-10" class="headerlink" title="âœ… å…­ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨æ–¹æ³• Top 10"></a>âœ… å…­ã€æ€»ç»“ï¼šæœ€å¸¸ç”¨æ–¹æ³• Top 10</h2><table><thead><tr><th>æ’å</th><th>æ–¹æ³•</th><th>ä½¿ç”¨é¢‘ç‡</th></tr></thead><tbody><tr><td>1ï¸âƒ£</td><td><code>add(E)</code></td><td>â­â­â­â­â­</td></tr><tr><td>2ï¸âƒ£</td><td><code>get(int)</code></td><td>â­â­â­â­â­</td></tr><tr><td>3ï¸âƒ£</td><td><code>size()</code></td><td>â­â­â­â­â˜†</td></tr><tr><td>4ï¸âƒ£</td><td><code>remove(int)</code> &#x2F; <code>remove(Object)</code></td><td>â­â­â­â­â˜†</td></tr><tr><td>5ï¸âƒ£</td><td><code>set(int, E)</code></td><td>â­â­â­â˜†â˜†</td></tr><tr><td>6ï¸âƒ£</td><td><code>contains(Object)</code></td><td>â­â­â­â˜†â˜†</td></tr><tr><td>7ï¸âƒ£</td><td><code>indexOf(Object)</code></td><td>â­â­â˜†â˜†â˜†</td></tr><tr><td>8ï¸âƒ£</td><td><code>subList(...)</code></td><td>â­â­â˜†â˜†â˜†</td></tr><tr><td>9ï¸âƒ£</td><td><code>clear()</code></td><td>â­â­â˜†â˜†â˜†</td></tr><tr><td>ğŸ”Ÿ</td><td><code>toArray()</code></td><td>â­â˜†â˜†â˜†â˜†</td></tr></tbody></table><hr><p>ğŸ“Œ <strong>ä¸€å¥è¯å»ºè®®</strong>ï¼š</p><blockquote><p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œ<code>add</code>ã€<code>get</code>ã€<code>remove</code>ã€<code>size</code> æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œé…åˆå¢å¼º for å¾ªç¯å³å¯å®Œæˆå¤§éƒ¨åˆ†æ“ä½œã€‚</p></blockquote><p>å¦‚æœä½ æœ‰å…·ä½“éœ€æ±‚ï¼ˆæ¯”å¦‚â€œå¦‚ä½•åˆ é™¤æ‰€æœ‰å¶æ•°â€æˆ–â€œæ‰¾å‡ºé‡å¤å…ƒç´ â€ï¼‰ï¼Œæˆ‘å¯ä»¥ç»™å‡ºå¯¹åº”çš„ <code>List</code> æ–¹æ³•ç»„åˆï¼æ¬¢è¿ç»§ç»­æé—® ğŸ˜Š</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¨å±€è§„åˆ’è·¯å¾„ç®—æ³•</title>
      <link href="/2025/07/31/%E5%85%A8%E5%B1%80%E8%A7%84%E5%88%92%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/"/>
      <url>/2025/07/31/%E5%85%A8%E5%B1%80%E8%A7%84%E5%88%92%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰å­¦ä¹ äº†ä¸€ä¸‹è·¯å¾„è§„åˆ’ç®—æ³•ï¼Œä¸€ç›´æƒ³æ€»ç»“ä¸€ä¸‹ï¼Œä½†æ˜¯ä¸€ç›´å› ä¸ºå„ç§äº‹æƒ…æ¨è¿Ÿï¼Œä»Šå¤©è¶ç€æ¯”è¾ƒé—²ï¼Œç¨å¾®æ€»ç»“ä¸€ä¸‹ã€‚</p><h1 id="ä¼ ç»ŸRRTç®—æ³•"><a href="#ä¼ ç»ŸRRTç®—æ³•" class="headerlink" title="ä¼ ç»ŸRRTç®—æ³•"></a>ä¼ ç»ŸRRTç®—æ³•</h1><blockquote><p>åŸç†ï¼šå¯¹äºèµ·ç‚¹å’Œç›®æ ‡ç‚¹ï¼Œä»èµ·ç‚¹å¼€å§‹ï¼Œé€šè¿‡éšæœºé‡‡æ ·è·å–ä¸€ä¸ªé‡‡æ ·ç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³è¿æ¥æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³ï¼Œå°†è¯¥ç‚¹åŠ å…¥è·¯å¾„ä¹‹ä¸­ï¼Œé‡æ–°è¿›è¡Œé‡‡æ ·ï¼Œç›´åˆ°æœ€åä¸€ä¸ªé‡‡æ ·ç‚¹åœ¨ç›®æ ‡åŒºåŸŸé™„è¿‘ï¼Œç»“æŸã€‚</p><p>é€šè¿‡éšæœºé‡‡æ ·å¢é•¿ä¸€æ£µæ ‘ï¼Œç›´åˆ°æ ‘è¦†ç›–äº†æ•´ä¸ªè‡ªç”±ç©ºé—´æˆ–è¾¾åˆ°äº†ç›®æ ‡åŒºåŸŸã€‚</p></blockquote><p>ä¼ ç»ŸRRTç®—æ³•æ­¥éª¤ï¼š</p><ol><li><p>åˆ›å»ºä¸€ä¸ªæ ‘èŠ‚ç‚¹ç»“æ„ä½“æ•°ç»„ï¼Œåˆå§‹æ—¶åŠ å…¥èµ·å§‹åæ ‡å’Œç›®æ ‡åæ ‡ï¼›</p></li><li><p>åœ¨åœ°å›¾ä¸Šç”Ÿæˆéšæœºé‡‡æ ·ç‚¹ï¼Œç”Ÿæˆå…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>x_{random} &#x3D; q Â· x_{map}\<br>y_{random} &#x3D; q Â· y_{map}<br>$$<br>å…¶ä¸­ï¼Œ$(x_{random},y_{random})$ä¸ºéšæœºç‚¹çš„xè½´åæ ‡ä¸yè½´åæ ‡ï¼Œqä¸º0åˆ°1ä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•°ï¼Œ$(x_{map},y_{map})$ä¸ºåœ°å›¾çš„æ¨ªåæ ‡ä¸çºµåæ ‡çš„å¤§å°ã€‚</p></li><li><p>æ–°äº§ç”Ÿçš„éšæœºç‚¹ä¸ç»“æ„ä½“æ•°ç»„ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œè·ç¦»æ¯”è¾ƒï¼Œé€‰å–è·ç¦»æœ€å°çš„ä½œä¸ºå…¶çˆ¶èŠ‚ç‚¹ï¼Œå¹¶ä¾æ®çˆ¶èŠ‚ç‚¹å’Œéšæœºç‚¹çš„æ–¹å‘ï¼ŒæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„æ­¥é•¿ç¡®å®šæ–°èŠ‚ç‚¹çš„ä½ç½®ã€‚å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>\begin{align*}<br>D(i) &amp;&#x3D; \sqrt{(x_{random} - x_i)^2 + (y_{random} - y_i)^2} \<br>\alpha &amp;&#x3D; \arctan\left(\frac{y_{random} - y_i}{x_{random} - x_i}\right) \<br>x_{new} &amp;&#x3D; x_i + step \times \cos(\alpha) \<br>y_{new} &amp;&#x3D; y_i + step \times \sin(\alpha)<br>\end{align*}<br>$$</p><p>å¼ä¸­:  $(x_i,y_i) $ä¸ºç»“æ„ä½“æ•°ç»„ä¸­çš„ç¬¬iä¸ªèŠ‚ç‚¹ï¼Œ$D(i)$ä¸ºéšæœºç‚¹ä¸ç»“æ„ä½“æ•°ç»„ä¸­ç¬¬iä¸ªèŠ‚ç‚¹çš„è·ç¦»å€¼; $Î±$ä¸ºéšæœºç‚¹ä¸æœ€è¿‘ä¸´è¿‘èŠ‚ç‚¹ä¹‹é—´çš„è§’åº¦å€¼; $step$ä¸ºæ–°èŠ‚ç‚¹çš„å›ºå®šæ‰©å±•æ­¥é•¿; $(x_{new},y_{new})$ä¸ºäº§ç”Ÿçš„æ–°èŠ‚ç‚¹åæ ‡ã€‚</p></li><li><p>å¯¹æ–°èŠ‚ç‚¹è¿›è¡Œç¢°æ’æ£€æµ‹ï¼šè‹¥æ–°èŠ‚ç‚¹ä¸åœ¨éšœç¢ç‰©èŒƒå›´å†…ä¸”ä¸çˆ¶èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥çº¿æ²¡æœ‰ä¸éšœç¢ç‰©è¾¹ç•Œå‘ç”Ÿæ¥è§¦ï¼Œåˆ™è¡¨ç¤ºé‡‡æ ·æˆåŠŸï¼›å½“æ–°èŠ‚ç‚¹ä¸ç»ˆç‚¹èŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»å°äºé¢„å…ˆè®¾ç½®çš„é˜ˆå€¼æ—¶ï¼Œè·¯å¾„æœç´¢å·¥ä½œå®Œæˆï¼Œå°†ç»ˆç‚¹çº³å…¥åˆ°ç»“æ„ä½“æ•°ç»„ã€‚å¯¹ç»“æ„ä½“æ•°ç»„ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯è¿›è¡Œå›æº¯å¤„ç†ï¼Œå¾—åˆ°åˆå§‹è·¯å¾„ã€‚</p></li></ol><p>ç®—æ³•æ‹“å±•å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202509062027508.png" alt="image-20250906201325739"></p><h1 id="åŒå‘RRTç®—æ³•"><a href="#åŒå‘RRTç®—æ³•" class="headerlink" title="åŒå‘RRTç®—æ³•"></a>åŒå‘RRTç®—æ³•</h1><blockquote><p>åŒå‘RRTç®—æ³•å°±æ˜¯åœ¨ä¼ ç»ŸRRTç®—æ³•çš„åŸºç¡€ä¸Šæ”¹è¿›è€Œæ¥ï¼Œå¼•å…¥ä¸¤æ£µæ ‘åŒæ—¶è¿›è¡Œæ‰©å±•çš„ç­–ç•¥ã€‚</p></blockquote><p>åŒå‘RRTç®—æ³•çš„æ­¥éª¤:</p><ol><li>åˆ›å»ºä¸¤ä¸ªæ ‘çŠ¶ç»“æ„ä½“æ•°ç»„ï¼Œåˆå§‹æ—¶ï¼Œèµ·ç‚¹å’Œç»ˆç‚¹åˆ†åˆ«åŠ å…¥å…¶ä¸­ä¸€ä¸ªã€‚</li><li>åœ¨åœ°å›¾ä¸Šç”Ÿæˆé‡‡æ ·ç‚¹ï¼Œè®¡ç®—è¯¥ç‚¹ä¸¤æ£µæ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„è·ç¦»ï¼Œé€‰æ‹©è·ç¦»æœ€å°çš„ç‚¹ä½œä¸ºå…¶çˆ¶èŠ‚ç‚¹ã€‚</li><li>ä¾æ®é‡‡æ ·ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„æ–¹å‘ï¼ŒæŒ‰ç…§ä¸€ä¸ªå›ºå®šæ­¥é•¿ç¡®å®šæ–°èŠ‚ç‚¹Q1çš„ä½ç½®ï¼›åŒæ—¶ï¼Œå¯¹äºå¦ä¸€æ£µæ ‘ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸æ–°èŠ‚ç‚¹Q1æœ€è¿‘çš„èŠ‚ç‚¹P1ï¼Œä¾æ®P1ä¸Q1çš„æ–¹å‘ï¼ŒæŒ‰ç…§ä¸€ä¸ªå›ºå®šæ­¥é•¿ç¡®å®šå¦ä¸€æ£µæ ‘æ–°èŠ‚ç‚¹Q2çš„ä½ç½®</li><li>å¯¹ä¸¤æ£µæ ‘ä¸­çš„æ–°èŠ‚ç‚¹Q1ï¼ŒQ2è¿›è¡Œç¢°æ’æ£€æµ‹ï¼Œè‹¥æ— ç¢°æ’ï¼Œåˆ™åˆ†åˆ«åŠ å…¥ä¸¤æ£µæ ‘ä¸­ï¼›è‹¥ç¢°æ’ï¼Œèˆå¼ƒè¯¥æ–°èŠ‚ç‚¹ã€‚é‡å¤æ­¥éª¤2-4</li><li>å½“ä¸¤æ£µæ ‘çš„æ–°èŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»å°äºæˆ–ç­‰äºå•ä¸ªæ­¥é•¿æ—¶ï¼Œç»“æŸæœç´¢</li></ol><h1 id="A-ç®—æ³•"><a href="#A-ç®—æ³•" class="headerlink" title="A*ç®—æ³•"></a>A*ç®—æ³•</h1><blockquote><p>æ‘˜è‡ªæ–‡ç« ï¼š<a href="https://zhuanlan.zhihu.com/p/54510444">https://zhuanlan.zhihu.com/p/54510444</a></p></blockquote><p>A*ç®—æ³•é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„è€Œä¼˜å…ˆçº§ï¼Œé€šè¿‡æ¯æ¬¡é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„èŠ‚ç‚¹ï¼Œä½œä¸ºä¸‹ä¸€ä¸ªå¾…éå†çš„èŠ‚ç‚¹ã€‚</p><p>å‡½æ•°å¦‚ä¸‹ï¼š$f(n) &#x3D; g(n)+h(n)$ï¼Œå¯¹äºè¿™ä¸ªå‡½æ•°ï¼Œå…¶ä¸­ï¼š</p><ul><li>$f(n)$: èŠ‚ç‚¹nçš„ç»¼åˆä¼˜å…ˆçº§ã€‚å½“æˆ‘ä»¬é€‰æ‹©ä¸‹ä¸€ä¸ªè¦éå†çš„èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬æ€»ä¼šé€‰å–ç»¼åˆä¼˜å…ˆçº§æœ€é«˜ï¼ˆå€¼æœ€å°ï¼‰çš„èŠ‚ç‚¹ã€‚</li><li>$g(n) $æ˜¯èŠ‚ç‚¹nè·ç¦»èµ·ç‚¹çš„ä»£ä»·ã€‚</li><li>$h(n)$æ˜¯èŠ‚ç‚¹nè·ç¦»ç»ˆç‚¹çš„é¢„è®¡ä»£ä»·ï¼Œè¿™ä¹Ÿå°±æ˜¯A*ç®—æ³•çš„å¯å‘å‡½æ•°ã€‚</li></ul><h2 id="å¯å‘å‡½æ•°"><a href="#å¯å‘å‡½æ•°" class="headerlink" title="å¯å‘å‡½æ•°"></a>å¯å‘å‡½æ•°</h2><p>å¯å‘å‡½æ•°ä¼šå½±å“A*ç®—æ³•çš„è¡Œä¸º</p><ul><li>åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå½“å¯å‘å‡½æ•°h(n)å§‹ç»ˆä¸º0ï¼Œåˆ™å°†ç”±g(n)å†³å®šèŠ‚ç‚¹çš„ä¼˜å…ˆçº§ï¼Œæ­¤æ—¶ç®—æ³•å°±é€€åŒ–æˆäº†Dijkstraç®—æ³•ã€‚</li><li>å¦‚æœh(n)å§‹ç»ˆå°äºç­‰äºèŠ‚ç‚¹nåˆ°ç»ˆç‚¹çš„ä»£ä»·ï¼Œåˆ™A*ç®—æ³•ä¿è¯ä¸€å®šèƒ½å¤Ÿæ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚ä½†æ˜¯å½“h(n)çš„å€¼è¶Šå°ï¼Œç®—æ³•å°†éå†è¶Šå¤šçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±å¯¼è‡´ç®—æ³•è¶Šæ…¢ã€‚</li><li>å¦‚æœh(n)å®Œå…¨ç­‰äºèŠ‚ç‚¹nåˆ°ç»ˆç‚¹çš„ä»£ä»·ï¼Œåˆ™A*ç®—æ³•å°†æ‰¾åˆ°æœ€ä½³è·¯å¾„ï¼Œå¹¶ä¸”é€Ÿåº¦å¾ˆå¿«ã€‚å¯æƒœçš„æ˜¯ï¼Œå¹¶éæ‰€æœ‰åœºæ™¯ä¸‹éƒ½èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚å› ä¸ºåœ¨æ²¡æœ‰è¾¾åˆ°ç»ˆç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬å¾ˆéš¾ç¡®åˆ‡ç®—å‡ºè·ç¦»ç»ˆç‚¹è¿˜æœ‰å¤šè¿œã€‚</li><li>å¦‚æœh(n)çš„å€¼æ¯”èŠ‚ç‚¹nåˆ°ç»ˆç‚¹çš„ä»£ä»·è¦å¤§ï¼Œåˆ™A*ç®—æ³•ä¸èƒ½ä¿è¯æ‰¾åˆ°æœ€çŸ­è·¯å¾„ï¼Œä¸è¿‡æ­¤æ—¶ä¼šå¾ˆå¿«ã€‚</li><li>åœ¨å¦å¤–ä¸€ä¸ªæç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœh()nç›¸è¾ƒäºg(n)å¤§å¾ˆå¤šï¼Œåˆ™æ­¤æ—¶åªæœ‰h(n)äº§ç”Ÿæ•ˆæœï¼Œè¿™ä¹Ÿå°±å˜æˆäº†æœ€ä½³ä¼˜å…ˆæœç´¢ã€‚</li></ul><p>ç”±ä¸Šé¢è¿™äº›ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œé€šè¿‡è°ƒèŠ‚å¯å‘å‡½æ•°æˆ‘ä»¬å¯ä»¥æ§åˆ¶ç®—æ³•çš„é€Ÿåº¦å’Œç²¾ç¡®åº¦ã€‚å› ä¸ºåœ¨ä¸€äº›æƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½æœªå¿…éœ€è¦æœ€çŸ­è·¯å¾„ï¼Œè€Œæ˜¯å¸Œæœ›èƒ½å¤Ÿå°½å¿«æ‰¾åˆ°ä¸€ä¸ªè·¯å¾„å³å¯ã€‚è¿™ä¹Ÿæ˜¯A*ç®—æ³•æ¯”è¾ƒçµæ´»çš„åœ°æ–¹ã€‚</p><p>å¯¹äºç½‘æ ¼å½¢å¼çš„å›¾ï¼Œæœ‰ä»¥ä¸‹è¿™äº›å¯å‘å‡½æ•°å¯ä»¥ä½¿ç”¨ï¼š</p><ul><li>å¦‚æœå›¾å½¢ä¸­åªå…è®¸æœä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ›¼å“ˆé¡¿è·ç¦»ã€‚</li><li>å¦‚æœå›¾å½¢ä¸­å…è®¸æœå…«ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¯¹è§’è·ç¦»ã€‚</li><li>å¦‚æœå›¾å½¢ä¸­å…è®¸æœä»»ä½•æ–¹å‘ç§»åŠ¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ¬§å‡ é‡Œå¾—è·ç¦»ã€‚</li></ul><p>å®Œæ•´A*ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">* åˆå§‹åŒ–open_setå’Œclose_setï¼›</span><br><span class="line">* å°†èµ·ç‚¹åŠ å…¥open_setä¸­ï¼Œå¹¶è®¾ç½®ä¼˜å…ˆçº§ä¸º0ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ï¼›</span><br><span class="line">* å¦‚æœopen_setä¸ä¸ºç©ºï¼Œåˆ™ä»open_setä¸­é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„èŠ‚ç‚¹nï¼š</span><br><span class="line">    * å¦‚æœèŠ‚ç‚¹nä¸ºç»ˆç‚¹ï¼Œåˆ™ï¼š</span><br><span class="line">        * ä»ç»ˆç‚¹å¼€å§‹é€æ­¥è¿½è¸ªparentèŠ‚ç‚¹ï¼Œä¸€ç›´è¾¾åˆ°èµ·ç‚¹ï¼›</span><br><span class="line">        * è¿”å›æ‰¾åˆ°çš„ç»“æœè·¯å¾„ï¼Œç®—æ³•ç»“æŸï¼›</span><br><span class="line">    * å¦‚æœèŠ‚ç‚¹nä¸æ˜¯ç»ˆç‚¹ï¼Œåˆ™ï¼š</span><br><span class="line">        * å°†èŠ‚ç‚¹nä»open_setä¸­åˆ é™¤ï¼Œå¹¶åŠ å…¥close_setä¸­ï¼›</span><br><span class="line">        * éå†èŠ‚ç‚¹næ‰€æœ‰çš„é‚»è¿‘èŠ‚ç‚¹ï¼š</span><br><span class="line">            * å¦‚æœé‚»è¿‘èŠ‚ç‚¹måœ¨close_setä¸­ï¼Œåˆ™ï¼š</span><br><span class="line">                * è·³è¿‡ï¼Œé€‰å–ä¸‹ä¸€ä¸ªé‚»è¿‘èŠ‚ç‚¹</span><br><span class="line">            * å¦‚æœé‚»è¿‘èŠ‚ç‚¹mä¹Ÿä¸åœ¨open_setä¸­ï¼Œåˆ™ï¼š</span><br><span class="line">                * è®¾ç½®èŠ‚ç‚¹mçš„parentä¸ºèŠ‚ç‚¹n</span><br><span class="line">                * è®¡ç®—èŠ‚ç‚¹mçš„ä¼˜å…ˆçº§</span><br><span class="line">                * å°†èŠ‚ç‚¹måŠ å…¥open_setä¸­</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è·¯å¾„è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è·¯å¾„è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEæ§åˆ¶ç‰©ä½“ç§»åŠ¨</title>
      <link href="/2025/07/20/UE%E6%8E%A7%E5%88%B6%E7%89%A9%E4%BD%93%E7%A7%BB%E5%8A%A8/"/>
      <url>/2025/07/20/UE%E6%8E%A7%E5%88%B6%E7%89%A9%E4%BD%93%E7%A7%BB%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–¹æ³•1ï¼šä½¿ç”¨-Lerp-çº¿æ€§æ’å€¼-Timeline-æ—¶é—´è½´"><a href="#æ–¹æ³•1ï¼šä½¿ç”¨-Lerp-çº¿æ€§æ’å€¼-Timeline-æ—¶é—´è½´" class="headerlink" title="æ–¹æ³•1ï¼šä½¿ç”¨ Lerp(çº¿æ€§æ’å€¼) + Timeline(æ—¶é—´è½´)"></a>æ–¹æ³•1ï¼šä½¿ç”¨ <code>Lerp</code>(çº¿æ€§æ’å€¼) + <code>Timeline</code>(æ—¶é—´è½´)</h1><blockquote><p>é€‚åˆæ§åˆ¶ç§»åŠ¨æ—¶é•¿å’Œæ›²çº¿æ•ˆæœ</p></blockquote><p>è¯¥æ–¹æ³•éœ€è¦ä¸‰ä¸ªå˜é‡ï¼š</p><ul><li><code>StartLocation</code>ï¼ˆVectorï¼‰ï¼šèµ·å§‹ä½ç½®</li><li><code>TargetLocation</code>ï¼ˆVectorï¼‰ï¼šç›®æ ‡ä½ç½®</li><li><code>MoveDuration</code>ï¼ˆFloatï¼‰ï¼šç§»åŠ¨æ—¶é•¿ï¼ˆç§’ï¼‰</li></ul><p>è®¾ç½®æ—¶é—´è½´ï¼š</p><ul><li>æ·»åŠ  <code>Timeline</code> ç»„ä»¶ï¼Œå‘½åä¸º <code>MoveTimeline</code>ã€‚</li><li>åœ¨æ—¶é—´è½´ä¸­æ·»åŠ  <strong>æµ®ç‚¹è½¨é“ï¼ˆFloat Trackï¼‰</strong>ï¼Œå‘½åä¸º <code>Alpha</code>ã€‚</li><li>ç¼–è¾‘æ›²çº¿ï¼š<code>0.0</code> ç§’æ—¶å€¼ä¸º <code>0.0</code>ï¼Œ<code>MoveDuration</code> ç§’æ—¶å€¼ä¸º <code>1.0</code>ï¼ˆå¯è°ƒæ•´æ›²çº¿å½¢çŠ¶æ§åˆ¶ç¼“åŠ¨æ•ˆæœï¼‰ã€‚</li></ul><p>è“å›¾é€»è¾‘ï¼šæˆ‘è¿™é‡Œä¸ºäº†æµ‹è¯•æ–¹ä¾¿ï¼Œç›´æ¥è®¾ç½®äº†ä¸‰ä¸ªå˜é‡çš„å€¼</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201795.png" alt="image-20250720113010057"></p><h1 id="æ–¹æ³•2ï¼šä½¿ç”¨-VInterp-To-å‘é‡æ’å€¼"><a href="#æ–¹æ³•2ï¼šä½¿ç”¨-VInterp-To-å‘é‡æ’å€¼" class="headerlink" title="æ–¹æ³•2ï¼šä½¿ç”¨ VInterp To(å‘é‡æ’å€¼)"></a>æ–¹æ³•2ï¼šä½¿ç”¨ <code>VInterp To</code>(å‘é‡æ’å€¼)</h1><blockquote><p>é€‚åˆæ¯ä¸€å¸§å¹³æ»‘ç§»åŠ¨ï¼Œæ— éœ€è®¾ç½®æ—¶é—´è½´ï¼Œéœ€è¦é…åˆEvent Tick ä¸€èµ·ä½¿ç”¨</p></blockquote><p>éœ€è¦ä¸¤ä¸ªå˜é‡ï¼š</p><ul><li><code>TargetLocation</code>ï¼ˆVectorï¼‰ï¼šç›®æ ‡ä½ç½®</li><li><code>InterpSpeed</code>ï¼ˆFloatï¼‰ï¼šæ’å€¼é€Ÿåº¦ï¼ˆæ¨è 5-10ï¼‰</li></ul><p>è“å›¾é€»è¾‘ï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201797.png" alt="image-20250720113301938"></p><h1 id="æ–¹æ³•3ï¼šä½¿ç”¨-MoveComponentTo-ç»„ä»¶å¹³æ»‘ç§»åŠ¨"><a href="#æ–¹æ³•3ï¼šä½¿ç”¨-MoveComponentTo-ç»„ä»¶å¹³æ»‘ç§»åŠ¨" class="headerlink" title="æ–¹æ³•3ï¼šä½¿ç”¨ MoveComponentTo(ç»„ä»¶å¹³æ»‘ç§»åŠ¨)"></a>æ–¹æ³•3ï¼šä½¿ç”¨ <code>MoveComponentTo</code>(ç»„ä»¶å¹³æ»‘ç§»åŠ¨)</h1><blockquote><p>æ³¨æ„ä½¿ç”¨æ­¤æ–¹æ³•ç§»åŠ¨çš„æ˜¯ç›¸å¯¹ä½ç½®</p></blockquote><p>è“å›¾é€»è¾‘ï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201798.png" alt="image-20250720113617663"></p><h1 id="å®ç°ç‰©ä½“åŒ€é€Ÿåˆ°è¾¾ä¸åŒé•¿åº¦çš„ç›®çš„åœ°"><a href="#å®ç°ç‰©ä½“åŒ€é€Ÿåˆ°è¾¾ä¸åŒé•¿åº¦çš„ç›®çš„åœ°" class="headerlink" title="å®ç°ç‰©ä½“åŒ€é€Ÿåˆ°è¾¾ä¸åŒé•¿åº¦çš„ç›®çš„åœ°"></a>å®ç°ç‰©ä½“åŒ€é€Ÿåˆ°è¾¾ä¸åŒé•¿åº¦çš„ç›®çš„åœ°</h1><blockquote><p>å®é™…ä¸Šæœ¬ä¾‹å­æ˜¯ç‰©ä½“æŒ‰ç…§æ ·æ¡çº¿ä¸Šçš„æ ·æ¡ç‚¹è¿›è¡Œç§»åŠ¨</p></blockquote><p>è®¾ç½®çš„å˜é‡ï¼š</p><ul><li><code>MoveSpeed</code>ï¼šç§»åŠ¨é€Ÿåº¦</li><li><code>StopThreshold</code>ï¼šè·ç¦»ç›®çš„åœ°å¤šè¿œå¯ä»¥åœæ­¢</li><li><code>TargetLocation</code>ï¼šç›®çš„åœ°</li><li><code>CurrentLocation</code>ï¼šå½“å‰ä½ç½®</li><li><code>isMoving</code>ï¼šæ˜¯å¦æ­£åœ¨ç§»åŠ¨</li><li><code>ToTarget</code>ï¼šå‰©ä½™æ–¹å‘å‘é‡ ï¼ˆ<code>TargetLocation - CurrentLocation</code>ï¼‰</li><li><code>VTarget</code>ï¼šå•ä½æ–¹å‘å‘é‡ï¼ˆ<code>Normalize(ToTarget)</code>ï¼‰</li><li><code>Distance</code>ï¼šè·ç¦»ç›®çš„åœ°çš„è·ç¦»ï¼ˆ<code>VSize(ToTarget)</code>ï¼‰</li></ul><p>å®ç°æ­¥éª¤ï¼š</p><ol><li><p>å¼€å§‹ç§»åŠ¨æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»åœ¨ç›®çš„åœ°ï¼šè‹¥å¦ï¼Œæ‰§è¡Œä¸‹é¢æ­¥éª¤ï¼›è‹¥æ˜¯ï¼Œä¸æ‰§è¡Œ</p></li><li><p>æ ¹æ®å½“å‰ä½ç½®å’Œç›®çš„åœ°ä½ç½®ï¼Œå¾—åˆ°å•ä½æ–¹å‘å‘é‡<code>VTarget</code></p></li><li><p>è®¡ç®—å½“å‰å¸§éœ€è¦ç§»åŠ¨çš„è·ç¦» <code>MoveEachDeltaSeconds</code>ï¼š<code>MoveSpeed * DeltaSeconds</code></p><ol><li>å¦‚æœå½“å‰ä½ç½®å’Œç›®æ ‡ä½ç½®å°äºæœ€å°æ­¥é•¿ï¼Œåˆ™ç›´æ¥ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®</li><li>å¦åˆ™å‘ç›®æ ‡å‰è¿›ä¸€æ­¥<code>CurrentLocation = CurrentLocation + VTarget * MoveEachDeltaSeconds</code></li></ol></li><li><p>å›åˆ°æ­¥éª¤ä¸€</p></li></ol><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201799.png" alt="image-20250720190527911"></p><p>BoxMoveå‡½æ•°</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201800.png" alt="image-20250720190618495"></p><h1 id="é™„åŠ ï¼šå®ç°ç‰©ä½“æŒ‰ç…§æ ·æ¡çº¿ï¼ˆéæ ·æ¡ç‚¹ï¼‰è¿›è¡Œç§»åŠ¨"><a href="#é™„åŠ ï¼šå®ç°ç‰©ä½“æŒ‰ç…§æ ·æ¡çº¿ï¼ˆéæ ·æ¡ç‚¹ï¼‰è¿›è¡Œç§»åŠ¨" class="headerlink" title="é™„åŠ ï¼šå®ç°ç‰©ä½“æŒ‰ç…§æ ·æ¡çº¿ï¼ˆéæ ·æ¡ç‚¹ï¼‰è¿›è¡Œç§»åŠ¨"></a>é™„åŠ ï¼šå®ç°ç‰©ä½“æŒ‰ç…§æ ·æ¡çº¿ï¼ˆéæ ·æ¡ç‚¹ï¼‰è¿›è¡Œç§»åŠ¨</h1><h2 id="è“å›¾é€»è¾‘ï¼š"><a href="#è“å›¾é€»è¾‘ï¼š" class="headerlink" title="è“å›¾é€»è¾‘ï¼š"></a>è“å›¾é€»è¾‘ï¼š</h2><p>æ—¶é—´è½´å‚ç…§ä¸Šè¿°æ–¹æ³•1è®¾ç½®</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201801.png" alt="image-20250720190832764"></p><p>è§¦å‘å‡½æ•°</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201802.png" alt="image-20250720190954965"></p><h2 id="ä½¿ç”¨UEC-å®ç°"><a href="#ä½¿ç”¨UEC-å®ç°" class="headerlink" title="ä½¿ç”¨UEC++å®ç°"></a>ä½¿ç”¨UEC++å®ç°</h2><p>UEC++å®ç°æ—¶é—´è½´</p><ol><li>åˆ›å»ºä¸€ä¸ªæ—¶é—´è½´ç»„ä»¶</li><li>ç»‘å®šä¸€ä¸ªæµ®ç‚¹æ›²çº¿ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰ï¼Œç”¨äºæ§åˆ¶æ—¶é—´è½´çš„å˜åŒ–</li><li>ç»‘å®šæ—¶é—´è½´æ›´æ–°å’Œç»“æŸçš„å§”æ‰˜</li><li>å®ç°å„ä¸ªå‡½æ•°å†…çš„ä¸åŒéœ€æ±‚</li></ol><p>åˆ›å»ºä¸€ä¸ªæµ®ç‚¹æ›²çº¿ï¼Œå†…éƒ¨è®¾ç½®åŒè“å›¾åˆ›å»ºæ—¶é—´è½´çš„æµ®ç‚¹æ›²çº¿è®¾ç½®</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507251201803.png" alt="image-20250721151819659"></p><p><code>MyTimeLine.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fill out your copyright notice in the Description page of Project Settings.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Components/TimelineComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Actor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyTimeLine.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam</span>(FOnTimelineUpdateDelegate, <span class="type">float</span>, Alpha);</span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ASTAR_TEST2_API</span> AMyTimeLine : <span class="keyword">public</span> AActor</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// Sets default values for this actor&#x27;s properties</span></span><br><span class="line"><span class="built_in">AMyTimeLine</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called every frame</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´è½´ç»„ä»¶</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(VisibleAnywhere,BlueprintReadWrite, Category = <span class="string">&quot;Timeline&quot;</span>)</span><br><span class="line">UTimelineComponent* MyTimeline;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ®ç‚¹æ›²çº¿ï¼ˆç”¨äºé©±åŠ¨æ•°å€¼å˜åŒ–ï¼‰</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(BlueprintReadWrite,EditAnywhere, Category = <span class="string">&quot;Timeline&quot;</span>)</span><br><span class="line">UCurveFloat* FloatCurve;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´è½´æ›´æ–°äº‹ä»¶</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(BlueprintAssignable, Category = <span class="string">&quot;Timeline&quot;</span>)</span><br><span class="line">FOnTimelineUpdateDelegate FOnTimelineUpdate;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´è½´æ›´æ–°å›è°ƒ</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnTimelineUpdate</span><span class="params">(<span class="type">float</span> Value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´è½´å®Œæˆå›è°ƒ</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnTimelineFinished</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶è½¨é“å›è°ƒ</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnTimelineEvent</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æ’­æ”¾é€Ÿç‡</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Timeline&quot;</span>)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetPlayRate</span><span class="params">(<span class="type">float</span> NewRate)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ§åˆ¶å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PlayTimeline</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="comment">// Called when the game starts or when spawned</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// å§”æ‰˜ç»‘å®š</span></span><br><span class="line">FOnTimelineFloat UpdateFunction;</span><br><span class="line">FOnTimelineEvent FinishedFunction;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>MyTimeLine.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fill out your copyright notice in the Description page of Project Settings.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyTimeLine.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Sets default values</span></span><br><span class="line">AMyTimeLine::<span class="built_in">AMyTimeLine</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don&#x27;t need it.</span></span><br><span class="line">PrimaryActorTick.bCanEverTick = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ—¶é—´è½´ç»„ä»¶</span></span><br><span class="line">MyTimeline = <span class="built_in">CreateDefaultSubobject</span>&lt;UTimelineComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;MyTimelineComponent&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å§”æ‰˜</span></span><br><span class="line">UpdateFunction.<span class="built_in">BindUFunction</span>(<span class="keyword">this</span>, <span class="built_in">FName</span>(<span class="string">&quot;OnTimelineUpdate&quot;</span>));</span><br><span class="line">FinishedFunction.<span class="built_in">BindUFunction</span>(<span class="keyword">this</span>, <span class="built_in">FName</span>(<span class="string">&quot;OnTimelineFinished&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡ç‚¹ï¼Œè¦åœ¨æ­¤å¤„ç»‘å®šcurve</span></span><br><span class="line"><span class="function"><span class="type">static</span> ConstructorHelpers::FObjectFinder&lt;UCurveFloat&gt; <span class="title">CurveAsset</span><span class="params">(TEXT(<span class="string">&quot;CurveFloat&#x27;/Game/BP/TimeLineCurve.TimeLineCurve&#x27;&quot;</span>))</span></span>;</span><br><span class="line"><span class="keyword">if</span> (CurveAsset.<span class="built_in">Succeeded</span>()) FloatCurve = CurveAsset.Object;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called when the game starts or when spawned</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šæ—¶é—´è½´æ›²çº¿</span></span><br><span class="line"><span class="keyword">if</span> (FloatCurve) &#123;</span><br><span class="line">MyTimeline-&gt;<span class="built_in">AddInterpFloat</span>(FloatCurve, UpdateFunction);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;FloatCurveï¼Œå­˜åœ¨&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šå®Œæˆäº‹ä»¶</span></span><br><span class="line">MyTimeline-&gt;<span class="built_in">SetTimelineFinishedFunc</span>(FinishedFunction);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called every frame</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">Tick</span>(DeltaTime);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é©±åŠ¨æ—¶é—´è½´æ›´æ–°,OnTimelineUpdateå¾—åˆ°æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (MyTimeline-&gt;<span class="built_in">IsPlaying</span>()) &#123;</span><br><span class="line">MyTimeline-&gt;<span class="built_in">TickComponent</span>(DeltaTime, LEVELTICK_TimeOnly, <span class="literal">nullptr</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::OnTimelineUpdate</span><span class="params">(<span class="type">float</span> Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// åœ¨æ­¤å¤„å®ç°åŸºäºæ›²çº¿å€¼çš„é€»è¾‘</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å§”æ‰˜ï¼Œæ¥å®ç°æ¯æ¬¡æ›´æ–°æ—¶ï¼Œæ‰§è¡Œé€»è¾‘</span></span><br><span class="line">FOnTimelineUpdate.<span class="built_in">Broadcast</span>(Value);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Timeline Value: %f&quot;</span>), Value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::OnTimelineFinished</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Timeline Finished!&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::OnTimelineEvent</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Timeline Event Triggered!&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::SetPlayRate</span><span class="params">(<span class="type">float</span> NewRate)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (MyTimeline)</span><br><span class="line">&#123;</span><br><span class="line">MyTimeline-&gt;<span class="built_in">SetPlayRate</span>(NewRate);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyTimeLine::PlayTimeline</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (MyTimeline) MyTimeline-&gt;<span class="built_in">Play</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‰©ä½™éƒ¨åˆ†å®ç°ï¼š</p><p><code>BoxMove.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ASpine</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">USplineComponent</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ASTAR_TEST2_API</span> ABoxMove : <span class="keyword">public</span> AActor</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// Sets default values for this actor&#x27;s properties</span></span><br><span class="line"><span class="built_in">ABoxMove</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called every frame</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MoveBySpline</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">HandleTimelineUpdate</span><span class="params">(<span class="type">float</span> Alpha)</span></span>;</span><br><span class="line"></span><br><span class="line">AMyTimeLine* TimelineActor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="comment">// Called when the game starts or when spawned</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">USplineComponent* SplineComp ;</span><br><span class="line"></span><br><span class="line">ASpine* SpineRef = <span class="literal">nullptr</span> ;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>BoxMove.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sets default values</span></span><br><span class="line">ABoxMove::<span class="built_in">ABoxMove</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don&#x27;t need it.</span></span><br><span class="line">PrimaryActorTick.bCanEverTick = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called when the game starts or when spawned</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ABoxMove::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called every frame</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ABoxMove::Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">Tick</span>(DeltaTime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ABoxMove::MoveBySpline</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// è·å–æ—¶é—´è½´Actorå¼•ç”¨</span></span><br><span class="line">TimelineActor = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">SpawnActor</span>&lt;AMyTimeLine&gt;();</span><br><span class="line"><span class="keyword">if</span> (!TimelineActor) <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;TimelineActorä¸å­˜åœ¨&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (TimelineActor)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// ç»‘å®šå§”æ‰˜</span></span><br><span class="line">TimelineActor -&gt;FOnTimelineUpdate.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;ABoxMove::HandleTimelineUpdate);</span><br><span class="line"><span class="comment">// è®¾ç½®æ’­æ”¾é€Ÿåº¦</span></span><br><span class="line">TimelineActor-&gt;<span class="built_in">SetPlayRate</span>(<span class="number">0.2f</span>);</span><br><span class="line"><span class="comment">// æ’­æ”¾æ—¶é—´è½´</span></span><br><span class="line">TimelineActor-&gt;<span class="built_in">PlayTimeline</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;ASpine&gt; <span class="built_in">It</span>(<span class="built_in">GetWorld</span>()); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">SpineRef = *It;</span><br><span class="line">&#125;</span><br><span class="line">SplineComp = SpineRef -&gt; <span class="built_in">FindComponentByClass</span>&lt;USplineComponent&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ABoxMove::HandleTimelineUpdate</span><span class="params">(<span class="type">float</span> Alpha)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">float</span> SplineLength = SplineComp-&gt;<span class="built_in">GetSplineLength</span>();</span><br><span class="line"><span class="type">double</span> Lerp = UKismetMathLibrary::<span class="built_in">Lerp</span>(<span class="number">0.0f</span>, SplineLength, Alpha);</span><br><span class="line">FVector LocationAtDistanceAlongSpline = SplineComp -&gt; <span class="built_in">GetLocationAtDistanceAlongSpline</span>(Lerp, ESplineCoordinateSpace::World);</span><br><span class="line">LocationAtDistanceAlongSpline += <span class="built_in">FVector</span>(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">25.0f</span>);</span><br><span class="line"><span class="built_in">SetActorLocation</span>(LocationAtDistanceAlongSpline);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEå§”æ‰˜çš„ä½¿ç”¨</title>
      <link href="/2025/07/19/UE%E5%A7%94%E6%89%98%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/07/19/UE%E5%A7%94%E6%89%98%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://www.bilibili.com/opus/487153796512814695?spm_id_from=333.1391.0.0">Delegate(å§”æ‰˜)</a></p><p><a href="https://www.bilibili.com/video/BV14p4y1a7nj/?share_source=copy_web&vd_source=28872efb6fb22af36f6f58328658f11a">UE4 C++è¿›é˜¶è¿›è¡Œä¸­</a> </p><p><a href="https://www.bilibili.com/video/BV1Xp4y1e79N/?spm_id_from=333.788.top_right_bar_window_custom_collection.content.click&vd_source=6d070e5f2a4f28fd128440195fce3d9a">UE4ä»£ç†ä¸Š</a></p><p><a href="https://zhuanlan.zhihu.com/p/460092901">ä¸€æ–‡ç†è§£é€UEå§”æ‰˜Delegate</a></p><p><a href="https://dev.epicgames.com/documentation/zh-cn/unreal-engine/delegates-and-lambda-functions-in-unreal-engine">UEå®˜æ–¹æ–‡æ¡£</a></p></blockquote><h1 id="å§”æ‰˜ç®€ä»‹"><a href="#å§”æ‰˜ç®€ä»‹" class="headerlink" title="å§”æ‰˜ç®€ä»‹"></a>å§”æ‰˜ç®€ä»‹</h1><p>å§”æ‰˜æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å‡½æ•°æŒ‡é’ˆçš„å°è£…</strong>ï¼Œå®ƒå¯ä»¥ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œä¹‹ååœ¨æŸä¸ªæ—¶åˆ»è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><p>ä¸»è¦ä½œç”¨æ˜¯å°†å®æ—¶ç›‘æµ‹çš„é€»è¾‘è½¬æ¢ä¸ºè§¦å‘å¼é€»è¾‘ï¼ŒåŒæ—¶é™ä½ä»£ç ä¹‹é—´çš„è€¦åˆæ€§</p><p>å¸¸ç”¨çš„å§”æ‰˜æœ‰å•æ’­ã€å¤šæ’­ã€åŠ¨æ€å¤šæ’­å’Œäº‹ä»¶ç­‰ï¼›</p><p>ä¸Šè¿°å§”æ‰˜çš„æ¦‚å¿µä¸åœ¨èµ˜è¿°ï¼Œè¯¦ç»†è¯·å‚è€ƒ<a href="https://dev.epicgames.com/documentation/zh-cn/unreal-engine/delegates-and-lambda-functions-in-unreal-engine">UEå®˜æ–¹æ–‡æ¡£</a>å’Œ<a href="https://zhuanlan.zhihu.com/p/460092901">ä¸€æ–‡ç†è§£é€UEå§”æ‰˜Delegate</a>ä»¥åŠä¸Šé¢æåŠçš„è§†é¢‘è¿æ¥</p><h1 id="å§”æ‰˜çš„ä½¿ç”¨"><a href="#å§”æ‰˜çš„ä½¿ç”¨" class="headerlink" title="å§”æ‰˜çš„ä½¿ç”¨"></a>å§”æ‰˜çš„ä½¿ç”¨</h1><blockquote><p>ç”±äºæ¯ç§å§”æ‰˜çš„ä½¿ç”¨æ–¹æ³•å‡ ä¹ä¸€æ ·ï¼Œåœ¨æ­¤åªä½¿ç”¨å•æ’­ä½œä¸ºä»‹ç»å§”æ‰˜çš„ä½¿ç”¨ã€‚</p></blockquote><h2 id="å§”æ‰˜ä½¿ç”¨çš„åŸç†"><a href="#å§”æ‰˜ä½¿ç”¨çš„åŸç†" class="headerlink" title="å§”æ‰˜ä½¿ç”¨çš„åŸç†"></a>å§”æ‰˜ä½¿ç”¨çš„åŸç†</h2><p>ä¸‹å›¾æ˜¯å§”æ‰˜çš„æ•´ä¸ªäº‹ä»¶ç±»å‹</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507191901914.png" alt="deepseek_mermaid_20250719_206cfb"></p><p>ä¸‹å›¾æ˜¯ä½¿ç”¨å§”æ‰˜çš„ä¸‰ä¸ªåŸºæœ¬ç±»</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507191901916.png" alt="image-20250719184658679"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨å§”æ‰˜å’Œä¸ä½¿ç”¨å§”æ‰˜çš„åŒºåˆ«ï¼Œä½¿ç”¨å§”æ‰˜å¯ä»¥é™ä½äº‹ä»¶è§¦å‘ç±»å’Œè¢«è°ƒç”¨ç±»ä¹‹é—´çš„è€¦åˆï¼Œå°†è¿™ä¸¤ä¸ªç±»çš„æ“ä½œæ”¾åœ¨å§”æ‰˜åˆ¶é€ ç±»é‡Œé¢è¿›è¡Œæ“ä½œï¼Œè¿™å¯¹äºå¤§å‹é¡¹ç›®ååˆ†é‡è¦ã€‚</p><p>è¿™é‡Œåšä¸ªæ¯”å–»å°±æ˜¯ï¼šä½ ç‚¹äº†ä¸€å®¶é¥­åº—çš„åƒé¥­ï¼Œä½ è¦åƒçš„é¥­æ±‡æŠ¥ç»™é¥­åº—ï¼Œé¥­åº—æŒ‡å®šå¨å¸ˆåšé¥­å¹¶å°†é¥­ç«¯ç»™ä½ ã€‚è¿™é‡Œçš„ä½ å°±æ˜¯äº‹ä»¶è§¦å‘ç±»ï¼Œé¥­åº—å°±æ˜¯å§”æ‰˜åˆ¶é€ ç±»ï¼Œå¨å¸ˆå°±æ˜¯è¢«è°ƒç”¨ç±»ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><blockquote><p>è¿™é‡Œçš„ä»£ç ä¿®æ”¹äº† <a href="https://wuwei1636.github.io/2025/06/26/UEC++%E5%AE%9E%E7%8E%B0%E4%BA%BA%E7%89%A9%E6%8C%89%E7%85%A7A%E6%98%9F%E8%B7%AF%E7%BA%BF%E7%A7%BB%E5%8A%A8/">UEC++å®ç°äººç‰©æŒ‰ç…§Aæ˜Ÿè·¯çº¿ç§»åŠ¨</a> é‡Œé¢çš„ç®—æ³•ï¼Œæœ‰éœ€è¦å¯ä»¥å»å‚è€ƒ</p></blockquote><h3 id="äº‹ä»¶è§¦å‘ç±»"><a href="#äº‹ä»¶è§¦å‘ç±»" class="headerlink" title="äº‹ä»¶è§¦å‘ç±»"></a>äº‹ä»¶è§¦å‘ç±»</h3><p><code>AStar_test2Character.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å§”æ‰˜</span></span><br><span class="line">UMyDelegateMaker* Maker;</span><br></pre></td></tr></table></figure><p><code>AStar_test2Character.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::SpineSet</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line"><span class="keyword">if</span> (Maker == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">Maker = <span class="built_in">NewObject</span>&lt;UMyDelegateMaker&gt;();</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// ç»‘å®šå¹¶æ‰§è¡Œå§”æ‰˜</span></span><br><span class="line">Maker-&gt;<span class="built_in">BindSpineSet</span>(World).<span class="built_in">Execute</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::AIMove</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æŒ‰ä¸‹3ï¼Œå¼€å§‹æ‰§è¡ŒAIMOVE&quot;</span>));</span><br><span class="line">UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line"><span class="keyword">if</span> (!World) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Maker == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">Maker = <span class="built_in">NewObject</span>&lt;UMyDelegateMaker&gt;();</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// ç»‘å®šå¹¶æ‰§è¡Œå§”æ‰˜</span></span><br><span class="line">Maker-&gt;<span class="built_in">BindAIMove</span>(World).<span class="built_in">Execute</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å§”æ‰˜åˆ¶é€ ç±»ï¼ˆé‡ç‚¹ï¼‰"><a href="#å§”æ‰˜åˆ¶é€ ç±»ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="å§”æ‰˜åˆ¶é€ ç±»ï¼ˆé‡ç‚¹ï¼‰"></a>å§”æ‰˜åˆ¶é€ ç±»ï¼ˆé‡ç‚¹ï¼‰</h3><p><code>MyDelegateMaker.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fill out your copyright notice in the Description page of Project Settings.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;UObject/NoExportTypes.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyDelegateMaker.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ å§”æ‰˜/ä»£ç† ç±»å‹</span></span><br><span class="line"><span class="built_in">DECLARE_DELEGATE</span>(FDelegateNoParam)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ASTAR_TEST2_API</span> UMyDelegateMaker : <span class="keyword">public</span> UObject</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//å®šä¹‰å§”æ‰˜å˜é‡</span></span><br><span class="line">FDelegateNoParam Delegate;</span><br><span class="line">FDelegateNoParam Delegate_AIMove;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šå§”æ‰˜å‡½æ•°</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// ç»‘å®šæ ·æ¡ç‚¹è®¾ç½® ç”±äºå§”æ‰˜ç±»å¹¶ä¸å­˜åœ¨äºçœŸå®è“å›¾ä¸–ç•Œä¸­ï¼Œæ•…å…¶éœ€è¦å¤–éƒ¨ä¼ å…¥çš„world</span></span><br><span class="line"><span class="function">FDelegateNoParam&amp; <span class="title">BindSpineSet</span><span class="params">(UWorld*  World)</span></span>;</span><br><span class="line"><span class="comment">// ç»‘å®šAIç§»åŠ¨</span></span><br><span class="line"><span class="function">FDelegateNoParam&amp; <span class="title">BindAIMove</span><span class="params">(UWorld*  World)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ASpine</span>* USpineRef = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AMyAIController</span>* AIControllerRef = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>MyDelegateMaker.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyDelegateMaker.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;EngineUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAIController.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Spine.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Kismet/GameplayStatics.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">FDelegateNoParam&amp; <span class="title">UMyDelegateMaker::BindSpineSet</span><span class="params">(UWorld*  World)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// è‹¥å·²ç»ç»‘å®šï¼Œåˆ™è§£ç»‘</span></span><br><span class="line"><span class="keyword">if</span> (Delegate.<span class="built_in">IsBound</span>())</span><br><span class="line">&#123;</span><br><span class="line">Delegate.<span class="built_in">Unbind</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// </span></span><br><span class="line"><span class="keyword">if</span> (USpineRef == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(World == <span class="literal">nullptr</span>)  &#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;World is nullptr&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;ASpine&gt; <span class="built_in">It</span>(World); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">USpineRef = *It;</span><br><span class="line"><span class="comment">// å¯æ·»åŠ ifåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// ç»‘å®šå‡½æ•°</span></span><br><span class="line">Delegate.<span class="built_in">BindUObject</span>(USpineRef, &amp;ASpine::setSpine);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Delegate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">FDelegateNoParam&amp; <span class="title">UMyDelegateMaker::BindAIMove</span><span class="params">(UWorld* World)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (Delegate.<span class="built_in">IsBound</span>())</span><br><span class="line">&#123;</span><br><span class="line">Delegate.<span class="built_in">Unbind</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (AIControllerRef == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (World)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;AMyAIController&gt; <span class="built_in">It</span>(World); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">AIControllerRef = *It;</span><br><span class="line">&#125;</span><br><span class="line">Delegate_AIMove.<span class="built_in">BindUObject</span>(AIControllerRef, &amp;AMyAIController::goAIMove);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Delegate_AIMove;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¢«è°ƒç”¨ç±»"><a href="#è¢«è°ƒç”¨ç±»" class="headerlink" title="è¢«è°ƒç”¨ç±»"></a>è¢«è°ƒç”¨ç±»</h3><blockquote><p>è¯¥ç±»ä¸­çš„æ–¹æ³•ä¸»è¦æ˜¯ä¾æ®Aæ˜Ÿè·¯çº¿åŠ¨æ€ç”Ÿæˆæ ·æ¡ç‚¹ï¼Œå¯ä»¥æ è¿‡ä¸çœ‹ï¼Œæ³¨æ„ä½¿ç”¨æ–¹æ³•å³å¯</p></blockquote><p><code>Spine.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ ·æ¡ç‚¹è·¯å¾„</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setSpine</span><span class="params">()</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure><p><code>Spine.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ ·æ¡ç‚¹è·¯å¾„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ASpine::setSpine</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ·æ¡ç»„ä»¶</span></span><br><span class="line">USplineComponent* SplineComp = <span class="keyword">this</span> -&gt; <span class="built_in">FindComponentByClass</span>&lt;USplineComponent&gt;();</span><br><span class="line"><span class="keyword">if</span> (!SplineComp) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ·æ¡ç‚¹æ•°ç»„ä¸­æ‰€æœ‰ç‚¹çš„ä½ç½®</span></span><br><span class="line">APlayerController* PlayerController = UGameplayStatics::<span class="built_in">GetPlayerController</span>(World, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (!PlayerController) <span class="keyword">return</span>;</span><br><span class="line">AAStar_test2Character* Character = <span class="built_in">Cast</span>&lt;AAStar_test2Character&gt;(PlayerController-&gt;<span class="built_in">GetPawn</span>());</span><br><span class="line"><span class="keyword">if</span> (!Character) <span class="keyword">return</span>;</span><br><span class="line">TArray&lt;FVector&gt; Vectors = Character-&gt;AllPositions;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ‰€æœ‰ä½ç½®å¹¶æ·»åŠ æ ·æ¡ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> FVector&amp; Position : Vectors)</span><br><span class="line">&#123;</span><br><span class="line">SplineComp-&gt;<span class="built_in">AddSplinePoint</span>(Position, ESplineCoordinateSpace::World);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ ·æ¡</span></span><br><span class="line">SplineComp-&gt;<span class="built_in">UpdateSpline</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UMGåœ¨UEC++çš„ä½¿ç”¨</title>
      <link href="/2025/07/09/UMG%E5%9C%A8UEC++%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/07/09/UMG%E5%9C%A8UEC++%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://www.bilibili.com/video/BV164411Y732/?p=61&share_source=copy_web&vd_source=28872efb6fb22af36f6f58328658f11a">ã€è™šå¹»4ã€‘UE4åˆå­¦è€…ç³»åˆ—æ•™ç¨‹åˆé›†-å…¨ä¸­æ–‡æ–°æ‰‹å…¥é—¨æ•™ç¨‹</a></p><p><a href="https://zhuanlan.zhihu.com/p/30867943">UMGä½¿ç”¨å®ä¾‹(C++)</a></p><p><a href="https://www.bilibili.com/opus/812644091996143669">UEC++å¦‚ä½•ç»‘å®šUIäº‹ä»¶</a></p><p><a href="https://blog.csdn.net/qq_45617648/article/details/131585950#:~:text=%E6%9C%AC%E6%96%87%E4%BB%8B%E7%BB%8D%E4%BA%86%E5%A6%82%E4%BD%95%E5%9C%A8C%2B%2B%E4%B8%AD%E4%B8%8EUnrealEngine%E7%9A%84UMG%EF%BC%88%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E8%93%9Dprints%EF%BC%89%E7%B3%BB%E7%BB%9F%E4%BA%A4%E4%BA%92%EF%BC%8C%E5%8C%85%E6%8B%AC%E6%8E%A7%E4%BB%B6%E7%9A%84%E7%BB%91%E5%AE%9A%E3%80%81%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E3%80%81%E5%A7%94%E6%89%98%E8%B0%83%E7%94%A8%E4%BB%A5%E5%8F%8A%E6%8B%96%E6%8B%BD%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%AE%9E%E7%8E%B0%E3%80%82%20%E5%BC%80%E5%8F%91%E8%80%85%E9%9C%80%E8%A6%81%E5%9C%A8C%2B%2B%E4%B8%AD%E4%B8%BAUMG%E8%AE%BE%E8%AE%A1%E7%9A%84UI%E6%8E%A7%E4%BB%B6%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E5%B9%B6%E7%A1%AE%E4%BF%9D%E5%90%8D%E5%AD%97%E5%8C%B9%E9%85%8D%EF%BC%8C%E4%BB%A5%E4%BE%BF%E4%BA%8EUMG%E7%9A%84%E7%BB%A7%E6%89%BF%E5%92%8C%E7%BB%91%E5%AE%9A%E3%80%82,%E6%AD%A4%E5%A4%96%EF%BC%8C%E6%96%87%E7%AB%A0%E8%BF%98%E5%B1%95%E7%A4%BA%E4%BA%86%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E5%92%8C%E5%93%8D%E5%BA%94%E6%8E%A7%E4%BB%B6%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%A6%82%E6%8C%89%E9%92%AE%E7%9A%84%E7%82%B9%E5%87%BB%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8%E5%A7%94%E6%89%98%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E3%80%82%20%E6%9C%80%E5%90%8E%EF%BC%8C%E6%96%87%E4%B8%AD%E6%8F%90%E5%88%B0%E4%BA%86%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BAWidget%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%A2%9E%E5%BC%BA%E4%BA%86UI%E7%9A%84%E7%81%B5%E6%B4%BB%E6%80%A7%E3%80%82">UMGåœ¨UEC++ä¸­çš„åŸºæœ¬ä½¿ç”¨ä¸UIçš„æ‹–æ‹½äº‹ä»¶</a></p><p><a href="https://blog.csdn.net/jfengsky/article/details/130467032">UE5 Enhanced Input è¾“å…¥å¢å¼ºç³»ç»Ÿå­¦ä¹ </a></p><p><a href="https://www.cnblogs.com/zxc0210/p/18338995">UE5å¢å¼ºè¾“å…¥ç³»ç»Ÿå®ç°ç»„åˆæŒ‰é”®</a></p></blockquote><h1 id="UMGæŒ‰é’®äº‹ä»¶å®ç°"><a href="#UMGæŒ‰é’®äº‹ä»¶å®ç°" class="headerlink" title="UMGæŒ‰é’®äº‹ä»¶å®ç°"></a>UMGæŒ‰é’®äº‹ä»¶å®ç°</h1><h2 id="UIç»‘å®š"><a href="#UIç»‘å®š" class="headerlink" title="UIç»‘å®š"></a>UIç»‘å®š</h2><blockquote><p>åœ¨C++ä¸­è®¾ç½®UMGçš„æ ·å¼å¹¶ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨è“å›¾ä¸­è®¾ç½®æ ·å¼ï¼Œç„¶ååœ¨C++ä¸­å®ç°æ–¹æ³•</p><p>åˆ›å»ºä¸€ä¸ªç»§æ‰¿äº<code>UserWidget</code>çš„C++ç±»å’Œè“å›¾ç±»</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507091151834.png" alt="image-20250709113653007"></p><p>ç„¶åæ ¹æ®åˆ›å»ºå¥½çš„C++ç±»ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„è“å›¾ç±»</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507091151836.png" alt="image-20250709113816293"></p><blockquote><p>[!Warning]</p><p>åœ¨è“å›¾ç±»ä¸­ç¼–è¾‘å¥½å¯¹åº”çš„æ ·å¼ï¼Œæ³¨æ„å·¦ä¾§æŒ‰é’®çš„å‘½åï¼Œè¦ä¸åœ¨C++ä¸­çš„å˜é‡åç›¸åŒ</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507091151838.png" alt="image-20250709114035367"></p><p><code>MyUserWidget.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæ—¶å™¨å¥æŸ„</span></span><br><span class="line">FTimerHandle TimerHandle;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UPROPERTY</span>(meta=(BindWidget))</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UButton</span>* Button_Start;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UPROPERTY</span>(meta=(BindWidget))</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UButton</span>* Button_Set;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UPROPERTY</span>(meta=(BindWidget))</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UButton</span>* Button_Quit;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NativeConstruct</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Delay</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnClickedStart</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnClickedQuit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AAStar_test2Character</span>* player;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">APlayerController</span>* FirstPlayerController;</span><br></pre></td></tr></table></figure><p>åœ¨cppä¸­ç»‘å®šæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶<code>UMyUserWidget.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyUserWidget::NativeConstruct</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">NativeConstruct</span>();</span><br><span class="line"></span><br><span class="line">Button_Start-&gt;OnClicked.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;UMyUserWidget::OnClickedStart);</span><br><span class="line">Button_Quit-&gt;OnClicked.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;UMyUserWidget::OnClickedQuit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŒ‰é’®çš„ç‚¹å‡»æ–¹æ³•å®ç°"><a href="#æŒ‰é’®çš„ç‚¹å‡»æ–¹æ³•å®ç°" class="headerlink" title="æŒ‰é’®çš„ç‚¹å‡»æ–¹æ³•å®ç°"></a>æŒ‰é’®çš„ç‚¹å‡»æ–¹æ³•å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyUserWidget::OnClickedStart</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">RemoveFromParent</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// find player who`s type is AAStar_test2Character</span></span><br><span class="line">player = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;AAStar_test2Character&gt; <span class="built_in">It</span>(<span class="built_in">GetWorld</span>()); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">player = *It;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›trueï¼Œæ˜¯åŒä¸€ä¸ªç±»å‹</span></span><br><span class="line"><span class="keyword">if</span> (player-&gt;<span class="built_in">IsA</span>(AAStar_test2Character::<span class="built_in">StaticClass</span>())) <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œ%s&quot;</span>),*player-&gt;<span class="built_in">GetName</span>());</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (player &amp;&amp; player-&gt;<span class="built_in">GetName</span>().<span class="built_in">Contains</span>(<span class="string">&quot;BP_TopDownCharacter&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Found BP_TopDownCharacter: %s&quot;</span>), *player-&gt;<span class="built_in">GetName</span>());</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!player)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æœªæ‰¾åˆ°åä¸º BP_TopDownCharacter çš„ Actor&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;the type of player is : %s&quot;</span>), *player-&gt;<span class="built_in">GetName</span>());</span><br><span class="line"><span class="comment">// getPlayerController</span></span><br><span class="line">FirstPlayerController = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetFirstPlayerController</span>();</span><br><span class="line"></span><br><span class="line">FirstPlayerController-&gt;<span class="built_in">SetViewTargetWithBlend</span>(player, <span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetTimerManager</span>().<span class="built_in">SetTimer</span>(TimerHandle,<span class="keyword">this</span>,&amp;UMyUserWidget::Delay,<span class="number">1.0f</span>,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyUserWidget::Delay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;delay 1 second&quot;</span>));</span><br><span class="line">FirstPlayerController-&gt;<span class="built_in">Possess</span>(player);</span><br><span class="line">FirstPlayerController-&gt;<span class="built_in">SetShowMouseCursor</span>(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyUserWidget::OnClickedQuit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">UKismetSystemLibrary::<span class="built_in">QuitGame</span>(<span class="built_in">GetWorld</span>(), <span class="literal">nullptr</span>, EQuitPreference::Quit, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨å…³å¡è“å›¾ä¸­è®¾ç½®UMGçš„å‡ºç°"><a href="#åœ¨å…³å¡è“å›¾ä¸­è®¾ç½®UMGçš„å‡ºç°" class="headerlink" title="åœ¨å…³å¡è“å›¾ä¸­è®¾ç½®UMGçš„å‡ºç°"></a>åœ¨å…³å¡è“å›¾ä¸­è®¾ç½®UMGçš„å‡ºç°</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507091151839.png" alt="image-20250709114434619"></p><p>è®¾ç½®å¼€å§‹çš„æ‘„åƒå¤´ï¼Œåˆ›å»ºä¸€ä¸ªpawnç±»å‹çš„è“å›¾ï¼Œç„¶ååœ¨è“å›¾ä¸­ä»…æ”¾ç½®ä¸€ä¸ªæ‘„åƒæœºï¼Œæ”¾ç½®åœ¨ç›´æ¥ä¸­ï¼Œè®¾ç½®possesä¸ºplayer0å³å¯ã€‚å‚è€ƒ<a href="https://www.bilibili.com/video/BV164411Y732/?p=61&share_source=copy_web&vd_source=28872efb6fb22af36f6f58328658f11a">ã€è™šå¹»4ã€‘UE4åˆå­¦è€…ç³»åˆ—æ•™ç¨‹åˆé›†-å…¨ä¸­æ–‡æ–°æ‰‹å…¥é—¨æ•™ç¨‹</a></p><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507101718674.gif" alt="video_20250709_114940_edit"></p><h1 id="UIåŠ¨ç”»å’Œæš‚åœæ¸¸æˆ"><a href="#UIåŠ¨ç”»å’Œæš‚åœæ¸¸æˆ" class="headerlink" title="UIåŠ¨ç”»å’Œæš‚åœæ¸¸æˆ"></a>UIåŠ¨ç”»å’Œæš‚åœæ¸¸æˆ</h1><blockquote><p>ä¸ä¸ªUMGåŒç†ï¼Œåˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª <code>UserWidget</code>çš„C++ç±»ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„è“å›¾ç±»</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507101718676.png" alt="image-20250710164930325"></p><h2 id="æš‚åœUMGçš„é€»è¾‘å®ç°"><a href="#æš‚åœUMGçš„é€»è¾‘å®ç°" class="headerlink" title="æš‚åœUMGçš„é€»è¾‘å®ç°"></a>æš‚åœUMGçš„é€»è¾‘å®ç°</h2><p>Pause.h</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šæ—¶å™¨å¥æŸ„</span></span><br><span class="line">FTimerHandle TimerHandle;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šæŒ‰é’®</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(meta=(BindWidget))</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UButton</span>* Quit;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šæŒ‰é’®</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(meta=(BindWidget))</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UButton</span>* Continue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šåŠ¨ç”»</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(meta = (BindWidgetAnim), Transient)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UWidgetAnimation</span>* Appear;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NativeConstruct</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnClickedContinue</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnClickedQQuit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PlayTheAnimation</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PauseDelay</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AAStar_test2Character</span>* player;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">APlayerController</span>* FirstPlayerController;</span><br></pre></td></tr></table></figure><p>Pause.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">UPause::NativeConstruct</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">NativeConstruct</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Continue)</span><br><span class="line">Continue -&gt; OnClicked.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;UPause::OnClickedContinue);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Continue is not alive&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Quit)</span><br><span class="line">Quit -&gt; OnClicked.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;UPause::OnClickedQQuit);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Quit is not alive&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UPause::OnClickedContinue</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;è§¦å‘OnClickedContinue&quot;</span>));</span><br><span class="line">FirstPlayerController = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetFirstPlayerController</span>();</span><br><span class="line"><span class="comment">// FirstPlayerController -&gt; SetShowMouseCursor(false);</span></span><br><span class="line">FirstPlayerController -&gt; <span class="built_in">SetInputMode</span>(<span class="built_in">FInputModeGameOnly</span>());</span><br><span class="line">UGameplayStatics::<span class="built_in">SetGamePaused</span>(<span class="built_in">GetWorld</span>(),<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">PlayAnimation</span>(Appear, <span class="number">0.0f</span>, <span class="number">1</span>, EUMGSequencePlayMode::Reverse, <span class="number">0.75f</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetTimerManager</span>().<span class="built_in">SetTimer</span>(TimerHandle,<span class="keyword">this</span>,&amp;UPause::PauseDelay,<span class="number">0.75f</span>,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UPause::PauseDelay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">SetVisibility</span>(ESlateVisibility::Collapsed);</span><br><span class="line"><span class="built_in">StopAnimation</span>(Appear);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UPause::PlayTheAnimation</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// InAnimation, StartAtTime = 0.0f,NumLoopsToPlay = 1, EUMGSequencePlayMode::Type PlayMode = EUMGSequencePlayMode::Forward, float PlaybackSpeed = 1.0f, bool bRestoreState = false)</span></span><br><span class="line"><span class="built_in">PlayAnimation</span>(Appear, <span class="number">0.0f</span>, <span class="number">1</span>, EUMGSequencePlayMode::Forward, <span class="number">0.75f</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UPause::OnClickedQQuit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">UKismetSystemLibrary::<span class="built_in">QuitGame</span>(<span class="built_in">GetWorld</span>(), <span class="literal">nullptr</span>, EQuitPreference::Quit, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨playerControllerä¸­è®¾ç½®ç›¸å…³äº‹ä»¶"><a href="#åœ¨playerControllerä¸­è®¾ç½®ç›¸å…³äº‹ä»¶" class="headerlink" title="åœ¨playerControllerä¸­è®¾ç½®ç›¸å…³äº‹ä»¶"></a>åœ¨playerControllerä¸­è®¾ç½®ç›¸å…³äº‹ä»¶</h2><blockquote><p>ä¸»è¦åŒ…æ‹¬Widgetçš„åˆå§‹åŒ–å’Œé”®ç›˜äº‹ä»¶çš„ç»‘å®šå’Œè§¦å‘</p></blockquote><p>PlayerController.h </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»‘å®šæŒ‰é’®ä½¿ç”¨</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category=Input, meta=(AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">UInputAction* SetInputQAction;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºWidgetä½¿ç”¨</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">    TSubclassOf&lt;<span class="keyword">class</span> <span class="title class_">UPause</span>&gt; PauseWidgetClass;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>()</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">UPause</span>* PauseWidget;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    </span><br><span class="line"><span class="comment">// è®¾ç½®åˆå§‹åŒ–Widget</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetupPauseWidget</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹å‡»äº‹ä»¶è§¦å‘</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">OnPause</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>PlayerController.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2PlayerController::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// Call the base class  </span></span><br><span class="line">Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">SetupPauseWidget</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2PlayerController::SetupPauseWidget</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (PauseWidgetClass)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;PauseWidgetClasså­˜åœ¨&quot;</span>));</span><br><span class="line">PauseWidget = <span class="built_in">CreateWidget</span>&lt;UPause&gt;(<span class="keyword">this</span>, PauseWidgetClass);</span><br><span class="line"><span class="keyword">if</span> (PauseWidget)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;PauseWidgetå­˜åœ¨&quot;</span>));</span><br><span class="line">PauseWidget-&gt;<span class="built_in">AddToViewport</span>();</span><br><span class="line">PauseWidget-&gt;<span class="built_in">SetVisibility</span>(ESlateVisibility::Collapsed);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2PlayerController::OnPause</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æŒ‰Qï¼Œå¼€å§‹æ‰§è¡ŒPause&quot;</span>));</span><br><span class="line"><span class="type">bool</span> isPlaying = PauseWidget -&gt; <span class="built_in">IsAnimationPlaying</span>(PauseWidget-&gt;Appear);</span><br><span class="line"><span class="keyword">if</span> (!isPlaying)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æ²¡æœ‰æ’­æ”¾åŠ¨ç”»ï¼Œèµ°åŠ¨ç”»&quot;</span>));</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;%s&quot;</span>), *PauseWidget-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">PauseWidget -&gt; <span class="built_in">SetVisibility</span>(ESlateVisibility::Visible);</span><br><span class="line">PauseWidget -&gt; <span class="built_in">PlayTheAnimation</span>();</span><br><span class="line">APlayerController* FirstPlayerController = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetFirstPlayerController</span>();</span><br><span class="line"><span class="comment">// FirstPlayerController-&gt;SetShowMouseCursor(true);</span></span><br><span class="line">FirstPlayerController-&gt;<span class="built_in">SetInputMode</span>(<span class="built_in">FInputModeUIOnly</span>());</span><br><span class="line">UGameplayStatics::<span class="built_in">SetGamePaused</span>(<span class="built_in">GetWorld</span>(),<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šæš‚åœé”® Q</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2PlayerController::SetupInputComponent</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// set up gameplay key bindings</span></span><br><span class="line">Super::<span class="built_in">SetupInputComponent</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add Input Mapping Context</span></span><br><span class="line"><span class="keyword">if</span> (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::<span class="built_in">GetSubsystem</span>&lt;UEnhancedInputLocalPlayerSubsystem&gt;(<span class="built_in">GetLocalPlayer</span>()))</span><br><span class="line">&#123;</span><br><span class="line">Subsystem-&gt;<span class="built_in">AddMappingContext</span>(DefaultMappingContext, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set up action bindings</span></span><br><span class="line"><span class="keyword">if</span> (UEnhancedInputComponent* EnhancedInputComponent = <span class="built_in">Cast</span>&lt;UEnhancedInputComponent&gt;(InputComponent))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// ç»‘å®šæš‚åœé”® Q</span></span><br><span class="line">EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(SetInputQAction, ETriggerEvent::Started, <span class="keyword">this</span>, &amp;AAStar_test2PlayerController::OnPause);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemplateCharacter, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;&#x27;%s&#x27; Failed to find an Enhanced Input Component! This template is built to use the Enhanced Input system. If you intend to use the legacy system, then you will need to update this C++ file.&quot;</span>), *<span class="built_in">GetNameSafe</span>(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è“å›¾ä¸Šçš„è®¾ç½®"><a href="#è“å›¾ä¸Šçš„è®¾ç½®" class="headerlink" title="è“å›¾ä¸Šçš„è®¾ç½®"></a>è“å›¾ä¸Šçš„è®¾ç½®</h2><p>UIç•Œé¢çš„è®¾ç½®å‚è€ƒï¼š<a href="https://www.bilibili.com/video/BV164411Y732?spm_id_from=333.788.videopod.episodes&vd_source=6d070e5f2a4f28fd128440195fce3d9a&p=63">https://www.bilibili.com/video/BV164411Y732?spm_id_from=333.788.videopod.episodes&amp;vd_source=6d070e5f2a4f28fd128440195fce3d9a&amp;p=63</a></p><p>å› ä¸ºä½¿ç”¨çš„æ˜¯UE5çš„å¢å¼ºè¾“å…¥ï¼Œæ•…æŒ‰é”®çš„ç»‘å®šäº‹ä»¶éœ€è¦é¢å¤–æ·»åŠ è“å›¾æ–‡ä»¶</p><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªè¾“å…¥æ“ä½œ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507101718677.png" alt="image-20250710170215022"></p><p>æ‰¾åˆ°å¯¹åº”çš„å…¨å±€InputMappingContextï¼ˆIMCï¼‰ï¼Œåœ¨é‡Œé¢æ·»åŠ æ–°çš„æ“ä½œ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507101718678.png" alt="image-20250710170342023"></p><p>æœ€åç»‘å®šè¾“å…¥æ“ä½œåˆ°IMCä¸­ï¼Œåœ¨PlayerControllerçš„ç»†èŠ‚é¢æ¿ä¸­ï¼Œç»‘å®šå³å¯ã€‚åŒæ—¶æˆ‘è¿™é‡Œç»‘å®šäº†åœ¨PlayerController.hä¸­åˆ›å»ºçš„TSubclassOf<class upause> PauseWidgetClass;</class></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507101718679.png" alt="image-20250710170629377"></p><h2 id="å®ç°æ•ˆæœ-1"><a href="#å®ç°æ•ˆæœ-1" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507101718680.gif" alt="2025-07-10 17-14-52"></p>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEC++å®ç°äººç‰©æŒ‰ç…§Aæ˜Ÿè·¯çº¿ç§»åŠ¨</title>
      <link href="/2025/06/26/UEC++%E5%AE%9E%E7%8E%B0%E4%BA%BA%E7%89%A9%E6%8C%89%E7%85%A7A%E6%98%9F%E8%B7%AF%E7%BA%BF%E7%A7%BB%E5%8A%A8/"/>
      <url>/2025/06/26/UEC++%E5%AE%9E%E7%8E%B0%E4%BA%BA%E7%89%A9%E6%8C%89%E7%85%A7A%E6%98%9F%E8%B7%AF%E7%BA%BF%E7%A7%BB%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é‡åˆ°çš„é—®é¢˜ï¼š</p><ol><li>å¦‚ä½•ä½¿ç”¨UEC++å®ç°UEè“å›¾ä¸­çš„æ–¹æ³• </li><li>ä¸–ç•Œä¸­å­˜åœ¨ä¸€ä¸ªä¸æ˜¯è‡ªå·±æ”¾ç½®çš„ç±»</li><li>åœ¨ä¸€ä¸ªC++ç±»ä¸­è°ƒç”¨å¦ä¸€ä¸ªC++ç±»ä¸­çš„å˜é‡æˆ–è€…å‡½æ•°</li><li>Get All Actors of Classçš„æ›¿ä»£</li><li>è“å›¾Actorçš„åå­—å’Œåœ¨ä¸–ç•Œä¸­è·å–åˆ°çš„Actorä¸­çš„åå­—ä¸ç›¸åŒ</li></ol><p>è¯¦è§åšå®¢ç½®é¡¶æ–‡ç« -<a href="https://wuwei1636.github.io/2025/05/30/UE%E9%81%87%E5%88%B0%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/">UEé‡åˆ°çš„å„ç§é—®é¢˜</a></p></blockquote><h1 id="å®ç°Aæ˜Ÿç®—æ³•è§„åˆ’è·¯å¾„"><a href="#å®ç°Aæ˜Ÿç®—æ³•è§„åˆ’è·¯å¾„" class="headerlink" title="å®ç°Aæ˜Ÿç®—æ³•è§„åˆ’è·¯å¾„"></a>å®ç°Aæ˜Ÿç®—æ³•è§„åˆ’è·¯å¾„</h1><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="AStar-test2Character-h"><a href="#AStar-test2Character-h" class="headerlink" title="AStar_test2Character.h"></a><code>AStar_test2Character.h</code></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰çš„å˜é‡</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰å®šæ—¶å™¨å¥æŸ„</span></span><br><span class="line">FTimerHandle TimerHandle;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowWay</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰å‡½æ•° - è¿›å…¥FuncAStarMoveCaculate</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>(BlueprintCallable)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AStarMoveCaculate</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Aæ˜Ÿç®—æ³•ç§»åŠ¨ä»£ä»·è®¡ç®—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FuncAStarMoveCaculate</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›¼å“ˆé¡¿è·ç¦»è®¡ç®—å‡½æ•°</span></span><br><span class="line"><span class="function">int32 <span class="title">DistanceToDistination</span><span class="params">(Aboard* board)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºå­˜å‚¨æ ·æ¡ç‚¹çš„åæ ‡</span></span><br><span class="line">TArray&lt;FVector&gt; AllPositions;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹ç§»åŠ¨çš„èŠ‚ç‚¹</span></span><br><span class="line">Aboard* MoveStartBoard =  <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»ˆç‚¹çš„åæ ‡</span></span><br><span class="line">AMyDestination* Destination = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨å·²ç»æ‰«æè¿‡çš„èŠ‚ç‚¹</span></span><br><span class="line">TArray&lt;Aboard*&gt; BoardHasScanned;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—å·²ç»èµ°è¿‡çš„æ­¥æ•°</span></span><br><span class="line">int32 moveStep = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›’ä½“æ£€æµ‹å‚æ•°</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere,Category=<span class="string">&quot;BoxTrace&quot;</span>)</span><br><span class="line">FVector HalfSize = <span class="built_in">FVector</span>(<span class="number">50.0f</span>, <span class="number">50.0f</span>, <span class="number">10.0f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›’ä½“æ£€æµ‹å‚æ•°</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere,Category=<span class="string">&quot;BoxTrace&quot;</span>)</span><br><span class="line">FRotator Orientation = <span class="built_in">FRotator</span>(<span class="number">0.0f</span>, <span class="number">45.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ–¹å‘</span></span><br><span class="line">int32 isChange = <span class="number">-1</span>;</span><br><span class="line"><span class="comment">//ä¸Šä¸€ä¸ªåæ ‡</span></span><br><span class="line">FVector LastPosition;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ å…¥æŒ‡å®šä½ç½®çš„ç‚¹äºæ•°ç»„ä¸­</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AddSpecialPositionToArray</span><span class="params">()</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="AStar-test2Character-cpp"><a href="#AStar-test2Character-cpp" class="headerlink" title="AStar_test2Character.cpp"></a><code>AStar_test2Character.cpp</code></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::SetupPlayerInputComponent</span><span class="params">(UInputComponent* PlayerInputComponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">SetupPlayerInputComponent</span>(PlayerInputComponent);</span><br><span class="line"><span class="comment">// ç»‘å®šè¾“å…¥ï¼šé”®ç›˜1 å½¢æˆAæ˜Ÿç®—æ³•è·¯å¾„;é”®ç›˜2 æ ¹æ®Aæ˜Ÿç®—æ³•è·¯å¾„å½¢æˆæ ·æ¡ç‚¹;é”®ç›˜3 AIå¼€å§‹æŒ‰ç…§Aæ˜Ÿç®—æ³•è§„åˆ’è·¯å¾„ç§»åŠ¨ï¼ˆå®é™…ä¸Šæ˜¯æŒ‰ç…§æ ·æ¡ç‚¹ç§»åŠ¨ï¼‰</span></span><br><span class="line">PlayerInputComponent-&gt;<span class="built_in">BindAction</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;showWay&quot;</span>), IE_Pressed, <span class="keyword">this</span>, &amp;AAStar_test2Character::ShowWay);</span><br><span class="line">PlayerInputComponent-&gt;<span class="built_in">BindAction</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;createSpine&quot;</span>), IE_Pressed, <span class="keyword">this</span>, &amp;AAStar_test2Character::SpineSet);</span><br><span class="line">PlayerInputComponent-&gt;<span class="built_in">BindAction</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;AiMove&quot;</span>), IE_Pressed, <span class="keyword">this</span>, &amp;AAStar_test2Character::AIMove);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::ShowWay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// è·å–World</span></span><br><span class="line">UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line"><span class="keyword">if</span> (!World) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 1: è·å–æŒ‡å®šç±»çš„æ‰€æœ‰å®ä¾‹</span></span><br><span class="line">TArray&lt;AActor*&gt; FoundActors;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–StartActor èµ·å§‹ç‚¹ è·å–DestinationActor ç»ˆç‚¹</span></span><br><span class="line">UGameplayStatics::<span class="built_in">GetAllActorsOfClass</span>(World, AMyStart::<span class="built_in">StaticClass</span>(), FoundActors);</span><br><span class="line">AActor* StartActor = FoundActors.<span class="built_in">Num</span>() &gt; <span class="number">0</span> ? FoundActors[<span class="number">0</span>] : <span class="literal">nullptr</span>;</span><br><span class="line">UGameplayStatics::<span class="built_in">GetAllActorsOfClass</span>(World, AMyDestination::<span class="built_in">StaticClass</span>(), FoundActors);</span><br><span class="line">AActor* DestinationActor = FoundActors.<span class="built_in">Num</span>() &gt; <span class="number">0</span> ? FoundActors[<span class="number">0</span>] : <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">if</span> (!StartActor || !DestinationActor) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ç»ˆç‚¹çš„åæ ‡æ”¾å…¥å˜é‡ Destination</span></span><br><span class="line">Destination = <span class="built_in">Cast</span>&lt;AMyDestination&gt;(DestinationActor);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–èµ·å§‹ç‚¹çš„åæ ‡ä½ç½® å¹¶æ·»åŠ åˆ°AllPositionsï¼ˆæ ·æ¡ç‚¹æ•°ç»„ï¼‰ä¸­</span></span><br><span class="line">FVector StartActorLocation = StartActor-&gt;<span class="built_in">GetActorLocation</span>();</span><br><span class="line">AllPositions.<span class="built_in">Add</span>(StartActorLocation);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–LastPositionï¼Œç”¨äºä¹‹ååˆ¤æ–­æ˜¯å¦éœ€è¦æ·»åŠ æ–°çš„æ ·æ¡ç‚¹</span></span><br><span class="line">LastPosition = StartActorLocation;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰çº¿æ¡è¿½è¸ªç©¿è¿‡çš„Zè½´</span></span><br><span class="line"><span class="type">float</span> StartZ = <span class="number">100.0f</span>;</span><br><span class="line"><span class="type">float</span> EndZ = <span class="number">-100.0f</span>;</span><br><span class="line">FVector StartTraceLocation = <span class="built_in">FVector</span>(StartActorLocation.X, StartActorLocation.Y, StartZ);</span><br><span class="line">FVector EndTraceLocation = <span class="built_in">FVector</span>(StartActorLocation.X, StartActorLocation.Y, EndZ);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 2: è¿›è¡Œå°„çº¿è¿½è¸ª</span></span><br><span class="line">FHitResult HitResult;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ trace çš„è¡Œä¸ºå‚æ•°</span></span><br><span class="line"><span class="function">FCollisionQueryParams <span class="title">TraceParams</span><span class="params">(FName(TEXT(<span class="string">&quot;&quot;</span>)), <span class="literal">false</span>, <span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ trace çš„å¯¹è±¡å‚æ•°ï¼Œå³éœ€è¦æ£€æµ‹çš„å¯¹è±¡ç±»å‹</span></span><br><span class="line">FCollisionObjectQueryParams ObjectQueryParams;</span><br><span class="line"><span class="comment">// è®¾ç½®æŸ¥è¯¢ä¸–ç•Œä¸­åŠ¨æ€çš„ç‰©ä½“</span></span><br><span class="line">ObjectQueryParams.<span class="built_in">AddObjectTypesToQuery</span>(ECC_WorldDynamic);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›è¡Œ trace å°„çº¿æ£€æµ‹</span></span><br><span class="line"><span class="type">bool</span> bHit = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">LineTraceSingleByObjectType</span>(</span><br><span class="line">HitResult,</span><br><span class="line">StartTraceLocation,</span><br><span class="line">EndTraceLocation,</span><br><span class="line">ObjectQueryParams,</span><br><span class="line">TraceParams</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 3: å¤„ç†å‘½ä¸­ç»“æœ</span></span><br><span class="line"><span class="keyword">if</span> (!bHit)<span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;å°„çº¿æ²¡æœ‰å‘½ä¸­ï¼&quot;</span>));</span><br><span class="line">AActor* HitActor = HitResult.<span class="built_in">GetActor</span>();</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;å‘½ä¸­çš„Actoræ˜¯: %s&quot;</span>), *HitActor-&gt;<span class="built_in">GetClass</span>()-&gt;<span class="built_in">GetName</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 4: ç±»å‹è½¬æ¢ä¸º BP_Board</span></span><br><span class="line">Aboard* Board = <span class="built_in">Cast</span>&lt;Aboard&gt;(HitActor);</span><br><span class="line"><span class="keyword">if</span> (!Board) <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;å‘½ä¸­äº†Actorï¼Œä½†ä¸æ˜¯BP_Board!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–° MoveStartBoard æ·»åŠ åˆ° BoardHasScanned ä¸­</span></span><br><span class="line">MoveStartBoard = Board;</span><br><span class="line">BoardHasScanned.<span class="built_in">Add</span>(MoveStartBoard);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—ç§»åŠ¨ä»£ä»·</span></span><br><span class="line"><span class="built_in">AStarMoveCaculate</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::AStarMoveCaculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetTimerManager</span>().<span class="built_in">SetTimer</span>(TimerHandle,<span class="keyword">this</span>,&amp;AAStar_test2Character::FuncAStarMoveCaculate,<span class="number">0.01f</span>,<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::FuncAStarMoveCaculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ– å½“å‰ä½ç½®è‡³ç»ˆç‚¹ çš„æœ€å°ç§»åŠ¨ä»£ä»·</span></span><br><span class="line">int32 minMoveCost = <span class="number">9999</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 1: åˆå§‹åŒ–ç›’ä½“è¿½è¸ªæ£€æµ‹å‚æ•°ï¼Œè·å–å‰åå·¦å³å››ä¸ªæ–¹å‘çš„ä½ç½®è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">TArray&lt;FHitResult&gt; OutHits;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è¿½è¸ªä¸­å¿ƒ çš„èµ·ç‚¹å’Œç»ˆç‚¹çš„Zå€¼</span></span><br><span class="line"><span class="type">float</span> StartZ = <span class="number">100.0f</span>;</span><br><span class="line"><span class="type">float</span> EndZ = <span class="number">-100.0f</span>;</span><br><span class="line">FVector Location = MoveStartBoard-&gt;<span class="built_in">GetActorLocation</span>();</span><br><span class="line">FVector StartTraceLocation = <span class="built_in">FVector</span>(Location.X, Location.Y, StartZ);</span><br><span class="line">FVector EndTraceLocation = <span class="built_in">FVector</span>(Location.X, Location.Y, EndZ);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿½ç•¥çš„ Actor æ•°ç»„å’Œå¯¹è±¡ç±»å‹</span></span><br><span class="line">TArray&lt;AActor*&gt; ActorsToIgnore;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šè¦æ£€æµ‹çš„å¯¹è±¡ç±»å‹æ•°ç»„</span></span><br><span class="line">TArray&lt;TEnumAsByte&lt;EObjectTypeQuery&gt;&gt; ObjectTypes;</span><br><span class="line">ObjectTypes.<span class="built_in">Add</span>(UEngineTypes::<span class="built_in">ConvertToObjectType</span>(ECC_WorldDynamic));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 2: æ‰§è¡Œç›’ä½“è¿½è¸ª</span></span><br><span class="line"><span class="type">bool</span> bHit = UKismetSystemLibrary::<span class="built_in">BoxTraceMultiForObjects</span>(</span><br><span class="line"><span class="keyword">this</span>,  <span class="comment">//å½“å‰å¯¹è±¡ä½œä¸ºè¿½è¸ªå‘èµ·è€…</span></span><br><span class="line">    StartTraceLocation,</span><br><span class="line">    EndTraceLocation,</span><br><span class="line">    HalfSize,</span><br><span class="line">    Orientation,</span><br><span class="line">    ObjectTypes,</span><br><span class="line">    <span class="literal">false</span>, <span class="comment">// æ˜¯å¦æ£€æµ‹å¤æ‚ç¢°æ’  falseè¡¨ç¤ºç®€å•ç¢°æ’</span></span><br><span class="line">    ActorsToIgnore,</span><br><span class="line">    EDrawDebugTrace::None, <span class="comment">// æ˜¯å¦ç»˜åˆ¶è°ƒè¯•ä¿¡æ¯</span></span><br><span class="line">    OutHits,</span><br><span class="line">    <span class="literal">true</span>  <span class="comment">// æ˜¯å¦è¿”å›å‘½ä¸­ç»“æœ</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 3: å¾ªç¯éå†æ£€æµ‹ç»“æœï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªå‰è¿›çš„ç‚¹</span></span><br><span class="line"><span class="keyword">if</span>(OutHits.<span class="built_in">Num</span>() &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">// Step 3.1: è®¡ç®—å¾—åˆ°æ£€æµ‹ç»“æœä¸­è·ç¦»æœ€è¿‘çš„ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> FHitResult&amp; HitResult : OutHits)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è·å–è¯¥æ–¹å‘çš„å‘½ä¸­ç»“æœ</span></span><br><span class="line">AActor* HitActor = HitResult.<span class="built_in">GetActor</span>();</span><br><span class="line"><span class="keyword">if</span> (!HitActor) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å‹è½¬æ¢ä¸º BP_Board</span></span><br><span class="line">Aboard* Board = <span class="built_in">Cast</span>&lt;Aboard&gt;(HitActor);</span><br><span class="line"><span class="keyword">if</span> (!Board || BoardHasScanned.<span class="built_in">Contains</span>(Board)) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‹¥ä¸ºBP_Boardä¸”ä¸åŒ…å«åœ¨ BoardHasScanned ä¸­ï¼Œè®¡ç®—ç§»åŠ¨ä»£ä»· å’Œæœ€å°çš„ç§»åŠ¨æ–¹å‘è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">BoardHasScanned.<span class="built_in">Add</span>(Board);</span><br><span class="line">int32 moveCost = <span class="built_in">DistanceToDistination</span>(Board) + moveStep;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (minMoveCost &gt; moveCost)</span><br><span class="line">&#123;</span><br><span class="line">MoveStartBoard = Board;</span><br><span class="line">minMoveCost = moveCost;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Step 3.2: åˆ¤æ–­æ£€æµ‹ç»“æœä¸­è·ç¦»æœ€è¿‘çš„ç‚¹ æ˜¯å¦åœ¨å¯ä»¥ç§»åŠ¨çš„èŒƒå›´å†…</span></span><br><span class="line"><span class="keyword">if</span>(MoveStartBoard != <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åˆ¤æ–­è¯¥ä½ç½®æ˜¯å¦å¯ä»¥åŠ å…¥æ ·æ¡ç‚¹æ•°ç»„ä¸­ï¼Œå‡½æ•°åœ¨ä¸‹ä¸€ä¸ªä¸“é¢˜ä»£ç ä¸­å±•ç¤º</span></span><br><span class="line"><span class="built_in">AddSpecialPositionToArray</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹moveStartBoardçš„é¢œè‰²ï¼Œæ¥ç¤ºè¯¥ä½ç½®å·²ç»åœ¨Aæ˜Ÿç®—æ³•è§„åˆ’çš„è·¯çº¿ä¸­</span></span><br><span class="line">MoveStartBoard-&gt;<span class="built_in">SetColor</span>(MoveStartBoard);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°ç§»åŠ¨æ­¥æ•°</span></span><br><span class="line">moveStep++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (!(<span class="built_in">DistanceToDistination</span>(MoveStartBoard) &lt; <span class="number">2</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">AStarMoveCaculate</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å°†ç»ˆç‚¹åŠ å…¥AllPositions</span></span><br><span class="line">AllPositions.<span class="built_in">Add</span>(Destination-&gt;<span class="built_in">GetActorLocation</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å– ç›®æ ‡ç‚¹è·ç¦»ç»ˆç‚¹çš„ æ›¼å“ˆé¡¿è·ç¦»</span></span><br><span class="line"><span class="function">int32 <span class="title">AAStar_test2Character::DistanceToDistination</span><span class="params">(Aboard* board)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">FVector BoardLocation = board-&gt;<span class="built_in">GetActorLocation</span>();</span><br><span class="line">FVector DistinationLocation = Destination-&gt;<span class="built_in">GetActorLocation</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨ç¤ºæ¯ä¸ªç½‘æ ¼å•å…ƒçš„å¤§å°ï¼Œç”¨äºå°†å®é™…è·ç¦»è½¬æ¢ä¸º æ ¼å­ æ•°é‡</span></span><br><span class="line"><span class="type">float</span> GridSize = <span class="number">100.0f</span>;</span><br><span class="line"><span class="type">float</span> Dt = FMath::<span class="built_in">Abs</span>(BoardLocation.X - DistinationLocation.X) + FMath::<span class="built_in">Abs</span>(BoardLocation.Y - DistinationLocation.Y);</span><br><span class="line">Dt = FMath::<span class="built_in">GridSnap</span>(Dt,GridSize);</span><br><span class="line">Dt /= GridSize;</span><br><span class="line"></span><br><span class="line">int32 Distance = FMath::<span class="built_in">CeilToInt</span>(Dt);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Distance;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Aæ˜Ÿç®—æ³•è·¯å¾„å­˜å…¥æ ·æ¡ç‚¹æ•°ç»„ä¸­"><a href="#Aæ˜Ÿç®—æ³•è·¯å¾„å­˜å…¥æ ·æ¡ç‚¹æ•°ç»„ä¸­" class="headerlink" title="Aæ˜Ÿç®—æ³•è·¯å¾„å­˜å…¥æ ·æ¡ç‚¹æ•°ç»„ä¸­"></a>Aæ˜Ÿç®—æ³•è·¯å¾„å­˜å…¥æ ·æ¡ç‚¹æ•°ç»„ä¸­</h1><h2 id="éš¾ç‚¹"><a href="#éš¾ç‚¹" class="headerlink" title="éš¾ç‚¹"></a>éš¾ç‚¹</h2><h3 id="å¦‚ä½•è·å–æ ·æ¡çº¿ç»„ä»¶"><a href="#å¦‚ä½•è·å–æ ·æ¡çº¿ç»„ä»¶" class="headerlink" title="å¦‚ä½•è·å–æ ·æ¡çº¿ç»„ä»¶"></a>å¦‚ä½•è·å–æ ·æ¡çº¿ç»„ä»¶</h3><blockquote><p>ä¼˜åŒ–å‰ï¼šåœ¨<code>AStar_test2Character.h</code>åˆ›å»ºä¸€ä¸ª<code>ASpine</code>ç±»çš„å˜é‡<code>SpineRef</code>ï¼Œç„¶ååœ¨<code>AStar_test2Character.cpp</code>ä¸­åˆ›å»ºäº†ä¸€ä¸ª<code>ASpine</code>ç±»çš„å¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡æ‰§è¡Œå‡½æ•°æ“ä½œï¼›æ­¤æ—¶<code>Spine.cpp</code>ç±»ä¸­çš„<code>this</code>æŒ‡çš„æ˜¯ç³»ç»Ÿåˆ›å»ºçš„å¯¹è±¡ã€‚</p><p>ä¼˜åŒ–åï¼šç›´æ¥åœ¨<code>AStar_test2Character.cpp</code>ä¸­ä½¿ç”¨<code>GetAllActorsOfClass</code>æ–¹æ³•è·å–åˆ°çœŸæ­£çš„<code>ASpine</code>çš„å¼•ç”¨ï¼Œç„¶åç›´æ¥å¯¹<code>ASpine</code>æœ¬ä½“æ‰§è¡Œå‡½æ•°æ“ä½œï¼›æ­¤æ—¶<code>Spine.cpp</code>ç±»ä¸­çš„<code>this</code>æŒ‡çš„æ˜¯<code>Spine.cpp</code>æœ¬èº«ã€‚</p></blockquote><h4 id="ä¼˜åŒ–å‰"><a href="#ä¼˜åŒ–å‰" class="headerlink" title="ä¼˜åŒ–å‰"></a>ä¼˜åŒ–å‰</h4><p><code>AStar_test2Character</code>ç±»å’Œ<code>Spine</code>ç±»</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AStar_test2Character.h</span></span><br><span class="line">ASpine* SpineRef;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AStar_test2Character.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!SpineRef)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªSpineçš„åŠ¨æ€å¯¹è±¡ï¼Œæ­¤æ­¥ä»¥åï¼Œç”± GetAllActorsOfClass æ‰¾åˆ°çš„ASpineä¼šæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿåˆ›å»ºçš„ï¼Œä¸€ä¸ªæ˜¯è‡ªå·±åˆ›å»ºçš„</span></span><br><span class="line">    SpineRef = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">SpawnActor</span>&lt;ASpine&gt;();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (SpineRef)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;è¿›å…¥æ‰§è¡ŒSpineSet222&quot;</span>));</span><br><span class="line">    <span class="comment">// å¾—åˆ°çš„ç»“æœæ˜¯Spine0ï¼Œå³ç³»ç»Ÿåˆ›å»ºçš„ASpineç±»çš„åŠ¨æ€å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;SpineRefæ˜¯ %s&quot;</span>), *SpineRef-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">    SpineRef-&gt;<span class="built_in">setSpine</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">===================================================</span><br><span class="line"><span class="comment">// Spine.cpp  </span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// æŸ¥æ‰¾åä¸º &quot;BP_Spine&quot; çš„ Actor</span></span><br><span class="line">ASpine* SpineActor = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;ASpine&gt; <span class="built_in">It</span>(<span class="built_in">GetWorld</span>()); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">    SpineActor = *It;</span><br><span class="line">    <span class="keyword">if</span> (SpineActor &amp;&amp; SpineActor-&gt;<span class="built_in">GetName</span>().<span class="built_in">Contains</span>(<span class="string">&quot;BP_Spine&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">          <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Found BP_Spine: %s&quot;</span>), *SpineActor-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!SpineActor)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æœªæ‰¾åˆ°åä¸º BP_Spine çš„ Actor&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ·æ¡ç»„ä»¶</span></span><br><span class="line">USplineComponent* SplineComp = SpineActor -&gt; <span class="built_in">FindComponentByClass</span>&lt;USplineComponent&gt;();</span><br><span class="line"><span class="keyword">if</span> (!SplineComp) <span class="keyword">return</span>;</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–å-å‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„ä»£ç "><a href="#ä¼˜åŒ–å-å‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„ä»£ç " class="headerlink" title="ä¼˜åŒ–å(å‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„ä»£ç )"></a>ä¼˜åŒ–å(å‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„ä»£ç )</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AStar_test2Character.cpp</span></span><br><span class="line"></span><br><span class="line">UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line">TArray&lt;AActor*&gt; FoundActors;</span><br><span class="line">UGameplayStatics::<span class="built_in">GetAllActorsOfClass</span>(World, ASpine::<span class="built_in">StaticClass</span>(), FoundActors);</span><br><span class="line">ASpine* SpineRefT = <span class="built_in">Cast</span>&lt;ASpine&gt;(FoundActors[<span class="number">0</span>]);</span><br><span class="line">SpineRefT-&gt;<span class="built_in">setSpine</span>();</span><br><span class="line"></span><br><span class="line">===================================================</span><br><span class="line"><span class="comment">// Spine.cpp</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// è·å–æ ·æ¡ç»„ä»¶</span></span><br><span class="line">USplineComponent* SplineComp = <span class="keyword">this</span> -&gt; <span class="built_in">FindComponentByClass</span>&lt;USplineComponent&gt;();</span><br><span class="line"><span class="keyword">if</span> (!SplineComp) <span class="keyword">return</span>;</span><br></pre></td></tr></table></figure><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AStar_test2Character.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥åŠ å…¥æ ·æ¡ç‚¹æ•°ç»„ä¸­ï¼Œæ–¹å‘æ”¹å˜æ‰åŠ å…¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AAStar_test2Character::AddSpecialPositionToArray</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// åˆ¤æ–­å½“å‰ç‚¹ç›¸å¯¹äºä¸Šä¸€ä¸ªç‚¹è¦èµ°çš„æ–¹å‘  åªæœ‰æ¨ªç«–ä¸¤ä¸ªæ–¹å‘ï¼Œæ•…åªåˆ¤æ–­Xè½´æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">FVector moveStartLocation = MoveStartBoard-&gt;<span class="built_in">GetActorLocation</span>();</span><br><span class="line"><span class="type">bool</span> isXSame = moveStartLocation.X - LastPosition.X == <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// isChange: -1 è¡¨ç¤ºæ˜¯åŠ å…¥çš„ç¬¬ä¸€ä¸ªç‚¹ï¼›0 è¡¨ç¤ºä¸Šä¸€ä¸ªç‚¹çš„æ–¹å‘æ˜¯Yè½´çš„ï¼›1 è¡¨ç¤ºä¸Šä¸€ä¸ªç‚¹çš„æ–¹å‘æ˜¯Xè½´</span></span><br><span class="line"><span class="keyword">if</span> (isChange == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (isXSame)</span><br><span class="line">&#123;</span><br><span class="line">isChange = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">isChange = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">LastPosition = moveStartLocation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="comment">// ä¸æ˜¯ç¬¬ä¸€ä¸ªåŠ å…¥çš„ç‚¹ï¼Œåˆ¤æ–­æ–¹å‘æœ‰æ²¡æœ‰å˜åŒ–</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (isXSame)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (isChange == <span class="number">0</span>) <span class="comment">// æ–¹å‘æ²¡æœ‰æ”¹å˜</span></span><br><span class="line">&#123;</span><br><span class="line">LastPosition = moveStartLocation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">AllPositions.<span class="built_in">Add</span>(LastPosition);</span><br><span class="line">LastPosition = moveStartLocation;</span><br><span class="line">isChange = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (isChange == <span class="number">1</span>) <span class="comment">// æ–¹å‘æ²¡æœ‰æ”¹å˜</span></span><br><span class="line">&#123;</span><br><span class="line">LastPosition = moveStartLocation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">AllPositions.<span class="built_in">Add</span>(LastPosition);</span><br><span class="line">LastPosition = moveStartLocation;</span><br><span class="line">isChange = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äººç‰©å®ç°AIè¡Œä¸ºæ ‘â€”â€”æŒ‰ç…§æ ·æ¡çº¿è¡Œèµ°"><a href="#äººç‰©å®ç°AIè¡Œä¸ºæ ‘â€”â€”æŒ‰ç…§æ ·æ¡çº¿è¡Œèµ°" class="headerlink" title="äººç‰©å®ç°AIè¡Œä¸ºæ ‘â€”â€”æŒ‰ç…§æ ·æ¡çº¿è¡Œèµ°"></a>äººç‰©å®ç°AIè¡Œä¸ºæ ‘â€”â€”æŒ‰ç…§æ ·æ¡çº¿è¡Œèµ°</h1><h2 id="éš¾ç‚¹-1"><a href="#éš¾ç‚¹-1" class="headerlink" title="éš¾ç‚¹"></a>éš¾ç‚¹</h2><h3 id="è‡ªå®šä¹‰å®ç°AIè¡Œä¸ºæ ‘ä¸­çš„Decoratorå’ŒTaskèŠ‚ç‚¹"><a href="#è‡ªå®šä¹‰å®ç°AIè¡Œä¸ºæ ‘ä¸­çš„Decoratorå’ŒTaskèŠ‚ç‚¹" class="headerlink" title="è‡ªå®šä¹‰å®ç°AIè¡Œä¸ºæ ‘ä¸­çš„Decoratorå’ŒTaskèŠ‚ç‚¹"></a>è‡ªå®šä¹‰å®ç°AIè¡Œä¸ºæ ‘ä¸­çš„Decoratorå’ŒTaskèŠ‚ç‚¹</h3><h4 id="1-åˆ›å»ºC-ç±»"><a href="#1-åˆ›å»ºC-ç±»" class="headerlink" title="1. åˆ›å»ºC++ç±»"></a>1. åˆ›å»ºC++ç±»</h4><p>Decoratoråº”ç»§æ‰¿<code>BTDecorator</code>ï¼ŒTaskåº”ç»§æ‰¿<code>BTTaskNode</code>ï¼›å¦‚æœå¸Œæœ›ä½¿ç”¨é»‘æ¿é”®ï¼Œå¯ä»¥ç»§æ‰¿è‡ªç›¸åº”çš„æœ‰<code>_BlackboardBase</code>åç¼€çš„ç±»ï¼Œè¿™ä¸ªç±»ä¼šæä¾›ä¸€ä¸ªé»‘æ¿é”®æˆå‘˜å˜é‡ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸ç»§æ‰¿è¿™ä¸ª<code>_BlackboardBase</code>ï¼Œè‡ªå·±å†™</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556179.jpg" alt="45cc20eedf263cb9d4100dca430d8478"></p><h4 id="2-å…³é”®å‡½æ•°"><a href="#2-å…³é”®å‡½æ•°" class="headerlink" title="2. å…³é”®å‡½æ•°"></a>2. å…³é”®å‡½æ•°</h4><blockquote><p>åªä¸¾ä¾‹äº†ä»£ç ä¸­ç”¨åˆ°çš„éƒ¨åˆ†å‡½æ•°ï¼Œå…¶ä»–å‡½æ•°è¯·è‡ªå·±å‚è€ƒ<code>BTDecorator.h</code>å’Œ<code>BTTaskNode.h</code>ä¸­çš„å‡½æ•°ä»¥åŠæ³¨é‡Š</p></blockquote><h5 id="Decoratorçš„åˆ¤æ–­å‡½æ•°ä¸º"><a href="#Decoratorçš„åˆ¤æ–­å‡½æ•°ä¸º" class="headerlink" title="Decoratorçš„åˆ¤æ–­å‡½æ•°ä¸º"></a>Decoratorçš„åˆ¤æ–­å‡½æ•°ä¸º</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">CalculateRawConditionValue</span><span class="params">(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory)</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br></pre></td></tr></table></figure><p>é‡å†™è¿™ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯èƒ½å¦æ‰§è¡Œå­èŠ‚ç‚¹</p><h5 id="Taskçš„å¼€å§‹æ‰§è¡Œå‡½æ•°"><a href="#Taskçš„å¼€å§‹æ‰§è¡Œå‡½æ•°" class="headerlink" title="Taskçš„å¼€å§‹æ‰§è¡Œå‡½æ•°"></a>Taskçš„å¼€å§‹æ‰§è¡Œå‡½æ•°</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** starts this task, should return Succeeded, Failed or InProgress</span></span><br><span class="line"><span class="comment">*  (use FinishLatentTask() when returning InProgress)</span></span><br><span class="line"><span class="comment">* this function should be considered as const (don&#x27;t modify state of object) if node is not instanced! */</span></span><br><span class="line"></span><br><span class="line"><span class="function">AIMODULE_API <span class="keyword">virtual</span> EBTNodeResult::Type <span class="title">ExecuteTask</span><span class="params">(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory)</span></span>;</span><br></pre></td></tr></table></figure><p>å¯ç”¨çš„è¿”å›å€¼ç”±ä¸‰ç§</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EBTNodeResult::Failed</span><br><span class="line">EBTNodeResult::Succeeded</span><br><span class="line">EBTNodeResult::InProgress</span><br></pre></td></tr></table></figure><p>å‰ä¸¤ç§è‡ªç„¶å°±æ˜¯ç«‹åˆ»è¿”å›å½“å‰èŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸä¸å¦ï¼Œæœ€åä¸€ç§æ˜¯è¡¨ç¤ºèŠ‚ç‚¹è™½ç„¶å·²ç»å¼€å§‹æ‰§è¡Œï¼Œä½†æš‚æ—¶è¿˜æ²¡æ‰§è¡Œç»“æŸï¼Œå½“å¸Œæœ›ç»“æŸæ‰§è¡ŒInProgressçš„èŠ‚ç‚¹ï¼ˆä»¥æˆåŠŸæ‰§è¡Œä¸¾ä¾‹ï¼‰ï¼Œå°±éœ€è¦è°ƒç”¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FinishLatentTask</span>(OwnerComp, EBTNodeResult::Succeeded);</span><br></pre></td></tr></table></figure><p>è¯¥å‡½æ•°ä¸€èˆ¬åœ¨<code>TickTask</code>ä¸­è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªTickéƒ½å»æ£€æŸ¥æ˜¯å¦æ‰§è¡Œå®Œæˆã€‚</p><h5 id="TickTaskå‡½æ•°åŸå‹"><a href="#TickTaskå‡½æ•°åŸå‹" class="headerlink" title="TickTaskå‡½æ•°åŸå‹"></a>TickTaskå‡½æ•°åŸå‹</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** ticks this task </span></span><br><span class="line"><span class="comment"> * this function should be considered as const (don&#x27;t modify state of object) if node is not instanced! </span></span><br><span class="line"><span class="comment"> * bNotifyTick must be set to true for this function to be called</span></span><br><span class="line"><span class="comment"> * Calling INIT_TASK_NODE_NOTIFY_FLAGS in the constructor of the task will set this flag automatically */</span></span><br><span class="line"><span class="function">AIMODULE_API <span class="keyword">virtual</span> <span class="type">void</span> <span class="title">TickTask</span><span class="params">(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory, <span class="type">float</span> DeltaSeconds)</span></span>;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œåªæœ‰å½“è®¾ç½®<code>bNotifyTick</code> &#x3D; trueæ—¶<code>TickTask</code>æ‰ä¼šæ‰§è¡Œï¼›åŒç†è¿˜æœ‰<code>bNotifyActivation </code>äº<code>OnNodeActivation</code>ã€<code>bNotifyDeactivation</code> äº<code>OnNodeDeactivation</code></p><h3 id="å¦‚ä½•åœ¨AIControllerä¸­è·å–é»‘æ¿ï¼Œå¹¶ä¿®æ”¹å…¶ä¸­çš„å˜é‡å€¼"><a href="#å¦‚ä½•åœ¨AIControllerä¸­è·å–é»‘æ¿ï¼Œå¹¶ä¿®æ”¹å…¶ä¸­çš„å˜é‡å€¼" class="headerlink" title="å¦‚ä½•åœ¨AIControllerä¸­è·å–é»‘æ¿ï¼Œå¹¶ä¿®æ”¹å…¶ä¸­çš„å˜é‡å€¼"></a>å¦‚ä½•åœ¨<code>AIController</code>ä¸­è·å–é»‘æ¿ï¼Œå¹¶ä¿®æ”¹å…¶ä¸­çš„å˜é‡å€¼</h3><h4 id="1-å®šä¹‰å˜é‡"><a href="#1-å®šä¹‰å˜é‡" class="headerlink" title="1. å®šä¹‰å˜é‡"></a>1. å®šä¹‰å˜é‡</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ§åˆ¶è§’è‰²ï¼Œåˆå§‹åŒ–AIé€»è¾‘å’ŒçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnPossess</span><span class="params">(APawn* possesPawn)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AIç§»åŠ¨çš„å‡½æ•°</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goAIMove</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡Œä¸ºæ ‘</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UBehaviorTree</span>* BehaviorTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»‘æ¿ç»„ä»¶</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UBlackboardComponent</span>* BlackboardComp;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨é»‘æ¿èµ„äº§çš„å¼•ç”¨</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditDefaultsOnly, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line">UBlackboardData* BlackboardAsset;</span><br></pre></td></tr></table></figure><p><code>UBlackboardComponent* BlackboardComp</code>å’Œ<code>UBlackboardData* BlackboardAsset</code>çš„åŒºåˆ«</p><ul><li>**<code>UBlackboardComponent</code>**ï¼šè¿™æ˜¯ä¸€ä¸ªå®é™…çš„æ¸¸æˆæ€§ç»„ä»¶ï¼ˆActor Componentï¼‰ï¼Œä½ å¯ä»¥å°†å…¶æ·»åŠ åˆ°ä½ çš„AIæ§åˆ¶å™¨æˆ–è€…éœ€è¦è®¿é—®é»‘æ¿æ•°æ®çš„è§’è‰²ä¸Šã€‚å®ƒè´Ÿè´£è¿è¡Œæ—¶å­˜å‚¨æ‰€æœ‰é»‘æ¿é”®å€¼å¯¹ï¼ˆKey-Value Pairsï¼‰ï¼Œè¿™äº›é”®å€¼å¯¹ä»£è¡¨äº†å½±å“AIå†³ç­–çš„æ•°æ®ç‚¹ã€‚ä¾‹å¦‚ï¼Œç›®æ ‡ä½ç½®ã€æœ€è¿‘çœ‹åˆ°çš„æ•Œäººç­‰ã€‚ç®€å•æ¥è¯´ï¼Œ<code>UBlackboardComponent</code> å°±æ˜¯AIç”¨æ¥åœ¨æ¸¸æˆè¿‡ç¨‹ä¸­å®æ—¶è®°å½•å’ŒæŸ¥è¯¢å„ç§çŠ¶æ€çš„åœ°æ–¹ã€‚</li><li>**<code>UBlackboardData</code>**ï¼šè¿™æ˜¯ä¸€ä¸ªèµ„äº§ï¼ˆAssetï¼‰ï¼Œå®šä¹‰äº†é»‘æ¿çš„ç»“æ„æˆ–æ¨¡å¼ã€‚å®ƒæè¿°äº†å¯ä»¥åœ¨<code>UBlackboardComponent</code>ä¸­ä½¿ç”¨çš„ä¸åŒé”®ï¼ˆKeysï¼‰ä»¥åŠæ¯ä¸ªé”®çš„ç±»å‹ï¼ˆæ¯”å¦‚Object, Vector, Boolç­‰ï¼‰ã€‚è¿™ä¸ªèµ„äº§ä¸»è¦ç”¨äºè®¾è®¡é˜¶æ®µï¼Œåœ¨ç¼–è¾‘å™¨ä¸­è®¾ç½®ï¼Œå†³å®šäº†å“ªäº›é”®å¯ç”¨åŠå…¶é»˜è®¤å€¼ã€‚å› æ­¤ï¼Œ<code>UBlackboardData</code>æ›´åƒæ˜¯ä¸€ä¸ªæ¨¡æ¿æˆ–è“å›¾ï¼ŒæŒ‡å®šäº†ä½ å¸Œæœ›åœ¨é»‘æ¿ä¸Šè·Ÿè¸ªçš„æ‰€æœ‰ä¿¡æ¯çš„ç§ç±»ã€‚</li></ul><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556180.png" alt="image-20250629142652730"></p><h4 id="2-åœ¨OnPossesså‡½æ•°ä¸­åˆå§‹åŒ–è¡Œä¸ºæ ‘ã€é»‘æ¿ç»„ä»¶"><a href="#2-åœ¨OnPossesså‡½æ•°ä¸­åˆå§‹åŒ–è¡Œä¸ºæ ‘ã€é»‘æ¿ç»„ä»¶" class="headerlink" title="2. åœ¨OnPossesså‡½æ•°ä¸­åˆå§‹åŒ–è¡Œä¸ºæ ‘ã€é»‘æ¿ç»„ä»¶"></a>2. åœ¨<code>OnPossess</code>å‡½æ•°ä¸­åˆå§‹åŒ–è¡Œä¸ºæ ‘ã€é»‘æ¿ç»„ä»¶</h4><p>å½“ä¸€ä¸ª <code>AIController</code> å¼€å§‹æ§åˆ¶ä¸€ä¸ªæ–°çš„ <code>Pawn</code>ï¼ˆé€šå¸¸æ˜¯NPCæˆ–ç©å®¶è§’è‰²çš„åŸºç±»ï¼‰æ—¶ï¼Œå°±ä¼šè°ƒç”¨ <code>OnPossess</code> å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯åˆå§‹åŒ–ä¸æ–°æ§åˆ¶çš„è§’è‰²ç›¸å…³çš„ä»»ä½•AIé€»è¾‘æˆ–çŠ¶æ€ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå…è®¸AIæ§åˆ¶å™¨æ‰§è¡Œä¸€äº›è®¾ç½®æ“ä½œï¼Œæ¯”å¦‚ä¸ºè¯¥è§’è‰²åˆ›å»ºè¡Œä¸ºæ ‘ã€è®¾ç½®é»‘æ¿æ•°æ®ã€åˆå§‹åŒ–æ„ŸçŸ¥ç³»ç»Ÿç­‰ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyAIController::OnPossess</span><span class="params">(APawn* possesPawn)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">OnPossess</span>(possesPawn);</span><br><span class="line"><span class="comment">// æ£€æŸ¥é»‘æ¿èµ„äº§æ˜¯å¦å·²è®¾ç½®</span></span><br><span class="line"><span class="keyword">if</span> (BlackboardAsset)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ– UBlackboardComponent ä½¿ç”¨æŒ‡å®šçš„ UBlackboardData èµ„äº§</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">UseBlackboard</span>(BlackboardAsset, BlackboardComp))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿åˆå§‹åŒ–æˆåŠŸ&quot;</span>));</span><br><span class="line">            </span><br><span class="line"><span class="comment">// å¯åŠ¨è¡Œä¸ºæ ‘ï¼ˆå¦‚æœæœ‰ï¼‰</span></span><br><span class="line"><span class="keyword">if</span> (BehaviorTree)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">RunBehaviorTree</span>(BehaviorTree);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿åˆå§‹åŒ–å¤±è´¥ï¼è¯·æ£€æŸ¥BlackboardAssetæ˜¯å¦æ­£ç¡®è®¾ç½®&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;è¯·è®¾ç½®BlackboardAssetï¼&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>UseBlackboard(BlackboardAsset, BlackboardComp)</code>å‡½æ•°è°ƒç”¨çš„ä½œç”¨</p><p>å…·ä½“æ¥è¯´ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li><strong>å‚æ•°1 (<code>BlackboardAsset</code>)</strong>: è¿™æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>UBlackboardData</code> ç±»å‹å¯¹è±¡çš„æŒ‡é’ˆï¼Œå®šä¹‰äº†é»‘æ¿ä¸­å¯ç”¨é”®ï¼ˆKeysï¼‰çš„ç»“æ„å’Œç±»å‹ã€‚å®ƒæè¿°äº†å“ªäº›ä¿¡æ¯å°†è¢«å­˜å‚¨åœ¨é»‘æ¿ä¸Šï¼Œä¾‹å¦‚ç›®æ ‡ä½ç½®ã€æœ€è¿‘å‘ç°çš„æ•Œäººç­‰ã€‚</li><li><strong>å‚æ•°2 (<code>BlackboardComp</code>)</strong>: è¿™æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>UBlackboardComponent</code> ç±»å‹å¯¹è±¡çš„å¼•ç”¨ï¼Œè¡¨ç¤ºå®é™…è¿è¡Œæ—¶ç”¨æ¥å­˜å‚¨å’Œè®¿é—®é»‘æ¿æ•°æ®çš„ç»„ä»¶ã€‚é€šè¿‡è¿™ä¸ªç»„ä»¶ï¼ŒAI ç³»ç»Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶è¯»å–å’Œå†™å…¥é»‘æ¿ä¸Šçš„æ•°æ®ã€‚</li></ul><p>å½“è°ƒç”¨ <code>UseBlackboard()</code> å‡½æ•°æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li><strong>åˆå§‹åŒ–é»‘æ¿ç»„ä»¶</strong>ï¼šåŸºäºæä¾›çš„ <code>BlackboardAsset</code>ï¼Œåˆå§‹åŒ–å…³è”çš„ <code>BlackboardComp</code>ï¼Œä½¿å…¶å‡†å¤‡å¥½æ ¹æ®å®šä¹‰çš„æ¨¡å¼å­˜å‚¨å’Œç®¡ç†æ•°æ®ã€‚</li><li><strong>é…ç½®é»‘æ¿é”®</strong>ï¼šæ ¹æ® <code>BlackboardAsset</code> ä¸­å®šä¹‰çš„é”®å€¼å¯¹ï¼Œé…ç½® <code>BlackboardComp</code> ä»¥ç¡®ä¿æ‰€æœ‰å¿…è¦çš„é”®éƒ½å·²å‡†å¤‡å°±ç»ªï¼Œå¹¶å¯ä»¥è¢«è¡Œä¸ºæ ‘ä¸­çš„ä»»åŠ¡å’ŒæœåŠ¡æ‰€ä½¿ç”¨ã€‚</li><li><strong>è¿”å›å€¼</strong>ï¼šå¦‚æœåˆå§‹åŒ–æˆåŠŸï¼Œåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚è¿™å…è®¸ä½ åœ¨åˆå§‹åŒ–å¤±è´¥çš„æƒ…å†µä¸‹è¿›è¡Œé”™è¯¯å¤„ç†æˆ–æ—¥å¿—è®°å½•ã€‚</li></ol><h4 id="3-åœ¨AIControllerç±»çš„å‡½æ•°ä¸­ä¿®æ”¹é»‘æ¿ä¸­çš„å˜é‡å€¼"><a href="#3-åœ¨AIControllerç±»çš„å‡½æ•°ä¸­ä¿®æ”¹é»‘æ¿ä¸­çš„å˜é‡å€¼" class="headerlink" title="3. åœ¨AIControllerç±»çš„å‡½æ•°ä¸­ä¿®æ”¹é»‘æ¿ä¸­çš„å˜é‡å€¼"></a>3. åœ¨<code>AIController</code>ç±»çš„å‡½æ•°ä¸­ä¿®æ”¹é»‘æ¿ä¸­çš„å˜é‡å€¼</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®é»‘æ¿ä¸­çš„å€¼</span></span><br><span class="line"><span class="keyword">if</span> (BlackboardComp)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;è·å–åˆ°é»‘æ¿ä¸­çš„å€¼&quot;</span>));</span><br><span class="line">    <span class="comment">// ä¿®æ”¹é»‘æ¿ä¸­çš„å€¼ï¼Œä¿®æ”¹åï¼Œè§¦å‘è£…é¥°å™¨Decoratoråˆ¤æ–­å‡½æ•°ï¼Œæ‰§è¡ŒTaskä¸­çš„æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">    BlackboardComp-&gt;<span class="built_in">SetValueAsBool</span>(<span class="built_in">FName</span>(<span class="string">&quot;AI_Move&quot;</span>), <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æ— æ³•è·å–é»‘æ¿ç»„ä»¶&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é»‘æ¿ä¸­çš„å˜é‡å€¼åï¼Œä¼šè§¦å‘Decoratorä¸­çš„åˆ¤æ–­å‡½æ•°<code>CalculateRawConditionValue</code>ï¼Œè‹¥è¿”å›Trueï¼Œåˆ™æ‰§è¡ŒTaskä¸­çš„<code>ExecuteTask</code>å‡½æ•°ï¼Œå®ç°AIè¡Œä¸ºæ ‘çš„å…¨éƒ¨è¿‡ç¨‹ã€‚</p><p>è“å›¾ä¸­AIè¡Œä¸ºæ ‘çš„é…ç½®å¦‚ä¸‹</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556181.png" alt="image-20250629143948740"></p><h2 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="ç»§æ‰¿BTDecoratorçš„UBTD-Judgeç±»"><a href="#ç»§æ‰¿BTDecoratorçš„UBTD-Judgeç±»" class="headerlink" title="ç»§æ‰¿BTDecoratorçš„UBTD_Judgeç±»"></a>ç»§æ‰¿<code>BTDecorator</code>çš„<code>UBTD_Judge</code>ç±»</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">UBTD_Judge::<span class="built_in">UBTD_Judge</span>(FObjectInitializer <span class="type">const</span>&amp; ObjectInitializer)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è®¾ç½®æ­¤è£…é¥°å™¨åœ¨æ¯æ¬¡ tick æ—¶æ£€æŸ¥æ¡ä»¶</span></span><br><span class="line"><span class="keyword">this</span>-&gt;bNotifyBecomeRelevant = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UBTD_Judge::CalculateRawConditionValue</span><span class="params">(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// è·å–ä¸è¡Œä¸ºæ ‘ç»„ä»¶å…³è”çš„é»‘æ¿ç»„ä»¶</span></span><br><span class="line">UBlackboardComponent* BlackboardComp = OwnerComp.<span class="built_in">GetBlackboardComponent</span>();</span><br><span class="line"><span class="keyword">if</span> (BlackboardComp == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;no BlackboardComp&quot;</span>));</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// UE_LOG(LogTemp, Warning, TEXT(&quot;è¿›å…¥ç­›é€‰å™¨&quot;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬è¦æ£€æŸ¥åä¸º &quot;AI_Move&quot; çš„å¸ƒå°”é”®</span></span><br><span class="line"><span class="type">bool</span> bAI_Move = BlackboardComp-&gt;<span class="built_in">GetValueAsBool</span>(<span class="string">&quot;AI_Move&quot;</span>);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;ç­›é€‰å™¨è·å¾—çš„AI_Moveçš„å€¼ï¼š%s&quot;</span>), bAI_Move ? <span class="built_in">TEXT</span>(<span class="string">&quot;true&quot;</span>) : <span class="built_in">TEXT</span>(<span class="string">&quot;false&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®é»‘æ¿ä¸­çš„å€¼è¿”å›æ¡ä»¶ç»“æœ</span></span><br><span class="line"><span class="keyword">return</span> bAI_Move;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿BTTaskNodeçš„UUBTT-MoveBySpine"><a href="#ç»§æ‰¿BTTaskNodeçš„UUBTT-MoveBySpine" class="headerlink" title="ç»§æ‰¿BTTaskNodeçš„UUBTT_MoveBySpine"></a>ç»§æ‰¿<code>BTTaskNode</code>çš„<code>UUBTT_MoveBySpine</code></h3><blockquote><p>Taskçš„ä»£ç æœ‰é—®é¢˜ï¼Œä»¥åæœ‰æ—¶é—´ä¼šä¿®æ”¹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">UUBTT_MoveBySpine::<span class="built_in">UUBTT_MoveBySpine</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp,Warning,<span class="built_in">TEXT</span>(<span class="string">&quot;è¿›å…¥AIè¡Œä¸ºæ ‘ä¸­çš„Task&quot;</span>))</span><br><span class="line">MoveKeySelector.<span class="built_in">AddBoolFilter</span>(<span class="keyword">this</span>,<span class="built_in">TEXT</span>(<span class="string">&quot;AI_Move&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UUBTT_MoveBySpine::InitializeFromAsset</span><span class="params">(UBehaviorTree&amp; Asset)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">InitializeFromAsset</span>(Asset);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp,Warning,<span class="built_in">TEXT</span>(<span class="string">&quot;è¿›å…¥AIè¡Œä¸ºæ ‘ä¸­çš„Taskçš„InitializeFromAsset&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–è¡Œä¸ºæ ‘ä½¿ç”¨çš„é»‘æ¿</span></span><br><span class="line">UBlackboardData* BBAsset = <span class="built_in">GetBlackboardAsset</span>();</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">ensure</span>(BBAsset))</span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®é»‘æ¿ä¸­çš„æ¡ç›®åšåˆå§‹åŒ–</span></span><br><span class="line">MoveKeySelector.<span class="built_in">ResolveSelectedKey</span>(*BBAsset);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">EBTNodeResult::Type <span class="title">UUBTT_MoveBySpine::ExecuteTask</span><span class="params">(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;è¿›å…¥AIè¡Œä¸ºæ ‘çš„æ–¹æ³•æ‰§è¡Œä¸­&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UWorld* World = <span class="built_in">GetWorld</span>();</span><br><span class="line"><span class="keyword">if</span> (!World) <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾åä¸º &quot;BP_Spine&quot; çš„ Actor</span></span><br><span class="line">ASpine* SpineActor = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;ASpine&gt; <span class="built_in">It</span>(<span class="built_in">GetWorld</span>()); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">SpineActor = *It;</span><br><span class="line"><span class="keyword">if</span> (SpineActor &amp;&amp; SpineActor-&gt;<span class="built_in">GetName</span>().<span class="built_in">Contains</span>(<span class="string">&quot;BP_Spine&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Found BP_Spine: %s&quot;</span>), *SpineActor-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!SpineActor)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æœªæ‰¾åˆ°åä¸º BP_Spine çš„ Actor&quot;</span>));</span><br><span class="line"><span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ·æ¡ç»„ä»¶</span></span><br><span class="line">USplineComponent* SplineComp = SpineActor -&gt; <span class="built_in">FindComponentByClass</span>&lt;USplineComponent&gt;();</span><br><span class="line"><span class="keyword">if</span> (!SplineComp) <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line"></span><br><span class="line">int32 NumberOfSplinePoints = SplineComp-&gt;<span class="built_in">GetNumberOfSplinePoints</span>();</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;NumberOfSplinePointsçš„å€¼ä¸ºï¼š%d&quot;</span>),NumberOfSplinePoints);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;indexå€¼ä¸ºï¼š%d&quot;</span>),index);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å– AI æ§åˆ¶å™¨</span></span><br><span class="line">AMyAIController* myAIController = <span class="built_in">Cast</span>&lt;AMyAIController&gt;(OwnerComp.<span class="built_in">GetAIOwner</span>());</span><br><span class="line"><span class="keyword">if</span> (!myAIController) <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ§åˆ¶çš„è§’è‰²</span></span><br><span class="line">APawn* ControlledPawn = myAIController-&gt;<span class="built_in">GetPawn</span>();</span><br><span class="line"><span class="keyword">if</span> (!ControlledPawn) <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (index &gt;= NumberOfSplinePoints)</span><br><span class="line">&#123;</span><br><span class="line">index = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FVector Point = SplineComp-&gt;<span class="built_in">GetLocationAtSplinePoint</span>(index, ESplineCoordinateSpace::World);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Pointsçš„å€¼ä¸ºï¼š%s&quot;</span>),*Point.<span class="built_in">ToString</span>());</span><br><span class="line">UGameplayStatics::<span class="built_in">GetPlayerController</span>(myAIController-&gt;<span class="built_in">GetWorld</span>(), <span class="number">0</span>); <span class="comment">// ç¡®ä¿ä¸–ç•Œä¸Šä¸‹æ–‡æ­£ç¡®</span></span><br><span class="line">UAIBlueprintHelperLibrary::<span class="built_in">SimpleMoveToLocation</span>(myAIController, Point);</span><br><span class="line"></span><br><span class="line">index ++;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> EBTNodeResult::Succeeded;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿AIControllerçš„AMyAIController"><a href="#ç»§æ‰¿AIControllerçš„AMyAIController" class="headerlink" title="ç»§æ‰¿AIControllerçš„AMyAIController"></a>ç»§æ‰¿<code>AIController</code>çš„<code>AMyAIController</code></h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .h</span></span><br><span class="line"><span class="comment">// è·å–æ§åˆ¶è§’è‰²ï¼Œåˆå§‹åŒ–AIé€»è¾‘å’ŒçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnPossess</span><span class="params">(APawn* possesPawn)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AIç§»åŠ¨çš„å‡½æ•°</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goAIMove</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡Œä¸ºæ ‘</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UBehaviorTree</span>* BehaviorTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»‘æ¿ç»„ä»¶</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UBlackboardComponent</span>* BlackboardComp;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨é»‘æ¿èµ„äº§çš„å¼•ç”¨</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditDefaultsOnly, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line">UBlackboardData* BlackboardAsset;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">.<span class="function">cpp</span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="title">AMyAIController::AMyAIController</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">BehaviorTree = <span class="literal">nullptr</span>;</span><br><span class="line">BlackboardComp = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyAIController::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyAIController::OnPossess</span><span class="params">(APawn* possesPawn)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">OnPossess</span>(possesPawn);</span><br><span class="line"><span class="comment">// æ£€æŸ¥é»‘æ¿èµ„äº§æ˜¯å¦å·²è®¾ç½®</span></span><br><span class="line"><span class="keyword">if</span> (BlackboardAsset)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é»‘æ¿  åˆå§‹åŒ– UBlackboardComponent ä½¿ç”¨æŒ‡å®šçš„ UBlackboardData èµ„äº§</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">UseBlackboard</span>(BlackboardAsset, BlackboardComp))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿åˆå§‹åŒ–æˆåŠŸ&quot;</span>));</span><br><span class="line">            </span><br><span class="line"><span class="comment">// å¯åŠ¨è¡Œä¸ºæ ‘ï¼ˆå¦‚æœæœ‰ï¼‰</span></span><br><span class="line"><span class="keyword">if</span> (BehaviorTree)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">RunBehaviorTree</span>(BehaviorTree);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿åˆå§‹åŒ–å¤±è´¥ï¼è¯·æ£€æŸ¥BlackboardAssetæ˜¯å¦æ­£ç¡®è®¾ç½®&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;è¯·è®¾ç½®BlackboardAssetï¼&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyAIController::goAIMove</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;AIå¼€å§‹ç§»åŠ¨&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡®ä¿OnPossesså·²è¢«è°ƒç”¨</span></span><br><span class="line"><span class="keyword">if</span> (!BlackboardComp &amp;&amp; !BlackboardAsset)</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;BlackboardCompå’ŒBlackboardAssetå‡æ— æ³•è·å–ï¼&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (!BlackboardComp &amp;&amp; BlackboardAsset)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿ç»„ä»¶ä¸ºç©ºï¼Œå°è¯•é‡æ–°åˆå§‹åŒ–&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">UseBlackboard</span>(BlackboardAsset, BlackboardComp))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿é‡æ–°åˆå§‹åŒ–æˆåŠŸ&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;é»‘æ¿é‡æ–°åˆå§‹åŒ–å¤±è´¥ï¼&quot;</span>));</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;å°è¯•ä¿®æ”¹é»‘æ¿å€¼&quot;</span>));</span><br><span class="line"><span class="comment">// è®¾ç½®é»‘æ¿ä¸­çš„å€¼</span></span><br><span class="line"><span class="keyword">if</span> (BlackboardComp)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;è·å–åˆ°é»‘æ¿ä¸­çš„å€¼&quot;</span>));</span><br><span class="line"><span class="comment">// ä¿®æ”¹é»‘æ¿ä¸­çš„å€¼ï¼Œä¿®æ”¹åï¼Œè§¦å‘è£…é¥°å™¨Decoratoråˆ¤æ–­å‡½æ•°ï¼Œæ‰§è¡ŒTaskå‡½æ•°</span></span><br><span class="line">BlackboardComp-&gt;<span class="built_in">SetValueAsBool</span>(<span class="built_in">FName</span>(<span class="string">&quot;AI_Move&quot;</span>), <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æ— æ³•è·å–é»‘æ¿ç»„ä»¶&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h1><p><a href="https://zhuanlan.zhihu.com/p/174722853">UE4 C++è‡ªå®šä¹‰AIè¡Œä¸ºæ ‘çš„Decoratorå’ŒTaskèŠ‚ç‚¹</a></p><p><a href="https://blog.csdn.net/qq_63556231/article/details/146141455">ã€UEC++ã€‘AIè¡Œä¸ºæ ‘åŠå…¶ç›¸å…³è“å›¾éƒ¨åˆ†åœ¨C++ä¸­çš„å®ç°</a></p><p><a href="https://blog.csdn.net/qq_58814201/article/details/135949959">UEC++å­¦ä¹ ï¼ˆåä¸€ï¼‰AIè¡Œä¸ºæ ‘</a></p><p><a href="https://blog.csdn.net/qq_27438091/article/details/146437480">UE5&amp;C++ åœ¨ AIControllerä¸­ç»‘å®šè¡Œä¸ºæ ‘ï¼Œå’Œé»‘æ¿åˆå§‹åŒ–</a></p>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UE</title>
      <link href="/2025/06/03/UE/"/>
      <url>/2025/06/03/UE/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•æ ¹æ®A-è§„åˆ’è·¯çº¿è‡ªåŠ¨ç”Ÿæˆæ ·æ¡çº¿ï¼Œå¹¶è®©äººç‰©æŒ‰ç…§æ ·æ¡çº¿ç§»åŠ¨"><a href="#å¦‚ä½•æ ¹æ®A-è§„åˆ’è·¯çº¿è‡ªåŠ¨ç”Ÿæˆæ ·æ¡çº¿ï¼Œå¹¶è®©äººç‰©æŒ‰ç…§æ ·æ¡çº¿ç§»åŠ¨" class="headerlink" title="å¦‚ä½•æ ¹æ®A *è§„åˆ’è·¯çº¿è‡ªåŠ¨ç”Ÿæˆæ ·æ¡çº¿ï¼Œå¹¶è®©äººç‰©æŒ‰ç…§æ ·æ¡çº¿ç§»åŠ¨"></a>å¦‚ä½•æ ¹æ®A *è§„åˆ’è·¯çº¿è‡ªåŠ¨ç”Ÿæˆæ ·æ¡çº¿ï¼Œå¹¶è®©äººç‰©æŒ‰ç…§æ ·æ¡çº¿ç§»åŠ¨</h1><h2 id="æ ¹æ®ç›®çš„åœ°èŠ‚ç‚¹ç”ŸæˆA-è§„åˆ’è·¯çº¿"><a href="#æ ¹æ®ç›®çš„åœ°èŠ‚ç‚¹ç”ŸæˆA-è§„åˆ’è·¯çº¿" class="headerlink" title="æ ¹æ®ç›®çš„åœ°èŠ‚ç‚¹ç”ŸæˆA*è§„åˆ’è·¯çº¿"></a>æ ¹æ®ç›®çš„åœ°èŠ‚ç‚¹ç”ŸæˆA*è§„åˆ’è·¯çº¿</h2><blockquote><p>å‰ç½®å·¥ä½œï¼šUE5ä¸­åˆ›å»ºä¸€ä¸ªä¿¯è§†è§†è§’çš„æ¸¸æˆï¼Œæ¸…é™¤æ¸¸æˆå†…å¤šä½™çš„æŸ±å­</p><p>ä»¥äººç‰©å½“å‰æ‰€åœ¨ä½ç½®ä¸ºèµ·å§‹ç‚¹</p></blockquote><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><h4 id="åˆ›å»ºä¸€ä¸ªæè´¨"><a href="#åˆ›å»ºä¸€ä¸ªæè´¨" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæè´¨"></a>åˆ›å»ºä¸€ä¸ªæè´¨</h4><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538496.png" alt="image-20250602100117551"></p><p>åœ¨æè´¨å†…è®¾ç½®è“å›¾ï¼Œä¸»è¦æ˜¯å®ç°æè´¨çš„é€æ˜æ•ˆæœ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538497.png" alt="image-20250602100213586"></p><h4 id="åˆ›å»ºæ£‹ç›˜æ ¼"><a href="#åˆ›å»ºæ£‹ç›˜æ ¼" class="headerlink" title="åˆ›å»ºæ£‹ç›˜æ ¼"></a>åˆ›å»ºæ£‹ç›˜æ ¼</h4><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538499.png" alt="image-20250602100527813"></p><p>åˆ›å»ºæ£‹ç›˜æ ¼çš„ç¢°æ’ç›’å­ï¼ŒåŒæ—¶è®¾ç½®æ£‹ç›˜æ ¼çš„ç¢°æ’ä¸ºNoCollision </p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538500.png" alt="image-20250602100700059"></p><h4 id="è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹"><a href="#è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹" class="headerlink" title="è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹"></a>è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹</h4><blockquote><p>è¿™é‡Œä½¿ç”¨ç°è‰²ç«‹æ–¹ä½“æ¥ä½œä¸ºç»ˆç‚¹ï¼Œç™½è‰²ä½œä¸ºèµ·ç‚¹ã€‚åšåº¦éƒ½è°ƒæ•´ä¸º0.01</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538501.png" alt="image-20250603150939201"></p><h3 id="è“å›¾å®ç°"><a href="#è“å›¾å®ç°" class="headerlink" title="è“å›¾å®ç°"></a>è“å›¾å®ç°</h3><blockquote><p>å‡åœ¨BP_TopDownCharacterä¸­</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538502.png" alt="image-20250603151518050"></p><blockquote><p>FUNC_A_Star_moveCaculate</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538503.png" alt="image-20250603151646434"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538504.png" alt="image-20250603151659970"></p><blockquote><p>å°†è§„åˆ’è·¯çº¿è½¬åŒ–ä¸ºåæ ‡ç‚¹ï¼Œç”¨äºåé¢çš„ç”Ÿæˆæ ·æ¡ç‚¹</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538505.png" alt="image-20250603151717878"></p><blockquote><p>FUNC_DistanceToDestination</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538506.png" alt="image-20250603151749634"></p><blockquote><p>ä½¿ç”¨çš„å˜é‡å‡½æ•°</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538507.png" alt="image-20250603152011515"></p><h2 id="æ ¹æ®è§„åˆ’è·¯çº¿å½¢æˆæ ·æ¡ç‚¹é›†"><a href="#æ ¹æ®è§„åˆ’è·¯çº¿å½¢æˆæ ·æ¡ç‚¹é›†" class="headerlink" title="æ ¹æ®è§„åˆ’è·¯çº¿å½¢æˆæ ·æ¡ç‚¹é›†"></a>æ ¹æ®è§„åˆ’è·¯çº¿å½¢æˆæ ·æ¡ç‚¹é›†</h2><blockquote><p>BP_TopDownCharacterä¸­</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538508.png" alt="image-20250603152346860"></p><blockquote><p>BP_Spineä¸­</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538509.png" alt="image-20250603152336286"></p><h2 id="AIæŒ‰ç…§æ ·æ¡ç‚¹ä½ç½®ç§»åŠ¨ï¼ˆAIè¡Œä¸ºæ ‘ï¼‰"><a href="#AIæŒ‰ç…§æ ·æ¡ç‚¹ä½ç½®ç§»åŠ¨ï¼ˆAIè¡Œä¸ºæ ‘ï¼‰" class="headerlink" title="AIæŒ‰ç…§æ ·æ¡ç‚¹ä½ç½®ç§»åŠ¨ï¼ˆAIè¡Œä¸ºæ ‘ï¼‰"></a>AIæŒ‰ç…§æ ·æ¡ç‚¹ä½ç½®ç§»åŠ¨ï¼ˆAIè¡Œä¸ºæ ‘ï¼‰</h2><blockquote><p>BP_TopDownCharacterä¸­</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538510.png" alt="image-20250603152433571"></p><blockquote><p>AIController_Newä¸­</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538511.png" alt="image-20250603152604913"></p><blockquote><p>BP_AiTree</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538512.png" alt="image-20250603152921518"></p><blockquote><p>é»‘æ¿</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538513.png" alt="image-20250603152954643"></p><blockquote><p>æ ¹æ®æ ·æ¡çº¿æ‰¾ç‚¹</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538514.png" alt="image-20250603152829021"></p><h2 id="æ‰€æœ‰åˆ›å»ºçš„è“å›¾ç±»"><a href="#æ‰€æœ‰åˆ›å»ºçš„è“å›¾ç±»" class="headerlink" title="æ‰€æœ‰åˆ›å»ºçš„è“å›¾ç±»"></a>æ‰€æœ‰åˆ›å»ºçš„è“å›¾ç±»</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538515.png" alt="image-20250603153230871"></p><h2 id="ä¼˜åŒ–äº†ç”Ÿæˆè·¯å¾„ç‚¹åŒä¸€æ–¹å‘é‡å¤ç”Ÿæˆ"><a href="#ä¼˜åŒ–äº†ç”Ÿæˆè·¯å¾„ç‚¹åŒä¸€æ–¹å‘é‡å¤ç”Ÿæˆ" class="headerlink" title="ä¼˜åŒ–äº†ç”Ÿæˆè·¯å¾„ç‚¹åŒä¸€æ–¹å‘é‡å¤ç”Ÿæˆ"></a>ä¼˜åŒ–äº†ç”Ÿæˆè·¯å¾„ç‚¹åŒä¸€æ–¹å‘é‡å¤ç”Ÿæˆ</h2><h3 id="æ–°å¢åŠ çš„å‡½æ•°å’Œå˜é‡"><a href="#æ–°å¢åŠ çš„å‡½æ•°å’Œå˜é‡" class="headerlink" title="æ–°å¢åŠ çš„å‡½æ•°å’Œå˜é‡"></a>æ–°å¢åŠ çš„å‡½æ•°å’Œå˜é‡</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506041116540.png" alt="image-20250604110931175"></p><h3 id="æ–°å¢å‡½æ•°å…·ä½“å†…å®¹"><a href="#æ–°å¢å‡½æ•°å…·ä½“å†…å®¹" class="headerlink" title="æ–°å¢å‡½æ•°å…·ä½“å†…å®¹"></a>æ–°å¢å‡½æ•°å…·ä½“å†…å®¹</h3><blockquote><p>FUNC_JoinSpecialPointå‡½æ•°ä¸­</p><p>isChangeå˜é‡é»˜è®¤å€¼ä¸º-1ï¼Œè¡¨ç¤ºå°šæœªåŠ å…¥ç‚¹ï¼ˆèµ·ç‚¹å’Œç»ˆç‚¹é™¤å¤–ï¼‰</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506041116542.png" alt="image-20250604110745369"></p><blockquote><p>FUNC_changeLastPosition</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506041116543.png" alt="image-20250604110820543"></p><blockquote><p>FUNC_addPosition</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506041116544.png" alt="image-20250604110840287"></p><h3 id="æ–°å¢å˜é‡å€¼çš„è·å–å’Œä¸»ä½“éƒ¨åˆ†éƒ¨åˆ†ä¿®æ”¹å†…å®¹"><a href="#æ–°å¢å˜é‡å€¼çš„è·å–å’Œä¸»ä½“éƒ¨åˆ†éƒ¨åˆ†ä¿®æ”¹å†…å®¹" class="headerlink" title="æ–°å¢å˜é‡å€¼çš„è·å–å’Œä¸»ä½“éƒ¨åˆ†éƒ¨åˆ†ä¿®æ”¹å†…å®¹"></a>æ–°å¢å˜é‡å€¼çš„è·å–å’Œä¸»ä½“éƒ¨åˆ†éƒ¨åˆ†ä¿®æ”¹å†…å®¹</h3><blockquote><p>lastPositionå€¼çš„è·å–å’Œèµ·å§‹ç‚¹ä½ç½®åŠ å…¥æ•°ç»„</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506041116545.png" alt="image-20250604111030416"></p><blockquote><p>å°†ç»ˆç‚¹æœ€ååŠ å…¥æ•°ç»„</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506041116546.png" alt="image-20250604111045692"></p>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEé‡åˆ°çš„å„ç§é—®é¢˜</title>
      <link href="/2025/05/30/UE%E9%81%87%E5%88%B0%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/"/>
      <url>/2025/05/30/UE%E9%81%87%E5%88%B0%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬vs2022æ—¶ï¼ŒUE5-4æ— æ³•åˆ›å»ºæˆåŠŸUEC-é¡¹ç›®"><a href="#ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬vs2022æ—¶ï¼ŒUE5-4æ— æ³•åˆ›å»ºæˆåŠŸUEC-é¡¹ç›®" class="headerlink" title="ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬vs2022æ—¶ï¼ŒUE5.4æ— æ³•åˆ›å»ºæˆåŠŸUEC++é¡¹ç›®"></a>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬vs2022æ—¶ï¼ŒUE5.4æ— æ³•åˆ›å»ºæˆåŠŸUEC++é¡¹ç›®</h1><blockquote><p>Running E:&#x2F;Epic&#x2F;UE_5.4&#x2F;Engine&#x2F;Build&#x2F;BatchFiles&#x2F;Build.bat Development Win64 -Project&#x3D;â€E:&#x2F;UE&#x2F;UE5&#x2F;FirDemo&#x2F;FirDemo.uprojectâ€ -TargetType&#x3D;Editor -Progress -NoEngineChanges -NoHotReloadFromIDE Using bundled DotNet SDK version: 6.0.302 Running UnrealBuildTool: dotnet â€œ....\Engine\Binaries\DotNET\UnrealBuildTool\UnrealBuildTool.dllâ€ Development Win64 -Project&#x3D;â€E:&#x2F;UE&#x2F;UE5&#x2F;FirDemo&#x2F;FirDemo.uprojectâ€ -TargetType&#x3D;Editor -Progress -NoEngineChanges -NoHotReloadFromIDE Log file: C:\Users\liks\AppData\Local\UnrealBuildTool\Log.txt Available x64 toolchains (1): * D:\env\vs2022\VC\Tools\MSVC\14.44.35207    (Family&#x3D;14.44.35207, FamilyRank&#x3D;5, Version&#x3D;14.44.35208, Is64Bit&#x3D;True, ReleaseChannel&#x3D;Latest, Architecture&#x3D;x64) Visual Studio 2022 compiler version 14.44.35208 is not a preferred version. Please use the latest preferred version 14.38.33130 Available x64 toolchains (1): * D:\env\vs2022\VC\Tools\MSVC\14.44.35207    (Family&#x3D;14.44.35207, FamilyRank&#x3D;5, Version&#x3D;14.44.35208, Is64Bit&#x3D;True, ReleaseChannel&#x3D;Latest, Architecture&#x3D;x64) Visual Studio 2022 compiler version 14.44.35208 is not a preferred version. Please use the latest preferred version 14.38.33130 Creating makefile for FirDemoEditor (no existing makefile) Available x64 toolchains (1): * D:\env\vs2022\VC\Tools\MSVC\14.44.35207    (Family&#x3D;14.44.35207, FamilyRank&#x3D;5, Version&#x3D;14.44.35208, Is64Bit&#x3D;True, ReleaseChannel&#x3D;Latest, Architecture&#x3D;x64) Visual Studio 2022 compiler version 14.44.35208 is not a preferred version. Please use the latest preferred version 14.38.33130 Available x64 toolchains (1): * D:\env\vs2022\VC\Tools\MSVC\14.44.35207    (Family&#x3D;14.44.35207, FamilyRank&#x3D;5, Version&#x3D;14.44.35208, Is64Bit&#x3D;True, ReleaseChannel&#x3D;Latest, Architecture&#x3D;x64) Visual Studio 2022 compiler version 14.44.35208 is not a preferred version. Please use the latest preferred version 14.38.33130 @progress push 5% Parsing headers for FirDemoEditor  Running Internal UnrealHeaderTool E:\UE\UE5\FirDemo\FirDemo.uproject E:\UE\UE5\FirDemo\Intermediate\Build\Win64\FirDemoEditor\Development\FirDemoEditor.uhtmanifest -WarningsAsErrors -installed Total of 14 written Reflection code generated for FirDemoEditor in 0.8866635 seconds @progress pop Building FirDemoEditorâ€¦ Using Visual Studio 2022 14.44.35208 toolchain (D:\env\vs2022\VC\Tools\MSVC\14.44.35207) and Windows 10.0.26100.0 SDK (C:\Program Files (x86)\Windows Kits\10). Warning: Visual Studio 2022 compiler is not a preferred version Determining max actions to execute in parallel (14 physical cores, 20 logical cores)  Executing up to 14 processes, one per physical core  Requested 1.5 GB memory per action, 5.85 GB available: limiting max parallel actions to 3 Using Parallel executor to run 19 action(s) â€”â€” Building 19 action(s) started â€”â€” [1&#x2F;19] Resource Default.rc2 [2&#x2F;19] Compile [x64] SharedPCH.UnrealEd.Project.ValApi.Cpp20.cpp E:\Epic\UE_5.4\Engine\Source\Runtime\Core\Public\Experimental\ConcurrentLinearAllocator.h(31): error C4668: Ã»?????__has_feature?????ÎªÔ¤?????ê£¬???0???????#if&#x2F;#elif?? E:\Epic\UE_5.4\Engine\Source\Runtime\Core\Public\Experimental\ConcurrentLinearAllocator.h(31): error C4067: Ô¤????Ö¸????????- Ó¦??????? E:\Epic\UE_5.4\Engine\Source\Runtime\Engine\Classes\Engine\SkeletalMesh.h(930): warning C4996: â€˜FBoneMirrorInfoâ€™: FBoneMirrorInfo is deprecated. Please use UMirrorDataTable for mirroring support. Please update your code to the new API before upgrading to the next release, otherwise your project will no longer compile. Total time in Parallel executor: 20.44 seconds Total execution time: 24.20 seconds</p></blockquote><p>é”™è¯¯ä»£ç å¦‚ä¸Šæ‰€ç¤º</p><p>åŸå› ï¼šæŒ‰ç…§UEå®˜æ–¹ç»™çš„ç‰ˆæœ¬æ¨èæ˜¯vs2022 17.4æˆ–è€…æ›´é«˜ç‰ˆæœ¬ï¼Œä½†æ˜¯åœ¨VS 2022 17.13.5ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œ14.38.33130ç‰ˆæœ¬çš„MSVCä¼šè¢«åˆ é™¤ï¼Œæ›¿æ¢æˆ14.43.34808ç‰ˆæœ¬ï¼Œè€ŒUE 5.4å¹¶ä¸æ”¯æŒè¿™ä¸ªç‰ˆæœ¬ï¼Œ<strong>æ‰€ä»¥UE 5.4å»ºè®®ä½¿ç”¨VS 2022 17.4-17.8ç‰ˆæœ¬</strong>ã€‚</p><h2 id="VS-2022-17-8-3ç‰ˆæœ¬ä¸‹è½½"><a href="#VS-2022-17-8-3ç‰ˆæœ¬ä¸‹è½½" class="headerlink" title="VS 2022 17.8.3ç‰ˆæœ¬ä¸‹è½½"></a>VS 2022 17.8.3ç‰ˆæœ¬ä¸‹è½½</h2><p>ä¸‹é¢ç»™å‡ºVS 2022 17.8.3ç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ï¼š<a href="https://download.visualstudio.microsoft.com/download/pr/63b5064f-af60-4cbe-96cd-a9dd9d41ee3d/77d65fe2bfc509ca5cd190cec9e48b62c98195d6fc5297113c91819776abb047/vs_Community.exe">https://download.visualstudio.microsoft.com/download/pr/63b5064f-af60-4cbe-96cd-a9dd9d41ee3d/77d65fe2bfc509ca5cd190cec9e48b62c98195d6fc5297113c91819776abb047/vs_Community.exe</a></p><p>å¦å¤–é™„ä¸Šå¦ä¸€ç§ä¸‹è½½VS 2022å‰ç½®ç‰ˆæœ¬çš„æ–¹æ³•ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•æ— æ³•æ”¹å˜ VSçš„ä¸‹è½½ä½ç½®ï¼Œåªèƒ½ä¸‹è½½åœ¨Cç›˜ä¸Š</p><h2 id="å¦ä¸€ç§æ–¹æ³•"><a href="#å¦ä¸€ç§æ–¹æ³•" class="headerlink" title="å¦ä¸€ç§æ–¹æ³•"></a>å¦ä¸€ç§æ–¹æ³•</h2><p>æŒ‰ä¸‹ <strong>Win+R</strong>ï¼Œè¾“å…¥ <strong>cmd</strong>ï¼Œç„¶åæŒ‰ä¸‹å›è½¦ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ã€‚è¾“å…¥ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">winget <span class="keyword">show</span> --versions <span class="string">&quot;Microsoft.VisualStudio.2022.Community&quot;</span></span><br></pre></td></tr></table></figure><p>æŒ‰ä¸‹å›è½¦è¿è¡Œã€‚</p><p>ç³»ç»Ÿè¾“å‡ºä¸€åˆ— <strong>17.x.x</strong> æ ¼å¼çš„ç‰ˆæœ¬å·ï¼Œä»ä¸­æ‰¾åˆ°ä½ éœ€è¦å®‰è£…çš„ç‰ˆæœ¬ã€‚</p><p>æ­¤å¤„ä»¥ 17.9.1 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œè¾“å…¥ï¼ˆæ³¨æ„æŠŠé‡Œé¢çš„ <em>17.9.1</em> æ›¿æ¢æˆæ‚¨å®é™…éœ€è¦å®‰è£…çš„ç‰ˆæœ¬ï¼‰ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">winget</span> install -v <span class="number">17</span>.<span class="number">9</span>.<span class="number">1</span> <span class="string">&quot;Microsoft.VisualStudio.2022.Community&quot;</span></span><br></pre></td></tr></table></figure><p>æŒ‰ä¸‹å›è½¦è¿è¡Œï¼Œå°±ä¼šå¼€å§‹å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Visual Studioã€‚</p><p>ï¼ˆå®‰è£…è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå¼¹å‡ºæç¤º Do you agree to all the source agreement terms? [Y] Yes [N] No:</p><p>å¦‚æœå¼¹å‡ºäº†ä»¥ä¸Šæç¤ºï¼Œè¾“å…¥ <strong>y</strong>ï¼ŒæŒ‰ä¸‹å›è½¦è¿è¡Œã€‚ï¼‰</p><h1 id="å¦‚ä½•å°†UE5çš„è“å›¾èŠ‚ç‚¹ä»è‹±æ–‡æ”¹ä¸ºä¸­æ–‡"><a href="#å¦‚ä½•å°†UE5çš„è“å›¾èŠ‚ç‚¹ä»è‹±æ–‡æ”¹ä¸ºä¸­æ–‡" class="headerlink" title="å¦‚ä½•å°†UE5çš„è“å›¾èŠ‚ç‚¹ä»è‹±æ–‡æ”¹ä¸ºä¸­æ–‡"></a>å¦‚ä½•å°†UE5çš„è“å›¾èŠ‚ç‚¹ä»è‹±æ–‡æ”¹ä¸ºä¸­æ–‡</h1><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506031538194.png" alt="image-20250602102434694"></p><p>æ‰“ä¸Šå‹¾å³å¯</p><h1 id="å¯¼å…¥FBXæ¨¡å‹ä¸æ˜¯ä¸€ä¸ªæ•´ä½“"><a href="#å¯¼å…¥FBXæ¨¡å‹ä¸æ˜¯ä¸€ä¸ªæ•´ä½“" class="headerlink" title="å¯¼å…¥FBXæ¨¡å‹ä¸æ˜¯ä¸€ä¸ªæ•´ä½“"></a>å¯¼å…¥FBXæ¨¡å‹ä¸æ˜¯ä¸€ä¸ªæ•´ä½“</h1><blockquote><p>[!warning]</p><p>æŠŠâ€œåˆå¹¶ç½‘æ ¼ä½“â€æ‰“å‹¾ï¼ŒåŒæ—¶å–æ¶ˆ éª¨æ¶ç½‘æ ¼ä½“ çš„å‹¾é€‰</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556024.png" alt="image-20250618111001170"></p><h1 id="å¦‚ä½•ä½¿ç”¨UEC-å®ç°UEè“å›¾ä¸­çš„æ–¹æ³•"><a href="#å¦‚ä½•ä½¿ç”¨UEC-å®ç°UEè“å›¾ä¸­çš„æ–¹æ³•" class="headerlink" title="å¦‚ä½•ä½¿ç”¨UEC++å®ç°UEè“å›¾ä¸­çš„æ–¹æ³•"></a>å¦‚ä½•ä½¿ç”¨UEC++å®ç°UEè“å›¾ä¸­çš„æ–¹æ³•</h1><blockquote><p>è¯´åœ¨å‰é¢ï¼šUEè“å›¾æ¨èä½¿ç”¨è‹±æ–‡ç‰ˆæœ¬ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½æ‰¾åˆ°å¯¹åº”çš„åº“åœ¨å“ªé‡Œï¼Œä»¥åŠåº“ä¸­çš„å‡½æ•°åç§°</p><p>æ–¹æ³•1ï¼šä½¿ç”¨UEè“å›¾ç»™çš„è“å›¾æ–¹æ³•è§£é‡Šï¼Œç„¶åè‡ªå·±å»åº“é‡Œå¯»æ‰¾å¯¹åº”çš„å‡½æ•°</p><p>æ–¹æ³•2ï¼šä½¿ç”¨AIç›´æ¥æˆªå›¾è“å›¾ä¸­çš„æ–¹æ³•å»æœç´¢å¯¹åº”çš„C++å‡½æ•°</p><p>æœ¬æ–‡è¿™é‡Œåªä»‹ç»æ–¹æ³•1</p></blockquote><h2 id="ä¾‹å­1"><a href="#ä¾‹å­1" class="headerlink" title="ä¾‹å­1"></a>ä¾‹å­1</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556025.png" alt="image-20250628170938572"></p><blockquote><p>[!Warning]</p><p>åœ¨UEC++ä¸­çš„ä»£ç å°±åœ¨<code>KismetSystemLibrary.h</code>ä¸­ï¼Œæˆ‘ä»¬åœ¨UEC++ä¸­æœç´¢<code>KismetSystemLibrary</code>åº“ï¼Œå³å¯å¾—åˆ°å¯¹åº”çš„å‡½æ•°</p><p>æ³¨ï¼šæ‰¾åˆ°å¯¹åº”æ–¹æ³•åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­å‚æ•°æ˜¯å¦å‡†ç¡®</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556027.png" alt="image-20250628171159895"></p><h2 id="ä¾‹å­2"><a href="#ä¾‹å­2" class="headerlink" title="ä¾‹å­2"></a>ä¾‹å­2</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556028.png" alt="image-20250628171953536"></p><blockquote><p>[!Warning]</p><p>æ ¹æ®å›¾ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“è¯¥æ–¹æ³•æ˜¯åœ¨<code>GameplayStatics.h</code>ä¸­ï¼Œæ•…æˆ‘ä»¬å»è¿™ä¸ª<code>GameplayStatics</code>åº“é‡Œé¢å¯»æ‰¾å¯¹åº”çš„ç»“æœã€‚å¦‚ä¸‹å›¾ï¼Œç¬¬ä¸€æ¬¡æˆ‘ä»¬å‘ç°æ²¡æœ‰æ‰¾åˆ°ï¼›è¿™æ—¶å€™åªéœ€è¦æŠŠä¸­é—´çš„ç©ºæ ¼å»æ‰å³å¯</p><p>æ³¨ï¼šæ‰¾åˆ°å¯¹åº”æ–¹æ³•åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­å‚æ•°æ˜¯å¦å‡†ç¡®</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556029.png" alt="image-20250628172155701"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556030.png" alt="image-20250628172242386"></p><h1 id="ä¸–ç•Œä¸­å­˜åœ¨ä¸€ä¸ªä¸æ˜¯è‡ªå·±æ”¾ç½®çš„ç±»"><a href="#ä¸–ç•Œä¸­å­˜åœ¨ä¸€ä¸ªä¸æ˜¯è‡ªå·±æ”¾ç½®çš„ç±»" class="headerlink" title="ä¸–ç•Œä¸­å­˜åœ¨ä¸€ä¸ªä¸æ˜¯è‡ªå·±æ”¾ç½®çš„ç±»"></a>ä¸–ç•Œä¸­å­˜åœ¨ä¸€ä¸ªä¸æ˜¯è‡ªå·±æ”¾ç½®çš„ç±»</h1><blockquote><p>è‡ªå·±åœ¨ä¸–ç•Œä¸­åªæ”¾å…¥äº†ä¸€ä¸ªSpineç±»çš„è“å›¾BP_Spineï¼Œä¸ºä»€ä¹ˆ<code>UGameplayStatics::GetAllActorsOfClass(World, ASpine::StaticClass(), FoundActors);</code>è·å–åˆ°çš„<code>ASpine</code>ç±»å‹æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªSpine0ï¼Œä¸€ä¸ªè‡ªå·±æ”¾ç½®çš„BP_Spine</p></blockquote><p>åŸå› ï¼šåœ¨å¦ä¸€ä¸ªC++ç±»ä¸­è°ƒç”¨<code>ASpine</code>ç±»ä¸­å‡½æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨<code>GetWorld()-&gt;SpawnActor&lt;ASpine&gt;(...)</code>å‡½æ•°ï¼Œæ­¤å‡½æ•°ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªåŠ¨æ€å¯¹è±¡ï¼Œç¡®ä¿å¯¹è±¡å­˜åœ¨äºä¸–ç•Œä¸­ï¼Œçµæ´»æ§åˆ¶ç”Ÿæˆæ¡ä»¶</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506291556031.png" alt="image-20250629133056598"></p><p>äºæ˜¯ï¼Œä½¿ç”¨<code>GetAllActorsOfClass</code>è·å–åˆ°çš„ç»“æœæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªä¸ºåŠ¨æ€å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯è‡ªå·±æ”¾ç½®åœ¨ä¸–ç•Œä¸­çš„è“å›¾ç±»ã€‚</p><h1 id="åœ¨ä¸€ä¸ªC-ç±»ä¸­è°ƒç”¨å¦ä¸€ä¸ªC-ç±»ä¸­çš„å˜é‡æˆ–è€…å‡½æ•°"><a href="#åœ¨ä¸€ä¸ªC-ç±»ä¸­è°ƒç”¨å¦ä¸€ä¸ªC-ç±»ä¸­çš„å˜é‡æˆ–è€…å‡½æ•°" class="headerlink" title="åœ¨ä¸€ä¸ªC++ç±»ä¸­è°ƒç”¨å¦ä¸€ä¸ªC++ç±»ä¸­çš„å˜é‡æˆ–è€…å‡½æ•°"></a>åœ¨ä¸€ä¸ªC++ç±»ä¸­è°ƒç”¨å¦ä¸€ä¸ªC++ç±»ä¸­çš„å˜é‡æˆ–è€…å‡½æ•°</h1><p>å‡è®¾åœ¨Aç±»ä¸­è°ƒç”¨Bç±»çš„å˜é‡Cå’Œå‡½æ•°D</p><ol><li>åœ¨Aç±»ä¸­æ‰¾åˆ°Bç±»çš„Actorï¼Œå¹¶åˆ›å»ºå¼•ç”¨G</li><li>ç›´æ¥ä½¿ç”¨Gæ¥è·å–å˜é‡Cå’Œæ‰§è¡Œå‡½æ•°D</li></ol><h1 id="Get-All-Actors-of-Classçš„æ›¿ä»£"><a href="#Get-All-Actors-of-Classçš„æ›¿ä»£" class="headerlink" title="Get All Actors of Classçš„æ›¿ä»£"></a>Get All Actors of Classçš„æ›¿ä»£</h1><p><code>GetAllActorsOfClass</code> æ˜¯ Unreal Engine ä¸­ç”¨äºè·å–åœºæ™¯ä¸­æ‰€æœ‰å±äºç‰¹å®šç±»çš„æ´»åŠ¨ Actor çš„å‡½æ•°ã€‚è™½ç„¶å®ƒåŠŸèƒ½å¼ºå¤§ï¼Œä½†ä¹Ÿæœ‰å…¶å±€é™æ€§å’Œæ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å½“åœºæ™¯ä¸­æœ‰å¤§é‡ Actor æ—¶ã€‚å®ƒçš„ä¸»è¦ç¼ºç‚¹åŒ…æ‹¬ï¼š</p><ol><li><strong>æ€§èƒ½å¼€é”€</strong>ï¼š<code>GetAllActorsOfClass</code> éœ€è¦éå†æ•´ä¸ªåœºæ™¯ä¸­çš„æ‰€æœ‰ Actor æ¥æŸ¥æ‰¾ç¬¦åˆæŒ‡å®šç±»çš„å¯¹è±¡ï¼Œè¿™åœ¨ Actor æ•°é‡è¾ƒå¤šçš„æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´æ˜¾è‘—çš„æ€§èƒ½ä¸‹é™ã€‚</li><li><strong>é¢‘ç¹è°ƒç”¨çš„å½±å“</strong>ï¼šå¦‚æœåœ¨æ¯ä¸€å¸§æˆ–éå¸¸é¢‘ç¹åœ°è°ƒç”¨ <code>GetAllActorsOfClass</code>ï¼Œä¼šå¯¹æ¸¸æˆæ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå› ä¸ºå®ƒæ¯æ¬¡éƒ½è¢«å¼ºåˆ¶æ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„æœç´¢è¿‡ç¨‹ã€‚</li></ol><h2 id="æ›¿æ¢æ–¹æ¡ˆ"><a href="#æ›¿æ¢æ–¹æ¡ˆ" class="headerlink" title="æ›¿æ¢æ–¹æ¡ˆ"></a>æ›¿æ¢æ–¹æ¡ˆ</h2><h3 id="C-ä¸­"><a href="#C-ä¸­" class="headerlink" title="C++ä¸­"></a>C++ä¸­</h3><ol><li>**ä½¿ç”¨<code>TActorIterator</code>**ï¼šå¯¹äºåªéœ€è¦ä¸€æ¬¡æ€§æŸ¥æ‰¾çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ <code>TActorIterator</code>ï¼ˆC++ï¼‰æˆ–è“å›¾ä¸­çš„ç›¸åº”èŠ‚ç‚¹ã€‚ç›¸æ¯” <code>GetAllActorsOfClass</code>ï¼Œè¿™ç§æ–¹å¼æä¾›äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå…è®¸ä½ è¾¹è¿­ä»£è¾¹å¤„ç†Actorï¼Œè€Œä¸éœ€è¦é¦–å…ˆå°†å®ƒä»¬å…¨éƒ¨æ”¶é›†åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚</li><li>**åˆ©ç”¨<code>GameMode</code>ã€<code>GameState</code>æˆ–<code>PlayerController</code>**ï¼šå¦‚æœä½ éœ€è¦æŸ¥è¯¢çš„æ˜¯ç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼ˆå¦‚ç©å®¶è§’è‰²ï¼‰ï¼Œå¯ä»¥é€šè¿‡ <code>UGameplayStatics::GetPlayerCharacter</code> æˆ–è®¿é—® <code>AGameModeBase</code>&#x2F;<code>AGameStateBase</code> æ¥ç›´æ¥è·å–ï¼Œè€Œä¸æ˜¯éå†æ‰€æœ‰Actorã€‚</li></ol><h3 id="è“å›¾ä¸­"><a href="#è“å›¾ä¸­" class="headerlink" title="è“å›¾ä¸­"></a>è“å›¾ä¸­</h3><p>è‡ªå®šä¹‰çš„C++å‡½æ•°ï¼Œè¯¥å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>TActorIterator</code> æ¥æ”¶é›†æ‰€éœ€Actorçš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡æ ‡è®°ä¸º <code>BlueprintCallable</code> çš„æ–¹å¼æš´éœ²ç»™è“å›¾ï¼Œä½¿å¾—å¯ä»¥åœ¨è“å›¾ä¸­è°ƒç”¨æ­¤åŠŸèƒ½ã€‚</p><h3 id="TActorIteratorçš„ä½¿ç”¨"><a href="#TActorIteratorçš„ä½¿ç”¨" class="headerlink" title="TActorIteratorçš„ä½¿ç”¨"></a><code>TActorIterator</code>çš„ä½¿ç”¨</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ASpine* SpineActor = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">for</span> (TActorIterator&lt;ASpine&gt; <span class="built_in">It</span>(<span class="built_in">GetWorld</span>()); It; ++It)</span><br><span class="line">&#123;</span><br><span class="line">    SpineActor = *It;</span><br><span class="line">    <span class="comment">// è¿”å›falseï¼Œè¯¦æƒ…è§ä¸‹ä¸€ä¸ªé—®é¢˜</span></span><br><span class="line">    <span class="keyword">if</span> (SpineActor-&gt;<span class="built_in">GetName</span>() == <span class="string">&quot;BP_Spine&quot;</span>) <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æ‰¾åˆ°äº†BP_Spine&quot;</span>));</span><br><span class="line">    <span class="comment">// è¿”å›trueï¼Œæ˜¯åŒä¸€ä¸ªç±»å‹</span></span><br><span class="line">    <span class="keyword">if</span> (SpineActor-&gt;<span class="built_in">IsA</span>(ASpine::<span class="built_in">StaticClass</span>())) <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æ˜¯åŒä¸€ä¸ªç±»å‹&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (SpineActor &amp;&amp; SpineActor-&gt;<span class="built_in">GetName</span>().<span class="built_in">Contains</span>(<span class="string">&quot;BP_Spine&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Found BP_Spine: %s&quot;</span>), *SpineActor-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">        <span class="comment">// å¤„ç†æ‰¾åˆ°çš„ SpineActor</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!SpineActor)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;æœªæ‰¾åˆ°åä¸º BP_Spine çš„ Actor&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è“å›¾Actorçš„åå­—å’Œåœ¨ä¸–ç•Œä¸­è·å–åˆ°çš„Actorä¸­çš„åå­—ä¸ç›¸åŒ"><a href="#è“å›¾Actorçš„åå­—å’Œåœ¨ä¸–ç•Œä¸­è·å–åˆ°çš„Actorä¸­çš„åå­—ä¸ç›¸åŒ" class="headerlink" title="è“å›¾Actorçš„åå­—å’Œåœ¨ä¸–ç•Œä¸­è·å–åˆ°çš„Actorä¸­çš„åå­—ä¸ç›¸åŒ"></a>è“å›¾Actorçš„åå­—å’Œåœ¨ä¸–ç•Œä¸­è·å–åˆ°çš„Actorä¸­çš„åå­—ä¸ç›¸åŒ</h1><blockquote><p>åœ¨ Unreal Engine ä¸­ï¼Œçœ‹åˆ°çš„å¯¹è±¡åç§°æ˜¯ BP_Spine_C_UAID_9C2DCD7A0EEE7A7502_2058130519 ï¼Œè€Œåœ¨ç¼–è¾‘å™¨ä¸­åˆ›å»ºçš„è“å›¾èµ„äº§åç§°æ˜¯ BP_Spine</p></blockquote><p>å‡ºç°åŸå› </p><ol><li><p>åœ¨ UE ä¸­ï¼Œæ¯ä¸ªè¢«åŠ è½½è¿›å…³å¡çš„ Actor å®ä¾‹éƒ½ä¼šæœ‰ä¸€ä¸ª<strong>å”¯ä¸€çš„åç§°</strong>ï¼Œå³ä½¿å®ƒä»¬æ¥è‡ªåŒä¸€ä¸ªè“å›¾ç±»ã€‚å¼•æ“ä¼šè‡ªåŠ¨åœ¨ç±»åååŠ ä¸Š <code>_C</code>ï¼ˆè¡¨ç¤º Classï¼‰ä»¥åŠä¸€ä¸²å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUAIDï¼‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BP_Spine_C_UAID_9C2DCD7A0EEE7A7502_2058130519</span><br></pre></td></tr></table></figure></li><li><p>è“å›¾èµ„äº§å vs å®ä¾‹å</p><ul><li>è“å›¾èµ„äº§åï¼ˆBlueprint Nameï¼‰ï¼šBP_Spine è¿™æ˜¯ä½ åœ¨å†…å®¹æµè§ˆå™¨ä¸­çœ‹åˆ°çš„è“å›¾èµ„æºåç§°ï¼Œæ˜¯ä¸€ä¸ªâ€œæ¨¡æ¿â€æˆ–â€œç±»å‹â€ã€‚</li><li>å®ä¾‹åï¼ˆInstance Nameï¼‰ï¼šBP_Spine_C_UAID_9C2DCD7A0EEE7A7502_2058130519 è¿™æ˜¯è¯¥è“å›¾åœ¨ä¸–ç•Œä¸­å…·ä½“ç”Ÿæˆçš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„åç§°ã€‚</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> UE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pyå­¦ä¹ ä¸­å„ç§é—®é¢˜</title>
      <link href="/2025/04/10/py%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/"/>
      <url>/2025/04/10/py%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="è°ƒè¯•é—®é¢˜"><a href="#è°ƒè¯•é—®é¢˜" class="headerlink" title="è°ƒè¯•é—®é¢˜"></a>è°ƒè¯•é—®é¢˜</h2><h3 id="vscodeè°ƒè¯•Pythonä»£ç æ—¶è§£å†³è¾“å‡ºç«¯ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#vscodeè°ƒè¯•Pythonä»£ç æ—¶è§£å†³è¾“å‡ºç«¯ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="vscodeè°ƒè¯•Pythonä»£ç æ—¶è§£å†³è¾“å‡ºç«¯ä¸­æ–‡ä¹±ç é—®é¢˜"></a>vscodeè°ƒè¯•Pythonä»£ç æ—¶è§£å†³è¾“å‡ºç«¯ä¸­æ–‡ä¹±ç é—®é¢˜</h3><p>è§£å†³åŠæ³•ï¼šå¢åŠ ç¯å¢ƒå˜é‡ä¸­ç³»ç»Ÿå˜é‡</p><p>1.é…ç½®ç”µè„‘çš„ç³»ç»Ÿå˜é‡ </p><p> 2.æ–°å»ºç³»ç»Ÿå˜é‡ï¼Œå˜é‡åä¸ºï¼šPYTHONIOENCODINGï¼Œå€¼ä¸ºï¼šUTF8 </p><p> 3.é‡å¯vscode</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202504101257498.png" alt="image-20250410125724792"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++è®­ç»ƒ</title>
      <link href="/2025/02/26/C++%E7%BB%83%E4%B9%A0/"/>
      <url>/2025/02/26/C++%E7%BB%83%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="C-æ–¹æ³•"><a href="#C-æ–¹æ³•" class="headerlink" title="C++æ–¹æ³•"></a>C++æ–¹æ³•</h1><h2 id="ç±»æˆå‘˜å‡½æ•°"><a href="#ç±»æˆå‘˜å‡½æ•°" class="headerlink" title="ç±»æˆå‘˜å‡½æ•°"></a>ç±»æˆå‘˜å‡½æ•°</h2><p>ç±»æˆå‘˜å‡½æ•°å®šä¹‰åœ¨å¤–éƒ¨æ—¶å€™ï¼Œå•ç‹¬ä½¿ç”¨<strong>èŒƒå›´è§£æè¿ç®—ç¬¦ ::</strong> æ¥å®šä¹‰</p><p>[è¯¦ç»†é“¾æ¥](<a href="https://www.runoob.com/cplusplus/cpp-class-member-functions.html">C++ ç±»æˆå‘˜å‡½æ•° | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a>)</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202507141813956.png" alt="image-20250226160051442"></p><h2 id="C-ä¸‡èƒ½å¤´æ–‡ä»¶"><a href="#C-ä¸‡èƒ½å¤´æ–‡ä»¶" class="headerlink" title="C++ä¸‡èƒ½å¤´æ–‡ä»¶"></a>C++ä¸‡èƒ½å¤´æ–‡ä»¶</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="STL"><a href="#STL" class="headerlink" title="STL"></a>STL</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">vector,å˜é•¿æ•°ç»„ï¼Œå€å¢çš„æ€æƒ³</span><br><span class="line">size() è¿”å›å…ƒç´ ä¸ªæ•°</span><br><span class="line">empty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br><span class="line">clear() æ¸…ç©º</span><br><span class="line">front()/back() </span><br><span class="line">push_back()/pop_back()</span><br><span class="line">begin()/end();</span><br><span class="line">æ”¯æŒæ¯”è¾ƒè¿ç®—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pair&lt;<span class="built_in">int</span>,<span class="built_in">int</span>&gt; å­˜å‚¨ä¸€ä¸ªäºŒå…ƒç»„</span><br><span class="line">firstï¼Œç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">secondï¼Œç¬¬äºŒä¸ªå…ƒç´ </span><br><span class="line">æ”¯æŒæ¯”è¾ƒè¿ç®—ï¼Œä»¥firstä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œä»¥secondä¸ºç¬¬äºŒå…³é”®å­—ï¼ˆå­—å…¸æ’åºï¼‰</span><br><span class="line">å¯ä»¥ä½¿ç”¨pair&lt;<span class="built_in">int</span>,pair&lt;<span class="built_in">int</span>,<span class="built_in">string</span>&gt;&gt; å­˜å‚¨ä¸‰ä¸ªæ•°</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span>ï¼Œå­—ç¬¦ä¸²ï¼Œ</span><br><span class="line">substr(a,b), è¿”å›ä»aå¼€å§‹ï¼Œè¿”å›bä¸ªå­—ç¬¦</span><br><span class="line">c_str() è¿”å›èµ·å§‹åœ°å€</span><br><span class="line">size()/length()</span><br><span class="line">empty()</span><br><span class="line">clear()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">queueï¼Œé˜Ÿåˆ— ï¼Œ <span class="function">queue&lt;<span class="built_in">int</span>&gt; q</span></span><br><span class="line"><span class="function"><span class="title">size</span>()</span></span><br><span class="line"><span class="function"><span class="title">empty</span>()</span></span><br><span class="line"><span class="function"><span class="title">push</span>(), é˜Ÿå°¾æ’å…¥ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="function"><span class="title">front</span>(),è¿”å›é˜Ÿå¤´å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="title">back</span>(),è¿”å›é˜Ÿå°¾å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="title">pop</span>()ï¼Œ å¼¹å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">priority_queue,ä¼˜å…ˆé˜Ÿåˆ—ï¼Œé»˜è®¤æ˜¯å¤§æ ¹å † priority_queue&lt;<span class="built_in">int</span>&gt; heap</span></span><br><span class="line"><span class="function"><span class="title">push</span>(),æ’å…¥ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="function"><span class="title">top</span>(), è¿”å›å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="title">pop</span>()</span>; å¼¹å‡ºå †é¡¶å…ƒç´ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stackï¼Œæ ˆï¼Œ</span><br><span class="line">size()</span><br><span class="line">empty()</span><br><span class="line">push(), æ ˆé¡¶æ’å…¥ä¸€ä¸ªå…ƒç´ </span><br><span class="line">top(),è¿”å›æ ˆé¡¶å…ƒç´ </span><br><span class="line">pop()å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">deque,åŒç«¯é˜Ÿåˆ—,deque&lt;<span class="built_in">int</span>&gt; q æ•ˆç‡ä½</span><br><span class="line">size() è¿”å›å…ƒç´ ä¸ªæ•°</span><br><span class="line">empty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br><span class="line">clear() æ¸…ç©º</span><br><span class="line">front()/back() </span><br><span class="line">push_back()/pop_back()</span><br><span class="line">push_front()/pop_front()</span><br><span class="line">begin()/end()</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>,map,multiset,multimap,åŸºäºå¹³è¡¡äºŒå‰æ ‘ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼ŒåŠ¨æ€ç»´æŠ¤æœ‰åºåºåˆ—</span><br><span class="line">size()</span><br><span class="line">empty()</span><br><span class="line">clear()</span><br><span class="line">begin()/end() </span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>/multiset <span class="keyword">set</span>ä¸­æ²¡æœ‰é‡å¤çš„æ•°ï¼Œmulå¯ä»¥æœ‰é‡å¤çš„æ•°</span><br><span class="line">insert() æ’å…¥ä¸€ä¸ªæ•°</span><br><span class="line">find() æŸ¥æ‰¾ä¸€ä¸ªæ•°</span><br><span class="line">count() è¿”å›æŸä¸€ä¸ªæ•°çš„ä¸ªæ•°</span><br><span class="line">erase()</span><br><span class="line">(<span class="number">1</span>) è¾“å…¥æ˜¯ä¸€ä¸ªæ•°xï¼Œåˆ é™¤æ‰€æœ‰<span class="function">x   <span class="title">O</span>(<span class="params">k + logn</span>)</span></span><br><span class="line"><span class="function">(<span class="params"><span class="number">2</span></span>) è¾“å…¥ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåˆ é™¤è¿™ä¸ªè¿­ä»£å™¨</span></span><br><span class="line"><span class="function"><span class="title">lower_bound</span>()/<span class="title">upper_bound</span>()</span></span><br><span class="line"><span class="function"><span class="title">lower_bound</span>(<span class="params">x</span>) è¿”å›å¤§äºç­‰äºxçš„æœ€å°çš„æ•°çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="function"><span class="title">upper_bound</span>(<span class="params">x</span>) è¿”å›å¤§äºxçš„æœ€å°çš„æ•°çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="function">map/multimap</span></span><br><span class="line"><span class="function"><span class="title">insert</span>()  æ’å…¥çš„æ•°æ˜¯ä¸€ä¸ªpair</span></span><br><span class="line"><span class="function"><span class="title">erase</span>()  è¾“å…¥çš„å‚æ•°æ˜¯pairæˆ–è€…è¿­ä»£å™¨</span></span><br><span class="line"><span class="function"><span class="title">find</span>()</span></span><br><span class="line"><span class="function">å¯ä»¥åƒæ•°ç»„ä¸€æ ·ç”¨map</span></span><br><span class="line"><span class="function"><span class="title">lower_bound</span>()/<span class="title">upper_bound</span>()</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">unordered_set,unordered_map,unordered_multiset,unordered_multimap,å“ˆå¸Œè¡¨</span></span><br><span class="line"><span class="function">å’Œä¸Šé¢ç±»ä¼¼ï¼Œå¢åˆ æ”¹æŸ¥æ—¶é—´å¤æ‚åº¦æ˜¯ <span class="title">O</span>(<span class="params"><span class="number">1</span></span>)</span></span><br><span class="line"><span class="function">ä¸æ”¯æŒ<span class="title">lower_bound</span>()/<span class="title">upper_bound</span>()</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">bitset,å‹ä½</span></span><br><span class="line"><span class="function">bitset&lt;10000&gt; S</span>;</span><br><span class="line">~,&amp;,|,^</span><br><span class="line">&gt;&gt;, &lt;&lt;</span><br><span class="line">==, !=</span><br><span class="line"></span><br><span class="line">count() è¿”å›æœ‰å¤šå°‘ä¸ª<span class="number">1</span></span><br><span class="line">any() åˆ¤æ–­æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ª<span class="number">1</span></span><br><span class="line">none() åˆ¤æ–­æ˜¯å¦å…¨æ˜¯<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>() æŠŠæ‰€æœ‰ä½ç½®å˜ä¸º<span class="number">1</span></span><br><span class="line"><span class="keyword">set</span>(k,v) å°†ç¬¬kä½å˜æˆ<span class="function">v</span></span><br><span class="line"><span class="function"><span class="title">reset</span>() æŠŠæ‰€æœ‰ä½å˜ä¸º0</span></span><br><span class="line"><span class="function"><span class="title">flip</span>() ç­‰ä»·äº~</span></span><br><span class="line"><span class="function"><span class="title">flip</span>(<span class="params">k</span>) æŠŠç¬¬kä½å–å</span></span><br></pre></td></tr></table></figure><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><h2 id="å¿«æ’"><a href="#å¿«æ’" class="headerlink" title="å¿«æ’"></a>å¿«æ’</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿«é€Ÿæ’åº-åŸºäºåˆ†æ²»ç®—æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ’åˆ†ç®—æ³•</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">partition</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> l ,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> mid;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">        mid = a[l];</span><br><span class="line">        <span class="keyword">while</span>(a[r] &gt;= mid &amp;&amp; l &lt; r) r--;</span><br><span class="line">        a[l] = a[r];</span><br><span class="line">        <span class="keyword">while</span>(a[l] &lt; mid &amp;&amp; l &lt; r) l++;</span><br><span class="line">        a[r] = a[l];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    a[l] = mid;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Qsort</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &lt; r)&#123;</span><br><span class="line">        <span class="type">int</span> mid = <span class="built_in">partition</span>(a,l,r);</span><br><span class="line">        <span class="built_in">Qsort</span>(a,l,mid<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">Qsort</span>(a,mid+<span class="number">1</span>,r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =  <span class="number">0</span>; i &lt; n; i++) cin &gt;&gt; q[i];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Qsort</span>(q,<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; n;i ++) cout &lt;&lt; q[i];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="type">int</span> b[N]; <span class="comment">// è¾…åŠ©æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½’å¹¶æ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> a[],<span class="type">int</span> l, <span class="type">int</span> mid, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="comment">// è¿›å…¥è¯¥å‡½æ•°æ—¶ï¼Œl-midæœ‰åºï¼Œmid-ræœ‰åºï¼Œå°†è¿™ä¸¤ä¸ªéƒ¨åˆ†åˆå¹¶å³å¯</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> h = l ;h &lt;= r ; h ++) b[h] = a[h];</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> i,j,k;</span><br><span class="line">    <span class="keyword">for</span>( i = l , j = mid+<span class="number">1</span>,k = l ; i &lt;= mid &amp;&amp; j &lt;= r ; k++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(b[i] &lt;= b[j]) a[k] = b[i ++];</span><br><span class="line">        <span class="keyword">else</span> a[k] = b[j ++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid) a[k++] = b[i ++];</span><br><span class="line">    <span class="keyword">while</span>(j &lt;= r) a[k ++] = b[j ++];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge_sort</span><span class="params">(<span class="type">int</span> a[],<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&lt; r)&#123;</span><br><span class="line">        <span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">merge_sort</span>(a,l, mid);</span><br><span class="line">        <span class="built_in">merge_sort</span>(a,mid+<span class="number">1</span>,r);</span><br><span class="line">        <span class="built_in">merge</span>(a,l,mid,r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++) cin &gt;&gt; q[i];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">merge_sort</span>(q,<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n; i++) cout &lt;&lt; q[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒåˆ†"><a href="#äºŒåˆ†" class="headerlink" title="äºŒåˆ†"></a>äºŒåˆ†</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++) cin &gt;&gt; q[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( m --)&#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> l = <span class="number">0</span> , r = n <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r)&#123; <span class="comment">// å·¦è¾¹ç•Œ</span></span><br><span class="line">            <span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(q[mid] &gt;= x) r = mid;</span><br><span class="line">            <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(q[l] != x) cout &lt;&lt; <span class="string">&quot;ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> l = <span class="number">0</span> , r = n - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">                <span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(q[mid] &lt;= x) l = mid;</span><br><span class="line">                <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> skt[N],tt;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="keyword">while</span>(tt &amp;&amp; skt[tt] &gt;= x) tt --;</span><br><span class="line">        <span class="keyword">if</span>(tt) cout &lt;&lt; skt[tt] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;-1 &quot;</span>;</span><br><span class="line"></span><br><span class="line">        skt[ ++ tt] = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•é“¾è¡¨"><a href="#å•é“¾è¡¨" class="headerlink" title="å•é“¾è¡¨"></a>å•é“¾è¡¨</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//head è¡¨ç¤ºå¤´èŠ‚ç‚¹æ‰€åœ¨ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">// e è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œè¯¥æ•°ç»„æ‰€å­˜å‚¨çš„å€¼å¹¶ä¸å…·æœ‰å…ˆåç‰¹æ€§ï¼Œé“¾è¡¨çš„å…ˆåä¾æ®neæ¥åˆ¤æ–­</span></span><br><span class="line"><span class="comment">// ne è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// idx å­˜å‚¨å½“å‰å·²ç»ç”¨åˆ°äº†å“ªä¸ªç‚¹</span></span><br><span class="line"><span class="type">int</span> head, e[N],ne[N] , idx;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    head = <span class="number">-1</span>;</span><br><span class="line">    idx = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†xæ’å…¥åˆ°å¤´èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_to_head</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[idx] = x;</span><br><span class="line">    ne[idx] = head;</span><br><span class="line">    head = idx;</span><br><span class="line">    idx ++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†xæ’å…¥åˆ°ä¸‹æ ‡æ˜¯kèŠ‚ç‚¹åé¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_to_k</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e[idx] = x;</span><br><span class="line">    ne[idx] = ne[k];</span><br><span class="line">    ne[k] = idx;</span><br><span class="line">    idx ++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ä¸‹æ ‡æ˜¯kçš„ç‚¹åé¢çš„ç‚¹åˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ne[k] = ne[ne[k]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m,x;</span><br><span class="line"><span class="type">char</span> op;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">while</span>(m --)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="string">&#x27;H&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            <span class="built_in">add_to_head</span>(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            <span class="keyword">if</span>(!x) head = ne[head]; <span class="comment">// x ä¸º 0æ—¶ï¼Œåˆ é™¤å¤´èŠ‚ç‚¹</span></span><br><span class="line">            <span class="built_in">remove</span>(x<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="string">&#x27;I&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> k;</span><br><span class="line">            cin &gt;&gt; k;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            <span class="built_in">add_to_k</span>(x,k<span class="number">-1</span>);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = head; i != <span class="number">-1</span> ; i = ne[i]) cout &lt;&lt; e[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line"><span class="type">int</span> a[N],q[N]; <span class="comment">// a å­˜æ”¾æ•°ç»„å…ƒç´ ï¼Œ qè¡¨ç¤ºé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—å­˜æ”¾çš„æ˜¯å…ƒç´ iåœ¨æ•°ç»„aä¸­çš„ä¸‹æ ‡</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; n;i ++) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="type">int</span> hh = <span class="number">0</span>,tt = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­é˜Ÿå¤´æ˜¯å¦æ»‘å‡ºçª—å£</span></span><br><span class="line">        <span class="keyword">if</span>(hh &lt;= tt &amp;&amp; i - k + <span class="number">1</span> &gt; q[hh]) hh ++;</span><br><span class="line">        <span class="keyword">while</span>(hh &lt;= tt &amp;&amp; a[q[tt]] &gt;= a[i]) tt --;</span><br><span class="line"></span><br><span class="line">        q[ ++ tt] = i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(i &gt;= k <span class="number">-1</span> ) cout &lt;&lt; a[q[hh]] &lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    hh = <span class="number">0</span> , tt = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­é˜Ÿå¤´æ˜¯å¦æ»‘å‡ºçª—å£</span></span><br><span class="line">        <span class="keyword">if</span>(hh &lt;= tt &amp;&amp; i - k + <span class="number">1</span> &gt; q[hh]) hh ++;</span><br><span class="line">        <span class="keyword">while</span>(hh &lt;= tt &amp;&amp; a[q[tt]] &lt;= a[i]) tt --;</span><br><span class="line"></span><br><span class="line">        q[ ++ tt] = i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(i &gt;= k <span class="number">-1</span> ) cout &lt;&lt; a[q[hh]] &lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>,M = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">char</span> p[N],s[M];</span><br><span class="line"><span class="type">int</span> ne[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; p + <span class="number">1</span> &gt;&gt; m &gt;&gt; s + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span> , j = <span class="number">0</span> ; i &lt;= n ;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j &amp;&amp; p[i] != p[i + <span class="number">1</span>]) j = ne[j];</span><br><span class="line">        <span class="keyword">if</span>(p[i] == p[j + <span class="number">1</span>]) j ++;</span><br><span class="line">        ne[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ,j = <span class="number">0</span> ;i &lt;= m ;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(j &amp;&amp; s[i] != p[j + <span class="number">1</span>]) j = ne[j];</span><br><span class="line">        <span class="keyword">if</span>(s[i] == p[j + <span class="number">1</span>]) j ++;</span><br><span class="line">        <span class="keyword">if</span>(j == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// åŒ¹é…æˆåŠŸ</span></span><br><span class="line">            cout &lt;&lt; i -n &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            j = ne[j];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¨¡æ‹Ÿæ•£åˆ—è¡¨"><a href="#æ¨¡æ‹Ÿæ•£åˆ—è¡¨" class="headerlink" title="æ¨¡æ‹Ÿæ•£åˆ—è¡¨"></a>æ¨¡æ‹Ÿæ•£åˆ—è¡¨</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100003</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> h[N],e[N],ne[N],idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k = (x % N + N) % N;</span><br><span class="line">    </span><br><span class="line">    e[idx] = x;</span><br><span class="line">    ne[idx] = h[k];</span><br><span class="line">    h[k] = idx ++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k = (x % N + N) % N;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = h[k]; i != <span class="number">-1</span>; i = ne[i])</span><br><span class="line">        <span class="keyword">if</span>(e[i] == x)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="keyword">sizeof</span> h); <span class="comment">// æ¸…ç©ºæŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(n --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> op[<span class="number">2</span>];</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="string">&#x27;I&#x27;</span>) <span class="built_in">insert</span>(x);</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">find</span>(x)) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span>&lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¨¡æ‹Ÿæ•£åˆ—è¡¨ï¼ˆå¼€æ”¾å¯»å€ï¼‰"><a href="#æ¨¡æ‹Ÿæ•£åˆ—è¡¨ï¼ˆå¼€æ”¾å¯»å€ï¼‰" class="headerlink" title="æ¨¡æ‹Ÿæ•£åˆ—è¡¨ï¼ˆå¼€æ”¾å¯»å€ï¼‰"></a>æ¨¡æ‹Ÿæ•£åˆ—è¡¨ï¼ˆå¼€æ”¾å¯»å€ï¼‰</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">200003</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> null = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> h[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‹¥xåœ¨è¡¨ä¸­ï¼Œåˆ™è¿”å›xä½ç½®ï¼›åä¹‹ï¼Œè¿”å›xåº”è¯¥åœ¨çš„ä½ç½®</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k = (x % N + N) % N;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(h[k] != null &amp;&amp; h[k] != x)</span><br><span class="line">    &#123;</span><br><span class="line">        k ++;</span><br><span class="line">        <span class="keyword">if</span>(k == N) k = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> k;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">memset</span>(h,<span class="number">0x3f</span>,<span class="keyword">sizeof</span> h); <span class="comment">// æ¸…ç©ºæŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(n --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> op[<span class="number">2</span>];</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; x;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> k = <span class="built_in">find</span>(x);</span><br><span class="line">        <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="string">&#x27;I&#x27;</span>) h[k] = x;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(h[k] != null) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span>&lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²å“ˆå¸Œ"><a href="#å­—ç¬¦ä¸²å“ˆå¸Œ" class="headerlink" title="å­—ç¬¦ä¸²å“ˆå¸Œ"></a>å­—ç¬¦ä¸²å“ˆå¸Œ</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ULL;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>,P = <span class="number">131</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">char</span> str[N];</span><br><span class="line">ULL h[N],p[N]; <span class="comment">// hè¡¨ç¤ºæŸä¸€ä¸ªå‰ç¼€çš„å“ˆå¸Œå€¼ pè¡¨ç¤ºå½“å‰ä½ç½®pè¿›åˆ¶çš„æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function">ULL <span class="title">get</span><span class="params">(<span class="type">int</span> l ,<span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h[r] - h[l<span class="number">-1</span>] * p[r-l + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; str + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ;i &lt;= n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        p[i] = p[i<span class="number">-1</span>] * P ;</span><br><span class="line">        h[i] = h[i - <span class="number">1</span>] * P + str[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l1,r1,l2,r2;</span><br><span class="line">        cin &gt;&gt; l1 &gt;&gt; r1 &gt;&gt; l2 &gt;&gt; r2;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">get</span>(l1,r1) == <span class="built_in">get</span>(l2,r2)) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Tire"><a href="#Tire" class="headerlink" title="Tire"></a>Tire</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> son[N][<span class="number">26</span>],cnt[N],idx;<span class="comment">//ä¸‹æ ‡æ˜¯0çš„ç‚¹ï¼Œæ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">char</span> str[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">char</span> str[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;str[i];i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u = str[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(!son[p][u]) son[p][u] = ++ idx;</span><br><span class="line">        p = son[p][u];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    cnt[p] ++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">char</span> str[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; str[i];i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> u = str[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(!son[p][u]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        p = son[p][u];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt[p];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(n --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> op[<span class="number">2</span>];</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; str;</span><br><span class="line">        <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="string">&#x27;I&#x27;</span>) <span class="built_in">insert</span>(str);</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="built_in">query</span>(str) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> p[N],size[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹ + è·¯å¾„å‹ç¼©</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x] != x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++) p[i] = i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> op[<span class="number">5</span>];</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; a &gt;&gt; b;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="string">&#x27;M&#x27;</span>) p[<span class="built_in">find</span>(a)] = <span class="built_in">find</span>(b);</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">find</span>(a) == <span class="built_in">find</span>(b)) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒºé—´åˆå¹¶"><a href="#åŒºé—´åˆå¹¶" class="headerlink" title="åŒºé—´åˆå¹¶"></a>åŒºé—´åˆå¹¶</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">vector&lt;PII&gt; segs;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(vector&lt;PII&gt; &amp;segs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;PII&gt; res;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(segs.<span class="built_in">begin</span>(),segs.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> st = <span class="number">-2e9</span>, ed = <span class="number">-2e9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> seg : segs)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ed &lt; seg.first) <span class="comment">// å¦‚æœå·¦ç«¯ç‚¹å°äºç»´æŠ¤çš„å³ç«¯ç‚¹ï¼Œè¡¨æ˜ç»´æŠ¤çš„åŒºé—´æ®µå·²ç»ç»“æŸï¼Œæ›´æ”¹ç»´æŠ¤çš„åŒºé—´</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(st != <span class="number">-2e9</span>) res.<span class="built_in">push_back</span>(&#123;st,ed&#125;);</span><br><span class="line">            st = seg.first,ed = seg.second;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            ed = <span class="built_in">max</span>(ed,seg.second);</span><br><span class="line">            <span class="comment">// st = min(st,seg.first);  æŒ‰ç…§firstä»å·¦åˆ°å³è¿›è¡Œä¾¿åˆ©ï¼Œä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(st != <span class="number">-2e9</span>) res.<span class="built_in">push_back</span>(&#123;st,ed&#125;);</span><br><span class="line"></span><br><span class="line">    segs = res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n ;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l,r;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        segs.<span class="built_in">push_back</span>(&#123;l,r&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">merge</span>(segs);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; segs.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒºé—´åŒ–"><a href="#åŒºé—´åŒ–" class="headerlink" title="åŒºé—´åŒ–"></a>åŒºé—´åŒ–</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">300010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> a[N],s[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨çš„ç¦»æ•£åŒ–çš„å€¼</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; alls;</span><br><span class="line">vector&lt;PII&gt; add,query;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äºŒåˆ†å¯»æ‰¾xæ‰€åœ¨allsä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span> , r = alls.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(alls[mid] &gt;= x) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x,c;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; c;</span><br><span class="line">        add.<span class="built_in">push_back</span>(&#123;x,c&#125;);</span><br><span class="line"></span><br><span class="line">        alls.<span class="built_in">push_back</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; m;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l, r;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        query.<span class="built_in">push_back</span>(&#123;l,r&#125;);</span><br><span class="line"></span><br><span class="line">        alls.<span class="built_in">push_back</span>(l);</span><br><span class="line">        alls.<span class="built_in">push_back</span>(r);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»é‡</span></span><br><span class="line">    <span class="built_in">sort</span>(alls.<span class="built_in">begin</span>(),alls.<span class="built_in">end</span>());</span><br><span class="line">    alls.<span class="built_in">erase</span>(<span class="built_in">unique</span>(alls.<span class="built_in">begin</span>(),alls.<span class="built_in">end</span>()),alls.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†æ’å…¥</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> item : add)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x = <span class="built_in">find</span>(item.first);</span><br><span class="line">        a[x] += item.second;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¢„å¤„ç†å‰ç¼€å’Œ</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">1</span> ;i &lt;= alls.<span class="built_in">size</span>() ;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        s[i] = s[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤„ç†è¯¢é—®</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> item : query)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> l = <span class="built_in">find</span>(item.first);</span><br><span class="line">        <span class="type">int</span> r = <span class="built_in">find</span>(item.second);</span><br><span class="line">        cout &lt;&lt; s[r] - s[l - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿é€šå—çš„æ•°é‡"><a href="#è¿é€šå—çš„æ•°é‡" class="headerlink" title="è¿é€šå—çš„æ•°é‡"></a>è¿é€šå—çš„æ•°é‡</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> p[N],size[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹ + è·¯å¾„å‹ç¼©</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x] != x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++) p[i] = i ,size[i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> op[<span class="number">5</span>];</span><br><span class="line">        <span class="type">int</span> a,b;</span><br><span class="line">        cin &gt;&gt; op ;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="string">&#x27;C&#x27;</span>)&#123;</span><br><span class="line">            cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">find</span>(a) == <span class="built_in">find</span>(b)) <span class="keyword">continue</span>;</span><br><span class="line">            size[<span class="built_in">find</span>(b)] += size[<span class="built_in">find</span>(a)];</span><br><span class="line">            p[<span class="built_in">find</span>(a)] = <span class="built_in">find</span>(b);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op[<span class="number">1</span>] == <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">find</span>(a) == <span class="built_in">find</span>(b)) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; a;</span><br><span class="line">            cout &lt;&lt;  size[<span class="built_in">find</span>(a)] &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—"><a href="#æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—" class="headerlink" title="æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—"></a>æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> a[N],s[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n;i ++) cin &gt;&gt; a[i];</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>,j = <span class="number">0</span> ;i &lt; n; i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        s[a[i]]++;</span><br><span class="line">        <span class="keyword">while</span>(s[a[i]] &gt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            s[a[j]] --;</span><br><span class="line">            j ++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res = <span class="built_in">max</span>(res,i - j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> h[N],size;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t = u;</span><br><span class="line">    <span class="keyword">if</span>(u*<span class="number">2</span> &lt;= size &amp;&amp; h[u*<span class="number">2</span>] &lt; h[t]) t = u*<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(u * <span class="number">2</span> + <span class="number">1</span> &lt;= size &amp;&amp; h[u * <span class="number">2</span> + <span class="number">1</span>] &lt; h[t]) t = u* <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(u != t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(h[u],h[t]);</span><br><span class="line">        <span class="built_in">down</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ;i &lt;= n;i ++) cin &gt;&gt; h[i];</span><br><span class="line">    size = n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n / <span class="number">2</span> ;i ;i --) <span class="built_in">down</span>(i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m --)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; h[<span class="number">1</span>] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        h[<span class="number">1</span>] = h[size];</span><br><span class="line">        size --;</span><br><span class="line">        <span class="built_in">down</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> path[N];</span><br><span class="line"><span class="type">bool</span> visited[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u == n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ;i &lt; n; i ++) cout &lt;&lt; path[i] &lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ;i &lt;= n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!visited[i])</span><br><span class="line">        &#123;</span><br><span class="line">            path[u] = i;</span><br><span class="line">            visited[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(u+<span class="number">1</span>);</span><br><span class="line">            visited[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨æ’åˆ—</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Obisidianä½¿ç”¨</title>
      <link href="/2024/07/25/Obisidian%E4%BD%BF%E7%94%A8/"/>
      <url>/2024/07/25/Obisidian%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Obsidianä½¿ç”¨"><a href="#Obsidianä½¿ç”¨" class="headerlink" title="Obsidianä½¿ç”¨"></a>Obsidianä½¿ç”¨</h1><h2 id="Obsidiançš„ä»‹ç»"><a href="#Obsidiançš„ä»‹ç»" class="headerlink" title="Obsidiançš„ä»‹ç»"></a>Obsidiançš„ä»‹ç»</h2><blockquote><p>Obsidianæ˜¯ä¸€æ¬¾å¼ºå¤§çš„ç¬”è®°åº”ç”¨ç¨‹åºï¼Œå®ƒä¸»è¦è®¾è®¡ç”¨äºåˆ›å»ºå’Œç®¡ç†çŸ¥è¯†åº“ã€‚Obsidianæ”¯æŒä½¿ç”¨Markdownè¯­æ³•æ¥è®°å½•ä¿¡æ¯ï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡é“¾æ¥ä¸åŒçš„ç¬”è®°æ¥æ„å»ºä¸€ä¸ªå¤æ‚çš„çŸ¥è¯†å›¾è°±ã€‚</p></blockquote><p>å®‰è£…åœ°å€ï¼š<a href="https://obsidian.md/">Obsidian</a> ï¼Œ <a href="https://forum-zh.obsidian.md/">Obsidianä¸­æ–‡è®ºå›</a></p><p>Obsidianä¸»è¦æ˜¯èƒ½å¤ŸåŒå‘é“¾æ¥ï¼Œå¹¶å­˜å‚¨è‡ªå·±å¯¹çŸ¥è¯†çš„æ€»ç»“ç¬”è®°ç­‰ï¼Œå¯ä»¥ç”¨äºä¸Šä¼ å®Œåšå®¢ï¼Œä¹‹åå°†å†…å®¹æ”¾åœ¨Obsidianä¸­ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°æ¯ä¸ªç¬”è®°çš„åˆ›ä½œæ—¥æœŸä»¥åŠæ ‡æ³¨ç­‰ç­‰ï¼Œæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œç›®å‰æˆ‘è¿˜æ²¡æœ‰æ—¶é—´å»æè¿™ä¸ªï¼Œå…ˆåšä¸€ä¸ªæ–‡æ¡£ï¼Œç”¨äºè®°å½•Obsidiançš„æ—¥å¸¸ä½¿ç”¨æŠ€å·§ä»¥åŠå¿«æ·é”®ã€‚ä½†æ˜¯Obsidianéœ€è¦æ‰‹å†™markdownæ–‡ä»¶ï¼Œæˆ‘è§‰å¾—å¯ä»¥å’Œtyporaä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·æ–¹ä¾¿ä¸€ç‚¹ã€‚</p><ul><li><input disabled type="checkbox"> </li></ul>]]></content>
      
      
      <categories>
          
          <category> Obsidian </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Obsidian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3_study</title>
      <link href="/2023/12/27/vue3-study/"/>
      <url>/2023/12/27/vue3-study/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Vue3ç®€ä»‹"><a href="#1-Vue3ç®€ä»‹" class="headerlink" title="1. Vue3ç®€ä»‹"></a>1. Vue3ç®€ä»‹</h1><ul><li><p>2020å¹´9æœˆ18æ—¥ï¼Œ<code>Vue.js</code>å‘å¸ƒç‰ˆ<code>3.0</code>ç‰ˆæœ¬ï¼Œä»£å·ï¼š<code>One Piece</code>ï¼ˆn</p></li><li><p>ç»å†äº†ï¼š<a href="https://github.com/vuejs/core/commits/main">4800+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/core/graphs/contributors">300+è´¡çŒ®è€…</a></p></li><li><p>å®˜æ–¹å‘ç‰ˆåœ°å€ï¼š<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece Â· vuejs&#x2F;core</a></p></li><li><p>æˆªæ­¢2023å¹´10æœˆï¼Œæœ€æ–°çš„å…¬å¼€ç‰ˆæœ¬ä¸ºï¼š<code>3.3.4</code></p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142759.png" alt="image.png" style="zoom:30%;"></li></ul><h2 id="1-1-ã€æ€§èƒ½çš„æå‡ã€‘"><a href="#1-1-ã€æ€§èƒ½çš„æå‡ã€‘" class="headerlink" title="1.1. ã€æ€§èƒ½çš„æå‡ã€‘"></a>1.1. ã€æ€§èƒ½çš„æå‡ã€‘</h2><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘<code>41%</code>ã€‚</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«<code>55%</code>, æ›´æ–°æ¸²æŸ“å¿«<code>133%</code>ã€‚</p></li><li><p>å†…å­˜å‡å°‘<code>54%</code>ã€‚</p></li></ul><h2 id="1-2-ã€-æºç çš„å‡çº§ã€‘"><a href="#1-2-ã€-æºç çš„å‡çº§ã€‘" class="headerlink" title="1.2.ã€ æºç çš„å‡çº§ã€‘"></a>1.2.ã€ æºç çš„å‡çº§ã€‘</h2><ul><li><p>ä½¿ç”¨<code>Proxy</code>ä»£æ›¿<code>defineProperty</code>å®ç°å“åº”å¼ã€‚</p></li><li><p>é‡å†™è™šæ‹Ÿ<code>DOM</code>çš„å®ç°å’Œ<code>Tree-Shaking</code>ã€‚</p></li></ul><h2 id="1-3-ã€æ‹¥æŠ±TypeScriptã€‘"><a href="#1-3-ã€æ‹¥æŠ±TypeScriptã€‘" class="headerlink" title="1.3. ã€æ‹¥æŠ±TypeScriptã€‘"></a>1.3. ã€æ‹¥æŠ±TypeScriptã€‘</h2><ul><li><code>Vue3</code>å¯ä»¥æ›´å¥½çš„æ”¯æŒ<code>TypeScript</code>ã€‚</li></ul><h2 id="1-4-ã€æ–°çš„ç‰¹æ€§ã€‘"><a href="#1-4-ã€æ–°çš„ç‰¹æ€§ã€‘" class="headerlink" title="1.4. ã€æ–°çš„ç‰¹æ€§ã€‘"></a>1.4. ã€æ–°çš„ç‰¹æ€§ã€‘</h2><ol><li><p><code>Composition API</code>ï¼ˆç»„åˆ<code>API</code>ï¼‰ï¼š</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>ä¸<code>reactive</code></p></li><li><p><code>computed</code>ä¸<code>watch</code></p><p>â€¦â€¦</p></li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶ï¼š</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>â€¦â€¦</p></li></ul></li><li><p>å…¶ä»–æ”¹å˜ï¼š</p><ul><li><p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p></li><li><p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code> v-on</code> çš„ä¿®é¥°ç¬¦</p><p>â€¦â€¦</p></li></ul></li></ol><h1 id="2-åˆ›å»ºVue3å·¥ç¨‹"><a href="#2-åˆ›å»ºVue3å·¥ç¨‹" class="headerlink" title="2. åˆ›å»ºVue3å·¥ç¨‹"></a>2. åˆ›å»ºVue3å·¥ç¨‹</h1><h2 id="2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘"><a href="#2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘" class="headerlink" title="2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘"></a>2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘</h2><p>ç‚¹å‡»æŸ¥çœ‹<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>å¤‡æ³¨ï¼šç›®å‰<code>vue-cli</code>å·²å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èåŸºäº <code>Vite</code> åˆ›å»ºé¡¹ç›®ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  éšåé€‰æ‹©3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è"><a href="#2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è" class="headerlink" title="2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)"></a>2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)</h2><p><code>vite</code> æ˜¯æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://vitejs.cn/">https://vitejs.cn</a>ï¼Œ<code>vite</code>çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p><ul><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆ<code>HMR</code>ï¼‰ï¼Œèƒ½å®ç°æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€‚</li><li>å¯¹ <code>TypeScript</code>ã€<code>JSX</code>ã€<code>CSS</code> ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li><li><code>webpack</code>æ„å»º ä¸ <code>vite</code>æ„å»ºå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š<br><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271134481.png" alt="webpackæ„å»º" title="webpackæ„å»º" style="zoom:20%;box-shadow:0 0 10px black"><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142760.png" alt="viteæ„å»º" title="viteæ„å»º" style="zoom: 20%;box-shadow:0 0 10px black"></li></ul><ul><li>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.åˆ›å»ºå‘½ä»¤</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.å…·ä½“é…ç½®</span></span><br><span class="line"><span class="comment">## é…ç½®é¡¹ç›®åç§°</span></span><br><span class="line">âˆš Project name: vue3_test</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ TypeScriptæ”¯æŒ</span></span><br><span class="line">âˆš Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ JSXæ”¯æŒ</span></span><br><span class="line">âˆš Add JSX Support?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ è·¯ç”±ç¯å¢ƒ</span></span><br><span class="line">âˆš Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ piniaç¯å¢ƒ</span></span><br><span class="line">âˆš Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ å•å…ƒæµ‹è¯•</span></span><br><span class="line">âˆš Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•æ–¹æ¡ˆ</span></span><br><span class="line">âˆš Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? Â» No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ESLintè¯­æ³•æ£€æŸ¥</span></span><br><span class="line">âˆš Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ Prettiertä»£ç æ ¼å¼åŒ–</span></span><br><span class="line">âˆš Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p>è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªAppç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27; //ç»„ä»¶å</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>å®‰è£…å®˜æ–¹æ¨èçš„<code>vscode</code>æ’ä»¶ï¼š</p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142761.png" alt="Snipaste_2023-10-08_20-46-34" style="zoom:50%;"> <img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142762.png" alt="image-20231218085906380" style="zoom:42%;"> <p>æ€»ç»“ï¼š</p><ul><li><code>Vite</code> é¡¹ç›®ä¸­ï¼Œ<code>index.html</code> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æœ€å¤–å±‚ã€‚</li><li>åŠ è½½<code>index.html</code>åï¼Œ<code>Vite</code> è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> æŒ‡å‘çš„<code>JavaScript</code>ã€‚</li><li><code>Vue3</code>**ä¸­æ˜¯é€šè¿‡ **<code>createApp</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚</li></ul><h2 id="2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"><a href="#2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘" class="headerlink" title="2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"></a>2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘</h2><p><code>Vue3</code>å‘ä¸‹å…¼å®¹<code>Vue2</code>è¯­æ³•ï¼Œä¸”<code>Vue3</code>ä¸­çš„æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="3-Vue3æ ¸å¿ƒè¯­æ³•"><a href="#3-Vue3æ ¸å¿ƒè¯­æ³•" class="headerlink" title="3. Vue3æ ¸å¿ƒè¯­æ³•"></a>3. Vue3æ ¸å¿ƒè¯­æ³•</h1><h2 id="3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘"><a href="#3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘" class="headerlink" title="3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘"></a>3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘</h2><ul><li><code>Vue2</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Options</code>ï¼ˆé…ç½®ï¼‰é£æ ¼çš„ã€‚</li><li><code>Vue3</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Composition</code>ï¼ˆç»„åˆï¼‰é£æ ¼çš„ã€‚</li></ul><h3 id="Options-API-çš„å¼Šç«¯"><a href="#Options-API-çš„å¼Šç«¯" class="headerlink" title="Options API çš„å¼Šç«¯"></a>Options API çš„å¼Šç«¯</h3><p><code>Options</code>ç±»å‹çš„ <code>API</code>ï¼Œæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ç­‰ï¼Œæ˜¯åˆ†æ•£åœ¨ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä¸­çš„ï¼Œè‹¥æƒ³æ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«ä¿®æ”¹ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ï¼Œä¸ä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271134485.gif" alt="1.gif" style="zoom:70%;border-radius:20px"><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142763.gif" alt="2.gif" style="zoom:70%;border-radius:20px"></p><h3 id="Composition-API-çš„ä¼˜åŠ¿"><a href="#Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h3><p>å¯ä»¥ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ›´åŠ ä¼˜é›…çš„ç»„ç»‡ä»£ç ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142764.gif" alt="3.gif" style="height:300px;border-radius:10px"><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271134488.gif" alt="4.gif" style="height:300px;border-radius:10px"></p><blockquote><p>è¯´æ˜ï¼šä»¥ä¸Šå››å¼ åŠ¨å›¾åŸåˆ›ä½œè€…ï¼šå¤§å¸…è€çŒ¿</p></blockquote><h2 id="3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘"><a href="#3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘" class="headerlink" title="3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘"></a>3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘</h2><h3 id="setup-æ¦‚è¿°"><a href="#setup-æ¦‚è¿°" class="headerlink" title="setup æ¦‚è¿°"></a>setup æ¦‚è¿°</h3><p><code>setup</code>æ˜¯<code>Vue3</code>ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯ <code>Composition API</code> <strong>â€œè¡¨æ¼”çš„èˆå°</strong>_<strong>â€</strong>_ï¼Œç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç›‘è§†â€¦â€¦ç­‰ç­‰ï¼Œå‡é…ç½®åœ¨<code>setup</code>ä¸­ã€‚</p><p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li><code>setup</code>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li><code>setup</code>ä¸­è®¿é—®<code>this</code>æ˜¯<code>undefined</code>ã€‚</li><li><code>setup</code>å‡½æ•°ä¼šåœ¨<code>beforeCreate</code>ä¹‹å‰è°ƒç”¨ï¼Œå®ƒæ˜¯â€œé¢†å…ˆâ€æ‰€æœ‰é’©å­æ‰§è¡Œçš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">      // æ•°æ®ï¼ŒåŸæ¥å†™åœ¨dataä¸­ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€telæ•°æ®éƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">      let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">      let age = 18</span><br><span class="line">      let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">      // æ–¹æ³•ï¼ŒåŸæ¥å†™åœ¨methodsä¸­</span><br><span class="line">      function changeName()&#123;</span><br><span class="line">        name = &#x27;zhang-san&#x27; //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(name)</span><br><span class="line">      &#125;</span><br><span class="line">      function changeAge()&#123;</span><br><span class="line">        age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(age)</span><br><span class="line">      &#125;</span><br><span class="line">      function showTel()&#123;</span><br><span class="line">        alert(tel)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å†…å®¹ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</span><br><span class="line">      return &#123;name,age,tel,changeName,changeAge,showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="setup-çš„è¿”å›å€¼"><a href="#setup-çš„è¿”å›å€¼" class="headerlink" title="setup çš„è¿”å›å€¼"></a>setup çš„è¿”å›å€¼</h3><ul><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼šåˆ™å¯¹è±¡ä¸­çš„ï¼šå±æ€§ã€æ–¹æ³•ç­‰ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰ã€‚</strong></li><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;ä½ å¥½å•Šï¼&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setup-ä¸-Options-API-çš„å…³ç³»"><a href="#setup-ä¸-Options-API-çš„å…³ç³»" class="headerlink" title="setup ä¸ Options API çš„å…³ç³»"></a>setup ä¸ Options API çš„å…³ç³»</h3><ul><li><code>Vue2</code> çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong> <code>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨<code>setup</code>ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong><code>Vue2</code>çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ã€‚</li><li>å¦‚æœä¸<code>Vue2</code>å†²çªï¼Œåˆ™<code>setup</code>ä¼˜å…ˆã€‚</li></ul><h3 id="setup-è¯­æ³•ç³–"><a href="#setup-è¯­æ³•ç³–" class="headerlink" title="setup è¯­æ³•ç³–"></a>setup è¯­æ³•ç³–</h3><p><code>setup</code>å‡½æ•°æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠ<code>setup</code>ç‹¬ç«‹å‡ºå»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸‹é¢çš„å†™æ³•æ˜¯setupè¯­æ³•ç³– --&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  console.log(this) //undefined</span><br><span class="line">  </span><br><span class="line">  // æ•°æ®ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€teléƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">  let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changName()&#123;</span><br><span class="line">    name = &#x27;æå››&#x27;//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function changAge()&#123;</span><br><span class="line">    console.log(age)</span><br><span class="line">    age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æ‰©å±•ï¼šä¸Šè¿°ä»£ç ï¼Œè¿˜éœ€è¦ç¼–å†™ä¸€ä¸ªä¸å†™<code>setup</code>çš„<code>script</code>æ ‡ç­¾ï¼Œå»æŒ‡å®šç»„ä»¶åå­—ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>vite</code>ä¸­çš„æ’ä»¶ç®€åŒ–</p><ol><li>ç¬¬ä¸€æ­¥ï¼š<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>ç¬¬äºŒæ­¥ï¼š<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¬¬ä¸‰æ­¥ï¼š<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li></ol><h2 id="3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰å“åº”å¼å˜é‡ã€‚</li><li><strong>è¯­æ³•ï¼š</strong><code>let xxx = ref(åˆå§‹å€¼)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>RefImpl</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°<code>refå¯¹è±¡</code>æˆ–<code>ref</code>ï¼Œ<code>ref</code>å¯¹è±¡çš„<code>value</code><strong>å±æ€§æ˜¯å“åº”å¼çš„</strong>ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><ul><li><code>JS</code>ä¸­æ“ä½œæ•°æ®éœ€è¦ï¼š<code>xxx.value</code>ï¼Œä½†æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li><li>å¯¹äº<code>let name = ref(&#39;å¼ ä¸‰&#39;)</code>æ¥è¯´ï¼Œ<code>name</code>ä¸æ˜¯å“åº”å¼çš„ï¼Œ<code>name.value</code>æ˜¯å“åº”å¼çš„ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">  // nameå’Œageæ˜¯ä¸€ä¸ªRefImplçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼Œå®ƒä»¬çš„valueå±æ€§æ˜¯å“åº”å¼çš„ã€‚</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  // telå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å“åº”å¼çš„</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    name.value = &#x27;æå››&#x27;</span><br><span class="line">    console.log(name.value)</span><br><span class="line"></span><br><span class="line">    // æ³¨æ„ï¼šnameä¸æ˜¯å“åº”å¼çš„ï¼Œname.valueæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç å¹¶ä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°ã€‚</span><br><span class="line">    // name = ref(&#x27;zhang-san&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    age.value += 1 </span><br><span class="line">    console.log(age.value)</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰ä¸€ä¸ª<strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼‰</li><li><strong>è¯­æ³•ï¼š</strong><code>let å“åº”å¼å¯¹è±¡= reactive(æºå¯¹è±¡)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>Proxy</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ï¼šå“åº”å¼å¯¹è±¡ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡â€çš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = reactive(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = reactive([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = reactive(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li>å…¶å®<code>ref</code>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼š<strong>åŸºæœ¬ç±»å‹</strong>ã€<strong>å¯¹è±¡ç±»å‹</strong>ã€‚</li><li>è‹¥<code>ref</code>æ¥æ”¶çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œå†…éƒ¨å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†<code>reactive</code>å‡½æ•°ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = ref(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = ref([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = ref(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(car)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.value.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games.value[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.value.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-6-ã€ref-å¯¹æ¯”-reactiveã€‘"><a href="#3-6-ã€ref-å¯¹æ¯”-reactiveã€‘" class="headerlink" title="3.6. ã€ref å¯¹æ¯” reactiveã€‘"></a>3.6. ã€ref å¯¹æ¯” reactiveã€‘</h2><p>å®è§‚è§’åº¦çœ‹ï¼š</p><blockquote><ol><li><p><code>ref</code>ç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼›</p></li><li><p><code>reactive</code>ç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ã€‚</p></li></ol></blockquote><ul><li>åŒºåˆ«ï¼š</li></ul><blockquote><ol><li><p><code>ref</code>åˆ›å»ºçš„å˜é‡å¿…é¡»ä½¿ç”¨<code>.value</code>ï¼ˆå¯ä»¥ä½¿ç”¨<code>volar</code>æ’ä»¶è‡ªåŠ¨æ·»åŠ <code>.value</code>ï¼‰ã€‚</p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142765.png" alt="è‡ªåŠ¨è¡¥å……value" style="zoom:50%;border-radius:20px"> </li><li><p><code>reactive</code>é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼š<strong>å¤±å»</strong>å“åº”å¼ï¼ˆå¯ä»¥ä½¿ç”¨<code>Object.assign</code>å»æ•´ä½“æ›¿æ¢ï¼‰ã€‚</p></li></ol></blockquote><ul><li>ä½¿ç”¨åŸåˆ™ï¼š</li></ul><blockquote><ol><li>è‹¥éœ€è¦ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨<code>ref</code>ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå±‚çº§ä¸æ·±ï¼Œ<code>ref</code>ã€<code>reactive</code>éƒ½å¯ä»¥ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¸”å±‚çº§è¾ƒæ·±ï¼Œæ¨èä½¿ç”¨<code>reactive</code>ã€‚</li></ol></blockquote><h2 id="3-7-ã€toRefs-ä¸-toRefã€‘"><a href="#3-7-ã€toRefs-ä¸-toRefã€‘" class="headerlink" title="3.7. ã€toRefs ä¸ toRefã€‘"></a>3.7. ã€toRefs ä¸ toRefã€‘</h2><ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè½¬æ¢ä¸º<code>ref</code>å¯¹è±¡ã€‚</li><li>å¤‡æ³¨ï¼š<code>toRefs</code>ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†<code>toRefs</code>å¯ä»¥æ‰¹é‡è½¬æ¢ã€‚</li><li>è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ€§åˆ«ï¼š&#123;&#123;person.gender&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeGender&quot;&gt;ä¿®æ”¹æ€§åˆ«&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,reactive,toRefs,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;name:&#x27;å¼ ä¸‰&#x27;, age:18, gender:&#x27;ç”·&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefså°†personå¯¹è±¡ä¸­çš„nä¸ªå±æ€§æ‰¹é‡å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let &#123;name,gender&#125; =  toRefs(person)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefå°†personå¯¹è±¡ä¸­çš„genderå±æ€§å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let age = toRef(person,&#x27;age&#x27;)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    name.value += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    age.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeGender()&#123;</span><br><span class="line">    gender.value = &#x27;å¥³&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-8-ã€computedã€‘"><a href="#3-8-ã€computedã€‘" class="headerlink" title="3.8. ã€computedã€‘"></a>3.8. ã€computedã€‘</h2><p>ä½œç”¨ï¼šæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>computed</code>ä½œç”¨ä¸€è‡´ï¼‰ã€‚</p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142766.gif" style="zoom:20%;">  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    åï¼š&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;å…¨åæ”¹ä¸ºï¼šli-si&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”åªè¯»å–ï¼Œä¸ä¿®æ”¹</span><br><span class="line">  /* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”æ—¢è¯»å–åˆä¿®æ”¹</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // è¯»å–</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      console.log(&#x27;æœ‰äººä¿®æ”¹äº†fullName&#x27;,val)</span><br><span class="line">      firstName.value = val.split(&#x27;-&#x27;)[0]</span><br><span class="line">      lastName.value = val.split(&#x27;-&#x27;)[1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-9-ã€watchã€‘"><a href="#3-9-ã€watchã€‘" class="headerlink" title="3.9.ã€watchã€‘"></a>3.9.ã€watchã€‘</h2><ul><li>ä½œç”¨ï¼šç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>watch</code>ä½œç”¨ä¸€è‡´ï¼‰</li><li>ç‰¹ç‚¹ï¼š<code>Vue3</code>ä¸­çš„<code>watch</code>åªèƒ½ç›‘è§†ä»¥ä¸‹<strong>å››ç§æ•°æ®</strong>ï¼š</li></ul><blockquote><ol><li><code>ref</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li><code>reactive</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li>å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼ˆ<code>getter</code>å‡½æ•°ï¼‰ã€‚</li><li>ä¸€ä¸ªåŒ…å«ä¸Šè¿°å†…å®¹çš„æ•°ç»„ã€‚</li></ol></blockquote><p>æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>watch</code>çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><h3 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="* æƒ…å†µä¸€"></a>* æƒ…å†µä¸€</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åå³å¯ï¼Œç›‘è§†çš„æ˜¯å…¶<code>value</code>å€¼çš„æ”¹å˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®</span><br><span class="line">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sumå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">    if(newValue &gt;= 10)&#123;</span><br><span class="line">      stopWatch()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="* æƒ…å†µäºŒ"></a>* æƒ…å†µäºŒ</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„ã€åœ°å€å€¼ã€‘ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œè¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li><p>è‹¥ä¿®æ”¹çš„æ˜¯<code>ref</code>å®šä¹‰çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼Œ<code>newValue</code> å’Œ <code>oldValue</code> éƒ½æ˜¯æ–°å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>è‹¥ä¿®æ”¹æ•´ä¸ª<code>ref</code>å®šä¹‰çš„å¯¹è±¡ï¼Œ<code>newValue</code> æ˜¯æ–°å€¼ï¼Œ <code>oldValue</code> æ˜¯æ—§å€¼ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäºŒï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = ref(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.value.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    person.value = &#123;name:&#x27;æå››&#x27;,age:90&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /* </span><br><span class="line">    ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†</span><br><span class="line">    watchçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ï¼šè¢«ç›‘è§†çš„æ•°æ®</span><br><span class="line">    watchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šç›‘è§†çš„å›è°ƒ</span><br><span class="line">    watchçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šé…ç½®å¯¹è±¡ï¼ˆdeepã€immediateç­‰ç­‰.....ï¼‰ </span><br><span class="line">  */</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µä¸‰"><a href="#æƒ…å†µä¸‰" class="headerlink" title="*  æƒ…å†µä¸‰"></a>*  æƒ…å†µä¸‰</h3><p>ç›‘è§†<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤å¼€å¯äº†æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;ä¿®æ”¹obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  let obj = reactive(&#123;</span><br><span class="line">    a:&#123;</span><br><span class="line">      b:&#123;</span><br><span class="line">        c:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&#x27;æå››&#x27;,age:80&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function test()&#123;</span><br><span class="line">    obj.a.b.c = 888</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤æ˜¯å¼€å¯æ·±åº¦ç›‘è§†çš„</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(obj,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Objå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µå››"><a href="#æƒ…å†µå››" class="headerlink" title="* æƒ…å†µå››"></a>* æƒ…å†µå››</h3><p>ç›‘è§†<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„<strong>æŸä¸ªå±æ€§</strong>ï¼Œæ³¨æ„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è‹¥è¯¥å±æ€§å€¼<strong>ä¸æ˜¯</strong>ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œéœ€è¦å†™æˆå‡½æ•°å½¢å¼ã€‚</li><li>è‹¥è¯¥å±æ€§å€¼æ˜¯<strong>ä¾ç„¶</strong>æ˜¯ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œå¯ç›´æ¥ç¼–ï¼Œä¹Ÿå¯å†™æˆå‡½æ•°ï¼Œå»ºè®®å†™æˆå‡½æ•°ã€‚</li></ol><p>ç»“è®ºï¼šç›‘è§†çš„è¦æ˜¯å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆæœ€å¥½å†™å‡½æ•°å¼ï¼Œæ³¨æ„ç‚¹ï¼šè‹¥æ˜¯å¯¹è±¡ç›‘è§†çš„æ˜¯åœ°å€å€¼ï¼Œéœ€è¦å…³æ³¨å¯¹è±¡å†…éƒ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µå››ï¼šç›‘è§†ã€refã€‘æˆ–ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„æŸä¸ªå±æ€§&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯åŸºæœ¬ç±»å‹çš„ï¼Œè¦å†™æˆå‡½æ•°å¼</span><br><span class="line">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.nameå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯å¯¹è±¡ç±»å‹çš„ï¼Œå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿèƒ½å†™å‡½æ•°ï¼Œæ›´æ¨èå†™å‡½æ•°</span><br><span class="line">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäº”"><a href="#æƒ…å†µäº”" class="headerlink" title="* æƒ…å†µäº”"></a>* æƒ…å†µäº”</h3><p>ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</span><br><span class="line">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-10-ã€watchEffectã€‘"><a href="#3-10-ã€watchEffectã€‘" class="headerlink" title="3.10. ã€watchEffectã€‘"></a>3.10. ã€watchEffectã€‘</h2><ul><li><p>å®˜ç½‘ï¼šç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼åœ°è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ”¹æ—¶é‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p></li><li><p><code>watch</code>å¯¹æ¯”<code>watchEffect</code></p><blockquote><ol><li><p>éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒ</p></li><li><p><code>watch</code>ï¼šè¦æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®</p></li><li><p><code>watchEffect</code>ï¼šä¸ç”¨æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®ï¼ˆå‡½æ•°ä¸­ç”¨åˆ°å“ªäº›å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªäº›å±æ€§ï¼‰ã€‚</p></li></ol></blockquote></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;éœ€æ±‚ï¼šæ°´æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œåˆ™è”ç³»æœåŠ¡å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;h2 id=&quot;demo&quot;&gt;æ°´æ¸©ï¼š&#123;&#123;temp&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ°´ä½ï¼š&#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;æ°´æ¸©+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;æ°´ä½+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let temp = ref(0)</span><br><span class="line">  let height = ref(0)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changePrice()&#123;</span><br><span class="line">    temp.value += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    height.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç”¨watchå®ç°ï¼Œéœ€è¦æ˜ç¡®çš„æŒ‡å‡ºè¦ç›‘è§†ï¼štempã€height</span><br><span class="line">  watch([temp,height],(value)=&gt;&#123;</span><br><span class="line">    // ä»valueä¸­è·å–æœ€æ–°çš„tempå€¼ã€heightå€¼</span><br><span class="line">    const [newTemp,newHeight] = value</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(newTemp &gt;= 50 || newHeight &gt;= 20)&#123;</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // ç”¨watchEffectå®ç°ï¼Œä¸ç”¨</span><br><span class="line">  const stopWtach = watchEffect(()=&gt;&#123;</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(temp.value &gt;= 50 || height.value &gt;= 20)&#123;</span><br><span class="line">      console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    // æ°´æ¸©è¾¾åˆ°100ï¼Œæˆ–æ°´ä½è¾¾åˆ°50ï¼Œå–æ¶ˆç›‘è§†</span><br><span class="line">    if(temp.value === 100 || height.value === 50)&#123;</span><br><span class="line">      console.log(&#x27;æ¸…ç†äº†&#x27;)</span><br><span class="line">      stopWtach()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘"><a href="#3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘" class="headerlink" title="3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘"></a>3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘</h2><p>ä½œç”¨ï¼šç”¨äºæ³¨å†Œæ¨¡æ¿å¼•ç”¨ã€‚</p><blockquote><ul><li><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯<code>DOM</code>èŠ‚ç‚¹ã€‚</p></li><li><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</p></li></ul></blockquote><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title1&quot;&gt;å°šç¡…è°·&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;å‰ç«¯&lt;/h2&gt;</span><br><span class="line">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;ç‚¹æˆ‘æ‰“å°å†…å®¹&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let title1 = ref()</span><br><span class="line">  let title2 = ref()</span><br><span class="line">  let title3 = ref()</span><br><span class="line"></span><br><span class="line">  function showLog()&#123;</span><br><span class="line">    // é€šè¿‡idè·å–å…ƒç´ </span><br><span class="line">    const t1 = document.getElementById(&#x27;title1&#x27;)</span><br><span class="line">    // æ‰“å°å†…å®¹</span><br><span class="line">    console.log((t1 as HTMLElement).innerText)</span><br><span class="line">    console.log((&lt;HTMLElement&gt;t1).innerText)</span><br><span class="line">    console.log(t1?.innerText)</span><br><span class="line">    </span><br><span class="line">/************************************/</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡refè·å–å…ƒç´ </span><br><span class="line">    console.log(title1.value)</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">    console.log(title3.value)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- çˆ¶ç»„ä»¶App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person ref=&quot;ren&quot;/&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let ren = ref()</span><br><span class="line"></span><br><span class="line">  function test()&#123;</span><br><span class="line">    console.log(ren.value.name)</span><br><span class="line">    console.log(ren.value.age)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- å­ç»„ä»¶Person.vueä¸­è¦ä½¿ç”¨defineExposeæš´éœ²å†…å®¹ --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line">// æ•°æ®</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  /****************************/</span><br><span class="line">  /****************************/</span><br><span class="line">  // ä½¿ç”¨defineExposeå°†ç»„ä»¶ä¸­çš„æ•°æ®äº¤ç»™å¤–éƒ¨</span><br><span class="line">  defineExpose(&#123;name,age&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-12-ã€propsã€‘"><a href="#3-12-ã€propsã€‘" class="headerlink" title="3.12. ã€propsã€‘"></a>3.12. ã€propsã€‘</h2><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œé™åˆ¶æ¯ä¸ªPersonå¯¹è±¡çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"><span class="attr">id</span>:string,</span><br><span class="line"><span class="attr">name</span>:string,</span><br><span class="line"> <span class="attr">age</span>:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Person :list=&quot;persons&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"> import &#123;type Persons&#125; from &#x27;./types&#x27;</span><br><span class="line"></span><br><span class="line"> let persons = reactive&lt;Persons&gt;([</span><br><span class="line">  &#123;id:&#x27;e98219e12&#x27;,name:&#x27;å¼ ä¸‰&#x27;,age:18&#125;,</span><br><span class="line">   &#123;id:&#x27;e98219e13&#x27;,name:&#x27;æå››&#x27;,age:19&#125;,</span><br><span class="line">    &#123;id:&#x27;e98219e14&#x27;,name:&#x27;ç‹äº”&#x27;,age:20&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Person.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸€ç§å†™æ³•ï¼šä»…æ¥æ”¶</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">// ç¬¬äºŒç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸‰ç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹+æŒ‡å®šé»˜è®¤å€¼+é™åˆ¶å¿…è¦æ€§</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;å°çŒªä½©å¥‡&#x27;,age:18&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘"><a href="#3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘" class="headerlink" title="3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘"></a>3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘</h2><ul><li><p>æ¦‚å¿µï¼š<code>Vue</code>ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­<code>Vue</code>ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨ç‰¹å®šçš„å‡½æ•°ï¼Œä»è€Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œè¿™äº›ç‰¹å®šçš„å‡½æ•°ç»Ÿç§°ä¸ºï¼šç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p>è§„å¾‹ï¼š</p><blockquote><p>ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯</strong>ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚</p></blockquote></li><li><p><code>Vue2</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>beforeCreate</code>ã€<code>created</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>beforeMount</code>ã€<code>mounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>beforeUpdate</code>ã€<code>updated</code></p><p>é”€æ¯é˜¶æ®µï¼š<code>beforeDestroy</code>ã€<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>setup</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>onBeforeMount</code>ã€<code>onMounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>onBeforeUpdate</code>ã€<code>onUpdated</code></p><p>å¸è½½é˜¶æ®µï¼š<code>onBeforeUnmount</code>ã€<code>onUnmounted</code></p></blockquote></li><li><p>å¸¸ç”¨çš„é’©å­ï¼š<code>onMounted</code>(æŒ‚è½½å®Œæ¯•)ã€<code>onUpdated</code>(æ›´æ–°å®Œæ¯•)ã€<code>onBeforeUnmount</code>(å¸è½½ä¹‹å‰)</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue3å†™æ³• --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; </span><br><span class="line">    ref, </span><br><span class="line">    onBeforeMount, </span><br><span class="line">    onMounted, </span><br><span class="line">    onBeforeUpdate, </span><br><span class="line">    onUpdated, </span><br><span class="line">    onBeforeUnmount, </span><br><span class="line">    onUnmounted </span><br><span class="line">  &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&#x27;setup&#x27;)</span><br><span class="line">  // ç”Ÿå‘½å‘¨æœŸé’©å­</span><br><span class="line">  onBeforeMount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onMounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUpdate(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUpdated(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-14-ã€è‡ªå®šä¹‰hookã€‘"><a href="#3-14-ã€è‡ªå®šä¹‰hookã€‘" class="headerlink" title="3.14. ã€è‡ªå®šä¹‰hookã€‘"></a>3.14. ã€è‡ªå®šä¹‰hookã€‘</h2><ul><li><p>ä»€ä¹ˆæ˜¯<code>hook</code>ï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ<code>setup</code>å‡½æ•°ä¸­ä½¿ç”¨çš„<code>Composition API</code>è¿›è¡Œäº†å°è£…ï¼Œç±»ä¼¼äº<code>vue2.x</code>ä¸­çš„<code>mixin</code>ã€‚</p></li><li><p>è‡ªå®šä¹‰<code>hook</code>çš„ä¼˜åŠ¿ï¼šå¤ç”¨ä»£ç , è®©<code>setup</code>ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p><code>useSum.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios,&#123;<span class="title class_">AxiosError</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// å‘è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">      <span class="comment">// ç»´æŠ¤æ•°æ®</span></span><br><span class="line">      dogList.<span class="title function_">push</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">      <span class="keyword">const</span> err = &lt;<span class="title class_">AxiosError</span>&gt;error</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‚è½½é’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">getDog</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­å…·ä½“ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;ç‚¹æˆ‘+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;ç‚¹æˆ‘-1&lt;/button&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; </span><br><span class="line">  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;åŠ è½½ä¸­......&lt;/span&gt;&lt;br&gt;</span><br><span class="line">  &lt;button @click=&quot;getDog&quot;&gt;å†æ¥ä¸€åªç‹—&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;defineComponent&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import useSum from &#x27;./hooks/useSum&#x27;</span><br><span class="line">  import useDog from &#x27;./hooks/useDog&#x27;</span><br><span class="line"></span><br><span class="line">  let &#123;sum,increment,decrement&#125; = useSum()</span><br><span class="line">  let &#123;dogList,getDog&#125; = useDog()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="4-è·¯ç”±"><a href="#4-è·¯ç”±" class="headerlink" title="4. è·¯ç”±"></a>4. è·¯ç”±</h1><h2 id="4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"><a href="#4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘" class="headerlink" title="4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"></a>4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘</h2><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142767.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px"> <h2 id="4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"><a href="#4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘" class="headerlink" title="4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"></a>4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘</h2><ul><li><p><code>Vue3</code>ä¸­è¦ä½¿ç”¨<code>vue-router</code>çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯<code>4</code>ç‰ˆæœ¬ã€‚</p></li><li><p>è·¯ç”±é…ç½®æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter,createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot;&gt;Vueè·¯ç”±æµ‹è¯•&lt;/h2&gt;</span><br><span class="line">    &lt;!-- å¯¼èˆªåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;é¦–é¡µ&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;æ–°é—»&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;å…³äº&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- å±•ç¤ºåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;RouterLink,RouterView&#125; from &#x27;vue-router&#x27;  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"><a href="#4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘" class="headerlink" title="4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"></a>4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘</h2><blockquote><ol><li><p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code> æˆ– <code>views</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p></li><li><p>é€šè¿‡ç‚¹å‡»å¯¼èˆªï¼Œè§†è§‰æ•ˆæœä¸Šâ€œæ¶ˆå¤±â€ äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«<strong>å¸è½½</strong>æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»<strong>æŒ‚è½½</strong>ã€‚</p></li></ol></blockquote><h2 id="4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"><a href="#4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘" class="headerlink" title="4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"></a>4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘</h2><ol><li><p><code>history</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼š<code>URL</code>æ›´åŠ ç¾è§‚ï¼Œä¸å¸¦æœ‰<code>#</code>ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„ç½‘ç«™<code>URL</code>ã€‚</p><p>ç¼ºç‚¹ï¼šåæœŸé¡¹ç›®ä¸Šçº¿ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆå¤„ç†è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰<code>404</code>é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//historyæ¨¡å¼</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><code>hash</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†è·¯å¾„ã€‚</p><p>ç¼ºç‚¹ï¼š<code>URL</code>å¸¦æœ‰<code>#</code>ä¸å¤ªç¾è§‚ï¼Œä¸”åœ¨<code>SEO</code>ä¼˜åŒ–æ–¹é¢ç›¸å¯¹è¾ƒå·®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hashæ¨¡å¼</span></span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><h2 id="4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘"><a href="#4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘" class="headerlink" title="4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘"></a>4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç¬¬ä¸€ç§ï¼štoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;ä¸»é¡µ&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç¬¬äºŒç§ï¼štoçš„å¯¹è±¡å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-6-ã€å‘½åè·¯ç”±ã€‘"><a href="#4-6-ã€å‘½åè·¯ç”±ã€‘" class="headerlink" title="4.6. ã€å‘½åè·¯ç”±ã€‘"></a>4.6. ã€å‘½åè·¯ç”±ã€‘</h2><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±è·³è½¬åŠä¼ å‚ï¼ˆåé¢å°±è®²ï¼‰ã€‚</p><p>ç»™è·¯ç”±è§„åˆ™å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è·³è½¬è·¯ç”±ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ç®€åŒ–å‰ï¼šéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç®€åŒ–åï¼šç›´æ¥é€šè¿‡åå­—è·³è½¬ï¼ˆtoçš„å¯¹è±¡å†™æ³•é…åˆnameå±æ€§ï¼‰ --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-7-ã€åµŒå¥—è·¯ç”±ã€‘"><a href="#4-7-ã€åµŒå¥—è·¯ç”±ã€‘" class="headerlink" title="4.7. ã€åµŒå¥—è·¯ç”±ã€‘"></a>4.7. ã€åµŒå¥—è·¯ç”±ã€‘</h2><ol><li><p>ç¼–å†™<code>News</code>çš„å­è·¯ç”±ï¼š<code>Detail.vue</code></p></li><li><p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨<code>children</code>é…ç½®é¡¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>è·³è½¬è·¯ç”±ï¼ˆè®°å¾—è¦åŠ å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br><span class="line">&lt;!-- æˆ– --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;xxxx&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>è®°å¾—å»<code>Home</code>ç»„ä»¶ä¸­é¢„ç•™ä¸€ä¸ª<code>&lt;router-view&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;nav class=&quot;news-list&quot;&gt;</span><br><span class="line">      &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;news.name&#125;&#125;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;news-detail&quot;&gt;</span><br><span class="line">      &lt;RouterView/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-8-ã€è·¯ç”±ä¼ å‚ã€‘"><a href="#4-8-ã€è·¯ç”±ä¼ å‚ã€‘" class="headerlink" title="4.8. ã€è·¯ç”±ä¼ å‚ã€‘"></a>4.8. ã€è·¯ç”±ä¼ å‚ã€‘</h2><h3 id="queryå‚æ•°"><a href="#queryå‚æ•°" class="headerlink" title="queryå‚æ•°"></a>queryå‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=æ¬¢è¿ä½ &quot;&gt;</span><br><span class="line">è·³è½¬</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    //name:&#x27;xiang&#x27;, //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬</span><br><span class="line">    path:&#x27;/news/detail&#x27;,</span><br><span class="line">    query:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°queryå‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="paramså‚æ•°"><a href="#paramså‚æ•°" class="headerlink" title="paramså‚æ•°"></a>paramså‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink :to=&quot;`/news/detail/001/æ–°é—»001/å†…å®¹001`&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    name:&#x27;xiang&#x27;, //ç”¨nameè·³è½¬</span><br><span class="line">    params:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.title</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°paramså‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">params</span>)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨1ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨<code>to</code>çš„å¯¹è±¡å†™æ³•ï¼Œå¿…é¡»ä½¿ç”¨<code>name</code>é…ç½®é¡¹ï¼Œä¸èƒ½ç”¨<code>path</code>ã€‚</p><p>å¤‡æ³¨2ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œéœ€è¦æå‰åœ¨è§„åˆ™ä¸­å ä½ã€‚</p></blockquote><h2 id="4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘"><a href="#4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘" class="headerlink" title="4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘"></a>4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘</h2><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°ï¼ˆå¯ä»¥å°†è·¯ç”±å‚æ•°ä½œä¸º<code>props</code>ä¼ ç»™ç»„ä»¶ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¯¹è±¡å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:&#123;a:1,b:2,c:3&#125;, </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¸ƒå°”å€¼å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠæ”¶åˆ°äº†æ¯ä¸€ç»„paramså‚æ•°ï¼Œä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// propsçš„å‡½æ•°å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠè¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> route.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-10-ã€-replaceå±æ€§ã€‘"><a href="#4-10-ã€-replaceå±æ€§ã€‘" class="headerlink" title="4.10. ã€ replaceå±æ€§ã€‘"></a>4.10. ã€ replaceå±æ€§ã€‘</h2><ol><li><p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ã€‚</p></li><li><p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼š</p><ul><li><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li><li><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚</li></ul></li><li><p>å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"><a href="#4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘" class="headerlink" title="4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"></a>4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘</h2><p>è·¯ç”±ç»„ä»¶çš„ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>$route</code>å’Œ<code>$router</code>å˜æˆäº†ä¸¤ä¸ª<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><h2 id="4-12-ã€é‡å®šå‘ã€‘"><a href="#4-12-ã€é‡å®šå‘ã€‘" class="headerlink" title="4.12. ã€é‡å®šå‘ã€‘"></a>4.12. ã€é‡å®šå‘ã€‘</h2><ol><li><p>ä½œç”¨ï¼šå°†ç‰¹å®šçš„è·¯å¾„ï¼Œé‡æ–°å®šå‘åˆ°å·²æœ‰è·¯ç”±ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="5-pinia"><a href="#5-pinia" class="headerlink" title="5. pinia"></a>5. pinia</h1><h2 id="5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"><a href="#5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘" class="headerlink" title="5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"></a>5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘</h2><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142768.gif" alt="pinia_example" style="zoom:30%;border:3px solid"> <h2 id="5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘"><a href="#5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘" class="headerlink" title="5.2ã€æ­å»º pinia ç¯å¢ƒã€‘"></a>5.2ã€æ­å»º pinia ç¯å¢ƒã€‘</h2><p>ç¬¬ä¸€æ­¥ï¼š<code>npm install pinia</code></p><p>ç¬¬äºŒæ­¥ï¼šæ“ä½œ<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¼•å…¥createPiniaï¼Œç”¨äºåˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨æ’ä»¶ */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¼€å‘è€…å·¥å…·ä¸­å·²ç»æœ‰äº†<code>pinia</code>é€‰é¡¹</p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142769.png" style="zoom:80%;border:1px solid black;border-radius:10px"><h2 id="5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘"><a href="#5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘" class="headerlink" title="5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘"></a>5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘</h2><ol><li><p><code>Store</code>æ˜¯ä¸€ä¸ªä¿å­˜ï¼š<strong>çŠ¶æ€</strong>ã€<strong>ä¸šåŠ¡é€»è¾‘</strong> çš„å®ä½“ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥<strong>è¯»å–</strong>ã€<strong>å†™å…¥</strong>å®ƒã€‚</p></li><li><p>å®ƒæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š<code>state</code>ã€<code>getter</code>ã€<code>action</code>ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„ï¼š <code>data</code>ã€ <code>computed</code> å’Œ <code>methods</code>ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/count.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/talk.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;ä½ ä»Šå¤©æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä½ æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>state</code>ä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  // å¼•å…¥å¯¹åº”çš„useXxxxxStore</span><br><span class="line">  import &#123;useSumStore&#125; from &#x27;@/store/sum&#x27;</span><br><span class="line">  </span><br><span class="line">  // è°ƒç”¨useXxxxxStoreå¾—åˆ°å¯¹åº”çš„store</span><br><span class="line">  const sumStore = useSumStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import axios from &#x27;axios&#x27;</span><br><span class="line">  import &#123;useTalkStore&#125; from &#x27;@/store/talk&#x27;</span><br><span class="line"></span><br><span class="line">  const talkStore = useTalkStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼"><a href="#5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼" class="headerlink" title="5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)"></a>5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)</h2><ol><li><p>ç¬¬ä¸€ç§ä¿®æ”¹æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§ä¿®æ”¹æ–¹å¼ï¼šæ‰¹é‡ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹å¼ï¼šå€ŸåŠ©<code>action</code>ä¿®æ”¹ï¼ˆ<code>action</code>ä¸­å¯ä»¥ç¼–å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//åŠ </span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//æ“ä½œcountStoreä¸­çš„sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//å‡</span></span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">value:number</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sum</span> &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> -= value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è°ƒç”¨<code>action</code>å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨countStore</span></span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å¯¹åº”action</span></span><br><span class="line">countStore.<span class="title function_">incrementOdd</span>(n.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-5-ã€storeToRefsã€‘"><a href="#5-5-ã€storeToRefsã€‘" class="headerlink" title="5.5.ã€storeToRefsã€‘"></a>5.5.ã€storeToRefsã€‘</h2><ul><li>å€ŸåŠ©<code>storeToRefs</code>å°†<code>store</code>ä¸­çš„æ•°æ®è½¬ä¸º<code>ref</code>å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li>æ³¨æ„ï¼š<code>pinia</code>æä¾›çš„<code>storeToRefs</code>åªä¼šå°†æ•°æ®åšè½¬æ¢ï¼Œè€Œ<code>Vue</code>çš„<code>toRefs</code>ä¼šè½¬æ¢<code>store</code>ä¸­æ•°æ®ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;count&quot;&gt;</span><br><span class="line">&lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import &#123; useCountStore &#125; from &#x27;@/store/count&#x27;</span><br><span class="line">  /* å¼•å…¥storeToRefs */</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line"></span><br><span class="line">/* å¾—åˆ°countStore */</span><br><span class="line">  const countStore = useCountStore()</span><br><span class="line">  /* ä½¿ç”¨storeToRefsè½¬æ¢countStoreï¼Œéšåè§£æ„ */</span><br><span class="line">  const &#123;sum&#125; = storeToRefs(countStore)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-6-ã€gettersã€‘"><a href="#5-6-ã€gettersã€‘" class="headerlink" title="5.6.ã€gettersã€‘"></a>5.6.ã€gettersã€‘</h2><ol><li><p>æ¦‚å¿µï¼šå½“<code>state</code>ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç»è¿‡å¤„ç†åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>getters</code>é…ç½®ã€‚</p></li><li><p>è¿½åŠ <code>getters</code>é…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="attr">bigSum</span>:(state):<span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> *<span class="number">10</span>,</span><br><span class="line">    <span class="title function_">upperSchool</span>():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>. school.<span class="title function_">toUpperCase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;increment,decrement&#125; = countStore</span><br><span class="line"><span class="keyword">let</span> &#123;sum,school,bigSum,upperSchool&#125; = <span class="title function_">storeToRefs</span>(countStore)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-7-ã€-subscribeã€‘"><a href="#5-7-ã€-subscribeã€‘" class="headerlink" title="5.7.ã€$subscribeã€‘"></a>5.7.ã€$subscribeã€‘</h2><p>é€šè¿‡ store çš„ <code>$subscribe()</code> æ–¹æ³•ä¾¦å¬ <code>state</code> åŠå…¶å˜åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">talkStore.$subscribe(<span class="function">(<span class="params">mutate,state</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LoveTalk&#x27;</span>,mutate,state)</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(talkList.<span class="property">value</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘"><a href="#5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘" class="headerlink" title="5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘"></a>5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// talkListå°±æ˜¯state</span></span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;talkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getATalkå‡½æ•°ç›¸å½“äºaction</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å</span></span><br><span class="line">    <span class="keyword">let</span> &#123;<span class="attr">data</span>:&#123;<span class="attr">content</span>:title&#125;&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">    <span class="comment">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),title&#125;</span><br><span class="line">    <span class="comment">// æ”¾åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    talkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;talkList,getATalk&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6-ç»„ä»¶é€šä¿¡"><a href="#6-ç»„ä»¶é€šä¿¡" class="headerlink" title="6. ç»„ä»¶é€šä¿¡"></a>6. ç»„ä»¶é€šä¿¡</h1><p><strong><code>Vue3</code>ç»„ä»¶é€šä¿¡å’Œ<code>Vue2</code>çš„åŒºåˆ«ï¼š</strong></p><ul><li>ç§»å‡ºäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨<code>mitt</code>ä»£æ›¿ã€‚</li></ul><ul><li><code>vuex</code>æ¢æˆäº†<code>pinia</code>ã€‚</li><li>æŠŠ<code>.sync</code>ä¼˜åŒ–åˆ°äº†<code>v-model</code>é‡Œé¢äº†ã€‚</li><li>æŠŠ<code>$listeners</code>æ‰€æœ‰çš„ä¸œè¥¿ï¼Œåˆå¹¶åˆ°<code>$attrs</code>ä¸­äº†ã€‚</li><li><code>$children</code>è¢«ç æ‰äº†ã€‚</li></ul><p><strong>å¸¸è§æ­é…å½¢å¼ï¼š</strong></p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142770.png" alt="image-20231119185900990" style="zoom:60%;"> <h2 id="6-1-ã€propsã€‘"><a href="#6-1-ã€propsã€‘" class="headerlink" title="6.1. ã€propsã€‘"></a>6.1. ã€propsã€‘</h2><p>æ¦‚è¿°ï¼š<code>props</code>æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨ä¸ ï¼š<strong>çˆ¶ â†” å­</strong>ã€‚</p><ul><li>è‹¥ <strong>çˆ¶ä¼ å­</strong>ï¼šå±æ€§å€¼æ˜¯<strong>éå‡½æ•°</strong>ã€‚</li><li>è‹¥ <strong>å­ä¼ çˆ¶</strong>ï¼šå±æ€§å€¼æ˜¯<strong>å‡½æ•°</strong>ã€‚</li></ul><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶ï¼Œ&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;å„¿å­ç»™çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">// æ•°æ®</span><br><span class="line">const car = ref(&#x27;å¥”é©°&#x27;)</span><br><span class="line">const toy = ref()</span><br><span class="line">// æ–¹æ³•</span><br><span class="line">function getToy(value:string)&#123;</span><br><span class="line">toy.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;çˆ¶ç»™æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;getToy(toy)&quot;&gt;ç©å…·ç»™çˆ¶äº²&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const toy = ref(&#x27;å¥¥ç‰¹æ›¼&#x27;)</span><br><span class="line"></span><br><span class="line">defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"><a href="#6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘" class="headerlink" title="6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"></a>6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘</h2><ol><li>æ¦‚è¿°ï¼šè‡ªå®šä¹‰äº‹ä»¶å¸¸ç”¨äºï¼š<strong>å­ &#x3D;&gt; çˆ¶ã€‚</strong></li><li>æ³¨æ„åŒºåˆ†å¥½ï¼šåŸç”Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ã€‚</li></ol><ul><li>åŸç”Ÿäº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ç‰¹å®šçš„ï¼ˆ<code>click</code>ã€<code>mosueenter</code>ç­‰ç­‰ï¼‰</li><li>äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯åŒ…å«äº‹ä»¶ç›¸å…³ä¿¡æ¯çš„å¯¹è±¡ï¼ˆ<code>pageX</code>ã€<code>pageY</code>ã€<code>target</code>ã€<code>keyCode</code>ï¼‰</li></ul></li><li>è‡ªå®šä¹‰äº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ä»»æ„åç§°</li><li><strong style="color:red">äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯è°ƒç”¨<code>emit</code>æ—¶æ‰€æä¾›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ï¼ï¼</strong></li></ul></li></ul><ol start="3"><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;toy = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ³¨æ„åŒºåˆ†åŸç”Ÿäº‹ä»¶ä¸è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$event--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toy = $event&quot;</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç»„ä»¶ä¸­ï¼Œè§¦å‘äº‹ä»¶ï¼š</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;send-toy&#x27;</span>, å…·ä½“æ•°æ®)</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-3-ã€mittã€‘"><a href="#6-3-ã€mittã€‘" class="headerlink" title="6.3. ã€mittã€‘"></a>6.3. ã€mittã€‘</h2><p>æ¦‚è¿°ï¼šä¸æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆ<code>pubsub</code>ï¼‰åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ä»¥å®ç°ä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><p>å®‰è£…<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure><p>æ–°å»ºæ–‡ä»¶ï¼š<code>src\utils\emitter.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºemitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  // ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abcäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyzäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // æ¸…ç†äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æš´éœ²mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ï¼šç»‘å®šäº‹ä»¶ã€åŒæ—¶åœ¨é”€æ¯å‰è§£ç»‘äº‹ä»¶ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toyäº‹ä»¶è¢«è§¦å‘&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// è§£ç»‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ã€ç¬¬ä¸‰æ­¥ã€‘ï¼šæä¾›æ•°æ®çš„ç»„ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è§¦å‘äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„è¿™ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼Œæ€»çº¿ä¾èµ–ç€è¿™ä¸ªå†…ç½®å…³ç³»</strong></p><h2 id="6-4-ã€v-modelã€‘"><a href="#6-4-ã€v-modelã€‘" class="headerlink" title="6.4.ã€v-modelã€‘"></a>6.4.ã€v-modelã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç° <strong>çˆ¶â†”å­</strong> ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p></li><li><p>å‰åºçŸ¥è¯† â€”â€” <code>v-model</code>çš„æœ¬è´¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-modelçš„æœ¬è´¨æ˜¯ä¸‹é¢è¿™è¡Œä»£ç  --&gt;</span><br><span class="line">&lt;input </span><br><span class="line">  type=&quot;text&quot; </span><br><span class="line">  :value=&quot;userName&quot; </span><br><span class="line">  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶æ ‡ç­¾ä¸Šçš„<code>v-model</code>çš„æœ¬è´¨ï¼š<code>:moldeValue</code> ï¼‹ <code>update:modelValue</code>äº‹ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;AtguiguInput v-model=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šv-modelçš„æœ¬è´¨ --&gt;</span><br><span class="line">&lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;!--å°†æ¥æ”¶çš„valueå€¼èµ‹ç»™inputå…ƒç´ çš„valueå±æ€§ï¼Œç›®çš„æ˜¯ï¼šä¸ºäº†å‘ˆç°æ•°æ® --&gt;</span><br><span class="line">&lt;!--ç»™inputå…ƒç´ ç»‘å®šåŸç”Ÿinputäº‹ä»¶ï¼Œè§¦å‘inputäº‹ä»¶æ—¶ï¼Œè¿›è€Œè§¦å‘update:model-valueäº‹ä»¶--&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;modelValue&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;modelValue&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:model-value&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥æ›´æ¢<code>value</code>ï¼Œä¾‹å¦‚æ”¹æˆ<code>abc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä¹Ÿå¯ä»¥æ›´æ¢valueï¼Œä¾‹å¦‚æ”¹æˆabc--&gt;</span><br><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸Šé¢ä»£ç çš„æœ¬è´¨å¦‚ä¸‹ --&gt;</span><br><span class="line">&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;abc&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;abc&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:abc&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ<code>value</code>å¯ä»¥æ›´æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå¤šæ¬¡ä½¿ç”¨<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-5-ã€-attrs-ã€‘"><a href="#6-5-ã€-attrs-ã€‘" class="headerlink" title="6.5.ã€$attrs ã€‘"></a>6.5.ã€$attrs ã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š<code>$attrs</code>ç”¨äºå®ç°<strong>å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶</strong>ï¼Œå‘<strong>å½“å‰ç»„ä»¶çš„å­ç»„ä»¶</strong>é€šä¿¡ï¼ˆ<strong>ç¥–â†’å­™</strong>ï¼‰ã€‚</p></li><li><p>å…·ä½“è¯´æ˜ï¼š<code>$attrs</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥çš„æ ‡ç­¾å±æ€§ã€‚</p><blockquote><p> æ³¨æ„ï¼š<code>$attrs</code>ä¼šè‡ªåŠ¨æ’é™¤<code>props</code>ä¸­å£°æ˜çš„å±æ€§(å¯ä»¥è®¤ä¸ºå£°æ˜è¿‡çš„ <code>props</code> è¢«å­ç»„ä»¶è‡ªå·±â€œæ¶ˆè´¹â€äº†)</p></blockquote></li></ol><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x:100,y:200&#125;&quot; :updateA=&quot;updateA&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let a = ref(1)</span><br><span class="line">let b = ref(2)</span><br><span class="line">let c = ref(3)</span><br><span class="line">let d = ref(4)</span><br><span class="line"></span><br><span class="line">function updateA(value)&#123;</span><br><span class="line">a.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import GrandChild from &#x27;./GrandChild.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­™ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;aï¼š&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;bï¼š&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;cï¼š&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;dï¼š&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;xï¼š&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;yï¼š&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;updateA(666)&quot;&gt;ç‚¹æˆ‘æ›´æ–°A&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-6-ã€-refsã€-parentã€‘"><a href="#6-6-ã€-refsã€-parentã€‘" class="headerlink" title="6.6. ã€$refsã€$parentã€‘"></a>6.6. ã€$refsã€$parentã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š</p><ul><li><code>$refs</code>ç”¨äº ï¼š<strong>çˆ¶â†’å­ã€‚</strong></li><li><code>$parent</code>ç”¨äºï¼š<strong>å­â†’çˆ¶ã€‚</strong></li></ul></li><li><p>åŸç†å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¢«<code>ref</code>å±æ€§æ ‡è¯†çš„<code>DOM</code>å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚</td></tr><tr><td><code>$parent</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼Œå½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</td></tr></tbody></table></li></ol><h2 id="6-7-ã€provideã€injectã€‘"><a href="#6-7-ã€provideã€injectã€‘" class="headerlink" title="6.7. ã€provideã€injectã€‘"></a>6.7. ã€provideã€injectã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç°<strong>ç¥–å­™ç»„ä»¶</strong>ç›´æ¥é€šä¿¡</p></li><li><p>å…·ä½“ä½¿ç”¨ï¼š</p><ul><li>åœ¨ç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡<code>provide</code>é…ç½®å‘åä»£ç»„ä»¶æä¾›æ•°æ®</li><li>åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>é…ç½®æ¥å£°æ˜æ¥æ”¶æ•°æ®</li></ul></li><li><p>å…·ä½“ç¼–ç ï¼š</p><p>ã€ç¬¬ä¸€æ­¥ã€‘çˆ¶ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>provide</code>æä¾›æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;money += 1&quot;&gt;èµ„äº§+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;car.price += 1&quot;&gt;æ±½è½¦ä»·æ ¼+1&lt;/button&gt;</span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">  import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let money = ref(100)</span><br><span class="line">  let car = reactive(&#123;</span><br><span class="line">    brand:&#x27;å¥”é©°&#x27;,</span><br><span class="line">    price:100</span><br><span class="line">  &#125;)</span><br><span class="line">  // ç”¨äºæ›´æ–°moneyçš„æ–¹æ³•</span><br><span class="line">  function updateMoney(value:number)&#123;</span><br><span class="line">    money.value += value</span><br><span class="line">  &#125;</span><br><span class="line">  // æä¾›æ•°æ®</span><br><span class="line">  provide(&#x27;moneyContext&#x27;,&#123;money,updateMoney&#125;)</span><br><span class="line">  provide(&#x27;car&#x27;,car)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶ä¸­ä¸ç”¨ç¼–å†™ä»»ä½•ä¸œè¥¿ï¼Œæ˜¯ä¸å—åˆ°ä»»ä½•æ‰“æ‰°çš„</p></blockquote><p>ã€ç¬¬äºŒæ­¥ã€‘å­™ç»„ä»¶ä¸­ä½¿ç”¨<code>inject</code>é…ç½®é¡¹æ¥å—æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;æˆ‘æ˜¯å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;updateMoney(6)&quot;&gt;ç‚¹æˆ‘&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">  import &#123; inject &#125; from &#x27;vue&#x27;;</span><br><span class="line">  // æ³¨å…¥æ•°æ®</span><br><span class="line"> let &#123;money,updateMoney&#125; = inject(&#x27;moneyContext&#x27;,&#123;money:0,updateMoney:(x:number)=&gt;&#123;&#125;&#125;)</span><br><span class="line">  let car = inject(&#x27;car&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-8-ã€piniaã€‘"><a href="#6-8-ã€piniaã€‘" class="headerlink" title="6.8. ã€piniaã€‘"></a>6.8. ã€piniaã€‘</h2><p>å‚è€ƒä¹‹å‰<code>pinia</code>éƒ¨åˆ†çš„è®²è§£</p><h2 id="6-9-ã€slotã€‘"><a href="#6-9-ã€slotã€‘" class="headerlink" title="6.9. ã€slotã€‘"></a>6.9. ã€slotã€‘</h2><h3 id="1-é»˜è®¤æ’æ§½"><a href="#1-é»˜è®¤æ’æ§½" class="headerlink" title="1. é»˜è®¤æ’æ§½"></a>1. é»˜è®¤æ’æ§½</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202312271142771.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;!-- é»˜è®¤æ’æ§½ --&gt;</span><br><span class="line">            &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="2-å…·åæ’æ§½"><a href="#2-å…·åæ’æ§½" class="headerlink" title="2. å…·åæ’æ§½"></a>2. å…·åæ’æ§½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;template v-slot:s1&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template #s2&gt;</span><br><span class="line">            &lt;a href=&quot;&quot;&gt;æ›´å¤š&lt;/a&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="3-ä½œç”¨åŸŸæ’æ§½"><a href="#3-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="3. ä½œç”¨åŸŸæ’æ§½"></a>3. ä½œç”¨åŸŸæ’æ§½</h3><ol><li><p>ç†è§£ï¼š<span style="color:red">æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</span>ï¼ˆæ–°é—»æ•°æ®åœ¨<code>News</code>ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±<code>App</code>ç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;Game v-slot=&quot;params&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">          &lt;h2&gt;ä»Šæ—¥æ¸¸æˆæ¦œå•&lt;/h2&gt;</span><br><span class="line">          &lt;slot :games=&quot;games&quot; a=&quot;å“ˆå“ˆ&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br><span class="line">        import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">        let games = reactive([</span><br><span class="line">          &#123;id:&#x27;asgdytsa01&#x27;,name:&#x27;è‹±é›„è”ç›Ÿ&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa02&#x27;,name:&#x27;ç‹è€…è£è€€&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa03&#x27;,name:&#x27;çº¢è‰²è­¦æˆ’&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa04&#x27;,name:&#x27;æ–—ç½—å¤§é™†&#x27;&#125;</span><br><span class="line">        ])</span><br><span class="line">      &lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h1 id="7-å…¶å®ƒ-API"><a href="#7-å…¶å®ƒ-API" class="headerlink" title="7. å…¶å®ƒ API"></a>7. å…¶å®ƒ API</h1><h2 id="7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘"><a href="#7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘" class="headerlink" title="7.1.ã€shallowRef ä¸ shallowReactive ã€‘"></a>7.1.ã€shallowRef ä¸ shallowReactive ã€‘</h2><h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä½†åªå¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šåªè·Ÿè¸ªå¼•ç”¨å€¼çš„å˜åŒ–ï¼Œä¸å…³å¿ƒå€¼å†…éƒ¨çš„å±æ€§å˜åŒ–ã€‚</p></li></ol><h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæµ…å±‚å“åº”å¼å¯¹è±¡ï¼Œåªä¼šä½¿å¯¹è±¡çš„æœ€é¡¶å±‚å±æ€§å˜æˆå“åº”å¼çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§åˆ™ä¸ä¼šå˜æˆå“åº”å¼çš„</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šå¯¹è±¡çš„é¡¶å±‚å±æ€§æ˜¯å“åº”å¼çš„ï¼Œä½†åµŒå¥—å¯¹è±¡çš„å±æ€§ä¸æ˜¯ã€‚</p></li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>é€šè¿‡ä½¿ç”¨ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> å’Œ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> æ¥ç»•å¼€æ·±åº¦å“åº”ã€‚æµ…å±‚å¼ <code>API</code> åˆ›å»ºçš„çŠ¶æ€åªåœ¨å…¶é¡¶å±‚æ˜¯å“åº”å¼çš„ï¼Œå¯¹æ‰€æœ‰æ·±å±‚çš„å¯¹è±¡ä¸ä¼šåšä»»ä½•å¤„ç†ï¼Œé¿å…äº†å¯¹æ¯ä¸€ä¸ªå†…éƒ¨å±æ€§åšå“åº”å¼æ‰€å¸¦æ¥çš„æ€§èƒ½æˆæœ¬ï¼Œè¿™ä½¿å¾—å±æ€§çš„è®¿é—®å˜å¾—æ›´å¿«ï¼Œå¯æå‡æ€§èƒ½ã€‚</p></blockquote><h2 id="7-2-ã€readonly-ä¸-shallowReadonlyã€‘"><a href="#7-2-ã€readonly-ä¸-shallowReadonlyã€‘" class="headerlink" title="7.2.ã€readonly ä¸ shallowReadonlyã€‘"></a>7.2.ã€readonly ä¸ shallowReadonlyã€‘</h2><h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><strong><code>readonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ·±åªè¯»å‰¯æœ¬ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å°†å˜ä¸ºåªè¯»ã€‚</li><li>ä»»ä½•å°è¯•ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œè¿˜ä¼šåœ¨æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šï¼‰ã€‚</li></ul></li><li><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>åˆ›å»ºä¸å¯å˜çš„çŠ¶æ€å¿«ç…§ã€‚</li><li>ä¿æŠ¤å…¨å±€çŠ¶æ€æˆ–é…ç½®ä¸è¢«ä¿®æ”¹ã€‚</li></ul></li></ol><h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><strong><code>shallowReadonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šä¸ <code>readonly</code> ç±»ä¼¼ï¼Œä½†åªä½œç”¨äºå¯¹è±¡çš„é¡¶å±‚å±æ€§ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li><p>åªå°†å¯¹è±¡çš„é¡¶å±‚å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§ä»ç„¶æ˜¯å¯å˜çš„ã€‚</p></li><li><p>é€‚ç”¨äºåªéœ€ä¿æŠ¤å¯¹è±¡é¡¶å±‚å±æ€§çš„åœºæ™¯ã€‚</p></li></ul></li></ol><h2 id="7-3-ã€toRaw-ä¸-markRawã€‘"><a href="#7-3-ã€toRaw-ä¸-markRawã€‘" class="headerlink" title="7.3.ã€toRaw ä¸ markRawã€‘"></a>7.3.ã€toRaw ä¸ markRawã€‘</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºè·å–ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„åŸå§‹å¯¹è±¡ï¼Œ <code>toRaw</code> è¿”å›çš„å¯¹è±¡ä¸å†æ˜¯å“åº”å¼çš„ï¼Œä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><blockquote><p>å®˜ç½‘æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºä¸´æ—¶è¯»å–è€Œä¸å¼•èµ·ä»£ç†è®¿é—®&#x2F;è·Ÿè¸ªå¼€é”€ï¼Œæˆ–æ˜¯å†™å…¥è€Œä¸è§¦å‘æ›´æ”¹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸å»ºè®®ä¿å­˜å¯¹åŸå§‹å¯¹è±¡çš„æŒä¹…å¼•ç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>ä½•æ—¶ä½¿ç”¨ï¼Ÿ â€”â€” åœ¨éœ€è¦å°†å“åº”å¼å¯¹è±¡ä¼ é€’ç»™é <code>Vue</code> çš„åº“æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ <code>toRaw</code> å¯ä»¥ç¡®ä¿å®ƒä»¬æ”¶åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡</p></blockquote></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// å“åº”å¼å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citysd = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(person))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(rawPerson))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys2))</span><br></pre></td></tr></table></figure></li></ol><h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><ol><li><p>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶<strong>æ°¸è¿œä¸ä¼š</strong>å˜æˆå“åº”å¼çš„ã€‚</p><blockquote><p>ä¾‹å¦‚ä½¿ç”¨<code>mockjs</code>æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æŠŠ<code>mockjs</code>å˜ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>markRaw</code> å»æ ‡è®°<code>mockjs</code></p></blockquote></li><li><p>ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><h2 id="7-4-ã€customRefã€‘"><a href="#7-4-ã€customRefã€‘" class="headerlink" title="7.4.ã€customRefã€‘"></a>7.4.ã€customRefã€‘</h2><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ref</code>ï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚</p><p>å®ç°é˜²æŠ–æ•ˆæœï¼ˆ<code>useSumRef.ts</code>ï¼‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;customRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">initValue:<span class="built_in">string</span>,delay:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">timer</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">track</span>() <span class="comment">// å‘Šè¯‰Vueæ•°æ®msgå¾ˆé‡è¦ï¼Œè¦å¯¹msgæŒç»­å…³æ³¨ï¼Œä¸€æ—¦å˜åŒ–å°±æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span> initValue</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          initValue = value</span><br><span class="line">          <span class="title function_">trigger</span>() <span class="comment">//é€šçŸ¥Vueæ•°æ®msgå˜åŒ–äº†</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">  <span class="keyword">return</span> &#123;msg&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><h1 id="8-Vue3æ–°ç»„ä»¶"><a href="#8-Vue3æ–°ç»„ä»¶" class="headerlink" title="8. Vue3æ–°ç»„ä»¶"></a>8. Vue3æ–°ç»„ä»¶</h1><h2 id="8-1-ã€Teleportã€‘"><a href="#8-1-ã€Teleportã€‘" class="headerlink" title="8.1. ã€Teleportã€‘"></a>8.1. ã€Teleportã€‘</h2><ul><li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å¼¹çª—ä¸­çš„ä¸€äº›å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="8-2-ã€Suspenseã€‘"><a href="#8-2-ã€Suspenseã€‘" class="headerlink" title="8.2. ã€Suspenseã€‘"></a>8.2. ã€Suspenseã€‘</h2><ul><li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ </li><li>ä½¿ç”¨æ­¥éª¤ï¼š <ul><li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li><li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;</span><br><span class="line">        &lt;Suspense&gt;</span><br><span class="line">          &lt;template v-slot:default&gt;</span><br><span class="line">            &lt;Child/&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template v-slot:fallback&gt;</span><br><span class="line">            &lt;h3&gt;åŠ è½½ä¸­.......&lt;/h3&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"><a href="#8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘" class="headerlink" title="8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"></a>8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘</h2><ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code></li></ul><h2 id="8-4-ã€å…¶ä»–ã€‘"><a href="#8-4-ã€å…¶ä»–ã€‘" class="headerlink" title="8.4.ã€å…¶ä»–ã€‘"></a>8.4.ã€å…¶ä»–ã€‘</h2><ul><li><p>è¿‡æ¸¡ç±»å <code>v-enter</code> ä¿®æ”¹ä¸º <code>v-enter-from</code>ã€è¿‡æ¸¡ç±»å <code>v-leave</code> ä¿®æ”¹ä¸º <code>v-leave-from</code>ã€‚</p></li><li><p><code>keyCode</code> ä½œä¸º <code>v-on</code> ä¿®é¥°ç¬¦çš„æ”¯æŒã€‚</p></li><li><p><code>v-model</code> æŒ‡ä»¤åœ¨ç»„ä»¶ä¸Šçš„ä½¿ç”¨å·²ç»è¢«é‡æ–°è®¾è®¡ï¼Œæ›¿æ¢æ‰äº† <code>v-bind.syncã€‚</code></p></li><li><p><code>v-if</code> å’Œ <code>v-for</code> åœ¨åŒä¸€ä¸ªå…ƒç´ èº«ä¸Šä½¿ç”¨æ—¶çš„ä¼˜å…ˆçº§å‘ç”Ÿäº†å˜åŒ–ã€‚</p></li><li><p>ç§»é™¤äº†<code>$on</code>ã€<code>$off</code> å’Œ <code>$once</code> å®ä¾‹æ–¹æ³•ã€‚</p></li><li><p>ç§»é™¤äº†è¿‡æ»¤å™¨ <code>filter</code>ã€‚</p></li><li><p>ç§»é™¤äº†<code>$children</code> å®ä¾‹ <code>propert</code>ã€‚</p><p>â€¦â€¦</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hamming code check</title>
      <link href="/2023/10/31/Hamming-code-check/"/>
      <url>/2023/10/31/Hamming-code-check/</url>
      
        <content type="html"><![CDATA[<h1 id="æµ·æ˜ç æ ¡éªŒåˆ†æ"><a href="#æµ·æ˜ç æ ¡éªŒåˆ†æ" class="headerlink" title="æµ·æ˜ç æ ¡éªŒåˆ†æ"></a>æµ·æ˜ç æ ¡éªŒåˆ†æ</h1><blockquote><p>è®¾æ•°æ®æœ‰ m ä½ï¼Œæ ¡éªŒç æœ‰ p ä½ï¼›</p><p>æˆ‘ä»¬è®¾æ•°æ®ä¸º 1010</p></blockquote><p>ç”±ä¸Šè¿°çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><p>æ ¡éªŒç ä¸€å…±æœ‰2^pç§å–å€¼ ï¼›</p><p>è‹¥æƒ³é€šè¿‡æ ¡éªŒç æŒ‡å‡ºä»»æ„ä¸€ä½ä¸Šå‘ç”Ÿçš„é”™è¯¯å¿…é¡»æ»¡è¶³ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>^<span class="selector-tag">p</span> -<span class="number">1</span> &gt;= m + <span class="selector-tag">p</span> </span><br></pre></td></tr></table></figure><p>ç”±æ•°æ®1010çŸ¥ï¼šm &#x3D; 4 ï¼Œå¾—å‡º p &gt;&#x3D; 3</p><table><thead><tr><th></th><th>1 001</th><th>2 010</th><th>3  011</th><th>4  100</th><th>5  101</th><th>6  110</th><th>7  111</th></tr></thead><tbody><tr><td></td><td>P1</td><td>P2</td><td>1</td><td>P3</td><td>0</td><td>1</td><td>0</td></tr><tr><td>å¥‡</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>å¶</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td></tr></tbody></table><blockquote><p>æ ¡éªŒç çš„ä½ç½®æ”¾åœ¨ $2^n$ ï¼ˆn &#x3D; 0,1,2 â€¦ï¼‰çš„ä½ç½®ä¸Šï¼Œå³1 2 4 8 â€¦</p><p>å¦‚ä½•åˆ†ç»„ï¼Ÿ</p><p>p1å¯¹åº”çš„æ˜¯ 1  äºŒè¿›åˆ¶æ˜¯ 001ï¼Œåˆ™å¯»æ‰¾æœ€åä¸€ä½å’Œå®ƒç›¸åŒçš„ä½æ•°ï¼Œå³ 011(m3)  101(m5) 111(m7) </p></blockquote><p>åˆ†ç»„æƒ…å†µï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">p1</span> ==&gt; m3 m5 m7  = <span class="number">100</span>  <span class="number">0</span>å¥‡<span class="number">1</span>å¶   å†è¡¥ <span class="number">0</span> ä¸ª<span class="number">1</span>å°±å¯ä»¥æ˜¯å¥‡æ•°ä¸ª<span class="number">1</span>ï¼Œæ•… <span class="number">0</span>å¥‡ ï¼Œ å†è¡¥<span class="number">1</span>ä¸ª<span class="number">1</span>å°±æ˜¯å¶æ•°ä¸ª<span class="number">1</span>ï¼Œæ•… <span class="number">1</span>å¶</span><br><span class="line"><span class="attribute">p2</span> ==&gt; m3 m6 m7  = <span class="number">110</span>  <span class="number">1</span>å¥‡<span class="number">0</span>å¶</span><br><span class="line"><span class="attribute">p3</span> ==&gt; m5 m6 m7  = <span class="number">010</span>  <span class="number">0</span>å¥‡<span class="number">1</span>å¶</span><br></pre></td></tr></table></figure><p>è®¾å‘é€æ–¹å‘é€çš„æ˜¯å¥‡æ ¡éªŒæµ·æ˜ç ï¼Œå³ 0110010</p><p>å‡è®¾æ¥æ”¶ç«¯æ¥æ”¶åˆ°çš„æ˜¯  0110110</p><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>å¾—åˆ°ä¸€ä¸ªæ–°çš„</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">e1</span> = p1 m3 m5 m7  = <span class="number">0110</span> = <span class="number">1</span>  å†è¡¥ <span class="number">1</span> ä¸ª<span class="number">1</span>å°±å¯ä»¥æ˜¯å¥‡æ•°ä¸ª<span class="number">1</span>  </span><br><span class="line"><span class="attribute">e2</span> = p2 m3 m6 m7  = <span class="number">1110</span> = <span class="number">0</span>  å†è¡¥ <span class="number">0</span> ä¸ª<span class="number">1</span>å°±å¯ä»¥æ˜¯å¥‡æ•°ä¸ª<span class="number">1</span></span><br><span class="line"><span class="attribute">e3</span> = p3 m5 m6 m7  = <span class="number">0110</span> = <span class="number">1</span>  å†è¡¥ <span class="number">1</span> ä¸ª<span class="number">1</span>å°±å¯ä»¥æ˜¯å¥‡æ•°ä¸ª<span class="number">1</span></span><br></pre></td></tr></table></figure><p>æœ€ååºåˆ—ä¸º e3 e2 e1 : 101 å³ ç¬¬äº”ä½å‡ºé”™ï¼Œå–åå³å¯</p><p>è‹¥æœ€ç»ˆåºåˆ—ä¸º 000ï¼Œåˆ™æ— é”™</p><h1 id="ç è·ï¼ˆæµ·æ˜è·ç¦»ï¼‰"><a href="#ç è·ï¼ˆæµ·æ˜è·ç¦»ï¼‰" class="headerlink" title="ç è·ï¼ˆæµ·æ˜è·ç¦»ï¼‰"></a>ç è·ï¼ˆæµ·æ˜è·ç¦»ï¼‰</h1><p>åŒä¸€ç¼–ç è§„åˆ™ä¸‹çš„ä¸¤ç å­—ä¹‹é—´å¯¹åº”çš„ä½ç½®ä¸Šçš„ä¸åŒäºŒè¿›åˆ¶çš„ä¸ªæ•°</p><p>ä¾‹å¦‚ï¼š 1101111 å’Œ 1101010 ï¼Œ ç è·ä¸º2</p><p>ç¼–ç çš„ç è·ä¸ºå…¶ä¸­ä»»æ„ä¸¤ç å­—é—´çš„æœ€å°ç è·</p><p><strong>çº é”™ç†è®ºï¼š L - 1 &#x3D; D + C , D &gt;&#x3D; C</strong></p><p>L ä¸ºç¼–ç ç è·ï¼Œ D ä¸ºæ£€é”™ç è·ï¼Œ C ä¸ºçº é”™ä½æ•°</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2^p -1 &gt;= m + p  ç è·ä¸º 3 æœ‰å‘ç°ä¸¤ä½é”™è¯¯<span class="params">(<span class="attr">D</span> = 2, <span class="attr">C</span> = 0)</span> æˆ– çº é”™ä¸€ä½çš„èƒ½åŠ›<span class="params">(<span class="attr">D</span> = 1 , <span class="attr">C</span> = 1)</span></span><br><span class="line">å¯¹äºç è·ä¸º4 çš„æµ·æ˜ç ï¼Œæœ‰ 2^<span class="params">(p-1)</span> - 1 &gt;= m + pï¼Œæœ‰å‘ç°ä¸¤ä½é”™è¯¯å¹¶çº é”™ä¸€ä½é”™è¯¯çš„èƒ½åŠ› <span class="params">(<span class="attr">D</span> = 2 , <span class="attr">C</span> = 1)</span></span><br></pre></td></tr></table></figure><h1 id="ç›¸å…³ç»“è®º"><a href="#ç›¸å…³ç»“è®º" class="headerlink" title="ç›¸å…³ç»“è®º"></a>ç›¸å…³ç»“è®º</h1><p>åœ¨ä¸€ä¸ªç ç»„å†…è¦æ£€æµ‹ X ä¸ªé”™è¯¯ä½ï¼Œè¦æ±‚ç ç»„è·åº”æ»¡è¶³ï¼š D &gt;&#x3D; X + 1</p><p>åœ¨ä¸€ä¸ªç ç»„å†…è¦çº æ­£ Y ä¸ªé”™è¯¯ä½ï¼ˆå‘ç° Y ä½é”™è¯¯ï¼Œå¹¶çº æ­£ Y ä½é”™è¯¯ï¼‰ï¼Œè¦æ±‚ç ç»„è·åº”æ»¡è¶³ï¼š D &gt;&#x3D;  2*Y + 1</p><p>åœ¨ä¸€ä¸ªç ç»„å†…è¦æ£€æµ‹ X ä¸ªé”™è¯¯ä½å¹¶ä¸”åŒæ—¶çº é”™ Y ä¸ªé”™è¯¯ä½ï¼Œè¦æ±‚ç ç»„è·åº”æ»¡è¶³ï¼š D &gt;&#x3D; X + Y + 1</p><h1 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h1><blockquote><p>å¸¸ç”¨çš„ï¼ˆnï¼Œkï¼‰æµ·æ˜ç ä¸­ï¼Œå†—ä½™ä½çš„ä½æ•°æ˜¯ </p></blockquote><p>ä½æ•°æ˜¯ n - k ä½</p><p>nä»£è¡¨æ€»ä½æ•°ï¼Œkä»£è¡¨æ•°æ®ä½</p><blockquote><p>ç”¨æµ·æ˜ç å¯¹é•¿åº¦ä¸º8ä½çš„æ•°æ®è¿›è¡Œæ£€&#x2F;çº é”™æ—¶ï¼Œè‹¥èƒ½çº æ­£ä¸€ä½é”™ï¼Œåˆ™æ ¡éªŒä½è‡³å°‘æ˜¯</p></blockquote><p>è‡³å°‘æ˜¯ 4ä½</p><p>è¦çº æ­£ä¸€ä½é”™è¯¯ï¼Œæ‰€ä»¥ æµ·æ˜è·ä¸º 1*2 + 1 &#x3D; 3 ä½ï¼Œå½“æµ·æ˜ç è·ä¸º 3 æ—¶ï¼Œè®¡ç®—çš„å…¬å¼ä¸º 2^p - 1 &#x3D; m + p</p><p>ä½¿ç”¨ä¸Šè¿°å…¬å¼è®¡ç®—å³å¯å¾—åˆ° p æœ€å°å€¼ä¸º 4</p>]]></content>
      
      
      <categories>
          
          <category> ä¸“ä¸šè¯¾å¤ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸“ä¸šè¯¾å¤ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue+Springbootå®ç°å®Œæ•´é¡¹ç›®è®°å½•</title>
      <link href="/2023/02/21/Vue%E7%BB%93%E5%90%88Springboot%E5%AE%9E%E7%8E%B0%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E8%AE%B0%E5%BD%95/"/>
      <url>/2023/02/21/Vue%E7%BB%93%E5%90%88Springboot%E5%AE%9E%E7%8E%B0%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Vueéƒ¨åˆ†"><a href="#Vueéƒ¨åˆ†" class="headerlink" title="Vueéƒ¨åˆ†"></a>Vueéƒ¨åˆ†</h1><p>åˆ›å»ºä¸€ä¸ªæ–°çš„Vue2é¡¹ç›®ï¼ˆç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹ï¼Œä¸èµ˜è¿°äº†ï¼‰</p><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050106013.png" alt="image-20230705005255190"></p><h2 id="ä¸‹è½½ä¾èµ–åŒ…"><a href="#ä¸‹è½½ä¾èµ–åŒ…" class="headerlink" title="ä¸‹è½½ä¾èµ–åŒ…"></a>ä¸‹è½½ä¾èµ–åŒ…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// ä¸‹è½½è·¯ç”±</span><br><span class="line">npm install vue-router@3</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨Element UI</span><br><span class="line">npm i element-ui -S</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨axiosåšå‰åç«¯å¯¹æ¥</span><br><span class="line">npm install axios</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é…ç½®å„ç§é…ç½®"><a href="#é…ç½®å„ç§é…ç½®" class="headerlink" title="é…ç½®å„ç§é…ç½®"></a>é…ç½®å„ç§é…ç½®</h2><h3 id="é…ç½®é¡¹ç›®ç›®å½•çš„main-js"><a href="#é…ç½®é¡¹ç›®ç›®å½•çš„main-js" class="headerlink" title="é…ç½®é¡¹ç›®ç›®å½•çš„main.js"></a>é…ç½®é¡¹ç›®ç›®å½•çš„main.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> htmlToPdf <span class="keyword">from</span> <span class="string">&#x27;./utils/htmlToPdf.js&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(htmlToPdf);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœ¨vue-config-jsä¸­é…ç½®è·¨åŸŸè¯·æ±‚"><a href="#åœ¨vue-config-jsä¸­é…ç½®è·¨åŸŸè¯·æ±‚" class="headerlink" title="åœ¨vue.config.jsä¸­é…ç½®è·¨åŸŸè¯·æ±‚"></a>åœ¨<code>vue.config.js</code>ä¸­é…ç½®è·¨åŸŸè¯·æ±‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">lintOnSave</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/inter&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">// åŒ¹é…æ‰€æœ‰ä»¥&#x27;/api&#x27; å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8081&#x27;</span>, <span class="comment">// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123; <span class="string">&#x27;^/inter&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å°è£…axiosï¼Œé…ç½®request-js"><a href="#å°è£…axiosï¼Œé…ç½®request-js" class="headerlink" title="å°è£…axiosï¼Œé…ç½®request.js"></a>å°è£…<code>axios</code>ï¼Œé…ç½®<code>request.js</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// import &#123; Message &#125; from &#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;./storage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// API è¯·æ±‚çš„é»˜è®¤å‰ç¼€</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;/inter/api&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">30000</span> <span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = storage.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="comment">// å¦‚æœ token å­˜åœ¨</span></span><br><span class="line">    <span class="comment">// è®©æ¯ä¸ªè¯·æ±‚æºå¸¦è‡ªå®šä¹‰ token è¯·æ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      config.<span class="property">headers</span>[<span class="string">&#x27;Authorization&#x27;</span>] = token</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something with request error</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> response.<span class="property">data</span> <span class="comment">//å¯ä»¥ä¸åšä»»ä½•å¤„ç†ï¼Œåœ¨è¿™é‡Œäº†ç›´æ¥è¿”å›è¯·æ±‚ä¼šçš„ç»“æœ</span></span><br><span class="line">    <span class="comment">// const res = response.data || &#123;&#125;</span></span><br><span class="line">    <span class="comment">// console.log(res)</span></span><br><span class="line">    <span class="comment">// if (res.code != 200) &#123;</span></span><br><span class="line">    <span class="comment">//   // 401: Unauthorized</span></span><br><span class="line">    <span class="comment">//   if (res.code === 401) &#123;</span></span><br><span class="line">    <span class="comment">//     notification.error(&#123;</span></span><br><span class="line">    <span class="comment">//       key: &#x27;Unauthorized&#x27;,</span></span><br><span class="line">    <span class="comment">//       message: &#x27;é”™è¯¯&#x27;,</span></span><br><span class="line">    <span class="comment">//       description: &#x27;èº«ä»½éªŒè¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•ï¼&#x27;</span></span><br><span class="line">    <span class="comment">//     &#125;)</span></span><br><span class="line">    <span class="comment">//     // ä» localstorage è·å– token</span></span><br><span class="line">    <span class="comment">//     const token = storage.get(&#x27;token&#x27;)</span></span><br><span class="line">    <span class="comment">//     if (token) &#123;</span></span><br><span class="line">    <span class="comment">//       storage.removeAll()</span></span><br><span class="line">    <span class="comment">//       window.location.href = &#x27;/login&#x27;</span></span><br><span class="line">    <span class="comment">//       Message.error(&#x27;ç™»é™†ä¿¡æ¯è¿‡æœŸ&#x27;)</span></span><br><span class="line">    <span class="comment">//       // åŸæ–‡  store.dispatch(&#x27;Logout&#x27;).then(() =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//       //     window.location.reload()</span></span><br><span class="line">    <span class="comment">//       //   &#125;)</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//   return Promise.reject(response.data)</span></span><br><span class="line">    <span class="comment">// &#125; else &#123;</span></span><br><span class="line">    <span class="comment">//   return res.data</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; <span class="variable">isForm</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">config</span></span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * è¿™é‡Œæ˜¯é€šç”¨è¯·æ±‚</span></span><br><span class="line"><span class="comment">   * å¦‚æœéœ€è¦ç‰¹æ®Šçš„é…ç½®åœ¨configä¸­é…ç½®</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">post</span>(<span class="params">para, config = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (para.<span class="property">isForm</span> === <span class="string">&#x27;FORM&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> formHeaders = &#123;</span><br><span class="line">        <span class="comment">// &#x27;X-Requested-With&#x27;: &#x27;XMLHttpRequest&#x27;,</span></span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded;charset=utf-8&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">transformRequest</span> = data =&gt;</span><br><span class="line">        qs.<span class="title function_">stringify</span>(data, &#123;</span><br><span class="line">          <span class="attr">encode</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">allowDots</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">arrayFormat</span>: <span class="string">&#x27;indices&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      config.<span class="property">transformRequest</span> = config.<span class="property">transformRequest</span></span><br><span class="line">        ? [transformRequest, ...config.<span class="property">transformRequest</span>]</span><br><span class="line">        : [transformRequest]</span><br><span class="line"></span><br><span class="line">      config = &#123; <span class="attr">headers</span>: formHeaders, ...config &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">    <span class="keyword">if</span> (para.<span class="property">isForm</span> === <span class="string">&#x27;FILE&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> formHeaders = &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      config = &#123; <span class="attr">headers</span>: formHeaders, ...config &#125;</span><br><span class="line">      <span class="keyword">const</span> forms = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line">      forms.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, para.<span class="property">data</span>)</span><br><span class="line">      para.<span class="property">data</span> = forms</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> request.<span class="title function_">post</span>(para.<span class="property">url</span>, para.<span class="property">data</span>, config)</span><br><span class="line">    <span class="comment">//return request.post(url, data, config).then(res =&gt; res).catch(e =&gt; e),è¿™é‡Œçš„å¤„ç†å’Œä¸Šè¾¹çš„ä¸åŒæ˜¯å› ä¸ºä¸Šé¢æ²¡åšå¤„ç†çš„ç»“æœreturnå‡ºæ¥çš„promiseå¯¹è±¡ï¼Œåšäº†å¤„ç†å°±returnå‡ºæ¥çš„æ˜¯ä¸€ä¸ªç»è¿‡å¤„ç†çš„å¯¹è±¡ï¼Œ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">params</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> request.<span class="title function_">get</span>(data.<span class="property">url</span>, &#123; <span class="attr">params</span>: data.<span class="property">params</span> &#125;, data.<span class="property">config</span>)</span><br><span class="line">    <span class="comment">//retrun request.get(url, &#123; params: params &#125;, config)//åŒä¸Š</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‚è€ƒè‡ªï¼šhttps://juejin.cn/post/6994728394378182669</span></span><br></pre></td></tr></table></figure><h3 id="å°è£…æ“ä½œlocalstorageæœ¬åœ°å­˜å‚¨çš„æ–¹æ³•"><a href="#å°è£…æ“ä½œlocalstorageæœ¬åœ°å­˜å‚¨çš„æ–¹æ³•" class="headerlink" title="å°è£…æ“ä½œlocalstorageæœ¬åœ°å­˜å‚¨çš„æ–¹æ³•"></a>å°è£…æ“ä½œ<code>localstorage</code>æœ¬åœ°å­˜å‚¨çš„æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°è£…æ“ä½œlocalstorageæœ¬åœ°å­˜å‚¨çš„æ–¹æ³•  æ¨¡å—åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> storage = &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">      <span class="comment">// localStorage.key = value;</span></span><br><span class="line">      <span class="comment">// localStorage[key] = value;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getForIndex</span>(<span class="params">index</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">localStorage</span>.<span class="title function_">key</span>(index)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getKeys</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> items = <span class="variable language_">this</span>.<span class="title function_">getAll</span>()</span><br><span class="line">      <span class="keyword">let</span> keys = []</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; items.<span class="property">length</span>; index++) &#123;</span><br><span class="line">        keys.<span class="title function_">push</span>(items[index].<span class="property">key</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> keys</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getLength</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">localStorage</span>.<span class="property">length</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getSupport</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">typeof</span> <span class="title class_">Storage</span> !== <span class="string">&#x27;undefined&#x27;</span> ? <span class="literal">true</span> : <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">key</span>) &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">removeAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> len = <span class="variable language_">localStorage</span>.<span class="property">length</span> <span class="comment">// è·å–é•¿åº¦</span></span><br><span class="line">      <span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>() <span class="comment">// å®šä¹‰æ•°æ®é›†</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// è·å–key ç´¢å¼•ä»0å¼€å§‹</span></span><br><span class="line">        <span class="keyword">var</span> getKey = <span class="variable language_">localStorage</span>.<span class="title function_">key</span>(i)</span><br><span class="line">        <span class="comment">// è·å–keyå¯¹åº”çš„å€¼</span></span><br><span class="line">        <span class="keyword">var</span> getVal = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(getKey)</span><br><span class="line">        <span class="comment">// æ”¾è¿›æ•°ç»„</span></span><br><span class="line">        arr[i] = &#123;</span><br><span class="line">          <span class="attr">key</span>: getKey,</span><br><span class="line">          <span class="attr">val</span>: getVal</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> arr</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> storage</span><br><span class="line">  <span class="comment">//å‚è€ƒæ¥è‡ªï¼šhttps://blog.csdn.net/GeniusXYT/article/details/104402757</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="é…ç½®routerè·¯ç”±"><a href="#é…ç½®routerè·¯ç”±" class="headerlink" title="é…ç½®routerè·¯ç”±"></a>é…ç½®<code>router</code>è·¯ç”±</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Index</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Main</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/body/main.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyFile</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/body/myfile.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"><span class="keyword">let</span> originPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span></span><br><span class="line"><span class="keyword">let</span> originreplace = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> (<span class="params">location, resolve, reject</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (resolve &amp;&amp; reject) &#123;</span><br><span class="line">    originPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    originPush.<span class="title function_">call</span>(</span><br><span class="line">      <span class="variable language_">this</span>,</span><br><span class="line">      location,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span> = <span class="keyword">function</span> (<span class="params">location, resolve, reject</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (resolve &amp;&amp; reject) &#123;</span><br><span class="line">    originPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    originreplace.<span class="title function_">call</span>(</span><br><span class="line">      <span class="variable language_">this</span>,</span><br><span class="line">      location,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Index</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Main</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;myfile&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">MyFile</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-eslintrc-js"><a href="#é…ç½®-eslintrc-js" class="headerlink" title="é…ç½®.eslintrc.js"></a>é…ç½®<code>.eslintrc.js</code></h3><blockquote><p>ä¸ºäº†æ¶ˆé™¤WebStormä¸Šçš„Vueè­¦å‘Š</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  </span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;extends&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;eslint:recommended&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">parser</span>: <span class="string">&#x27;@babel/eslint-parser&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">overrides</span>: [</span><br><span class="line">        <span class="comment">//è¿™é‡Œæ˜¯æ·»åŠ çš„ä»£ç </span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;src/**&#x27;</span>],   <span class="comment">// åŒ¹é…srcä¸­çš„æ‰€æœ‰vueæ–‡ä»¶</span></span><br><span class="line">            <span class="attr">rules</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;vue/multi-word-component-names&#x27;</span>:<span class="string">&quot;off&quot;</span>,</span><br><span class="line">            &#125; <span class="comment">//ç»™ä¸Šé¢åŒ¹é…çš„æ–‡ä»¶æŒ‡å®šè§„åˆ™</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [</span><br><span class="line">                <span class="string">&#x27;**/__tests__/*.&#123;j,t&#125;s?(x)&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;**/tests/unit/**/*.spec.&#123;j,t&#125;s?(x)&#x27;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">env</span>: &#123;</span><br><span class="line">                <span class="attr">jest</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™ç•Œé¢Vueä»£ç "><a href="#ç¼–å†™ç•Œé¢Vueä»£ç " class="headerlink" title="ç¼–å†™ç•Œé¢Vueä»£ç "></a>ç¼–å†™ç•Œé¢Vueä»£ç </h2><p>ç•Œé¢ä»£ç ä½¿ç”¨element-uiæ¡†æ¶ï¼Œå¾ˆç®€å•çš„ç•Œé¢ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†æè¿°ç•Œé¢çš„ä»£ç äº†</p><p>å…·ä½“ä»£ç å‚è€ƒ <a href="https://github.com/wuwei1636/JavaSenior_Vue">https://github.com/wuwei1636/JavaSenior_Vue</a></p><h1 id="Springbootéƒ¨åˆ†"><a href="#Springbootéƒ¨åˆ†" class="headerlink" title="Springbootéƒ¨åˆ†"></a><code>Springboot</code>éƒ¨åˆ†</h1><h2 id="é¡¹ç›®ç»“æ„-1"><a href="#é¡¹ç›®ç»“æ„-1" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p>ç”±äºé¡¹ç›®æ¯”è¾ƒç®€å•ï¼Œå°±æ²¡æœ‰ç¼–å†™<code>Service</code>å±‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050106014.png" alt="image-20230705010011087"></p><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„springbooté¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„springbooté¡¹ç›®" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„springbooté¡¹ç›®"></a>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>springboot</code>é¡¹ç›®</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050106015.png" alt="image-20230705005704710"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050106016.png" alt="image-20230705005833685"></p><p>æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©éœ€è¦ä¸‹è½½çš„<code>maven</code>ä¾èµ–ï¼Œå°±ç®—åˆ›å»ºçš„æ—¶å€™å¿˜è®°äº†æŸä¸€ä¸ªä¾èµ–ï¼Œä¹Ÿå¯ä»¥åœ¨<code>pom.xml</code>ä¸­æ·»åŠ </p><h2 id="ä»£ç éƒ¨åˆ†"><a href="#ä»£ç éƒ¨åˆ†" class="headerlink" title="ä»£ç éƒ¨åˆ†"></a>ä»£ç éƒ¨åˆ†</h2><p>å…·ä½“ä»£ç è¯·å‚è€ƒ <a href="https://github.com/wuwei1636/JavaSenior_Springboot">https://github.com/wuwei1636/JavaSenior_Springboot</a></p><h1 id="é¡¹ç›®ç•Œé¢"><a href="#é¡¹ç›®ç•Œé¢" class="headerlink" title="é¡¹ç›®ç•Œé¢"></a>é¡¹ç›®ç•Œé¢</h1><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050110292.png" alt="image-20230705010859253"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050110293.png" alt="image-20230705010920513"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050110294.png" alt="image-20230705010941068"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202307050110295.png" alt="image-20230705010957800"></p>]]></content>
      
      
      <categories>
          
          <category> Vue java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueé›†æˆé«˜å¾·åœ°å›¾</title>
      <link href="/2023/02/17/vue%E9%9B%86%E6%88%90%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/"/>
      <url>/2023/02/17/vue%E9%9B%86%E6%88%90%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘åœ¨åšä¸€ä¸ªVueé›†æˆé«˜å¾·åœ°å›¾çš„é¡¹ç›®ï¼Œä¸­é—´é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹</p></blockquote><h1 id="Vue-ElementUiä¸­å›½çœå¸‚åŒº-çœå¸‚ï¼Œä¸‰çº§-ä¸¤çº§è”åŠ¨é€‰æ‹©"><a href="#Vue-ElementUiä¸­å›½çœå¸‚åŒº-çœå¸‚ï¼Œä¸‰çº§-ä¸¤çº§è”åŠ¨é€‰æ‹©" class="headerlink" title="Vue+ElementUiä¸­å›½çœå¸‚åŒº&#x2F;çœå¸‚ï¼Œä¸‰çº§&#x2F;ä¸¤çº§è”åŠ¨é€‰æ‹©"></a>Vue+ElementUiä¸­å›½çœå¸‚åŒº&#x2F;çœå¸‚ï¼Œä¸‰çº§&#x2F;ä¸¤çº§è”åŠ¨é€‰æ‹©</h1><p>Vueé›†æˆé«˜å¾·åœ°å›¾ä¹‹å‰ï¼Œé¦–å…ˆè¦å®ç°Element UIå¯¹å„ä¸ªçœå¸‚çš„é€‰æ‹©</p><h2 id="å®‰è£…åŸå¸‚æ•°æ®"><a href="#å®‰è£…åŸå¸‚æ•°æ®" class="headerlink" title="å®‰è£…åŸå¸‚æ•°æ®"></a>å®‰è£…åŸå¸‚æ•°æ®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-china-area-data -S</span><br></pre></td></tr></table></figure><h2 id="çœå¸‚ä¸å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨"><a href="#çœå¸‚ä¸å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨" class="headerlink" title="çœå¸‚ä¸å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨"></a>çœå¸‚ä¸å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨</h2><ol><li><p>å¯¼å…¥äºŒçº§æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; provinceAndCityData &#125; from &#x27;element-china-area-data&#x27;</span><br></pre></td></tr></table></figure></li><li><p>HTMLéƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;el-cascader</span><br><span class="line">      size=&quot;large&quot;</span><br><span class="line">      :options=&quot;options&quot;</span><br><span class="line">      v-model=&quot;selectedOptions&quot;</span><br><span class="line">      @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;/el-cascader&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>Jséƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        options: provinceAndCityData,</span><br><span class="line">        selectedOptions: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleChange () &#123;</span><br><span class="line">        var loc = &quot;&quot;;</span><br><span class="line">        for (let i = 0; i &lt; this.selectedOptions.length; i++) &#123;</span><br><span class="line">            loc += CodeToText[this.selectedOptions[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(loc)//æ‰“å°åŒºåŸŸç æ‰€å¯¹åº”çš„å±æ€§å€¼å³ä¸­æ–‡åœ°å€</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     //ä¹Ÿå¯ä»¥è¿™æ ·å†™</span><br><span class="line">    handleChange (value) &#123;</span><br><span class="line">        console.log(value)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="çœå¸‚å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨"><a href="#çœå¸‚å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨" class="headerlink" title="çœå¸‚å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨"></a>çœå¸‚å¸¦â€œå…¨éƒ¨â€çš„äºŒçº§è”åŠ¨</h2><ol><li><p>å¯¼å…¥äºŒçº§æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; provinceAndCityDataPlus  &#125; from &#x27;element-china-area-data&#x27;</span><br></pre></td></tr></table></figure></li><li><p>HTMLéƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;el-cascader</span><br><span class="line">      size=&quot;large&quot;</span><br><span class="line">      :options=&quot;options&quot;</span><br><span class="line">      v-model=&quot;selectedOptions&quot;</span><br><span class="line">      @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;/el-cascader&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>Jséƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        options: provinceAndCityDataPlus ,</span><br><span class="line">        selectedOptions: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleChange () &#123;</span><br><span class="line">        var loc = &quot;&quot;;</span><br><span class="line">        for (let i = 0; i &lt; this.selectedOptions.length; i++) &#123;</span><br><span class="line">            loc += CodeToText[this.selectedOptions[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(loc)//æ‰“å°åŒºåŸŸç æ‰€å¯¹åº”çš„å±æ€§å€¼å³ä¸­æ–‡åœ°å€</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     //ä¹Ÿå¯ä»¥è¿™æ ·å†™</span><br><span class="line">    handleChange (value) &#123;</span><br><span class="line">        console.log(value)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="çœå¸‚ä¸å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨"><a href="#çœå¸‚ä¸å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨" class="headerlink" title="çœå¸‚ä¸å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨"></a>çœå¸‚ä¸å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨</h2><ol><li><p>å¯¼å…¥äºŒçº§æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; regionData &#125; from &#x27;element-china-area-data&#x27;</span><br></pre></td></tr></table></figure></li><li><p>HTMLéƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;el-cascader</span><br><span class="line">      size=&quot;large&quot;</span><br><span class="line">      :options=&quot;options&quot;</span><br><span class="line">      v-model=&quot;selectedOptions&quot;</span><br><span class="line">      @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;/el-cascader&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>Jséƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        options: regionData,</span><br><span class="line">        selectedOptions: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleChange () &#123;</span><br><span class="line">        var loc = &quot;&quot;;</span><br><span class="line">        for (let i = 0; i &lt; this.selectedOptions.length; i++) &#123;</span><br><span class="line">            loc += CodeToText[this.selectedOptions[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(loc)//æ‰“å°åŒºåŸŸç æ‰€å¯¹åº”çš„å±æ€§å€¼å³ä¸­æ–‡åœ°å€</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     //ä¹Ÿå¯ä»¥è¿™æ ·å†™</span><br><span class="line">    handleChange (value) &#123;</span><br><span class="line">        console.log(value)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¤ºä¾‹</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324179.png" alt="image-20230217202904143"></p></li></ol><h2 id="çœå¸‚å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨"><a href="#çœå¸‚å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨" class="headerlink" title="çœå¸‚å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨"></a>çœå¸‚å¸¦å…¨éƒ¨çš„ä¸‰çº§è”åŠ¨</h2><ol><li><p>å¯¼å…¥äºŒçº§æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; regionDataPlus  &#125; from &#x27;element-china-area-data&#x27;</span><br></pre></td></tr></table></figure></li><li><p>HTMLéƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;el-cascader</span><br><span class="line">      size=&quot;large&quot;</span><br><span class="line">      :options=&quot;options&quot;</span><br><span class="line">      v-model=&quot;selectedOptions&quot;</span><br><span class="line">      @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;/el-cascader&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li><li><p>Jséƒ¨åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        options: regionDataPlus ,</span><br><span class="line">        selectedOptions: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleChange () &#123;</span><br><span class="line">        var loc = &quot;&quot;;</span><br><span class="line">        for (let i = 0; i &lt; this.selectedOptions.length; i++) &#123;</span><br><span class="line">            loc += CodeToText[this.selectedOptions[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(loc)//æ‰“å°åŒºåŸŸç æ‰€å¯¹åº”çš„å±æ€§å€¼å³ä¸­æ–‡åœ°å€</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     //ä¹Ÿå¯ä»¥è¿™æ ·å†™</span><br><span class="line">    handleChange (value) &#123;</span><br><span class="line">        console.log(value)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="Vueé›†æˆé«˜å¾·åœ°å›¾"><a href="#Vueé›†æˆé«˜å¾·åœ°å›¾" class="headerlink" title="Vueé›†æˆé«˜å¾·åœ°å›¾"></a>Vueé›†æˆé«˜å¾·åœ°å›¾</h1><h2 id="é¦–å…ˆåˆ›å»ºä¸€ä¸ªé«˜å¾·åœ°å›¾çš„åº”ç”¨"><a href="#é¦–å…ˆåˆ›å»ºä¸€ä¸ªé«˜å¾·åœ°å›¾çš„åº”ç”¨" class="headerlink" title="é¦–å…ˆåˆ›å»ºä¸€ä¸ªé«˜å¾·åœ°å›¾çš„åº”ç”¨"></a>é¦–å…ˆåˆ›å»ºä¸€ä¸ªé«˜å¾·åœ°å›¾çš„åº”ç”¨</h2><p>é«˜å¾·åœ°å›¾çš„å®˜ç½‘ç½‘å€ä¸Šæœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»ï¼Œè‡ªè¡Œè§‚çœ‹ã€‚<a href="https://lbs.amap.com/api/jsapi-v2/guide/webcli/map-vue1">https://lbs.amap.com/api/jsapi-v2/guide/webcli/map-vue1</a></p><p>å»ºè®®å…ˆå°†å®˜ç½‘ä¸Šçš„ä»£ç è·‘å‡ºæ¥åœ¨çœ‹ä¸‹é¢çš„ã€‚</p><h2 id="è·å–é«˜å¾·åœ°å›¾çš„api"><a href="#è·å–é«˜å¾·åœ°å›¾çš„api" class="headerlink" title="è·å–é«˜å¾·åœ°å›¾çš„api"></a>è·å–é«˜å¾·åœ°å›¾çš„api</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @amap/amap-jsapi-loader --save</span><br></pre></td></tr></table></figure><h2 id="å®ç°è·¯çº¿è§„åˆ’"><a href="#å®ç°è·¯çº¿è§„åˆ’" class="headerlink" title="å®ç°è·¯çº¿è§„åˆ’"></a>å®ç°è·¯çº¿è§„åˆ’</h2><p>å®˜æ–¹apiï¼š<a href="https://lbs.amap.com/api/javascript-api/guide/services/navigation">https://lbs.amap.com/api/javascript-api/guide/services/navigation</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-form :model=&quot;diaform&quot; :inline=&quot;true&quot; &gt;</span><br><span class="line">            &lt;el-form-item label=&quot;æ´¾é€åœ°ç‚¹&quot; &gt;</span><br><span class="line">                &lt;el-cascader</span><br><span class="line">                    size=&quot;large&quot;</span><br><span class="line">                    :options=&quot;diaform.options&quot;</span><br><span class="line">                    v-model=&quot;diaform.selectedOptions&quot;</span><br><span class="line">                    @change=&quot;handleChange&quot;&gt;</span><br><span class="line">                &lt;/el-cascader&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-button @click=&quot;goView&quot;&gt;</span><br><span class="line">                    æŸ¥çœ‹è·¯çº¿å›¾</span><br><span class="line">                &lt;/el-button&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-button&gt;</span><br><span class="line">                    ç¡®è®¤æ´¾é€</span><br><span class="line">                &lt;/el-button&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">      &lt;div id=&quot;container&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  import AMapLoader from &#x27;@amap/amap-jsapi-loader&#x27;</span><br><span class="line">  import &#123; regionData , CodeToText   &#125; from &#x27;element-china-area-data&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;AMapView&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        map: null,</span><br><span class="line">        startName: &#x27;åŒ—äº¬å¸‚&#x27;,</span><br><span class="line">        endName: &#x27;&#x27;,</span><br><span class="line">        driving: null,</span><br><span class="line">        diaform: &#123;</span><br><span class="line">            options: regionData ,</span><br><span class="line">            selectedOptions: [],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      window._AMapSecurityConfig = &#123;</span><br><span class="line">        securityJsCode: &#x27;22ab9c534d1fef92d2d9b667830f3613&#x27; // ç”³è¯·keyå¯¹åº”çš„ç§˜é’¥</span><br><span class="line">      &#125;</span><br><span class="line">      // DOMåˆå§‹åŒ–å®Œæˆè¿›è¡Œåœ°å›¾åˆå§‹åŒ–</span><br><span class="line">      this.initMap()</span><br><span class="line">    &#125;, </span><br><span class="line">    methods: &#123;</span><br><span class="line">        initMap() &#123;</span><br><span class="line">            AMapLoader.load(&#123;</span><br><span class="line">            key: &#x27;a13639d2a316c45690b8dac7d0cc9428&#x27;, // ç”³è¯·å¥½çš„Webç«¯å¼€å‘è€…Keyï¼Œé¦–æ¬¡è°ƒç”¨ load æ—¶å¿…å¡«</span><br><span class="line">            version: &#x27;2.0&#x27;, // æŒ‡å®šè¦åŠ è½½çš„ JSAPI çš„ç‰ˆæœ¬ï¼Œç¼ºçœæ—¶é»˜è®¤ä¸º 1.4.15</span><br><span class="line">            plugins: [&#x27;AMap.ToolBar&#x27;, &#x27;AMap.Driving&#x27;, &#x27;AMap.AutoComplete&#x27;] // éœ€è¦ä½¿ç”¨çš„çš„æ’ä»¶åˆ—è¡¨ï¼Œå¦‚æ¯”ä¾‹å°º&#x27;AMap.Scale&#x27;ç­‰</span><br><span class="line">            &#125;).then(AMap =&gt; &#123;</span><br><span class="line">            this.map = new AMap.Map(&#x27;container&#x27;, &#123; // è®¾ç½®åœ°å›¾å®¹å™¨id</span><br><span class="line">                viewMode: &#x27;3D&#x27;, // æ˜¯å¦ä¸º3Dåœ°å›¾æ¨¡å¼</span><br><span class="line">                zoom: 5, // åˆå§‹åŒ–åœ°å›¾çº§åˆ«</span><br><span class="line">                center: [105.602725, 37.076636] // åˆå§‹åŒ–åœ°å›¾ä¸­å¿ƒç‚¹ä½ç½®</span><br><span class="line">            &#125;)</span><br><span class="line">            const autoOptions = &#123;</span><br><span class="line">                // city é™å®šåŸå¸‚ï¼Œé»˜è®¤å…¨å›½</span><br><span class="line">                city: &#x27;å…¨å›½&#x27;,</span><br><span class="line">                input: &#x27;start&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">            // å®ä¾‹åŒ–AutoComplete</span><br><span class="line">            const autoComplete = new AMap.AutoComplete(autoOptions)</span><br><span class="line">            const autoOptions2 = &#123;</span><br><span class="line">                // city é™å®šåŸå¸‚ï¼Œé»˜è®¤å…¨å›½</span><br><span class="line">                city: &#x27;å…¨å›½&#x27;,</span><br><span class="line">                input: &#x27;end&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">            // å®ä¾‹åŒ–AutoComplete</span><br><span class="line">            const autoComplete2 = new AMap.AutoComplete(autoOptions2)</span><br><span class="line">            // æ ¹æ®å…³é”®å­—è¿›è¡Œæœç´¢</span><br><span class="line">            /* autoComplete.search(this.startName, (status, result) =&gt; &#123;</span><br><span class="line">                // æœç´¢æˆåŠŸæ—¶ï¼Œresultå³æ˜¯å¯¹åº”çš„åŒ¹é…æ•°æ®</span><br><span class="line">                console.log(result)</span><br><span class="line">            &#125;) */</span><br><span class="line">            &#125;).catch(e =&gt; &#123;</span><br><span class="line">            console.log(e)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        // æ ¹æ® startName å’Œ endName æ¥é€‰æ‹©è·¯çº¿</span><br><span class="line">        goView() &#123;</span><br><span class="line">            // eslint-disable-next-line no-undef</span><br><span class="line">            // æ¸…é™¤ä¸Šä¸€æ¬¡è§„åˆ’çš„è·¯çº¿</span><br><span class="line">            if(this.driving)&#123;</span><br><span class="line">                this.driving.clear()</span><br><span class="line">            &#125;</span><br><span class="line">            this.driving = new AMap.Driving(&#123;</span><br><span class="line">                </span><br><span class="line">                map: this.map,</span><br><span class="line">                // é©¾è½¦è·¯çº¿è§„åˆ’ç­–ç•¥ï¼ŒAMap.DrivingPolicy.LEAST_TIMEæ˜¯æœ€å¿«æ·æ¨¡å¼</span><br><span class="line">                // eslint-disable-next-line no-undef</span><br><span class="line">                policy: AMap.DrivingPolicy.LEAST_TIME</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            const points = [</span><br><span class="line">                &#123; keyword: this.startName, city: &#x27;å…¨å›½&#x27; &#125;,</span><br><span class="line">                &#123; keyword: this.endName, city: &#x27;å…¨å›½&#x27; &#125;</span><br><span class="line">            ]</span><br><span class="line">    </span><br><span class="line">            this.driving.search(points, (status, result) =&gt; &#123;</span><br><span class="line">                // æœªå‡ºé”™æ—¶ï¼Œresultå³æ˜¯å¯¹åº”çš„è·¯çº¿è§„åˆ’æ–¹æ¡ˆ</span><br><span class="line">                console.log(&#x27;status=&#x27;, status)</span><br><span class="line">                console.log(&#x27;result=&#x27;, result)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        // è·å–é€‰å–çš„åœ°å€</span><br><span class="line">        handleChange () &#123;</span><br><span class="line">            var loc = &quot;&quot;;</span><br><span class="line">            for (let i = 0; i &lt; this.diaform.selectedOptions.length; i++) &#123;</span><br><span class="line">                loc += CodeToText[this.diaform.selectedOptions[i]];</span><br><span class="line">            &#125;</span><br><span class="line">            this.endName = loc</span><br><span class="line">            console.log(loc)//æ‰“å°åŒºåŸŸç æ‰€å¯¹åº”çš„å±æ€§å€¼å³ä¸­æ–‡åœ°å€</span><br><span class="line">        &#125;,  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  &lt;style  scoped&gt;</span><br><span class="line"></span><br><span class="line"> * &#123;</span><br><span class="line">    line-height: normal;</span><br><span class="line">    text-align: left;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  #container&#123;</span><br><span class="line">    padding:0px;</span><br><span class="line">    margin: 0px;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 400px;</span><br><span class="line">  &#125;</span><br><span class="line">  #panel &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    background-color: white;</span><br><span class="line">    max-height: 90%;</span><br><span class="line">    overflow-y: auto;</span><br><span class="line">    top: 10px;</span><br><span class="line">    right: 10px;</span><br><span class="line">    width: 280px;</span><br><span class="line">  &#125;</span><br><span class="line">  #panel .amap-call &#123;</span><br><span class="line">    background-color: #009cf9;</span><br><span class="line">    border-top-left-radius: 4px;</span><br><span class="line">    border-top-right-radius: 4px;</span><br><span class="line">  &#125;</span><br><span class="line">  #panel .amap-lib-driving &#123;</span><br><span class="line">    border-bottom-left-radius: 4px;</span><br><span class="line">    border-bottom-right-radius: 4px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br></pre></td></tr></table></figure><h2 id="å®ç°å­˜åœ¨é€”å¾„ç‚¹çš„è·¯å¾„è§„åˆ’"><a href="#å®ç°å­˜åœ¨é€”å¾„ç‚¹çš„è·¯å¾„è§„åˆ’" class="headerlink" title="å®ç°å­˜åœ¨é€”å¾„ç‚¹çš„è·¯å¾„è§„åˆ’"></a>å®ç°å­˜åœ¨é€”å¾„ç‚¹çš„è·¯å¾„è§„åˆ’</h2><p>è¯¦ç»†è¯·å‚è€ƒé«˜å¾·åœ°å›¾çš„apiè§£é‡Š<a href="https://lbs.amap.com/api/javascript-api/reference/route-search/">https://lbs.amap.com/api/javascript-api/reference/route-search/</a> é‡ç‚¹åœ¨<code>search</code>çš„å‚æ•°é—®é¢˜ä¸Š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324554.png" alt="image-20230304204810615"></p><p>ä¸¤ç§æ–¹æ³•ï¼š</p><h3 id="ä½¿ç”¨-ç»çº¬åº¦-åç§°-è®¾ç½®è·¯å¾„ç‚¹"><a href="#ä½¿ç”¨-ç»çº¬åº¦-åç§°-è®¾ç½®è·¯å¾„ç‚¹" class="headerlink" title="ä½¿ç”¨ ç»çº¬åº¦ &#x2F; åç§° è®¾ç½®è·¯å¾„ç‚¹"></a>ä½¿ç”¨ ç»çº¬åº¦ &#x2F; åç§° è®¾ç½®è·¯å¾„ç‚¹</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;diaform&quot;</span> <span class="attr">:inline</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;æ´¾é€åœ°ç‚¹&quot;</span> &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-cascader</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">size</span>=<span class="string">&quot;large&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:options</span>=<span class="string">&quot;diaform.options&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">v-model</span>=<span class="string">&quot;diaform.selectedOptions&quot;</span></span></span><br><span class="line"><span class="tag">                    @<span class="attr">change</span>=<span class="string">&quot;handleChange&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-cascader</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;goView&quot;</span>&gt;</span></span><br><span class="line">                    æŸ¥çœ‹è·¯çº¿å›¾</span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    ç¡®è®¤æ´¾é€</span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">AMapLoader</span> <span class="keyword">from</span> <span class="string">&#x27;@amap/amap-jsapi-loader&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; regionData , <span class="title class_">CodeToText</span>  &#125; <span class="keyword">from</span> <span class="string">&#x27;element-china-area-data&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;AMapView&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">map</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">startName</span>: <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">endName</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">driving</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">diaform</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">options</span>: regionData ,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">selectedOptions</span>: [],</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">optts</span>:[</span></span><br><span class="line"><span class="language-javascript">            &#123;<span class="title class_">Latitude</span> :<span class="number">116.379028</span>, <span class="attr">longitude</span>:<span class="number">39.885042</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        ]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">_AMapSecurityConfig</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">securityJsCode</span>: <span class="string">&#x27;22ab9c534d1fef92d2d9b667830f3613&#x27;</span> <span class="comment">// ç”³è¯·keyå¯¹åº”çš„ç§˜é’¥</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// DOMåˆå§‹åŒ–å®Œæˆè¿›è¡Œåœ°å›¾åˆå§‹åŒ–</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">initMap</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;, </span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">AMapLoader</span>.<span class="title function_">load</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">key</span>: <span class="string">&#x27;a13639d2a316c45690b8dac7d0cc9428&#x27;</span>, <span class="comment">// ç”³è¯·å¥½çš„Webç«¯å¼€å‘è€…Keyï¼Œé¦–æ¬¡è°ƒç”¨ load æ—¶å¿…å¡«</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">version</span>: <span class="string">&#x27;2.0&#x27;</span>, <span class="comment">// æŒ‡å®šè¦åŠ è½½çš„ JSAPI çš„ç‰ˆæœ¬ï¼Œç¼ºçœæ—¶é»˜è®¤ä¸º 1.4.15</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">plugins</span>: [<span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.Driving&#x27;</span>, <span class="string">&#x27;AMap.AutoComplete&#x27;</span>] <span class="comment">// éœ€è¦ä½¿ç”¨çš„çš„æ’ä»¶åˆ—è¡¨ï¼Œå¦‚æ¯”ä¾‹å°º&#x27;AMap.Scale&#x27;ç­‰</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">AMap</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Map</span>(<span class="string">&#x27;container&#x27;</span>, &#123; <span class="comment">// è®¾ç½®åœ°å›¾å®¹å™¨id</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">viewMode</span>: <span class="string">&#x27;3D&#x27;</span>, <span class="comment">// æ˜¯å¦ä¸º3Dåœ°å›¾æ¨¡å¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">// åˆå§‹åŒ–åœ°å›¾çº§åˆ«</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">center</span>: [<span class="number">105.602725</span>, <span class="number">37.076636</span>] <span class="comment">// åˆå§‹åŒ–åœ°å›¾ä¸­å¿ƒç‚¹ä½ç½®</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> autoOptions = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// city é™å®šåŸå¸‚ï¼Œé»˜è®¤å…¨å›½</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">city</span>: <span class="string">&#x27;å…¨å›½&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">input</span>: <span class="string">&#x27;start&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å®ä¾‹åŒ–AutoComplete</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> autoComplete = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">AutoComplete</span>(autoOptions)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> autoOptions2 = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// city é™å®šåŸå¸‚ï¼Œé»˜è®¤å…¨å›½</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">city</span>: <span class="string">&#x27;å…¨å›½&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">input</span>: <span class="string">&#x27;end&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å®ä¾‹åŒ–AutoComplete</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> autoComplete2 = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">AutoComplete</span>(autoOptions2)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ ¹æ®å…³é”®å­—è¿›è¡Œæœç´¢</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/* autoComplete.search(this.startName, (status, result) =&gt; &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                // æœç´¢æˆåŠŸæ—¶ï¼Œresultå³æ˜¯å¯¹åº”çš„åŒ¹é…æ•°æ®</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                console.log(result)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;) */</span></span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ ¹æ® startName å’Œ endName æ¥é€‰æ‹©è·¯çº¿</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">goView</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// eslint-disable-next-line no-undef</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// æ¸…é™¤ä¸Šä¸€æ¬¡è§„åˆ’çš„è·¯çº¿</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">driving</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">driving</span>.<span class="title function_">clear</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">driving</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Driving</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">map</span>: <span class="variable language_">this</span>.<span class="property">map</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// é©¾è½¦è·¯çº¿è§„åˆ’ç­–ç•¥ï¼ŒAMap.DrivingPolicy.LEAST_TIMEæ˜¯æœ€å¿«æ·æ¨¡å¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// eslint-disable-next-line no-undef</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">policy</span>: <span class="title class_">AMap</span>.<span class="property">DrivingPolicy</span>.<span class="property">LEAST_TIME</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//  ä½¿ç”¨åç§°ä½œä¸ºè·¯å¾„ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> points = [</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#123; keyword: this.startName, city: &#x27;å…¨å›½&#x27; &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#123; keyword: this.endName, city: &#x27;å…¨å›½&#x27; &#125;,                </span></span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">keyword</span>: <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>, <span class="attr">city</span>: <span class="string">&#x27;å…¨å›½&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">keyword</span>: <span class="string">&#x27;ä¸Šæµ·å¸‚&#x27;</span>, <span class="attr">city</span>: <span class="string">&#x27;å…¨å›½&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">keyword</span>: <span class="string">&#x27;å—äº¬å¸‚&#x27;</span>, <span class="attr">city</span>: <span class="string">&#x27;å…¨å›½&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//  ç»çº¬åº¦ä½œä¸ºè·¯å¾„ç‚¹ä½¿ç”¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> startLngLat = [<span class="number">116.379028</span>, <span class="number">39.865042</span>]</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> endLngLat = [<span class="number">116.427281</span>, <span class="number">39.903719</span>]</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> opts = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// é€”ç»ç‚¹å‚æ•°ï¼Œæœ€å¤šæ”¯æŒä¼ å…¥16ä¸ªé€”ç»ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">waypoints</span>: [</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">LngLat</span>(<span class="variable language_">this</span>.<span class="property">optts</span>[<span class="number">0</span>].<span class="property">Latitude</span>, <span class="variable language_">this</span>.<span class="property">optts</span>[<span class="number">0</span>].<span class="property">longitude</span>),</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">LngLat</span>(<span class="number">110.379028</span>, <span class="number">39.885042</span>),</span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ä½¿ç”¨çœä»½åç§°ä½œä¸ºè·¯å¾„ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">driving</span>.<span class="title function_">search</span>(points , <span class="keyword">function</span>(<span class="params">status, result</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æœªå‡ºé”™æ—¶ï¼Œresultå³æ˜¯å¯¹åº”çš„è·¯çº¿è§„åˆ’æ–¹æ¡ˆ</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;status=&#x27;</span>, status)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;result=&#x27;</span>, result)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//  ä½¿ç”¨ç»çº¬åº¦ä½œä¸ºè·¯å¾„ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// this.driving.search(startLngLat, endLngLat , opts, function(status, result) &#123;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//         // result å³æ˜¯å¯¹åº”çš„é©¾è½¦å¯¼èˆªä¿¡æ¯ï¼Œç›¸å…³æ•°æ®ç»“æ„æ–‡æ¡£è¯·å‚è€ƒ  https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//         if (status === &#x27;complete&#x27;) &#123;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//             log.success(&#x27;ç»˜åˆ¶é©¾è½¦è·¯çº¿å®Œæˆ&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//         &#125; else &#123;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//             log.error(&#x27;è·å–é©¾è½¦æ•°æ®å¤±è´¥ï¼š&#x27; + result)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//         &#125;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     &#125;);</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è·å–é€‰å–çš„åœ°å€</span></span></span><br><span class="line"><span class="language-javascript">        handleChange () &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> loc = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">diaform</span>.<span class="property">selectedOptions</span>.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                loc += <span class="title class_">CodeToText</span>[<span class="variable language_">this</span>.<span class="property">diaform</span>.<span class="property">selectedOptions</span>[i]];</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">endName</span> = loc</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(loc)<span class="comment">//æ‰“å°åŒºåŸŸç æ‰€å¯¹åº”çš„å±æ€§å€¼å³ä¸­æ–‡åœ°å€</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,  </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"> * &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: normal;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: left;</span></span><br><span class="line"><span class="language-css"> &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#container</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>:<span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#panel</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-height</span>: <span class="number">90%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow-y</span>: auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">280px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#panel</span> <span class="selector-class">.amap-call</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#009cf9</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-left-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-right-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#panel</span> <span class="selector-class">.amap-lib-driving</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom-left-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom-right-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324207.png" alt="image-20230304204856255"></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springbootæ•´åˆshiro</title>
      <link href="/2022/10/30/SpringBoot%20%E6%95%B4%E5%90%88%20shiro/"/>
      <url>/2022/10/30/SpringBoot%20%E6%95%B4%E5%90%88%20shiro/</url>
      
        <content type="html"><![CDATA[<p>shiroå®˜ç½‘ï¼š<a href="https://shiro.apache.org/">Apache Shiro | Simple. Java. Security.</a></p><p>GitHubç½‘å€ï¼š<a href="https://github.com/apache/shiro">GitHub - apache&#x2F;shiro: Apache Shiro</a></p><h1 id="shiroå¿«é€Ÿå¯åŠ¨"><a href="#shiroå¿«é€Ÿå¯åŠ¨" class="headerlink" title="shiroå¿«é€Ÿå¯åŠ¨"></a>shiroå¿«é€Ÿå¯åŠ¨</h1><p>å‚ç…§ç½‘å€ï¼š<a href="https://shiro.apache.org/tutorial.html">https://shiro.apache.org/tutorial.html</a></p><p>GitHubä¸Šshiroå¿«é€Ÿå¯åŠ¨ï¼š <a href="https://github.com/apache/shiro/tree/main/samples/quickstart">https://github.com/apache/shiro/tree/main/samples/quickstart</a></p><p>å»ºçš„æ˜¯ä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®ï¼Œä¸‹å›¾æ˜¯åŒ…ä½ç½®</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318208.png" alt="image-20221030171604719"></p><h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><blockquote><p>ä¸è¦ä½¿ç”¨ä¸Šé¢å‚ç…§ç½‘å€çš„pom.xmlï¼Œå‚ç…§ç½‘å€ä¸­çš„æ˜¯æµ‹è¯•ä½¿ç”¨çš„ï¼Œä¼šæŠ¥é”™</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318760.png" alt="image-20221030171414342"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-core --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å®˜æ–¹çš„æœ‰å‘ï¼Œä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œä¸”éƒ½æ˜¯æµ‹è¯•ç”¨çš„ï¼Œä¸ä¼šè¾“å‡º--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;dependency&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;version&gt;1.7.21&lt;/version&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;/dependency&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;dependency&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;version&gt;1.7.21&lt;/version&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;/dependency&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- configure logging --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-slf4j-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.19.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.19.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="log4j2-xml"><a href="#log4j2-xml" class="headerlink" title="log4j2.xml"></a>log4j2.xml</h2><blockquote><p>ç‹‚ç¥è¯´ä½¿ç”¨çš„æ˜¯log4jï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯å®˜æ–¹githubä¸Šçš„</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  ~ Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">  ~ or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">  ~ distributed with this work for additional information</span></span><br><span class="line"><span class="comment">  ~ regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">  ~ to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">  ~ &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">  ~ with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">  ~ software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">  ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">  ~ KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">  ~ specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">  ~ under the License.</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">name</span>=<span class="string">&quot;ConfigTest&quot;</span> <span class="attr">status</span>=<span class="string">&quot;ERROR&quot;</span> <span class="attr">monitorInterval</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      ~ Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">      ~ or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">      ~ distributed with this work for additional information</span></span><br><span class="line"><span class="comment">      ~ regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">      ~ to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">      ~ &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">      ~ with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">      ~</span></span><br><span class="line"><span class="comment">      ~     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">      ~</span></span><br><span class="line"><span class="comment">      ~ Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">      ~ software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">      ~ &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">      ~ KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">      ~ specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">      ~ under the License.</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;warn&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache&quot;</span> <span class="attr">level</span>=<span class="string">&quot;warn&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">&quot;net.sf.ehcache&quot;</span> <span class="attr">level</span>=<span class="string">&quot;warn&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.shiro.util.ThreadContext&quot;</span> <span class="attr">level</span>=<span class="string">&quot;warn&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="shiro-ini"><a href="#shiro-ini" class="headerlink" title="shiro.ini"></a>shiro.ini</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"><span class="comment"># Tutorial INI configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Usernames/passwords are based on the classic Mel Brooks&#x27; film &quot;Spaceballs&quot; :)</span></span><br><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Users and their (optional) assigned roles</span></span><br><span class="line"><span class="comment"># username = password, role1, role2, ..., roleN</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">root</span> = secret, admin</span><br><span class="line"><span class="attr">guest</span> = guest, guest</span><br><span class="line"><span class="attr">presidentskroob</span> = <span class="number">12345</span>, president</span><br><span class="line"><span class="attr">darkhelmet</span> = ludicrousspeed, darklord, schwartz</span><br><span class="line"><span class="attr">lonestarr</span> = vespa, goodguy, schwartz</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Roles with assigned permissions</span></span><br><span class="line"><span class="comment"># roleName = perm1, perm2, ..., permN</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[roles]</span></span><br><span class="line"><span class="attr">admin</span> = *</span><br><span class="line"><span class="attr">schwartz</span> = lightsaber:*</span><br><span class="line"><span class="attr">goodguy</span> = winnebago:drive:eagle5</span><br></pre></td></tr></table></figure><h2 id="Quickstart-java"><a href="#Quickstart-java" class="headerlink" title="Quickstart.java"></a>Quickstart.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quickstart</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(Quickstart.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;My First Apache Shiro Application&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> <span class="title class_">IniSecurityManagerFactory</span>(<span class="string">&quot;classpath:shiro.ini&quot;</span>);</span><br><span class="line">        <span class="type">SecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> factory.getInstance();</span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        <span class="comment">// è·å–å½“å‰çš„ç”¨æˆ·å¯¹è±¡ subject</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        <span class="comment">// é€šè¿‡å½“å‰ç”¨æˆ·æ‹¿åˆ°session ï¼Œ å¯ä»¥å­˜å€¼å–å€¼</span></span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">&quot;aValue&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;subject =&gt; session [&quot;</span> + value + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// let&#x27;s login the current user so we can check against roles and permissions:</span></span><br><span class="line">        <span class="comment">// æµ‹è¯•å½“å‰çš„ç”¨æˆ·æ˜¯å¦è¢«è®¤è¯</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) &#123;</span><br><span class="line">            <span class="comment">// token ä»¤ç‰Œ  ï¼Œ éšæœºè·å–ï¼Œæ²¡æœ‰è®¾ç½®</span></span><br><span class="line">            <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(<span class="string">&quot;lonestarr&quot;</span>, <span class="string">&quot;vespa&quot;</span>);</span><br><span class="line">            token.setRememberMe(<span class="literal">true</span>);  <span class="comment">// è®¾ç½®è®°ä½æˆ‘</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentUser.login(token);  <span class="comment">// æ‰§è¡Œäº†ç™»å½•æ“ä½œ</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;   <span class="comment">// ç”¨æˆ·åä¸å­˜åœ¨</span></span><br><span class="line">                log.info(<span class="string">&quot;There is no user with username of &quot;</span> + token.getPrincipal());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123; <span class="comment">// å¯†ç ä¸å¯¹</span></span><br><span class="line">                log.info(<span class="string">&quot;Password for account &quot;</span> + token.getPrincipal() + <span class="string">&quot; was incorrect!&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (LockedAccountException lae) &#123;  <span class="comment">// ç”¨æˆ·è¢«é”å®šï¼ˆç™»å½•å¤±è´¥æ¬¡æ•°è¿‡å¤šï¼‰</span></span><br><span class="line">                log.info(<span class="string">&quot;The account for username &quot;</span> + token.getPrincipal() + <span class="string">&quot; is locked.  &quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Please contact your administrator to unlock it.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) &#123;  <span class="comment">// è®¤è¯å¼‚å¸¸</span></span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">&quot;User [&quot;</span> + currentUser.getPrincipal() + <span class="string">&quot;] logged in successfully.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:  æµ‹è¯•è§’è‰²</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;May the Schwartz be with you!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Hello, mere mortal.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç²—ç²’åº¦</span></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You may use a lightsaber ring.  Use it wisely.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»†ç²’åº¦</span></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;winnebago:drive:eagle5&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Here are the keys - have fun!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ³¨é”€</span></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»“æŸç³»ç»Ÿ</span></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318541.png" alt="image-20221030171843912"></p><h1 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰çš„ç”¨æˆ·å¯¹è±¡ subject</span></span><br><span class="line"><span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å½“å‰ç”¨æˆ·æ‹¿åˆ°session ï¼Œ å¯ä»¥å­˜å€¼å–å€¼</span></span><br><span class="line"><span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦è¢«è®¤è¯</span></span><br><span class="line">currentUser.isAuthenticated();</span><br><span class="line">    </span><br><span class="line"><span class="comment">// è·å–å½“å‰ç”¨æˆ·çš„è®¤è¯    </span></span><br><span class="line">currentUser.getPrincipal();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²</span></span><br><span class="line">currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å½“å‰ç”¨æˆ·çš„æƒé™</span></span><br><span class="line">currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨é”€</span></span><br><span class="line">currentUser.logout();</span><br></pre></td></tr></table></figure><h1 id="springbooté›†æˆshiro"><a href="#springbooté›†æˆshiro" class="headerlink" title="springbooté›†æˆshiro"></a>springbooté›†æˆshiro</h1><h2 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h2><h3 id="å¯¼å…¥shiroå’Œthymeleafä¾èµ–"><a href="#å¯¼å…¥shiroå’Œthymeleafä¾èµ–" class="headerlink" title="å¯¼å…¥shiroå’Œthymeleafä¾èµ–"></a>å¯¼å…¥shiroå’Œthymeleafä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        Subject ç”¨æˆ·</span></span><br><span class="line"><span class="comment">        SecurityManager  ç®¡ç†æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">        Realm  è¿æ¥æ•°æ®</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¯¼å…¥shiro--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™shiroçš„ä¸¤ä¸ªæ ¸å¿ƒé…ç½®"><a href="#ç¼–å†™shiroçš„ä¸¤ä¸ªæ ¸å¿ƒé…ç½®" class="headerlink" title="ç¼–å†™shiroçš„ä¸¤ä¸ªæ ¸å¿ƒé…ç½®"></a>ç¼–å†™shiroçš„ä¸¤ä¸ªæ ¸å¿ƒé…ç½®</h3><h4 id="ShiroConfig"><a href="#ShiroConfig" class="headerlink" title="ShiroConfig"></a>ShiroConfig</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ShiroFilterFactoryBean  shiroè¿‡æ»¤çš„å¯¹è±¡:3</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// DefaultWebSecurityManager:2</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;securityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">getDefaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span>&#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        <span class="comment">// å…³è” UserRealm,é€šè¿‡springæ¥è¿›è¡Œå…³è”ï¼Œå¦‚ä¸Šé¢çš„å‚æ•° @Qualifier(&quot;userRealm&quot;) ==ã€‹ ä¸‹é¢çš„æ–¹æ³•å</span></span><br><span class="line">        securityManager.setRealm(userRealm);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»º realm å¯¹è±¡ï¼Œéœ€è¦è‡ªå®šä¹‰ç±»:1</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="UserRealm"><a href="#UserRealm" class="headerlink" title="UserRealm"></a>UserRealm</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰çš„realm        extends AuthorizingRealm</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line">    <span class="comment">// æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒdoGetAuthorizationInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯doGetAuthorizationInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="shiroå®ç°ç™»å½•æ‹¦æˆª"><a href="#shiroå®ç°ç™»å½•æ‹¦æˆª" class="headerlink" title="shiroå®ç°ç™»å½•æ‹¦æˆª"></a>shiroå®ç°ç™»å½•æ‹¦æˆª</h2><h3 id="ä¿®æ”¹ShiroConfigçš„ä»£ç "><a href="#ä¿®æ”¹ShiroConfigçš„ä»£ç " class="headerlink" title="ä¿®æ”¹ShiroConfigçš„ä»£ç "></a>ä¿®æ”¹<code>ShiroConfig</code>çš„ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ShiroFilterFactoryBean  shiroè¿‡æ»¤çš„å¯¹è±¡:3</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">    <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">            anno: æ— éœ€è®¤è¯å°±èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            authcï¼šå¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            userï¼š å¿…é¡»æ‹¥æœ‰â€è®°ä½æˆ‘åŠŸèƒ½â€œ  æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="comment">            permsï¼š æ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            roleï¼š æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç™»å½•æ‹¦æˆª</span></span><br><span class="line">    Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//filterMap.put(&quot;/user/add&quot;,&quot;authc&quot;);</span></span><br><span class="line">    <span class="comment">//filterMap.put(&quot;/user/update&quot;,&quot;authc&quot;);</span></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">    bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®ç™»å½•çš„è¯·æ±‚</span></span><br><span class="line">    bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ç™»å½•ç•Œé¢åŠå…¶controller"><a href="#é…ç½®ç™»å½•ç•Œé¢åŠå…¶controller" class="headerlink" title="é…ç½®ç™»å½•ç•Œé¢åŠå…¶controller"></a>é…ç½®ç™»å½•ç•Œé¢åŠå…¶controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·è®¤è¯"><a href="#ç”¨æˆ·è®¤è¯" class="headerlink" title="ç”¨æˆ·è®¤è¯"></a>ç”¨æˆ·è®¤è¯</h2><p>åœ¨<code>controller</code>ä¸­è¿›è¡ŒéªŒè¯ï¼Œè·å–æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(String username, String password, Model model)</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è£…ç”¨æˆ·çš„ç™»é™†æ•°æ®</span></span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(username, password);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        subject.login(token); <span class="comment">// æ‰§è¡Œç™»å½•çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸å°±ok</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (UnknownAccountException e)&#123; <span class="comment">// ç”¨æˆ·åä¸å­˜åœ¨</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (IncorrectCredentialsException e)&#123; <span class="comment">//å¯†ç ä¸å­˜åœ¨</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>UserRealm</code>ä¸­è®¤è¯çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¤è¯</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken Token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯doGetAuthorizationInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·åï¼Œå¯†ç  æ•°æ®åº“ä¸­å–å¾—</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) Token;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!userToken.getUsername().equals(name))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// æŠ›å‡ºå¼‚å¸¸ UnknownAccountException</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯†ç è®¤è¯ï¼Œshiroè‡ªå·±åš</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(<span class="string">&quot;&quot;</span>,password,<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>login.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/login&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ•´åˆMybatis"><a href="#æ•´åˆMybatis" class="headerlink" title="æ•´åˆMybatis"></a>æ•´åˆMybatis</h2><h3 id="å¯¼å…¥mysqlï¼Œlog4jï¼Œmybatisä¾èµ–"><a href="#å¯¼å…¥mysqlï¼Œlog4jï¼Œmybatisä¾èµ–" class="headerlink" title="å¯¼å…¥mysqlï¼Œlog4jï¼Œmybatisä¾èµ–"></a>å¯¼å…¥<code>mysql</code>ï¼Œ<code>log4j</code>ï¼Œ<code>mybatis</code>ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®properties"><a href="#é…ç½®properties" class="headerlink" title="é…ç½®properties"></a>é…ç½®<code>properties</code></h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹æ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="attr">spring.mvc.format.date</span>=<span class="string">yyyy-MM-dd</span></span><br><span class="line"><span class="comment"># é…ç½®mybatis</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“é©±åŠ¨ï¼š</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æ•°æ®åº“è¿æ¥åœ°å€</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=false&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“ç”¨æˆ·å&amp;å¯†ç ï¼š</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ•´åˆmybatis</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.li.pojo</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/mapper/*.xml</span></span><br></pre></td></tr></table></figure><p>å‰©ä¸‹çš„å°±æ˜¯pojo, mapperï¼Œserviceçš„ç¼–å†™äº†ï¼Œå°±ä¸è¯¦ç»†æå†™äº†ã€‚</p><h2 id="shiroä½¿ç”¨md5-åŠ ç›åŠ å¯†"><a href="#shiroä½¿ç”¨md5-åŠ ç›åŠ å¯†" class="headerlink" title="shiroä½¿ç”¨md5 åŠ ç›åŠ å¯†"></a>shiroä½¿ç”¨md5 åŠ ç›åŠ å¯†</h2><blockquote><p>ä¸Šé¢å·²ç»é…ç½®å¥½<code>mybatis</code>äº†ï¼Œä½†æ˜¯ç”¨æˆ·è®¤è¯ä½¿ç”¨çš„æ˜¯è‡ªå·±æ¨¡æ‹Ÿçš„å¯†ç ï¼Œæˆ‘ä»¬è¿™é‡Œä¿®æ”¹æˆæ•°æ®åº“ä¸­çš„å¯†ç ï¼ŒåŒæ—¶å®ç°<code>shiro</code>çš„<code>md5</code>åŠ ç›åŠ å¯†</p></blockquote><p>å¦‚æœè¦ä½¿ç”¨md5åŠ ç›åŠ å¯†ï¼Œéœ€è¦åœ¨<code>ShiroConfig</code>ä¸­æ·»åŠ å¯†ç åŠ å¯†çš„æ–¹æ³•</p><h3 id="åœ¨ShiroConfigä¸­æ·»åŠ åŠ å¯†çš„æ–¹æ³•"><a href="#åœ¨ShiroConfigä¸­æ·»åŠ åŠ å¯†çš„æ–¹æ³•" class="headerlink" title="åœ¨ShiroConfigä¸­æ·»åŠ åŠ å¯†çš„æ–¹æ³•"></a>åœ¨<code>ShiroConfig</code>ä¸­æ·»åŠ åŠ å¯†çš„æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ShiroFilterFactoryBean  shiroè¿‡æ»¤çš„å¯¹è±¡:3</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            anno: æ— éœ€è®¤è¯å°±èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            authcï¼šå¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            userï¼š å¿…é¡»æ‹¥æœ‰â€è®°ä½æˆ‘åŠŸèƒ½â€œ  æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="comment">            permsï¼š æ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            roleï¼š æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç™»å½•æ‹¦æˆª</span></span><br><span class="line">        Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//filterMap.put(&quot;/user/add&quot;,&quot;authc&quot;);</span></span><br><span class="line">        <span class="comment">//filterMap.put(&quot;/user/update&quot;,&quot;authc&quot;);</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">        bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®ç™»å½•çš„è¯·æ±‚</span></span><br><span class="line">        bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// DefaultWebSecurityManager:2</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;securityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">getDefaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span>&#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        <span class="comment">// å…³è” UserRealm,é€šè¿‡springæ¥è¿›è¡Œå…³è”ï¼Œå¦‚ä¸Šé¢çš„å‚æ•° @Qualifier(&quot;userRealm&quot;) ==ã€‹ ä¸‹é¢çš„æ–¹æ³•å</span></span><br><span class="line">        securityManager.setRealm(userRealm);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»º realm å¯¹è±¡ï¼Œéœ€è¦è‡ªå®šä¹‰ç±»:1</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">(<span class="meta">@Qualifier(&quot;matcher&quot;)</span> HashedCredentialsMatcher matcher)</span>&#123;</span><br><span class="line">        <span class="type">UserRealm</span> <span class="variable">userRealm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">        userRealm.setCredentialsMatcher(matcher);</span><br><span class="line">        <span class="keyword">return</span> userRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å¯†ç åŠ å¯†</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;matcher&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> HashedCredentialsMatcher <span class="title function_">getHashedCredentialsMatcher</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">HashedCredentialsMatcher</span> <span class="variable">matcher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashedCredentialsMatcher</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®åŠ å¯†è§„åˆ™</span></span><br><span class="line">        matcher.setHashAlgorithmName(<span class="string">&quot;md5&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®åŠ å¯†æ¬¡æ•°</span></span><br><span class="line">        matcher.setHashIterations(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> matcher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-UserRealmçš„ä»£ç "><a href="#ä¿®æ”¹-UserRealmçš„ä»£ç " class="headerlink" title="ä¿®æ”¹ UserRealmçš„ä»£ç "></a>ä¿®æ”¹ <code>UserRealm</code>çš„ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.li.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰çš„realm        extends AuthorizingRealm</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒdoGetAuthorizationInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken Token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯doGetAuthorizationInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) Token;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿æ¥çœŸå®çš„æ•°æ®åº“</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(userToken.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123; <span class="comment">// æ²¡æœ‰è¿™ä¸ªç”¨æˆ·  UnknownAccountException</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®¾ç½® å¯†ç çš„åŠ ç›å€¼</span></span><br><span class="line">        <span class="type">ByteSource</span> <span class="variable">salt</span> <span class="operator">=</span> ByteSource.Util.bytes(user.getName());</span><br><span class="line">        <span class="comment">// å¯ä»¥åŠ å¯†ï¼Œ MD5 MD5ç›å€¼åŠ å¯†</span></span><br><span class="line">        <span class="comment">// å¯†ç è®¤è¯ï¼Œshiroè‡ªå·±åš</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(</span><br><span class="line">                user, <span class="comment">// å½“å‰ç”¨æˆ· ï¼Œå’Œä¸Šé¢çš„doGetAuthenticationInfoæ–¹æ³•å¯¹åº”,ä¹Ÿå¯ä»¥ä¼  username</span></span><br><span class="line">                user.getPwd(),  <span class="comment">// ä»æ•°æ®ä¸­æŸ¥å¤„çš„å®‰å…¨å¯†ç </span></span><br><span class="line">                salt,    <span class="comment">// ç”¨æˆ·çš„å¯†ç æ˜¯åŠ ç›md5 çš„</span></span><br><span class="line">                getName() <span class="comment">// å½“å‰ Realm çš„åå­—</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å‡ºç°é—®é¢˜"><a href="#å‡ºç°é—®é¢˜" class="headerlink" title="å‡ºç°é—®é¢˜"></a>å‡ºç°é—®é¢˜</h3><blockquote><p>è¿è¡Œä¹‹åï¼ŒShiroå¼‚å¸¸java.lang.IllegalArgumentException: Odd number of characters</p></blockquote><p>åŸå› ï¼šæˆ‘ä»¬åœ¨ä½¿ç”¨MD5åŠ ç›åŠ å¯†çš„æ—¶å€™ï¼ŒéªŒè¯ç™»å½•å¯†ç æ—¶ï¼Œæ•°æ®åº“ä¸­çš„å¯†ç æ²¡æœ‰ç»è¿‡åŠ å¯†ï¼Œè¿˜æ˜¯ä¹‹å‰è®¾ç½®çš„å¯†ç ï¼Œæ‰€ä»¥ä¼šçˆ†å‡ºä¸€åœºã€‚</p><p>è§£å†³åŠæ³•ï¼š<strong>å°†æ•°æ®åº“ä¸­çš„å¯†ç ä¹Ÿè¿›è¡ŒåŠ å¯†ï¼Œç„¶åå°±å¯ä»¥éªŒè¯æˆåŠŸ</strong></p><hr><p>ä¸‹é¢è¿™ä¸ªæ–¹æ³•å¯ä»¥æŸ¥çœ‹åŠ å¯†åçš„å¯†ç ï¼Œä»¥ä¾¿ä¿®æ”¹æ•°æ®åº“ä¸­çš„å¯†ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(<span class="string">&quot;å¹³å®‰&quot;</span>);</span><br><span class="line"> System.out.println(userService.queryUserByName(<span class="string">&quot;å¹³å®‰&quot;</span>));</span><br><span class="line">    System.out.println(md5(user.getPwd(), user.getName()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">md5</span><span class="params">(String password, String salt)</span>&#123;</span><br><span class="line">    <span class="comment">//åŠ å¯†æ–¹å¼</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">hashAlgorithmName</span> <span class="operator">=</span> <span class="string">&quot;MD5&quot;</span>;</span><br><span class="line">    <span class="comment">//ç›ï¼šä¸ºäº†å³ä½¿ç›¸åŒçš„å¯†ç ä¸åŒçš„ç›åŠ å¯†åçš„ç»“æœä¹Ÿä¸åŒ</span></span><br><span class="line">    <span class="type">ByteSource</span> <span class="variable">byteSalt</span> <span class="operator">=</span> ByteSource.Util.bytes(salt);</span><br><span class="line">    <span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">source</span> <span class="operator">=</span> password;</span><br><span class="line">    <span class="comment">//åŠ å¯†æ¬¡æ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">hashIterations</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="type">SimpleHash</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleHash</span>(hashAlgorithmName, source, byteSalt, hashIterations);</span><br><span class="line">    <span class="keyword">return</span> result.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåç»“æœ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318884.png" alt="image-20221030204719821"></p><h2 id="ç”¨æˆ·æˆæƒ"><a href="#ç”¨æˆ·æˆæƒ" class="headerlink" title="ç”¨æˆ·æˆæƒ"></a>ç”¨æˆ·æˆæƒ</h2><h3 id="åœ¨ShiroConfigä¸­è¿›è¡Œæƒé™çš„é™å®š"><a href="#åœ¨ShiroConfigä¸­è¿›è¡Œæƒé™çš„é™å®š" class="headerlink" title="åœ¨ShiroConfigä¸­è¿›è¡Œæƒé™çš„é™å®š"></a>åœ¨<code>ShiroConfig</code>ä¸­è¿›è¡Œæƒé™çš„é™å®š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">    <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">            anno: æ— éœ€è®¤è¯å°±èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            authcï¼šå¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            userï¼š å¿…é¡»æ‹¥æœ‰â€è®°ä½æˆ‘åŠŸèƒ½â€œ  æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="comment">            permsï¼š æ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            roleï¼š æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‹¦æˆª</span></span><br><span class="line">    Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆæƒ,æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æˆæƒä¼šè·³è½¬åˆ°æœªæˆæƒç•Œé¢</span></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;perms[user:add]&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//filterMap.put(&quot;/user/add&quot;,&quot;authc&quot;);</span></span><br><span class="line">    <span class="comment">//filterMap.put(&quot;/user/update&quot;,&quot;authc&quot;);</span></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">    bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®ç™»å½•çš„è¯·æ±‚</span></span><br><span class="line">    bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line">    <span class="comment">// æœªæˆæƒç•Œé¢</span></span><br><span class="line">    bean.setUnauthorizedUrl(<span class="string">&quot;/noauth&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹UserRealmä¸­çš„ä»£ç ï¼Œè¿›è¡Œæˆæƒ"><a href="#ä¿®æ”¹UserRealmä¸­çš„ä»£ç ï¼Œè¿›è¡Œæˆæƒ" class="headerlink" title="ä¿®æ”¹UserRealmä¸­çš„ä»£ç ï¼Œè¿›è¡Œæˆæƒ"></a>ä¿®æ”¹<code>UserRealm</code>ä¸­çš„ä»£ç ï¼Œè¿›è¡Œæˆæƒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆæƒ</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒdoGetAuthorizationInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‹¿åˆ°å½“å‰ç™»é™†çš„è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">    <span class="comment">// å–å‡ºå½“å‰ç™»å½•çš„å¯¹è±¡ï¼Œå’Œä¸‹é¢SimpleAuthenticationInfoä¼ çš„ç¬¬ä¸€ä¸ªå…³è”</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> (User) subject.getPrincipal(); <span class="comment">// æ‹¿åˆ°userå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™ï¼Œä»æ•°æ®åº“ä¸­è¯»å‡º</span></span><br><span class="line">    info.addStringPermission(currentUser.getPerms());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¤è¯</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken Token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯doGetAuthorizationInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) Token;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿æ¥çœŸå®çš„æ•°æ®åº“</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(userToken.getUsername());</span><br><span class="line">    <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123; <span class="comment">// æ²¡æœ‰è¿™ä¸ªç”¨æˆ·  UnknownAccountException</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç½® å¯†ç çš„åŠ ç›å€¼</span></span><br><span class="line">    <span class="type">ByteSource</span> <span class="variable">salt</span> <span class="operator">=</span> ByteSource.Util.bytes(user.getName());</span><br><span class="line">    <span class="comment">// å¯ä»¥åŠ å¯†ï¼Œ MD5 MD5ç›å€¼åŠ å¯†</span></span><br><span class="line">    <span class="comment">// å¯†ç è®¤è¯ï¼Œshiroè‡ªå·±åš</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(</span><br><span class="line">        user, <span class="comment">// å½“å‰ç”¨æˆ· ï¼Œå’Œä¸Šé¢çš„doGetAuthenticationInfoæ–¹æ³•å¯¹åº”ï¼ŒåŒæ—¶å‘æˆæƒéƒ¨åˆ†ä¼ é€’å½“å‰ç”¨æˆ·çš„ä¿¡æ¯</span></span><br><span class="line">        user.getPwd(),  <span class="comment">// ä»æ•°æ®ä¸­æŸ¥å¤„çš„å®‰å…¨å¯†ç </span></span><br><span class="line">        salt,    <span class="comment">// ç”¨æˆ·çš„å¯†ç æ˜¯åŠ ç›md5 çš„</span></span><br><span class="line">        getName() <span class="comment">// å½“å‰ Realm çš„åå­—</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="controllerè®¾ç½®æœªæˆæƒç•Œé¢"><a href="#controllerè®¾ç½®æœªæˆæƒç•Œé¢" class="headerlink" title="controllerè®¾ç½®æœªæˆæƒç•Œé¢"></a>controllerè®¾ç½®æœªæˆæƒç•Œé¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/noauth&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">Unauthorized</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;401&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•´åˆThymeleaf"><a href="#æ•´åˆThymeleaf" class="headerlink" title="æ•´åˆThymeleaf"></a>æ•´åˆ<code>Thymeleaf</code></h2><blockquote><p>å°†ç›®å‰å®Œæˆçš„é¡¹ç›®æ•´åˆthymeleaf</p></blockquote><h3 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ•´åˆshiro+thymeleaf--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨ShiroConfigä¸­è®¾ç½®thymeleaf"><a href="#åœ¨ShiroConfigä¸­è®¾ç½®thymeleaf" class="headerlink" title="åœ¨ShiroConfigä¸­è®¾ç½®thymeleaf"></a>åœ¨<code>ShiroConfig</code>ä¸­è®¾ç½®<code>thymeleaf</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•´åˆ ShiroDialectï¼šç”¨æ¥æ•´åˆshiro+thymeleaf</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroDialect <span class="title function_">getShiroDialect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ShiroDialect</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨UserRealmä¸­è®¾ç½®session"><a href="#åœ¨UserRealmä¸­è®¾ç½®session" class="headerlink" title="åœ¨UserRealmä¸­è®¾ç½®session"></a>åœ¨<code>UserRealm</code>ä¸­è®¾ç½®<code>session</code></h3><p>åœ¨sessionä¸­è®¾ç½®å­—ç¬¦ï¼Œè¡¨ç¤ºç™»å½•æˆåŠŸ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨sessionä¸­è®¾ç½®å­—ç¬¦ï¼Œè¡¨ç¤ºç™»å½•æˆåŠŸ</span></span><br><span class="line"><span class="type">Subject</span> <span class="variable">subject1</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"><span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> subject1.getSession();</span><br><span class="line">session.setAttribute(<span class="string">&quot;loginUser&quot;</span>,user);</span><br></pre></td></tr></table></figure><h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a><code>index.html</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ä»sessionä¸­è·å–å€¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;session.loginUser == null&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:add&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/add&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:update&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/update&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="springbooté›†æˆshiroæ•´åˆå¤šä¸ªRealm"><a href="#springbooté›†æˆshiroæ•´åˆå¤šä¸ªRealm" class="headerlink" title="springbooté›†æˆshiroæ•´åˆå¤šä¸ªRealm"></a>springbooté›†æˆshiroæ•´åˆå¤šä¸ªRealm</h1><blockquote><p>ç”±äºåœ¨å®é™…é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸å¯èƒ½åªæœ‰ä¸€ä¸ªå®ä½“ç±»ï¼Œä¸€å®šä¼šæœ‰å¤šä¸ªæƒé™ï¼Œæ‰€ä»¥æ•´åˆå¤šä¸ªRealmæ˜¯ä¸€ä¸ªååˆ†é‡è¦çš„äº‹æƒ…</p></blockquote><p>pom.xmlæˆ‘ä»¬ä¹‹å‰å·²ç»é…ç½®å¥½äº†ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°äº†ã€‚</p><blockquote><p>é…ç½®å·¥å…·ç±»ï¼Œç¼–å†™ç™»å½•ç±»å‹çš„æšä¸¾</p><p>é‡å†™<code>UsernamePasswordToken</code>ç±»</p><p>è‡ªå®šä¹‰è®¤è¯å™¨ï¼Œç»§æ‰¿ModularRealmAuthenticator</p><p>ä¿®æ”¹å…·ä½“çš„æ¯ä¸ªUserRealmç±»</p><p>ä¿®æ”¹ShiroConfig</p><p>ä¿®æ”¹controller</p></blockquote><h2 id="é…ç½®å·¥å…·ç±»ï¼Œç¼–å†™ç™»å½•ç±»å‹çš„æšä¸¾"><a href="#é…ç½®å·¥å…·ç±»ï¼Œç¼–å†™ç™»å½•ç±»å‹çš„æšä¸¾" class="headerlink" title="é…ç½®å·¥å…·ç±»ï¼Œç¼–å†™ç™»å½•ç±»å‹çš„æšä¸¾"></a>é…ç½®å·¥å…·ç±»ï¼Œç¼–å†™ç™»å½•ç±»å‹çš„æšä¸¾</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config.shiroUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•ç±»å‹çš„æšä¸¾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">LoginType</span> &#123;</span><br><span class="line">    USER(<span class="string">&quot;User&quot;</span>), ADMIN(<span class="string">&quot;Admin&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type;    <span class="comment">//å®šä¹‰çš„æ˜¯ç™»é™†çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LoginType</span><span class="params">(String type)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.type=type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.type.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡å†™UsernamePasswordTokenç±»"><a href="#é‡å†™UsernamePasswordTokenç±»" class="headerlink" title="é‡å†™UsernamePasswordTokenç±»"></a>é‡å†™<code>UsernamePasswordToken</code>ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config.shiroUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹UsernamePasswordTokenè¿›è¡Œé‡å†™</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomToken</span> <span class="keyword">extends</span> <span class="title class_">UsernamePasswordToken</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ç™»é™†çš„ç±»å‹æ˜¯ä¸ºäº†åœ¨åé¢çš„æ ¡éªŒä¸­ å»é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªrealm</span></span><br><span class="line">    <span class="keyword">private</span> String loginType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomToken</span><span class="params">(String userName,String password,String loginType)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(userName,password);</span><br><span class="line">        <span class="built_in">this</span>.loginType=loginType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLoginType</span><span class="params">(String loginType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loginType = loginType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLoginType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> loginType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰è®¤è¯å™¨"><a href="#è‡ªå®šä¹‰è®¤è¯å™¨" class="headerlink" title="è‡ªå®šä¹‰è®¤è¯å™¨"></a>è‡ªå®šä¹‰è®¤è¯å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config.shiroUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.pam.ModularRealmAuthenticator;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.Realm;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿shiroé…ç½®å¤šä¸ªRealmçš„ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomModularRealmAuthenticator</span> <span class="keyword">extends</span> <span class="title class_">ModularRealmAuthenticator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(CustomModularRealmAuthenticator.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æƒ³å¹²ä¸€ä»¶äº‹</span></span><br><span class="line"><span class="comment">     *    å°±æ˜¯é€šè¿‡ä¼ å…¥æ•°æ®çš„ç±»å‹  æ¥é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªRealm</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> authenticationToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doAuthenticate</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­getRealmæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        assertRealmsConfigured();</span><br><span class="line">        <span class="comment">//è·å–å‰ç«¯ä¼ é€’è¿‡æ¥çš„token</span></span><br><span class="line">        CustomToken customToken=(CustomToken)authenticationToken;</span><br><span class="line">        <span class="comment">//ç°åœ¨å°±å¯ä»¥è·å–è¿™ä¸ªç™»é™†çš„ç±»å‹äº†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">loginType</span> <span class="operator">=</span> customToken.getLoginType();  <span class="comment">//  ç™»é™†ç±»å‹   1ï¼šUser   Admin</span></span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰çš„realms()</span></span><br><span class="line">        Collection&lt;Realm&gt; realms = getRealms();</span><br><span class="line">        <span class="comment">//ç™»é™†ç±»å‹å¯¹åº”çš„æ‰€æœ‰realmå…¨éƒ¨è·å–åˆ°</span></span><br><span class="line">        Collection&lt;Realm&gt; typeRealms=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Realm realm:realms)&#123;</span><br><span class="line">            <span class="comment">//realmç±»å‹å’Œç°åœ¨ç™»é™†çš„ç±»å‹åšä¸€ä¸ªå¯¹æ¯”</span></span><br><span class="line">            <span class="keyword">if</span>(realm.getName().contains(loginType.toString()))&#123;   <span class="comment">//å°±èƒ½åˆ†å¼€è¿™ä¸¤ä¸ªrealm</span></span><br><span class="line">                typeRealms.add(realm);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(typeRealms.size()==<span class="number">1</span>)&#123;</span><br><span class="line">            logger.info(<span class="string">&quot;doSingleRealmAuthentication&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> doSingleRealmAuthentication(typeRealms.iterator().next(),customToken);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">&quot;doMultiRealmAuthentication&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> doMultiRealmAuthentication(typeRealms,customToken);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹UserRealm"><a href="#ä¿®æ”¹UserRealm" class="headerlink" title="ä¿®æ”¹UserRealm"></a>ä¿®æ”¹<code>UserRealm</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.li.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰çš„realm        extends AuthorizingRealm</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­è·å–çš„subjectæ˜¯ä¸æ˜¯è‡ªå·±å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(principalCollection.getPrimaryPrincipal() <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">            <span class="comment">// æ‹¿åˆ°å½“å‰ç™»é™†çš„è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">            <span class="comment">// å–å‡ºå½“å‰ç™»å½•çš„å¯¹è±¡ï¼Œå’Œä¸‹é¢SimpleAuthenticationInfoä¼ çš„ç¬¬ä¸€ä¸ªå…³è”</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> (User) subject.getPrincipal(); <span class="comment">// æ‹¿åˆ°userå¯¹è±¡</span></span><br><span class="line">            <span class="comment">// è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™ï¼Œä»æ•°æ®åº“ä¸­è¯»å‡º</span></span><br><span class="line">            info.addStringPermission(currentUser.getPerms());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> info;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken Token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) Token;</span><br><span class="line">        <span class="comment">// è¿æ¥çœŸå®çš„æ•°æ®åº“</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(userToken.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123; <span class="comment">// æ²¡æœ‰è¿™ä¸ªç”¨æˆ·  UnknownAccountException</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨sessionä¸­è®¾ç½®å­—ç¬¦ï¼Œè¡¨ç¤ºç™»å½•æˆåŠŸ</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject1</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> subject1.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;loginUser&quot;</span>,user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½® å¯†ç çš„åŠ ç›å€¼</span></span><br><span class="line">        <span class="type">ByteSource</span> <span class="variable">salt</span> <span class="operator">=</span> ByteSource.Util.bytes(user.getName());</span><br><span class="line">        <span class="comment">// å¯ä»¥åŠ å¯†ï¼Œ MD5 MD5ç›å€¼åŠ å¯†</span></span><br><span class="line">        <span class="comment">// å¯†ç è®¤è¯ï¼Œshiroè‡ªå·±åš</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(</span><br><span class="line">                user, <span class="comment">// å½“å‰ç”¨æˆ· ï¼Œå’Œä¸Šé¢çš„doGetAuthenticationInfoæ–¹æ³•å¯¹åº”</span></span><br><span class="line">                user.getPwd(),  <span class="comment">// ä»æ•°æ®ä¸­æŸ¥å¤„çš„å®‰å…¨å¯†ç </span></span><br><span class="line">                salt,    <span class="comment">// ç”¨æˆ·çš„å¯†ç æ˜¯åŠ ç›md5 çš„</span></span><br><span class="line">                getName() <span class="comment">// å½“å‰ Realm çš„åå­—</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹AdminRealm"><a href="#ä¿®æ”¹AdminRealm" class="headerlink" title="ä¿®æ”¹AdminRealm"></a>ä¿®æ”¹<code>AdminRealm</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.config.shiroUtils.CustomToken;</span><br><span class="line"><span class="keyword">import</span> com.li.pojo.Admin;</span><br><span class="line"><span class="keyword">import</span> com.li.service.AdminService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(principalCollection.getPrimaryPrincipal() <span class="keyword">instanceof</span> Admin)&#123;</span><br><span class="line">            <span class="comment">// æ‹¿åˆ°å½“å‰ç™»é™†çš„è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">            <span class="comment">// å–å‡ºå½“å‰ç™»å½•çš„å¯¹è±¡ï¼Œå’Œä¸‹é¢SimpleAuthenticationInfoä¼ çš„ç¬¬ä¸€ä¸ªå…³è”</span></span><br><span class="line">            <span class="type">Admin</span> <span class="variable">currentAdmin</span> <span class="operator">=</span> (Admin) subject.getPrincipal();</span><br><span class="line">            <span class="comment">// è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™ï¼Œä»æ•°æ®åº“ä¸­è¯»å‡º</span></span><br><span class="line">            info.addStringPermission(currentAdmin.getPerms());</span><br><span class="line">            <span class="keyword">return</span> info;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">return</span>  <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken Token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="type">CustomToken</span> <span class="variable">adminToken</span> <span class="operator">=</span> (CustomToken) Token;</span><br><span class="line">        <span class="comment">// è¿æ¥çœŸå®çš„æ•°æ®åº“</span></span><br><span class="line">        <span class="type">Admin</span> <span class="variable">admin</span> <span class="operator">=</span> adminService.queryAdminByName(adminToken.getUsername());</span><br><span class="line">        <span class="keyword">if</span>(admin == <span class="literal">null</span>)&#123; <span class="comment">// æ²¡æœ‰è¿™ä¸ªç”¨æˆ·  UnknownAccountException</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨sessionä¸­è®¾ç½®å­—ç¬¦ï¼Œè¡¨ç¤ºç™»å½•æˆåŠŸï¼Œç›®å‰è¿˜æ²¡æœ‰å­¦ä¼šä½¿ç”¨tokenï¼Œæ‰€ä»¥å…ˆä½¿ç”¨session</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject1</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> subject1.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;loginUser&quot;</span>,admin);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½® å¯†ç çš„åŠ ç›å€¼</span></span><br><span class="line">        <span class="type">ByteSource</span> <span class="variable">salt</span> <span class="operator">=</span> ByteSource.Util.bytes(admin.getName());</span><br><span class="line">        <span class="comment">// å¯ä»¥åŠ å¯†ï¼Œ MD5 MD5ç›å€¼åŠ å¯†</span></span><br><span class="line">        <span class="comment">// å¯†ç è®¤è¯ï¼Œshiroè‡ªå·±åš</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(</span><br><span class="line">                admin, <span class="comment">// å½“å‰ç”¨æˆ· ï¼Œå’Œä¸Šé¢çš„doGetAuthenticationInfoæ–¹æ³•å¯¹åº”</span></span><br><span class="line">                admin.getPassword(),  <span class="comment">// ä»æ•°æ®ä¸­æŸ¥å¤„çš„å®‰å…¨å¯†ç </span></span><br><span class="line">                salt,    <span class="comment">// ç”¨æˆ·çš„å¯†ç æ˜¯åŠ ç›md5 çš„</span></span><br><span class="line">                getName() <span class="comment">// å½“å‰ Realm çš„åå­—</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ShiroConfig"><a href="#ä¿®æ”¹ShiroConfig" class="headerlink" title="ä¿®æ”¹ShiroConfig"></a>ä¿®æ”¹<code>ShiroConfig</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> at.pollux.thymeleaf.shiro.dialect.ShiroDialect;</span><br><span class="line"><span class="keyword">import</span> com.li.config.shiroUtils.CustomModularRealmAuthenticator;</span><br><span class="line"><span class="keyword">import</span> com.li.config.shiroUtils.RoleOrFilter;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.credential.HashedCredentialsMatcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.Realm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ShiroFilterFactoryBean  shiroè¿‡æ»¤çš„å¯¹è±¡:3</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é…ç½® è‡ªå®šä¹‰ è¿‡æ»¤å™¨ï¼Œç”¨æ¥åŒæ—¶è¿›è¡Œå¤šä¸ªæˆæƒ</span></span><br><span class="line">        <span class="type">RoleOrFilter</span> <span class="variable">roleOrFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleOrFilter</span>();</span><br><span class="line">        Map&lt;String, Filter&gt; myFilterMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        myFilterMap.put(<span class="string">&quot;e-perms&quot;</span>, roleOrFilter);<span class="comment">//å¯ä»¥é…ç½®RoleOrFilterçš„Bean</span></span><br><span class="line">        bean.setFilters(myFilterMap);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            anno: æ— éœ€è®¤è¯å°±èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            authcï¼šå¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            userï¼š å¿…é¡»æ‹¥æœ‰â€è®°ä½æˆ‘åŠŸèƒ½â€œ  æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="comment">            permsï¼š æ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">            roleï¼š æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹¦æˆª</span></span><br><span class="line">        Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æˆæƒ,æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æˆæƒä¼šè·³è½¬åˆ°æœªæˆæƒç•Œé¢</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;e-perms[add|admin]&quot;</span>);</span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/update&quot;</span>,<span class="string">&quot;e-perms[update|admin]&quot;</span>);</span><br><span class="line">        filterMap.put(<span class="string">&quot;/admin&quot;</span>,<span class="string">&quot;e-perms[admin]&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//filterMap.put(&quot;/user/add&quot;,&quot;authc&quot;);</span></span><br><span class="line">        <span class="comment">//filterMap.put(&quot;/user/update&quot;,&quot;authc&quot;);</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">        bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®ç™»å½•çš„è¯·æ±‚</span></span><br><span class="line">        bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line">        <span class="comment">// æœªæˆæƒç•Œé¢</span></span><br><span class="line">        bean.setUnauthorizedUrl(<span class="string">&quot;/noauth&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// DefaultWebSecurityManager:2</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;securityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">getDefaultWebSecurityManager</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        <span class="comment">// å…³è” UserRealm,é€šè¿‡springæ¥è¿›è¡Œå…³è”ï¼Œå¦‚ä¸Šé¢çš„å‚æ•° @Qualifier(&quot;userRealm&quot;) ==ã€‹ ä¸‹é¢çš„æ–¹æ³•å</span></span><br><span class="line">        securityManager.setAuthenticator(authenticator());</span><br><span class="line">        List&lt;Realm&gt; realms = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Realm&gt;();</span><br><span class="line">        realms.add(userRealm());</span><br><span class="line">        realms.add(adminRealm());</span><br><span class="line"></span><br><span class="line">        securityManager.setRealms(realms);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»º realm å¯¹è±¡ï¼Œéœ€è¦è‡ªå®šä¹‰ç±»:1</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">UserRealm</span> <span class="variable">userRealm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">        userRealm.setCredentialsMatcher(getHashedCredentialsMatcher());</span><br><span class="line">        <span class="keyword">return</span> userRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AdminRealm <span class="title function_">adminRealm</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">AdminRealm</span> <span class="variable">adminRealm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AdminRealm</span>();</span><br><span class="line">        adminRealm.setCredentialsMatcher(getHashedCredentialsMatcher());</span><br><span class="line">        <span class="keyword">return</span> adminRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å¯†ç åŠ å¯†</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;matcher&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> HashedCredentialsMatcher <span class="title function_">getHashedCredentialsMatcher</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">HashedCredentialsMatcher</span> <span class="variable">matcher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashedCredentialsMatcher</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®åŠ å¯†è§„åˆ™</span></span><br><span class="line">        matcher.setHashAlgorithmName(<span class="string">&quot;md5&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®åŠ å¯†æ¬¡æ•°</span></span><br><span class="line">        matcher.setHashIterations(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> matcher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸‹é¢å°±æ˜¯è®¤è¯å™¨çš„é…ç½®</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CustomModularRealmAuthenticator <span class="title function_">authenticator</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">CustomModularRealmAuthenticator</span> <span class="variable">authenticator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CustomModularRealmAuthenticator</span>();</span><br><span class="line">        <span class="comment">//authenticator.setAuthenticationStrategy(new AtLeastOneSuccessfulStrategy());</span></span><br><span class="line">        <span class="keyword">return</span> authenticator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•´åˆ ShiroDialectï¼šç”¨æ¥æ•´åˆshiro+thymeleaf</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroDialect <span class="title function_">getShiroDialect</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ShiroDialect</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹controller"><a href="#ä¿®æ”¹controller" class="headerlink" title="ä¿®æ”¹controller"></a>ä¿®æ”¹<code>controller</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.config.shiroUtils.CustomToken;</span><br><span class="line"><span class="keyword">import</span> com.li.config.shiroUtils.LoginType;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOGIN_TYPE_user= LoginType.USER.toString();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOGIN_TYPE_admin= LoginType.ADMIN.toString();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(String username, String password, Model model)</span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è£…ç”¨æˆ·çš„ç™»é™†æ•°æ®</span></span><br><span class="line">        <span class="type">CustomToken</span> <span class="variable">userToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CustomToken</span>(username, password,LOGIN_TYPE_user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            subject.login(userToken); <span class="comment">// æ‰§è¡Œç™»å½•çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸å°±ok</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (UnknownAccountException e)&#123; <span class="comment">// ç”¨æˆ·åä¸å­˜åœ¨</span></span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IncorrectCredentialsException e)&#123; <span class="comment">//å¯†ç ä¸å­˜åœ¨</span></span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login2</span><span class="params">(String username, String password, Model model)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è£…ç”¨æˆ·çš„ç™»é™†æ•°æ®</span></span><br><span class="line">        <span class="type">CustomToken</span> <span class="variable">adminToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CustomToken</span>(username, password,LOGIN_TYPE_admin);</span><br><span class="line">        <span class="comment">// è·å–å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            subject.login(adminToken); <span class="comment">// æ‰§è¡Œç™»å½•çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸å°±ok</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (UnknownAccountException e)&#123; <span class="comment">// ç”¨æˆ·åä¸å­˜åœ¨</span></span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg2&quot;</span>,<span class="string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IncorrectCredentialsException e)&#123; <span class="comment">//å¯†ç ä¸å­˜åœ¨</span></span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg2&quot;</span>,<span class="string">&quot;å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç™»å½•çš„ç•Œé¢"><a href="#ç™»å½•çš„ç•Œé¢" class="headerlink" title="ç™»å½•çš„ç•Œé¢"></a>ç™»å½•çš„ç•Œé¢</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/login&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg2&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/login2&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å®ç°æ·»åŠ å¤šä¸ªæƒé™"><a href="#å®ç°æ·»åŠ å¤šä¸ªæƒé™" class="headerlink" title="å®ç°æ·»åŠ å¤šä¸ªæƒé™"></a>å®ç°æ·»åŠ å¤šä¸ªæƒé™</h2><h3 id="è‡ªå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨æ¥å®ç°RoleOrFilter"><a href="#è‡ªå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨æ¥å®ç°RoleOrFilter" class="headerlink" title="è‡ªå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨æ¥å®ç°RoleOrFilter"></a>è‡ªå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨æ¥å®ç°<code>RoleOrFilter</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.config.shiroUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.filter.authz.AuthorizationFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®è¿‡æ»¤å™¨ï¼Œèƒ½å¤ŸåŒæ—¶è¿›è¡Œå¤šä¸ªæƒé™çš„è®¤è¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoleOrFilter</span> <span class="keyword">extends</span> <span class="title class_">AuthorizationFilter</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">isAccessAllowed</span><span class="params">(ServletRequest request, ServletResponse response, Object mappedValue)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="built_in">this</span>.getSubject(request, response);</span><br><span class="line">        String[] perms = (String[]) ((String[]) mappedValue);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isPermitted</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (perms != <span class="literal">null</span> &amp;&amp; perms.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (perms.length == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!isOneOfPermitted(perms[<span class="number">0</span>], subject)) &#123;</span><br><span class="line">                    isPermitted = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isAllPermitted(perms,subject)) &#123;</span><br><span class="line">                isPermitted = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isPermitted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»¥â€œï¼Œâ€åˆ†å‰²çš„æƒé™ä¸ºå¹¶åˆ—å…³ç³»çš„æƒé™æ§åˆ¶ï¼Œåˆ†åˆ«å¯¹æ¯ä¸ªæƒé™å­—ç¬¦ä¸²è¿›è¡Œâ€œ|â€åˆ†å‰²è§£æ</span></span><br><span class="line"><span class="comment">     * è‹¥å¹¶åˆ—å…³ç³»çš„æƒé™æœ‰ä¸€ä¸ªä¸æ»¡è¶³åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> permStrArray ä»¥&quot;,&quot;åˆ†å‰²çš„æƒé™é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject      å½“å‰ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æ‹¥æœ‰è¯¥æƒé™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isAllPermitted</span><span class="params">(String[] permStrArray, Subject subject)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isPermitted</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>, len = permStrArray.length; index &lt; len; index++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!isOneOfPermitted(permStrArray[index], subject)) &#123;</span><br><span class="line">                isPermitted = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isPermitted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­ä»¥â€œ|â€åˆ†å‰²çš„æƒé™æœ‰ä¸€ä¸ªæ»¡è¶³çš„å°±è¿”å›trueï¼Œè¡¨ç¤ºæƒé™çš„æˆ–è€…å…³ç³»</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> permStr æƒé™æ•°ç»„ç§ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject å½“å‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æœ‰æƒé™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isOneOfPermitted</span><span class="params">(String permStr, Subject subject)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isPermitted</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        String[] permArr = permStr.split(<span class="string">&quot;\\|&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (permArr.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>, len = permArr.length; index &lt; len; index++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (subject.isPermitted(permArr[index])) &#123;</span><br><span class="line">                    isPermitted = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isPermitted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨ShiroConfigä¸­è¿›è¡Œå¼•ç”¨"><a href="#åœ¨ShiroConfigä¸­è¿›è¡Œå¼•ç”¨" class="headerlink" title="åœ¨ShiroConfigä¸­è¿›è¡Œå¼•ç”¨"></a>åœ¨<code>ShiroConfig</code>ä¸­è¿›è¡Œå¼•ç”¨</h3><p><code>ShiroFilterFactoryBean</code> ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½® è‡ªå®šä¹‰ è¿‡æ»¤å™¨ï¼Œç”¨æ¥åŒæ—¶è¿›è¡Œå¤šä¸ªæˆæƒ</span></span><br><span class="line"><span class="type">RoleOrFilter</span> <span class="variable">roleOrFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleOrFilter</span>();</span><br><span class="line">Map&lt;String, Filter&gt; myFilterMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">myFilterMap.put(<span class="string">&quot;e-perms&quot;</span>, roleOrFilter);<span class="comment">//å¯ä»¥é…ç½®RoleOrFilterçš„Bean</span></span><br><span class="line">bean.setFilters(myFilterMap);</span><br></pre></td></tr></table></figure><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="ä¸¤ä¸ªRealmçš„æ•°æ®ä¸²äº†"><a href="#ä¸¤ä¸ªRealmçš„æ•°æ®ä¸²äº†" class="headerlink" title="ä¸¤ä¸ªRealmçš„æ•°æ®ä¸²äº†"></a>ä¸¤ä¸ª<code>Realm</code>çš„æ•°æ®ä¸²äº†</h3><blockquote><p>ç¬¬ä¸€æ¬¡é…ç½®çš„æ—¶å€™ï¼Œæ²¡æœ‰å¯¹æ¯ä¸€ä¸ªRealmç±»çš„æˆæƒè¿›è¡ŒéªŒè¯ï¼Œç”±äºshiroä¼šä¸€æ¬¡è¿›å…¥åˆ°æ¯ä¸€ä¸ªrealmä¸­ï¼Œæ‰€ä»¥ä¸€ç›´æŠ¥é”™ Adminç±» æ— æ³• è½¬åŒ–ä¸º Userç±»ï¼ˆç±»ä¼¼æ˜¯è¿™ä¸ªï¼Œæ²¡æœ‰æˆªå›¾ï¼Œæ‰€ä»¥å¤§è‡´è¯´ä¸€ä¸‹ï¼‰</p></blockquote><p>è§£å†³åŠæ³•ï¼šæ¯æ¬¡è¿›å…¥æˆæƒæ—¶éƒ½è¿›è¡ŒéªŒè¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">    <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(principalCollection.getPrimaryPrincipal() <span class="keyword">instanceof</span> Admin)&#123;</span><br><span class="line">        <span class="comment">// æ‹¿åˆ°å½“å‰ç™»é™†çš„è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">// å–å‡ºå½“å‰ç™»å½•çš„å¯¹è±¡ï¼Œå’Œä¸‹é¢SimpleAuthenticationInfoä¼ çš„ç¬¬ä¸€ä¸ªå…³è”</span></span><br><span class="line">        <span class="type">Admin</span> <span class="variable">currentAdmin</span> <span class="operator">=</span> (Admin) subject.getPrincipal();</span><br><span class="line">        <span class="comment">// è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™ï¼Œä»æ•°æ®åº“ä¸­è¯»å‡º</span></span><br><span class="line">        info.addStringPermission(currentAdmin.getPerms());</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">return</span>  <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="could-not-be-authenticated-by-any-configured-realms"><a href="#could-not-be-authenticated-by-any-configured-realms" class="headerlink" title="could not be authenticated by any configured realms"></a><code>could not be authenticated by any configured realms</code></h3><blockquote><p>åœ¨æ–°çš„é¡¹ç›®ä¸­æ·»åŠ shiroè¿›è¡Œç™»å½•éªŒè¯çš„æ—¶å€™ï¼Œå‘ç°ä¸€ç›´æŠ¥ä¸€ä¸ªé”™è¯¯<code>Authentication token of type [class com.example.sengineer.config.shiroUtils.CustomToken] could not be authenticated by any configured realms.  Please ensure that at least one realm can authenticate these tokens.</code></p></blockquote><p>åŸå› ï¼šä½¿ç”¨çš„shiroçš„æ—¶å€™ï¼Œ<code>Logintype</code>ä¸­çš„<code>type</code>å’Œrealmä¸­çš„ä¸ä¸€è‡´ã€‚</p><p>è§£å†³åŠæ³•ï¼šå°†<code>pojo</code>ä¸­çš„<code>Student</code>ï¼Œ<code>StudentRealm</code>ï¼Œ<code>LoginType</code>ä¸­çš„<code>STUDENTï¼ˆâ€œStudentâ€ï¼‰</code>ä¸‰ä¸ªçš„åå­—æ”¹ä¸ºä¸€æ ·çš„ï¼ˆé‡ç‚¹æ˜¯<code>Student</code>ï¼‰<img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319618.png" alt="image-20221101120216015"></p><p>å½“ç„¶ï¼ŒçœŸçš„åŸå› å¯èƒ½åªæ˜¯ <code>StudentRealm</code>å’Œ<code>LoginType</code>çš„ä¸ä¸€è‡´ï¼ˆæˆ‘æ²¡æœ‰ç»†ç»†ç ”ç©¶ï¼Œåªæ˜¯å‘ç°è¿™æ ·èƒ½å¤Ÿè§£å†³é—®é¢˜ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥è‡ªå·±å»æµ‹è¯•ï¼‰ï¼Œä½†æ˜¯ä¸ºäº†ä»£ç çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥å»ºè®®pojoç±»ä¹Ÿè·Ÿä¸Šé¢ä¸€è‡´</p><h3 id="thymeleafä¸­formä¸­çš„æ•°æ®æ— æ³•è·å–"><a href="#thymeleafä¸­formä¸­çš„æ•°æ®æ— æ³•è·å–" class="headerlink" title="thymeleafä¸­formä¸­çš„æ•°æ®æ— æ³•è·å–"></a><code>thymeleaf</code>ä¸­<code>form</code>ä¸­çš„æ•°æ®æ— æ³•è·å–</h3><blockquote><p>åœ¨æµ‹è¯•çš„æ—¶å€™å‘ç°<code>thymeleaf</code>çš„ç™»å½•è´¦å·æ— æ³•è·å–</p></blockquote><p>åŸå› ï¼š<code>form</code>è¡¨å•ä¸­çš„ <code>name</code> å’Œ <code>controller</code> ä¸­çš„å‚æ•°åå­—ä¸ä¸€è‡´</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319651.png" alt="image-20221101121007259"></p><p>è§£å†³åŠæ³•ï¼šå°†ä¸¤ä¸ªåœ°æ–¹çš„åå­—æ”¹ä¸ºä¸€è‡´çš„</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3ä½¿ç”¨element-plus</title>
      <link href="/2022/09/28/vue3%E4%BD%BF%E7%94%A8element-plus/"/>
      <url>/2022/09/28/vue3%E4%BD%BF%E7%94%A8element-plus/</url>
      
        <content type="html"><![CDATA[<h1 id="å®˜æ–¹ç½‘ç«™"><a href="#å®˜æ–¹ç½‘ç«™" class="headerlink" title="å®˜æ–¹ç½‘ç«™"></a>å®˜æ–¹ç½‘ç«™</h1><blockquote><p>å‡ ä¹æ‰€æœ‰çš„é—®é¢˜éƒ½èƒ½åœ¨å®˜ç½‘ä¸Šæ‰¾åˆ°ç­”æ¡ˆï¼Œå»ºè®®å¤šçœ‹çœ‹å®˜æ–¹æ–‡æ¡£</p></blockquote><p><a href="https://element-plus.gitee.io/zh-CN/">Element-plus</a></p><p><a href="https://cn.vuejs.org/">Vue3</a></p><h1 id="Element-plusçš„ä½¿ç”¨"><a href="#Element-plusçš„ä½¿ç”¨" class="headerlink" title="Element-plusçš„ä½¿ç”¨"></a>Element-plusçš„ä½¿ç”¨</h1><h2 id="å¯¼å…¥Element-plus"><a href="#å¯¼å…¥Element-plus" class="headerlink" title="å¯¼å…¥Element-plus"></a>å¯¼å…¥Element-plus</h2><blockquote><p>ä½¿ç”¨çš„æ˜¯è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥</p></blockquote><ol><li><p>å¯¼å…¥element-plusçš„åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save  ä¸‹è½½ element-plus</span><br><span class="line">npm install @element-plus/icons  ä¸‹è½½element-plusçš„å›¾æ ‡</span><br></pre></td></tr></table></figure></li><li><p>ä¸‹è½½æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºvue.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AutoImport</span> = <span class="built_in">require</span>(<span class="string">&quot;unplugin-auto-import/webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Components</span> = <span class="built_in">require</span>(<span class="string">&quot;unplugin-vue-components/webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;unplugin-vue-components/resolvers&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">lintOnSave</span>: <span class="literal">false</span>,<span class="comment">// å…³é—­è¯­æ³•æ£€æŸ¥</span></span><br><span class="line">    <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">                <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Components</span>(&#123;</span><br><span class="line">                <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><p>é…ç½®å®Œæˆï¼Œç›´æ¥ä½¿ç”¨emement-plusçš„ç»„ä»¶ï¼Œä¸éœ€è¦æ³¨å†Œ</p><h2 id="è®¾ç½®Element-plusä¾§è¾¹æ é«˜åº¦å æ»¡å±å¹•"><a href="#è®¾ç½®Element-plusä¾§è¾¹æ é«˜åº¦å æ»¡å±å¹•" class="headerlink" title="è®¾ç½®Element-plusä¾§è¾¹æ é«˜åº¦å æ»¡å±å¹•"></a>è®¾ç½®Element-plusä¾§è¾¹æ é«˜åº¦å æ»¡å±å¹•</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span>,<span class="selector-tag">html</span>,<span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tac</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">el-<span class="selector-tag">menu</span>&#123;</span><br><span class="line">    heig</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨vue3é…ç½®è·¯ç”±"><a href="#ä½¿ç”¨vue3é…ç½®è·¯ç”±" class="headerlink" title="ä½¿ç”¨vue3é…ç½®è·¯ç”±"></a>ä½¿ç”¨vue3é…ç½®è·¯ç”±</h1><blockquote><p>vue3å’Œvue2é…ç½®è·¯ç”±çš„æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥ç‰¹æ­¤è®°å½•</p></blockquote><ol><li><p>ä¸‹è½½vue-router</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router</span><br></pre></td></tr></table></figure></li><li><p>åœ¨index.jsä¸­é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> page1 <span class="keyword">from</span> <span class="string">&quot;@/pages/page1&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vueRouter =  <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="comment">//å¿…é¡»é…ç½®ï¼Œvue3ä¸­çš„mode</span></span><br><span class="line">    <span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>() ,</span><br><span class="line">    <span class="attr">routes</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;test1&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/page1&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: page1</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> vueRouter;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨main.jsä¸­å¼•ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="comment">// createApp(App).mount(&#x27;#app&#x27;)</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®ç¼–ç¨‹å¼è·¯ç”±è·³è½¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// ç”±äºvue3ä¸­setupæ— æ³•è·å¾—thisï¼Œæ‰€ä»¥ä½¿ç”¨useRouter   </span><br><span class="line">import &#123;useRouter&#125; from &#x27;vue-router&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;test&quot;,</span><br><span class="line">  setup()&#123;</span><br><span class="line">    const router = useRouter()</span><br><span class="line">    function toPage1() &#123;</span><br><span class="line">      router.push(&#123;</span><br><span class="line">          path:&#x27;/page1&#x27;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    return&#123;</span><br><span class="line">      toPage1,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue</title>
      <link href="/2022/09/20/vue/"/>
      <url>/2022/09/20/vue/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h1><h2 id="åŸºç¡€æ–¹æ³•"><a href="#åŸºç¡€æ–¹æ³•" class="headerlink" title="åŸºç¡€æ–¹æ³•"></a>åŸºç¡€æ–¹æ³•</h2><h3 id="äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨"><a href="#äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨"></a>äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨</h3><h4 id="ç»‘å®šç›‘å¬"><a href="#ç»‘å®šç›‘å¬" class="headerlink" title="ç»‘å®šç›‘å¬"></a>ç»‘å®šç›‘å¬</h4><ul><li>ä½¿ç”¨ <code>v-on:xxx</code> æˆ–è€… <code>@xxx</code> ç»‘å®šäº‹ä»¶ï¼Œ xxxæ˜¯äº‹ä»¶å</li><li>äº‹ä»¶çš„å›è°ƒéœ€è¦é…ç½®åœ¨methodså¯¹è±¡ä¸­</li><li><code>@click = &quot;demo&quot;</code> å’Œ <code>@click = &quot;demo($event)&quot;</code>æ•ˆæœä¸€æ ·ï¼Œåè€…å¯ä»¥ä¼ å‚</li></ul><h4 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h4><ol><li><code>prevent</code>ï¼š é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º <code>event.preventDefault()</code></li><li><code>stop</code> ï¼š åœæ­¢äº‹ä»¶å†’æ³¡ <code>event.stopPropagation()</code></li><li><code>once</code>ï¼šäº‹ä»¶åªè§¦å‘ä¸€æ¬¡</li><li><code>capture</code>ï¼šä½¿ç”¨äº‹ä»¶çš„æ•è·æ¨¡å¼</li><li><code>self</code>ï¼šåªæœ‰<code>event.target</code>å½“å‰æ“ä½œçš„å…ƒç´ æ‰æ˜¯è§¦å‘äº‹ä»¶</li><li><code>passive</code>ï¼šäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…å›è°ƒäº‹ä»¶æ‰§è¡Œå®Œæ¯•</li></ol><p>ä½¿ç”¨æ–¹æ³•ï¼š <code>@click.prevent</code> ï¼Œå¯ä»¥åŒæ—¶å†™å¤šä¸ª</p><h4 id="æŒ‰é”®ä¿®é¥°"><a href="#æŒ‰é”®ä¿®é¥°" class="headerlink" title="æŒ‰é”®ä¿®é¥°"></a>æŒ‰é”®ä¿®é¥°</h4><p>Vueä¸­å¸¸ç”¨çš„æŒ‰é”®åˆ«å</p><ul><li>å›è½¦ &#x3D;&#x3D;&gt; <code>enter</code></li><li>åˆ é™¤ &#x3D;&#x3D;&gt; <code>delete</code></li><li>é€€å‡º &#x3D;&#x3D;&gt; <code>esc</code></li><li>ç©ºæ ¼ &#x3D;&#x3D;&gt; <code>space</code></li><li>æ¢è¡Œ &#x3D;&#x3D;&gt; <code>tab</code>(ç‰¹æ®Šï¼Œå¿…é¡»é…åˆ <code>keydown</code> ä½¿ç”¨)</li><li>ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³ &#x3D;&#x3D;&gt; <code>up , down , left , right</code></li></ul><p>ç³»ç»Ÿä¿®é¥°é”® éœ€è¦é…åˆ <code>keydown</code> ä½¿ç”¨</p><p>ä½¿ç”¨ï¼š <code>@keyup.enter = &quot;demo&quot;</code></p><h3 id="è®¡ç®—å±æ€§"><a href="#è®¡ç®—å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§"></a>è®¡ç®—å±æ€§</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;</span><br><span class="line">firstName:&#x27;å¼ &#x27;,</span><br><span class="line">lastName:&#x27;ä¸‰&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">computedï¼š&#123;</span><br><span class="line">fullName:&#123;</span><br><span class="line">// get æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ å½“æœ‰äººåœ¨è¯»å–fullNameæ—¶ï¼Œgetå°±ä¼šè¢«è°ƒç”¨ï¼Œä¸”å®ƒçš„è¿”å›å€¼å°±ä½œä¸ºfullNameçš„å€¼</span><br><span class="line">// getä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿ1.åˆæ¬¡è¯»å–fullNameæ—¶ã€‚ 2.æ‰€ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶</span><br><span class="line">get()&#123;</span><br><span class="line">// è¿™é‡Œé¢çš„thisæ˜¯vm</span><br><span class="line">return this.firstName + &#x27;-&#x27; + this.lastName</span><br><span class="line">&#125;,</span><br><span class="line">// setä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“fullNameè¢«ä¿®æ”¹æ—¶</span><br><span class="line">set(value)&#123;</span><br><span class="line">cosnt arr = value.split(&#x27;-&#x27;);</span><br><span class="line">this.firstName = arr[0]</span><br><span class="line">this.lastName = arr[1]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®€å†™ï¼ˆåªæœ‰getï¼‰"><a href="#ç®€å†™ï¼ˆåªæœ‰getï¼‰" class="headerlink" title="ç®€å†™ï¼ˆåªæœ‰getï¼‰"></a>ç®€å†™ï¼ˆåªæœ‰getï¼‰</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computedï¼š&#123;</span><br><span class="line">fullName()&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">&#x27;-&#x27;</span> + <span class="keyword">this</span>.lastName</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç›‘è§†å±æ€§"><a href="#ç›‘è§†å±æ€§" class="headerlink" title="ç›‘è§†å±æ€§"></a>ç›‘è§†å±æ€§</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line"><span class="attr">isHot</span>:&#123;</span><br><span class="line"><span class="attr">immediate</span>:<span class="literal">true</span> , <span class="comment">// åˆå§‹åŒ–æ—¶è®©handlerè°ƒç”¨ä¸€ä¸‹</span></span><br><span class="line"><span class="comment">// handlerä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“isHotå‘ç”Ÿå˜åŒ–æ—¶</span></span><br><span class="line"><span class="title function_">handler</span>(<span class="params">newValue , oldValue</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…¶ä»–æ–¹å¼</span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">immediate</span>:<span class="literal">true</span> ,</span><br><span class="line"><span class="title function_">handler</span>(<span class="params">newValue , oldValue</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æ·±åº¦ç›‘è§†"><a href="#æ·±åº¦ç›‘è§†" class="headerlink" title="æ·±åº¦ç›‘è§†"></a>æ·±åº¦ç›‘è§†</h4><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">watch</span>:&#123;</span><br><span class="line"><span class="variable">numbers</span>:&#123;</span><br><span class="line"><span class="variable">deep</span>:<span class="literal">true</span>, <span class="comment">// å¼€å¯æ·±åº¦ç›‘è§†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// handlerä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“isHotå‘ç”Ÿå˜åŒ–æ—¶</span></span><br><span class="line"><span class="title function_">handler</span>(<span class="params">newValue</span> , <span class="params">oldValue</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç›‘è§†å±æ€§çš„ç®€å†™å½¢å¼"><a href="#ç›‘è§†å±æ€§çš„ç®€å†™å½¢å¼" class="headerlink" title="ç›‘è§†å±æ€§çš„ç®€å†™å½¢å¼"></a>ç›‘è§†å±æ€§çš„ç®€å†™å½¢å¼</h4><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">watch:<span class="type"></span>&#123;</span><br><span class="line"><span class="comment">// æ­£å¸¸å†™æ³•</span></span><br><span class="line">numbers:<span class="type"></span>&#123;</span><br><span class="line">deep:<span class="type">true</span>, <span class="comment">// å¼€å¯æ·±åº¦ç›‘è§†</span></span><br><span class="line">immediate:<span class="type">true</span>, <span class="comment">// åˆå§‹æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">// handlerä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“isHotå‘ç”Ÿå˜åŒ–æ—¶</span></span><br><span class="line">handler(<span class="keyword">new</span><span class="type">Value</span> , oldValue)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ç®€å†™å½¢å¼</span></span><br><span class="line">numbers(<span class="keyword">new</span><span class="type">Value</span> , oldValue)&#123;</span><br><span class="line">console.log(<span class="string">&#x27;numbersè¢«ä¿®æ”¹äº†&#x27;</span>ï¼Œ<span class="keyword">new</span><span class="type">Value</span>, oldValue)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…¶ä»–æ–¹å¼</span><br><span class="line">vm.<span class="variable">$watch</span>(<span class="string">&#x27;isHot&#x27;</span>,&#123;</span><br><span class="line">immediate:<span class="type">true </span>,</span><br><span class="line">handler(<span class="keyword">new</span><span class="type">Value</span> , oldValue)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ç®€å†™</span><br><span class="line">vm.<span class="variable">$watch</span>(<span class="string">&#x27;isHot&#x27;</span>,<span class="title function_"><span class="keyword">function</span></span>(<span class="keyword">new</span><span class="type">Value</span> , oldValue)&#123;</span><br><span class="line">console.log(<span class="string">&#x27;isHotè¢«ä¿®æ”¹äº†&#x27;</span>ï¼Œ<span class="keyword">new</span><span class="type">Value</span>, oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—å±æ€§å’Œç›‘è§†å±æ€§å¯¹æ¯”"><a href="#è®¡ç®—å±æ€§å’Œç›‘è§†å±æ€§å¯¹æ¯”" class="headerlink" title="è®¡ç®—å±æ€§å’Œç›‘è§†å±æ€§å¯¹æ¯”"></a>è®¡ç®—å±æ€§å’Œç›‘è§†å±æ€§å¯¹æ¯”</h3><ul><li>è®¡ç®—å±æ€§ä¸èƒ½å¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼Œç›‘è§†å±æ€§å¯ä»¥</li><li>computedèƒ½å®Œæˆçš„ï¼Œwatchéƒ½å¯ä»¥å®Œæˆ</li><li>ä¸¤ä¸ªé‡è¦çš„å°åŸåˆ™<ul><li>è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°æœ€å¥½å†™æˆæ™®é€šå‡½æ•°ï¼Œè¿™æ ·thisæ‰æ˜¯æŒ‡å‘ vmçš„ æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡</li><li>æ‰€æœ‰ä¸è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼ˆå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ï¼Œajaxçš„å›è°ƒå‡½æ•°ï¼‰ï¼Œæœ€å¥½å†™æˆç®­å¤´å‡½æ•°ï¼Œè¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡</li></ul></li></ul><h3 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h3><ul><li><p><code>v-if</code> ä¸ <code>v-else</code></p></li><li><p><code>v-show</code></p></li></ul><h3 id="åˆ—è¡¨æ¸²æŸ“"><a href="#åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“"></a>åˆ—è¡¨æ¸²æŸ“</h3><p>éå†æ•°ç»„ï¼š<code>v-for / index</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-for = &quot;(p,index) in persons&quot; :key = &quot;index&quot;</span><br></pre></td></tr></table></figure><p>éå†å¯¹è±¡ï¼š<code>v-for / key</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-for = &quot;(value,key) of car&quot; :key = &quot;key&quot;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥éå†å­—ç¬¦ä¸²ï¼Œéå†æŒ‡å®šæ¬¡æ•°</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322353.png" alt="image-20230109193451919"></p><h3 id="vueæ£€æµ‹æ•°æ®çš„åŸç†"><a href="#vueæ£€æµ‹æ•°æ®çš„åŸç†" class="headerlink" title="vueæ£€æµ‹æ•°æ®çš„åŸç†"></a>vueæ£€æµ‹æ•°æ®çš„åŸç†</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322164.png" alt="image-20230110112316514"></p><h3 id="æ”¶é›†è¡¨å•æ•°æ®"><a href="#æ”¶é›†è¡¨å•æ•°æ®" class="headerlink" title="æ”¶é›†è¡¨å•æ•°æ®"></a>æ”¶é›†è¡¨å•æ•°æ®</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322802.png" alt="image-20230110114409236"></p><h3 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">directives:&#123;</span><br><span class="line">    // éœ€æ±‚:å®šä¹‰ä¸€ä¸ª v-fbindæŒ‡ä»¤ï¼Œå’Œv-bindåŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¯ä»¥è®©ç»‘å®šçš„inputå…ƒç´ é»˜è®¤è·å–ç„¦ç‚¹</span><br><span class="line">//ç¬¬ä¸€ç§å†™æ³•</span><br><span class="line">fbind:&#123;</span><br><span class="line">// æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶</span><br><span class="line">bind(element,binding)&#123;</span><br><span class="line">element.value = binding.value</span><br><span class="line">&#125;ï¼Œ</span><br><span class="line">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ æ’å…¥ç•Œé¢æ—¶</span><br><span class="line">inserted(element,binding)&#123;</span><br><span class="line">element.focus()</span><br><span class="line">&#125;,</span><br><span class="line">// æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶</span><br><span class="line">update(element,binding)&#123;</span><br><span class="line">element.value = binding.value</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// éœ€æ±‚:å®šä¹‰ä¸€ä¸ª v-bigæŒ‡ä»¤ï¼Œå’Œv-textåŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯æŠŠç»‘å®šçš„å€¼æ”¾å¤§åå€</span><br><span class="line"></span><br><span class="line">// ç¬¬äºŒç§å†™æ³• element:çœŸå®çš„domå…ƒç´ ï¼Œ binding:ç»‘å®šå¯¹è±¡</span><br><span class="line">// bigå‡½æ•°ä½•æ—¶ä¼šè¢«è°ƒç”¨ï¼Ÿ 1.æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆåˆå§‹åŒ–ï¼‰ã€‚2.æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶</span><br><span class="line">big(element,binding)&#123;</span><br><span class="line">element.innerText = binding.value * 10</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨é©¼å³°å‘½åï¼Œæ¯”å¦‚<code>bigNumber</code></p></blockquote><p>ä½¿ç”¨çš„æŒ‡ä»¤ï¼š<code>v-big-number</code></p><p>åœ¨<code>directives</code>ä¸­çš„å‘½åï¼š<code>&#39;big-number&#39;()&#123;&#125;</code></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322558.png" alt="image-20230112114713543"></p><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322319.png" alt="image-20230112121536046"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322026.png" alt="image-20230112142537708"></p><h2 id="Vueè„šæ‰‹æ¶"><a href="#Vueè„šæ‰‹æ¶" class="headerlink" title="Vueè„šæ‰‹æ¶"></a>Vueè„šæ‰‹æ¶</h2><h3 id="ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶"><a href="#ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶"></a>ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$emit(&#x27;ç»‘å®šçš„è‡ªå®šä¹‰äº‹ä»¶&#x27;,&#x27;ä¼ é€’çš„å‚æ•°&#x27;) è‡ªå®šä¹‰äº‹ä»¶çš„è§¦å‘</span><br><span class="line">$on(&#x27;ç»‘å®šçš„è‡ªå®šä¹‰äº‹ä»¶&#x27;,&#x27;æ–¹æ³•&#x27;)  ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶</span><br><span class="line">$off([&#x27;è‡ªå®šä¹‰äº‹ä»¶&#x27;,&#x27;è‡ªå®šä¹‰äº‹ä»¶&#x27;]) è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ªäººå¯¹äº <code>$emit $on $off</code> çš„ç†è§£ï¼š</p><p>é¦–å…ˆè¦ä½¿ç”¨è¿™ä¸‰ä¸ªï¼Œéœ€è¦æœ‰ä¸€ä¸ªå‡½æ•°</p><p><code>$on</code>ï¼šå°†å‡½æ•°è®¾ç½®ä¸ºå…¨å±€å¯è§¦å‘å‡½æ•°ï¼ŒåŒæ—¶ç»™è¿™ä¸ªå‡½æ•°å–ä¸€ä¸ªåˆ«å </p><p><code>$off</code> å°†å‡½æ•°å–æ¶ˆç»‘å®š</p><p>$emitï¼šåœ¨å…¶ä»–ç»„ä»¶ä¸­ï¼Œä½¿ç”¨äº†<code>$on</code>ç»‘å®šçš„å‡½æ•°ï¼ŒåŒæ—¶å‘è¿™ä¸ªå‡½æ•°ä¼ é€’å‚æ•°ï¼Œç„¶ååœ¨ç»‘å®šè¯¥å‡½æ•°çš„ç»„ä»¶ä¸­æ”¶åˆ° å›è°ƒçš„æ•°æ®</p><p>ä»¥ä¸‹é¢è¿™ä¸ªå›¾ä¸ºä¾‹å­</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322971.png" alt="image-20230211224858693"></p><blockquote><p>aç»„ä»¶ä¸­æœ‰ä¸€ä¸ªAå‡½æ•°ï¼Œaç»„ä»¶å°†å…¶ç»‘å®šä¸ºè‡ªå®šä¹‰äº‹ä»¶<code>checkA</code>ï¼Œç„¶åbç»„ä»¶å¯ä»¥è§¦å‘<code>checkA</code>å¹¶ä¼ é€’å‚æ•°ï¼Œç„¶åå‡½æ•°Aå°±ä¼šæ”¶åˆ°å‚æ•°å¹¶è°ƒç”¨ï¼Œå›è°ƒåœ¨aç»„ä»¶ä¸­</p></blockquote><ul><li><p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼š<strong>å­ç»„ä»¶ &#x3D;&#x3D;&gt; çˆ¶ç»„ä»¶</strong></p></li><li><p>ä½¿ç”¨åœºæ™¯ï¼šAæ˜¯çˆ¶ç»„ä»¶ï¼ŒBæ˜¯å­ç»„ä»¶ï¼ŒBæƒ³ç»™Aä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨Aä¸­ç»™Bç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆäº‹ä»¶çš„å›è°ƒåœ¨Aä¸­ï¼‰</p></li><li><p>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š</p><ul><li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code> æˆ– <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p></li><li><p>ç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š</p></li></ul></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo ref=<span class="string">&quot;demo&quot;</span>/&gt;</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="title">mounted</span><span class="params">()</span></span>&#123;</span><br><span class="line">    this.<span class="variable">$refs</span><span class="selector-class">.demo</span>.<span class="variable">$on</span>(<span class="string">&#x27;atguigu&#x27;</span>,data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨<code>once</code>ä¿®é¥°ç¬¦ï¼Œæˆ–<code>$once</code>æ–¹æ³•</p></li><li><p>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š<code>this.$emit(&#39;atguigu&#39;,æ•°æ®)</code></p></li><li><p>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ï¼š<code>this.$off(&#39;atguigu&#39;)</code></p></li><li><p>ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”ŸDOMäº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨nativeä¿®é¥°ç¬¦</p></li><li><p>æ³¨æ„ï¼šé€šè¿‡<code>this.$refs.xxx.$on(&#39;atguigu&#39;,å›è°ƒ)</code>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒè¦ä¹ˆé…ç½®åœ¨<code>methods</code>ä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™thisæŒ‡å‘ä¼šå‡ºé—®é¢˜ï¼</p></li></ul><h3 id="å…¨å±€äº‹ä»¶æ€»çº¿"><a href="#å…¨å±€äº‹ä»¶æ€»çº¿" class="headerlink" title="å…¨å±€äº‹ä»¶æ€»çº¿"></a>å…¨å±€äº‹ä»¶æ€»çº¿</h3><ol><li><p>ä¸€ç§ç»„ä»¶ä¹‹é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº<strong>ä»»æ„ç»„ä»¶é—´é€šä¿¡</strong></p></li><li><p>å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆåœ¨ <code>main.js</code> ä¸­ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">   ...</span><br><span class="line">   beforeCreate() &#123;</span><br><span class="line">   Vue.prototype.$bus = this //å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$buså°±æ˜¯å½“å‰åº”ç”¨çš„vm</span><br><span class="line">   &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼š</p><ol><li><p>æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™<code>$bus</code>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„<strong>å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">methods</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">demo</span>(<span class="params">data</span>)&#123;...&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;xxx&#x27;</span>,<span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æä¾›æ•°æ®ï¼š<code>this.$bus.$emit(&#39;xxxx&#39;,æ•°æ®)</code></p></li></ol></li><li><p>æœ€å¥½åœ¨<code>beforeDestroy</code>é’©å­ä¸­ï¼Œç”¨<code>$off</code>è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶</p></li></ol><h3 id="æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ-pubsub"><a href="#æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ-pubsub" class="headerlink" title="æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ(pubsub)"></a>æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ(pubsub)</h3><ol><li><p>ä¸€ç§ç»„ä»¶ä¹‹é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº<strong>ä»»æ„ç»„ä»¶é—´é€šä¿¡</strong></p></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>å®‰è£…pubsubï¼š<code>npm i pubsub-js</code></p></li><li><p>å¼•å…¥ï¼š<code>import pubsub from &#39;pubsub-js&#39;</code></p></li><li><p>æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³è¦æ¥å—æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­è®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…çš„<strong>å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">methods</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">demo</span>(data)&#123;........&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"><span class="function"><span class="title">mounted</span><span class="params">()</span></span>&#123;</span><br><span class="line">this<span class="selector-class">.pid</span> = pubsub<span class="selector-class">.subscribe</span>(<span class="string">&#x27;xxx&#x27;</span>,this.demo)<span class="comment">// è®¢é˜…æ¶ˆæ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æä¾›æ•°æ®ï¼š<code>pubsub.publish(&#39;xxx&#39;,æ•°æ®)</code></p></li><li><p>æœ€å¥½åœ¨<code>beforeDestroy</code>é’©å­ä¸­ï¼Œç”¨<code>PubSub.unsubscribe(pid)</code>å»å–æ¶ˆè®¢é˜…</p></li></ol></li></ol><h3 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h3><ol><li>è¯­æ³•ï¼š<code>this.$nextTick(å›è°ƒå‡½æ•°)</code></li><li>ä½œç”¨ï¼šåœ¨å†™ä¸€æ¬¡DOMæ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ</li><li>ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨<code>nextTick</code>æ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ</li></ol><h3 id="Vueçš„åŠ¨ç”»æ•ˆæœ"><a href="#Vueçš„åŠ¨ç”»æ•ˆæœ" class="headerlink" title="Vueçš„åŠ¨ç”»æ•ˆæœ"></a>Vueçš„åŠ¨ç”»æ•ˆæœ</h3><h4 id="ä½¿ç”¨cssåŠ¨ç”»"><a href="#ä½¿ç”¨cssåŠ¨ç”»" class="headerlink" title="ä½¿ç”¨cssåŠ¨ç”»"></a>ä½¿ç”¨cssåŠ¨ç”»</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;æ˜¾ç¤º/éšè—&lt;/button&gt;</span><br><span class="line">    &lt;transition name=&quot;fir&quot; :appear=&quot;true&quot;&gt;</span><br><span class="line">      &lt;h1 v-show=&quot;isShow&quot;&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Test&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  h1 &#123;</span><br><span class="line">    background-color: orange;</span><br><span class="line">  &#125;</span><br><span class="line">/*firå¯¹åº”ä¸Šé¢ transitionçš„ name*/</span><br><span class="line">  .fir-enter-active &#123;</span><br><span class="line">    animation: atguigu 1s;</span><br><span class="line">  &#125;</span><br><span class="line">  .fir-leave-active &#123;</span><br><span class="line">    animation: atguigu 1s reverse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /*åŠ¨ç”»*/</span><br><span class="line">  @keyframes atguigu &#123;</span><br><span class="line">    from&#123;</span><br><span class="line">      transform: translateX(-100%);</span><br><span class="line">    &#125;</span><br><span class="line">    to&#123;</span><br><span class="line">      transform: translateX(0px);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨Vueæä¾›çš„ä¸‰ç§æ–¹æ³•"><a href="#ä½¿ç”¨Vueæä¾›çš„ä¸‰ç§æ–¹æ³•" class="headerlink" title="ä½¿ç”¨Vueæä¾›çš„ä¸‰ç§æ–¹æ³•"></a>ä½¿ç”¨Vueæä¾›çš„ä¸‰ç§æ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;æ˜¾ç¤º/éšè—&lt;/button&gt;</span><br><span class="line">    &lt;transition-group name=&quot;hello&quot; :appear=&quot;true&quot;&gt;</span><br><span class="line">      &lt;h1 v-show=&quot;isShow&quot; key=&quot;1&quot;&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">      &lt;h1 v-show=&quot;!isShow&quot; key=&quot;2&quot;&gt;åŒ—äº¬&lt;/h1&gt;</span><br><span class="line">    &lt;/transition-group&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Test&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  h1 &#123;</span><br><span class="line">    background-color: orange;</span><br><span class="line">  &#125;</span><br><span class="line">  /*è¿›å…¥çš„èµ·ç‚¹,ç¦»å¼€çš„ç»ˆç‚¹*/</span><br><span class="line">  .hello-enter,.hello-leave-to &#123;</span><br><span class="line">    transform: translateX(-100%);</span><br><span class="line">  &#125;</span><br><span class="line">  /*è¿›å…¥ï¼Œç¦»å¼€çš„è¿‡ç¨‹*/</span><br><span class="line">  .hello-enter-active,.hello-leave-active&#123;</span><br><span class="line">    transition: 1s;</span><br><span class="line">  &#125;</span><br><span class="line">  /*è¿›å…¥çš„ç»ˆç‚¹ï¼Œç¦»å¼€çš„èµ·ç‚¹*/</span><br><span class="line">  .hello-enter-to ,.hello-leave &#123;</span><br><span class="line">    transform: translateX(0);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"></a>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</h4><p>ä½¿ç”¨çš„æ˜¯animate.cssï¼š<a href="https://animate.style/">https://animate.style/</a></p><p>é¦–å…ˆä¸‹è½½åº“ <code>npm install animate.css --save</code></p><p>åœ¨<code> transition-group</code>ä¸­å¼•å…¥,scriptä¸­æ·»åŠ  <code>import &#39;animate.css&#39;</code></p><blockquote><p>ç¬¬ä¸‰è¡Œï¼šå¼•å…¥çš„animate.cssçš„æ ·å¼</p><p>ç¬¬å››è¡Œï¼šåœ¨animate.cssä¸­æ‰¾åˆ°çš„å‡ºç°åŠ¨ç”»æ ·å¼</p><p>ç¬¬äº”è¡Œï¼š ç¦»å¼€çš„åŠ¨ç”»æ ·å¼</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition-group</span><br><span class="line">                  :appear=&quot;true&quot;</span><br><span class="line">                  name=&quot;animate__animated animate__bounce&quot;</span><br><span class="line">                  enter-active-class=&quot;animate__backInDown&quot;</span><br><span class="line">                  leave-active-class=&quot;animate__backOutDown&quot;</span><br><span class="line">                  &gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot; key=&quot;1&quot;&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;!isShow&quot; key=&quot;2&quot;&gt;åŒ—äº¬&lt;/h1&gt;</span><br><span class="line">&lt;/transition-group&gt;</span><br></pre></td></tr></table></figure><h2 id="Vueä¸­çš„ajax"><a href="#Vueä¸­çš„ajax" class="headerlink" title="Vueä¸­çš„ajax"></a>Vueä¸­çš„ajax</h2><h3 id="Vueé…ç½®ä»£ç†"><a href="#Vueé…ç½®ä»£ç†" class="headerlink" title="Vueé…ç½®ä»£ç†"></a>Vueé…ç½®ä»£ç†</h3><p>ä½¿ç”¨axiosï¼Œä¸‹è½½ <code>npm i axios</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;getStudents&quot;&gt;è·å–å­¦ç”Ÿä¿¡æ¯&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;getCars&quot;&gt;è·å–æ±½è½¦ä¿¡æ¯&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  methods : &#123;</span><br><span class="line">    getStudents()&#123;</span><br><span class="line">      axios.get(&#x27;http://localhost:8080/api/students&#x27;).then(</span><br><span class="line">          response =&gt; &#123;</span><br><span class="line">            console.log(&#x27;è¯·æ±‚æˆåŠŸäº†&#x27;,response.data)</span><br><span class="line">          &#125;,</span><br><span class="line">          error =&gt; &#123;</span><br><span class="line">            console.log(&#x27;è¯·æ±‚å¤±è´¥äº†&#x27;,error.message)</span><br><span class="line">          &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">    getCars()&#123;</span><br><span class="line">      axios.get(&#x27;http://localhost:8080/foo/cars&#x27;).then(</span><br><span class="line">          response =&gt; &#123;</span><br><span class="line">            console.log(&#x27;è¯·æ±‚æˆåŠŸäº†&#x27;,response.data)</span><br><span class="line">          &#125;,</span><br><span class="line">          error =&gt; &#123;</span><br><span class="line">            console.log(&#x27;è¯·æ±‚å¤±è´¥äº†&#x27;,error.message)</span><br><span class="line">          &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="è§£å†³axiosçš„è·¨åŸŸé—®é¢˜ï¼š"><a href="#è§£å†³axiosçš„è·¨åŸŸé—®é¢˜ï¼š" class="headerlink" title="è§£å†³axiosçš„è·¨åŸŸé—®é¢˜ï¼š"></a>è§£å†³axiosçš„è·¨åŸŸé—®é¢˜ï¼š</h3><p>åœ¨vue.config.jsæ·»åŠ å¦‚ä¸‹ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">lintOnSave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//å¼€å¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ–¹å¼ä¸€ï¼‰</span></span><br><span class="line">    <span class="comment">// devServer: &#123;</span></span><br><span class="line">    <span class="comment">//     proxy: &#x27;http://localhost:5000&#x27;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// å¼€å¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ–¹å¼äºŒï¼‰</span></span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5000&#x27;</span>,</span><br><span class="line">                <span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/api&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,</span><br><span class="line">                <span class="attr">ws</span>: <span class="literal">true</span>, <span class="comment">// ç”¨äºæ”¯æŒwebsocket</span></span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>   <span class="comment">//  ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&#x27;/foo&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;http://localhost:5001&#x27;</span>,</span><br><span class="line">                <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/foo&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,</span><br><span class="line">                <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹å¼ä¸€ï¼š åªèƒ½å¼€å¯å•ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶æ˜¯å¦ä»£ç†</p><p>ä¸€èˆ¬ä½¿ç”¨æ–¹å¼äºŒ</p><h3 id="GitHubæ¡ˆä¾‹æ¼”ç¤º"><a href="#GitHubæ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="GitHubæ¡ˆä¾‹æ¼”ç¤º"></a>GitHubæ¡ˆä¾‹æ¼”ç¤º</h3><p>é™æ€èµ„æºåŒ…åœ¨å°šç¡…è°·çš„vueè§†é¢‘ä¸‹æ–¹é¢†å–  <a href="https://www.bilibili.com/video/BV1Zy4y1K7SH/?spm_id_from=333.337.search-card.all.click&vd_source=6d070e5f2a4f28fd128440195fce3d9a">è§†é¢‘</a></p><p>æ•°æ®æ¥å£åœ°å€ï¼ˆGitHubå…è´¹æä¾›çš„æ¥å£ï¼‰ï¼š<a href="https://api.github.com/search/users?q=xxx">https://api.github.com/search/users?q=xxx</a></p><h4 id="main-jsæ·»åŠ -bus"><a href="#main-jsæ·»åŠ -bus" class="headerlink" title="main.jsæ·»åŠ  $bus"></a>main.jsæ·»åŠ  $bus</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="App-Vue"><a href="#App-Vue" class="headerlink" title="App.Vue"></a>App.Vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;Search/&gt;</span><br><span class="line">    &lt;List/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import List from &quot;@/component/List&quot;;</span><br><span class="line">import Search from &quot;@/component/Search&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  components: &#123;Search, List&#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style &gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="Search-vue"><a href="#Search-vue" class="headerlink" title="Search.vue"></a>Search.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section class=&quot;jumbotron&quot;&gt;</span><br><span class="line">    &lt;h3 class=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; placeholder=&quot;enter the name you search&quot; v-model=&quot;keyword&quot;/&gt;&amp;nbsp;</span><br><span class="line">      &lt;button @click=&quot;searchUsers&quot;&gt;Search&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Search&quot;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      keyword:&#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    searchUsers()&#123;</span><br><span class="line">      this.$bus.$emit(&#x27;updateListData&#x27;,&#123;isFirst:false , isLoding:true,errMsg:&#x27;&#x27;,users:[]&#125;)</span><br><span class="line">      axios.get(`https://api.github.com/search/users?q=$&#123;this.keyword&#125;`).then(</span><br><span class="line">        response =&gt; &#123;</span><br><span class="line">          //è¯·æ±‚æˆåŠŸåæ›´æ–°listçš„æ•°æ®</span><br><span class="line">          this.$bus.$emit(&#x27;updateListData&#x27;,&#123; isLoding:false,errMsg:&#x27;&#x27;,users:response.data.items&#125;)</span><br><span class="line">          console.log(&#x27;è·å–&#x27;)</span><br><span class="line">        &#125;,</span><br><span class="line">          error =&gt; &#123;</span><br><span class="line">            //è¯·æ±‚å¤±è´¥åæ›´æ–°listçš„æ•°æ®</span><br><span class="line">            this.$bus.$emit(&#x27;updateListData&#x27;,&#123; isLoding:false,errMsg:error.message,users:[]&#125;)</span><br><span class="line">          &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="List-vue"><a href="#List-vue" class="headerlink" title="List.vue"></a>List.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">&lt;!--    å±•ç¤ºç”¨æˆ·åˆ—è¡¨--&gt;</span><br><span class="line">    &lt;div v-show=&quot;info.users.length&quot; class=&quot;card&quot; v-for=&quot;user in info.users&quot; :key=&quot;user.login&quot;&gt;</span><br><span class="line">      &lt;a :href=&quot;user.html_url&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;user.avatar_url&quot; style=&#x27;width: 100px&#x27;/&gt;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">      &lt;p class=&quot;card-text&quot;&gt;&#123;&#123;user.login&#125;&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;!--    å±•ç¤ºåŠ è½½ä¸­--&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;info.isLoding&quot;&gt;åŠ è½½ä¸­......&lt;/h1&gt;</span><br><span class="line">&lt;!--    å±•ç¤ºæ¬¢è¿è¯--&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;info.isFirst&quot;&gt;æ¬¢è¿ä½¿ç”¨&lt;/h1&gt;</span><br><span class="line">&lt;!--    å±•ç¤ºé”™è¯¯ä¿¡æ¯--&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;info.errMsg&quot; v-text=&quot;info.errMsg&quot;&gt;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;List&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        info:&#123;</span><br><span class="line">          users:[],</span><br><span class="line">          isFirst:true,</span><br><span class="line">          isLoding:false,</span><br><span class="line">          errMsg:&#x27;&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.$bus.$on(&#x27;updateListData&#x27;,(dataObj) =&gt; &#123;</span><br><span class="line">      console.log(&#x27;æˆ‘æ˜¯listç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®&#x27;,dataObj)</span><br><span class="line">      this.info = &#123;...this.info,...dataObj&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .album &#123;</span><br><span class="line">    min-height: 50rem; /* Can be removed; just added for demo purposes */</span><br><span class="line">    padding-top: 3rem;</span><br><span class="line">    padding-bottom: 3rem;</span><br><span class="line">    background-color: #f7f7f7;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .card &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 33.333%;</span><br><span class="line">    padding: .75rem;</span><br><span class="line">    margin-bottom: 2rem;</span><br><span class="line">    border: 1px solid #efefef;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .card &gt; img &#123;</span><br><span class="line">    margin-bottom: .75rem;</span><br><span class="line">    border-radius: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .card-text &#123;</span><br><span class="line">    font-size: 85%;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œç•Œé¢"><a href="#è¿è¡Œç•Œé¢" class="headerlink" title="è¿è¡Œç•Œé¢"></a>è¿è¡Œç•Œé¢</h4><p>åˆå§‹ç•Œé¢</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323225.png" alt="image-20220920223006433"></p><p>æœç´¢ç»“æœå‡ºæ¥ä¹‹å‰</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323785.png" alt="image-20220920222952661"></p><p>æœç´¢ç»“æœå‡ºæ¥å</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323449.png" alt="image-20220920222905099"></p><p>é”™è¯¯ä¿¡æ¯</p><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202209202231716.png" alt="image-20220920222919496"></p><h3 id="æ’æ§½"><a href="#æ’æ§½" class="headerlink" title="æ’æ§½"></a>æ’æ§½</h3><blockquote><p>ä½œç”¨ï¼šè®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ç»„ä»¶é€šè®¯çš„ä¸€ç§æ–¹å¼ï¼Œé€‚ç”¨äº çˆ¶ç»„ä»¶ &#x3D;&#x3D;&gt; å­ç»„ä»¶</p><p>åˆ†ç±»ï¼š é»˜è®¤æ’æ§½ï¼Œå…·åæ’æ§½ï¼Œä½œç”¨åŸŸæ’æ§½</p></blockquote><h4 id="é»˜è®¤æ’æ§½"><a href="#é»˜è®¤æ’æ§½" class="headerlink" title="é»˜è®¤æ’æ§½"></a>é»˜è®¤æ’æ§½</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;Category title=&quot;ç¾é£Ÿ&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;xxxx&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;h3 v-text=&quot;title + &#x27;åˆ†ç±»&#x27;&quot;&gt;&lt;/h3&gt;</span><br><span class="line">&lt;!--    å®šä¹‰ä¸€ä¸ªæ’æ§½ï¼Œè®©ç»„ä»¶çš„ä½¿ç”¨è€…è¿›è¡Œå¡«å……--&gt;</span><br><span class="line">    &lt;slot&gt;æˆ‘æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæœ‰å¡«å……ï¼Œæˆ‘å°±ä¸æ˜¾ç¤º&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a>å…·åæ’æ§½</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;Category title=&quot;ç”µå½±&quot;&gt;</span><br><span class="line">      &lt;video slot=&quot;center&quot; controls src=&quot;xxxxx&quot;&gt;&lt;/video&gt;</span><br><span class="line">      &lt;template v-slot:footer&gt;</span><br><span class="line">        &lt;div class=&quot;foot&quot;&gt;</span><br><span class="line">          &lt;a  href=&quot;xxxx&quot;&gt;ç»å…¸&lt;/a&gt;</span><br><span class="line">          &lt;a  href=&quot;xxxx&quot;&gt;çƒ­é—¨&lt;/a&gt;</span><br><span class="line">          &lt;a  href=&quot;xxxx&quot;&gt;æ¨è&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;h4 &gt;&lt;/h4&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;h3 v-text=&quot;title + &#x27;åˆ†ç±»&#x27;&quot;&gt;&lt;/h3&gt;</span><br><span class="line">&lt;!--    å®šä¹‰ä¸€ä¸ªæ’æ§½ï¼Œè®©ç»„ä»¶çš„ä½¿ç”¨è€…è¿›è¡Œå¡«å……--&gt;</span><br><span class="line">    &lt;slot name=&quot;center&quot;&gt;æˆ‘æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæœ‰å¡«å……ï¼Œæˆ‘å°±ä¸æ˜¾ç¤º&lt;/slot&gt;</span><br><span class="line">    &lt;slot name=&quot;footer&quot;&gt;æˆ‘æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæœ‰å¡«å……ï¼Œæˆ‘å°±ä¸æ˜¾ç¤º&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h4><blockquote><p>æ•°æ®åœ¨å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„åˆç»„ä»¶çš„ä½¿ç”¨è€…å†³å®šï¼ˆgamesæ•°æ®åœ¨Categoryç»„ä»¶ä¸­ï¼Œä½†æ˜¯ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±appç»„ä»¶å†³å®šï¼‰</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;Category title=&quot;æ¸¸æˆ&quot;&gt;</span><br><span class="line">      &lt;template scope=&quot;category&quot;&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;(item,index) in category.games&quot; :key=&quot;index&quot; v-text=&quot;item&quot;&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Category title=&quot;æ¸¸æˆ&quot;&gt;</span><br><span class="line">      &lt;template scope=&quot;&#123;games&#125;&quot;&gt;</span><br><span class="line">        &lt;ol&gt;</span><br><span class="line">          &lt;li v-for=&quot;(item,index) in games&quot; :key=&quot;index&quot; v-text=&quot;item&quot;&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ol&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;h3 v-text=&quot;title + &#x27;åˆ†ç±»&#x27;&quot;&gt;&lt;/h3&gt;</span><br><span class="line">&lt;!--    å®šä¹‰ä¸€ä¸ªæ’æ§½ï¼Œè®©ç»„ä»¶çš„ä½¿ç”¨è€…è¿›è¡Œå¡«å……--&gt;</span><br><span class="line">    &lt;slot :games = &quot;games&quot; &gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><blockquote><p>ä½¿ç”¨Vuex</p><ul><li>npm i vuex</li><li>Vue.use(Vuex)</li><li>store</li><li>vc &#x3D;&#x3D;&gt; store</li></ul></blockquote><h3 id="æ­å»ºvueç¯å¢ƒ"><a href="#æ­å»ºvueç¯å¢ƒ" class="headerlink" title="æ­å»ºvueç¯å¢ƒ"></a>æ­å»ºvueç¯å¢ƒ</h3><blockquote><p>ä¸‹è½½vuex</p></blockquote><p><code>npm i vuex</code></p><blockquote><p>ä½¿ç”¨vuex</p></blockquote><p>åœ¨srcä¸‹é¢åˆ›å»ºä¸€ä¸ªstoreæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ï¼Œindexæ–‡ä»¶ç”¨æ¥å†™vuexæ ¸å¿ƒçš„storeé…ç½® <code>/src/store/index.js</code></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323949.png" alt="image-20220922084339586"></p><blockquote><p>index.jså†…å®¹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºvuexæœ€æ ¸å¿ƒçš„store</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•å…¥vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡†å¤‡actionsï¼Œç”¨äºæƒ³ç”¨ç»„ä»¶ä¸­çš„åŠ¨ä½œ</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="comment">// å‡†å¤‡mutationsï¼Œç”¨äºæ“ä½œæ•°æ®ï¼ˆstateï¼‰</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="comment">// å‡†å¤‡stateï¼Œç”¨äºå­˜å‚¨æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ² store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨main.jsä¸­ä½¿ç”¨store</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//å¯¼å…¥vuexçš„store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;@/store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">  store,  <span class="comment">// å¼•å…¥vuexä¸­çš„store</span></span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="vuexçš„åŸºæœ¬ä½¿ç”¨"><a href="#vuexçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="vuexçš„åŸºæœ¬ä½¿ç”¨"></a>vuexçš„åŸºæœ¬ä½¿ç”¨</h3><p>åˆå§‹åŒ–æ•°æ®ï¼Œé…ç½®actionsï¼Œé…ç½®mutationsï¼Œæ“ä½œæ–‡ä»¶store.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºvuexæœ€æ ¸å¿ƒçš„store</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•å…¥vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡†å¤‡actionsï¼Œç”¨äºæƒ³ç”¨ç»„ä»¶ä¸­çš„åŠ¨ä½œ</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="title function_">jiaOdd</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>)&#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">jiaWait</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">        &#125;,<span class="number">500</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡†å¤‡mutationsï¼Œç”¨äºæ“ä½œæ•°æ®ï¼ˆstateï¼‰</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="title function_">JIA</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">        state.<span class="property">sum</span> += value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">JIAN</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">        state.<span class="property">sum</span> -= value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡†å¤‡stateï¼Œç”¨äºå­˜å‚¨æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="attr">sum</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ² store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­è¯»å–vuexä¸­çš„æ•°æ®ï¼š<code>$store.state.sum</code></p><p>ç»„ä»¶ä¸­ä¿®æ”¹vuexä¸­çš„æ•°æ®ï¼š<code>$store.dispatch(&#39;actionä¸­çš„æ–¹æ³•å&#39;,æ•°æ®) </code>æˆ– <code>$store.commit(&#39;mutationsä¸­çš„æ–¹æ³•å&#39;,æ•°æ®)</code></p><blockquote><p>å¤‡æ³¨ï¼šè‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­å¯ä»¥ç›´æ¥è¶Šè¿‡actionsï¼Œå³ç›´æ¥ç¼–å†™commit</p></blockquote><h3 id="gettersçš„ä½¿ç”¨"><a href="#gettersçš„ä½¿ç”¨" class="headerlink" title="gettersçš„ä½¿ç”¨"></a>gettersçš„ä½¿ç”¨</h3><blockquote><p>å½“stateä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨åï¼Œå¯ä»¥ä½¿ç”¨gettersåŠ å·¥</p></blockquote><p>åœ¨<code>store.js</code>ä¸­è¿½åŠ <code>getters</code>é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡†å¤‡gettersï¼Œç”¨äºå°†stateä¸­çš„æ•°æ®è¿›è¡ŒåŠ å·¥</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">    <span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ² store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">.......</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­è¯»å–æ•°æ® <code>$store.getters.bigSum</code></p><h3 id="å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨"><a href="#å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨" class="headerlink" title="å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨"></a>å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨</h3><ol><li><p><strong>mapStateæ–¹æ³•</strong>ï¼š ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„<code>state</code>ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼Œä»stateä¸­è¯»å–æ•°æ®  å¯¹è±¡å†™æ³•</span></span><br><span class="line">    <span class="comment">// ...mapState(&#123;sum:&#x27;sum&#x27;,school:&#x27;school&#x27;,subject:&#x27;subject&#x27;&#125;),</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼Œä»stateä¸­è¯»å–æ•°æ®  æ•°ç»„å†™æ³•</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapGettersæ–¹æ³•</strong>ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„<code>getters</code>ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼Œä»Gettersä¸­è¯»å–æ•°æ®  å¯¹è±¡å†™æ³•</span></span><br><span class="line">    <span class="comment">// ...mapGetters(&#123;bigSum:&#x27;bigSum&#x27;&#125;),</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼Œä»Gettersä¸­è¯»å–æ•°æ®  æ•°ç»„å†™æ³•</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapActionsæ–¹æ³•</strong>ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆå’Œ <code>actions</code>å¯¹è¯çš„æ–¹æ³•ï¼Œå³åŒ…å«<code>$store.dispatch(xxx)</code>çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapActionsç”Ÿæˆå¯¹åº”çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¸­è°ƒç”¨dispatchå»è”ç³»Actions  å¯¹è±¡å†™æ³•</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>(&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapActionsç”Ÿæˆå¯¹åº”çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¸­è°ƒç”¨dispatchå»è”ç³»Actions  æ•°ç»„å†™æ³•</span></span><br><span class="line">    <span class="comment">// ...mapActions([&#x27;jiaOdd&#x27;,&#x27;jiaWait&#x27;]),</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>mapMutationsæ–¹æ³•</strong>ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸<code>mutations</code>å¯¹è¯çš„æ–¹æ³•ï¼Œå³åŒ…å«<code>$store.commie(xxxx)</code>çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapMutataionsç”Ÿæˆå¯¹åº”çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¸­è°ƒç”¨commitå»è”ç³»mutations  å¯¹è±¡å†™æ³•</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€ŸåŠ©mapMutataionsç”Ÿæˆå¯¹åº”çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¸­è°ƒç”¨commitå»è”ç³»mutations  æ•°ç»„å†™æ³•</span></span><br><span class="line">    <span class="comment">// ...mapMutations([&#x27;JIA&#x27;,&#x27;JIAN&#x27;]),</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨ï¼š mapActionså’ŒmapMutationsä½¿ç”¨æ—¶ï¼Œè‹¥æ˜¯ä¼ é€’å‚æ•°éœ€è¦ï¼Œåœ¨æ¨¡æ¿çš„ç»‘å®šæ—¶é—´æ˜¯ä¼ é€’å¥½å‚æ•°ï¼Œå¦åˆ™å‚æ•°æ˜¯äº‹ä»¶å¯¹è±¡</p></blockquote><h3 id="æ¨¡å—åŒ–-å‘½åç©ºé—´"><a href="#æ¨¡å—åŒ–-å‘½åç©ºé—´" class="headerlink" title="æ¨¡å—åŒ–+å‘½åç©ºé—´"></a>æ¨¡å—åŒ–+å‘½åç©ºé—´</h3><blockquote><p>ç›®çš„ï¼šä¸ºäº†è®©ä»£ç æ›´å¥½ç»´æŠ¤</p></blockquote><h4 id="å…·ä½“ä½¿ç”¨"><a href="#å…·ä½“ä½¿ç”¨" class="headerlink" title="å…·ä½“ä½¿ç”¨"></a>å…·ä½“ä½¿ç”¨</h4><h4 id="ä¿®æ”¹store-js"><a href="#ä¿®æ”¹store-js" class="headerlink" title="ä¿®æ”¹store.js"></a>ä¿®æ”¹store.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºvuexæœ€æ ¸å¿ƒçš„store</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•å…¥vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚å’ŒåŠŸèƒ½ç›¸å…³çš„é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> countOptions = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">actions</span>:&#123;</span><br><span class="line">        <span class="title function_">jiaOdd</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>)&#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">jiaWait</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">            &#125;,<span class="number">500</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;</span><br><span class="line">        <span class="title function_">JIA</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAN</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">            state.<span class="property">sum</span> -= value</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">sum</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">school</span>:<span class="string">&#x27;åµ©é˜³é«˜ä¸­&#x27;</span>,</span><br><span class="line">        <span class="attr">subject</span>:<span class="string">&#x27;å‰ç«¯&#x27;</span>,&#125;,</span><br><span class="line">    <span class="attr">getters</span>:&#123;</span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äººå‘˜ç®¡ç†ç›¸å…³é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> personOptions = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">actions</span>:&#123;</span><br><span class="line">        <span class="title function_">addPresonWang</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(value.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;ç‹&#x27;</span>) === <span class="number">0</span>)&#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD_PERSON&#x27;</span>,value)</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªå§“ç‹çš„äºº&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;</span><br><span class="line">        <span class="title function_">ADD_PERSON</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">            state.<span class="property">personList</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">personList</span>:[</span><br><span class="line">            &#123;<span class="attr">id</span>:<span class="string">&#x27;001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>:&#123;</span><br><span class="line">        <span class="title function_">firstPersonName</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">personList</span>[<span class="number">0</span>].<span class="property">name</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ² store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>:&#123;</span><br><span class="line">        <span class="attr">countAbout</span>:countOptions,</span><br><span class="line">        <span class="attr">personAbout</span>:personOptions,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„å¼€å¯å‘½åç©ºé—´ <code>namespaced:true,</code></p></blockquote><h4 id="ç»„ä»¶è·å–æ•°æ®"><a href="#ç»„ä»¶è·å–æ•°æ®" class="headerlink" title="ç»„ä»¶è·å–æ•°æ®"></a>ç»„ä»¶è·å–æ•°æ®</h4><ol><li>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶è¯»å–stateæ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼Œç›´æ¥è‡ªå·±è¯»å–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">personList</span></span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼Œå€ŸåŠ©mapStateè¯»å–</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;school&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]),</span><br></pre></td></tr></table></figure><ol start="2"><li>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶è¯»å–gettersæ•°æ®</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼Œç›´æ¥è‡ªå·±è¯»å–</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&#x27;personAbout/firstPersonName&#x27;</span>]</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼Œå€ŸåŠ©mapGettersè¯»å–</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure><ol start="3"><li>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶è°ƒç”¨dispatch</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼Œç›´æ¥è‡ªå·±dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;personAbout/addPresonWang&#x27;</span>,personObj)</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼Œå€ŸåŠ©mapActionsè¯»å–</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure><ol start="4"><li>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶è°ƒç”¨commit</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼Œç›´æ¥è‡ªå·±commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>,personObj)</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼Œå€ŸåŠ©mapMutationsè¯»å–</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure><h4 id="storeç»„ä»¶åŒ–æ¡ˆä¾‹"><a href="#storeç»„ä»¶åŒ–æ¡ˆä¾‹" class="headerlink" title="storeç»„ä»¶åŒ–æ¡ˆä¾‹"></a>storeç»„ä»¶åŒ–æ¡ˆä¾‹</h4><h5 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;@/store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">  store,</span><br><span class="line">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;Count/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;Person/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Count from &quot;@/component/Count&quot;;</span><br><span class="line">import Person from &quot;@/component/Person&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  components: &#123;Count,Person&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Count-vue"><a href="#Count-vue" class="headerlink" title="Count.vue"></a>Count.vue</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;h3&gt;æ”¾å¤§åå€&#123;&#123;bigSum&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;æˆ‘åœ¨&#123;&#123;school&#125;&#125;,å­¦ä¹ &#123;&#123;subject&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;ä¸‹æ–¹ç»„ä»¶çš„æ€»äººæ•°ï¼š&#123;&#123;personList.length&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;select v-model.number=&quot;n&quot; name=&quot;&quot; id=&quot;&quot;&gt;</span><br><span class="line">      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;button @click=&quot;increment(n)&quot;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement(n)&quot;&gt;-&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;incrementOdd(n)&quot;&gt;å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ &lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;incrementWait(n)&quot;&gt;ç­‰ä¸€ç­‰å†åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState,mapGetters,mapMutations,mapActions&#125; from &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Count&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      n:1,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">    ...mapState(&#x27;countAbout&#x27;,[&#x27;sum&#x27;,&#x27;school&#x27;,&#x27;subject&#x27;]),</span><br><span class="line">    ...mapState(&#x27;personAbout&#x27;,[&#x27;personList&#x27;]),</span><br><span class="line">    ...mapGetters(&#x27;countAbout&#x27;,[&#x27;bigSum&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    ...mapMutations(&#x27;countAbout&#x27;,&#123;increment:&#x27;JIA&#x27;,decrement:&#x27;JIAN&#x27;&#125;),</span><br><span class="line">    ...mapActions(&#x27;countAbout&#x27;,&#123;incrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">button &#123;</span><br><span class="line">  margin-left: 5px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h5 id="Person-vue"><a href="#Person-vue" class="headerlink" title="Person.vue"></a>Person.vue</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;äººå‘˜åˆ—è¡¨&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;ä¸Šæ–¹çš„ç»„ä»¶æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªäººçš„åå­—ï¼š&#123;&#123;firstPersonName&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥åå­—&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;æ·»åŠ &lt;/button&gt;</span><br><span class="line">&lt;!--    ä½¿ç”¨mapMutationsä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼Œåœ¨dataä¸­åˆ›å»ºä¸€ä¸ªidï¼Œå¹¶ä¸”æ”¾ä¸Šåå­—--&gt;</span><br><span class="line">&lt;!--    &lt;button @click=&quot;add(&#123;id:id,name:name&#125;)&quot;&gt;æ·»åŠ &lt;/button&gt;--&gt;</span><br><span class="line">    &lt;button @click=&quot;wang&quot;&gt;æ·»åŠ ä¸€ä¸ªå§“ç‹çš„äºº&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;addPersonServer&quot;&gt;éšæœºæ·»åŠ ä¸€ä¸ªå§“ç‹çš„äºº&lt;/button&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;(p) in personList&quot; v-text=&quot;p.name&quot; :key=&quot;p.id&quot;&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// import &#123;mapMutations&#125; from &quot;vuex&quot;;</span><br><span class="line">import &#123;nanoid&#125; from &quot;nanoid&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Person&quot;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name:&#x27;&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">    // ...mapState(&#x27;personAbout&#x27;,[&#x27;personList&#x27;]),</span><br><span class="line">    // ...mapState(&#x27;countAbout&#x27;,[&#x27;sum&#x27;]),</span><br><span class="line">    //</span><br><span class="line">    sum()&#123;</span><br><span class="line">      return this.$store.state.countAbout.sum</span><br><span class="line">    &#125;,</span><br><span class="line">    personList()&#123;</span><br><span class="line">      return this.$store.state.personAbout.personList</span><br><span class="line">    &#125;,</span><br><span class="line">    firstPersonName() &#123;</span><br><span class="line">      return this.$store.getters[&#x27;personAbout/firstPersonName&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    add()&#123;</span><br><span class="line">      const personObj = &#123;id:nanoid(),name:this.name&#125;</span><br><span class="line">      this.$store.commit(&#x27;personAbout/ADD_PERSON&#x27;,personObj)</span><br><span class="line">      this.name = &#x27;&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // ...mapMutations(&#x27;personAbout&#x27;,&#123;add:&#x27;ADD_PERSON&#x27;&#125;),</span><br><span class="line"></span><br><span class="line">    wang()&#123;</span><br><span class="line">      const personObj = &#123;id:nanoid(),name:this.name&#125;</span><br><span class="line">      console.log(personObj)</span><br><span class="line">      this.$store.dispatch(&#x27;personAbout/addPresonWang&#x27;,personObj)</span><br><span class="line">      this.name = &#x27;&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    addPersonServer() &#123;</span><br><span class="line">      this.$store.dispatch(&#x27;personAbout/addPersonServer&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  li &#123;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h5 id="storeæ–‡ä»¶å¤¹ä¸‹çš„index-js"><a href="#storeæ–‡ä»¶å¤¹ä¸‹çš„index-js" class="headerlink" title="storeæ–‡ä»¶å¤¹ä¸‹çš„index.js"></a>storeæ–‡ä»¶å¤¹ä¸‹çš„index.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºvuexæœ€æ ¸å¿ƒçš„store</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•å…¥vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&quot;@/store/count&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> person <span class="keyword">from</span> <span class="string">&quot;@/store/person&quot;</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¹¶æš´éœ² store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>:&#123;</span><br><span class="line">        <span class="attr">countAbout</span>:count,</span><br><span class="line">        <span class="attr">personAbout</span>:person,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="storeæ–‡ä»¶å¤¹ä¸‹çš„count-js"><a href="#storeæ–‡ä»¶å¤¹ä¸‹çš„count-js" class="headerlink" title="storeæ–‡ä»¶å¤¹ä¸‹çš„count.js"></a>storeæ–‡ä»¶å¤¹ä¸‹çš„count.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ±‚å’ŒåŠŸèƒ½ç›¸å…³çš„é…ç½®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">actions</span>:&#123;</span><br><span class="line">        <span class="title function_">jiaOdd</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>)&#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">jiaWait</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">            &#125;,<span class="number">500</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;</span><br><span class="line">        <span class="title function_">JIA</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">            state.<span class="property">sum</span> += value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">JIAN</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">            state.<span class="property">sum</span> -= value</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">sum</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">school</span>:<span class="string">&#x27;åµ©é˜³é«˜ä¸­&#x27;</span>,</span><br><span class="line">        <span class="attr">subject</span>:<span class="string">&#x27;å‰ç«¯&#x27;</span>,&#125;,</span><br><span class="line">    <span class="attr">getters</span>:&#123;</span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="storeæ–‡ä»¶å¤¹ä¸‹çš„person-js"><a href="#storeæ–‡ä»¶å¤¹ä¸‹çš„person-js" class="headerlink" title="storeæ–‡ä»¶å¤¹ä¸‹çš„person.js"></a>storeæ–‡ä»¶å¤¹ä¸‹çš„person.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äººå‘˜ç®¡ç†ç›¸å…³é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&quot;nanoid&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">actions</span>:&#123;</span><br><span class="line">        <span class="title function_">addPresonWang</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(value.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;ç‹&#x27;</span>) === <span class="number">0</span>)&#123;</span><br><span class="line">                context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD_PERSON&#x27;</span>,value)</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªå§“ç‹çš„äºº&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">addPersonServer</span>(<span class="params">context</span>)&#123;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uixsj.cn/hitokoto/get?type=social&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">                <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">                    context.<span class="title function_">commit</span>(<span class="string">&#x27;ADD_PERSON&#x27;</span>,&#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),<span class="attr">name</span>:response.<span class="property">data</span>&#125;)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(error.<span class="property">message</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;</span><br><span class="line">        <span class="title function_">ADD_PERSON</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">            state.<span class="property">personList</span>.<span class="title function_">unshift</span>(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">personList</span>:[</span><br><span class="line">            &#123;<span class="attr">id</span>:<span class="string">&#x27;001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>:&#123;</span><br><span class="line">        <span class="title function_">firstPersonName</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">personList</span>[<span class="number">0</span>].<span class="property">name</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><p>æ˜¯vueçš„ä¸€ä¸ªæ’ä»¶åº“ <code>npm i vue-router</code></p><blockquote><p>ä»€ä¹ˆæ˜¯è·¯ç”±ï¼šä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»</p></blockquote><h3 id="åŸºæœ¬è·¯ç”±"><a href="#åŸºæœ¬è·¯ç”±" class="headerlink" title="åŸºæœ¬è·¯ç”±"></a>åŸºæœ¬è·¯ç”±</h3><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><ol><li><p>å®‰è£…vue-routerï¼Œå‘½ä»¤ <code>npm i vue-router</code></p></li><li><p>åº”ç”¨æ’ä»¶ï¼š<code>Vue.use(VueRouter)</code></p></li><li><p>ç¼–å†™routeré…ç½®é¡¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨</span></span><br><span class="line"><span class="comment">// å¼•å…¥ VueRouter</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="comment">//å¼•å…¥ ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&quot;@/component/About&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/component/Home&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å®ç°åˆ‡æ¢ï¼ˆactive-class å¯ä»¥è®¾ç½®é«˜äº®æ ·å¼ï¼‰</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="5"><li>æŒ‡å®šå±•ç¤ºä½ç½®</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å‡ ä¸ªæ³¨æ„ç‚¹"><a href="#å‡ ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="å‡ ä¸ªæ³¨æ„ç‚¹"></a>å‡ ä¸ªæ³¨æ„ç‚¹</h3><ul><li>è·¯ç”±ç»„ä»¶ä¸€èˆ¬æ”¾åœ¨<code>page</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ä¸­</li><li>é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«é”€æ¯çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½</li><li>æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„<code>$route</code>å±æ€§ï¼Œé‡Œé¢å­˜å‚¨è‡ªå·±å¾—è·¯ç”±ä¿¡æ¯</li><li>æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªrouterï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„ <code>$router</code> å±æ€§è·å–åˆ°</li></ul><h3 id="åµŒå¥—è·¯ç”±"><a href="#åµŒå¥—è·¯ç”±" class="headerlink" title="åµŒå¥—è·¯ç”±"></a>åµŒå¥—è·¯ç”±</h3><p>é…ç½®å¤šçº§è·¯ç”±ä½¿ç”¨childrené…ç½®é¡¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨</span></span><br><span class="line"><span class="comment">// å¼•å…¥è·¯ç”±</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/About&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/Home&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/News&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Message</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/Message&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">Home</span>,</span><br><span class="line">            <span class="attr">children</span>:[</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>:<span class="title class_">News</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">path</span>:<span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>:<span class="title class_">Message</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home/news&quot;</span>  &gt;</span>News<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±ä¼ å‚"><a href="#è·¯ç”±ä¼ å‚" class="headerlink" title="è·¯ç”±ä¼ å‚"></a>è·¯ç”±ä¼ å‚</h3><h4 id="queryä¼ å‚"><a href="#queryä¼ å‚" class="headerlink" title="queryä¼ å‚"></a>queryä¼ å‚</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;m in messageList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;m.id&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼ˆä¸å»ºè®®ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/home/message/Detail?id=$&#123;m.id&#125;&amp;title=$&#123;m.title&#125;`&quot;</span>&gt;</span>&#123;&#123;m.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      path:&#x27;/home/message/Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                      query:&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      id:m.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                      title:m.title</span></span></span><br><span class="line"><span class="string"><span class="tag">                      &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      &#125;&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;m.title&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥æ”¶å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.<span class="property">query</span>.<span class="property">id</span></span><br><span class="line">$route.<span class="property">query</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure><h4 id="å‘½åè·¯ç”±"><a href="#å‘½åè·¯ç”±" class="headerlink" title="å‘½åè·¯ç”±"></a>å‘½åè·¯ç”±</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>:<span class="title class_">Home</span>,</span><br><span class="line">            <span class="attr">children</span>:[</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">path</span>:<span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>:<span class="title class_">Message</span>,</span><br><span class="line">                    <span class="attr">children</span>:[</span><br><span class="line">                        &#123; </span><br><span class="line">                            <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>, <span class="comment">// ç»™è·¯ç”±å‘½å</span></span><br><span class="line">                            <span class="attr">path</span>:<span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">                            <span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å‘½åçš„è·¯ç”±ï¼Œ<code>to</code>ä¸€å®šè¦æ¢ä¸º <code>:to</code>ï¼Œä½¿ç”¨<code>name:&#39;xiangqing&#39;</code>å³å¯è®¾ç½®è·³è½¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link </span><br><span class="line">       :to=&quot;&#123; </span><br><span class="line">           name:&#x27;xiangqing&#x27;,  &lt;!--ä½¿ç”¨è¿™ä¸ªnameè¿›è¡Œè·³è½¬--&gt;</span><br><span class="line">           query:&#123;</span><br><span class="line">               id:m.id,</span><br><span class="line">               title:m.title</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;&quot;&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h4 id="paramsä¼ å‚"><a href="#paramsä¼ å‚" class="headerlink" title="paramsä¼ å‚"></a>paramsä¼ å‚</h4><p>é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥å—paramså‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span>,</span><br><span class="line">        <span class="attr">children</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="title class_">News</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>:<span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="title class_">Message</span>,</span><br><span class="line">                <span class="attr">children</span>:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">                        <span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title&#x27;</span>, <span class="comment">//ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥å—paramså‚æ•°</span></span><br><span class="line">                        <span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br></pre></td></tr></table></figure><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--è·³è½¬è·¯ç”±å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³•--&gt;</span><br><span class="line">&lt;!--&lt;router-link :to=&quot;`/home/message/Detail/$&#123;m.id&#125;/$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--è·³è½¬è·¯ç”±å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³•--&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;</span><br><span class="line">                  name:&#x27;xiangqing&#x27;,</span><br><span class="line">                  params:&#123;</span><br><span class="line">                  id:m.id,</span><br><span class="line">                  title:m.title</span><br><span class="line">                  &#125;</span><br><span class="line">                  &#125;&quot;&gt;</span><br></pre></td></tr></table></figure><p>æ¥æ”¶å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$route.params.id</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè·¯ç”±åˆparamsä¼ é€’å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨toçš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨pathé…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨nameé…ç½®</p></blockquote><h4 id="è·¯ç”±çš„propsé…ç½®"><a href="#è·¯ç”±çš„propsé…ç½®" class="headerlink" title="è·¯ç”±çš„propsé…ç½®"></a>è·¯ç”±çš„propsé…ç½®</h4><blockquote><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´åŠ æ–¹ä¾¿çš„æ”¶é›†å‚æ•°</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">                <span class="comment">//propsçš„ç¬¬ä¸€ç§å†™æ³•ï¼Œå€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰key-valueéƒ½ä¼šä»¥propsçš„å½¢å¼ä¼ ç»™Detailç»„ä»¶,ä¸€èˆ¬ä¸ç”¨</span></span><br><span class="line">                <span class="comment">// props:&#123;a:1,b:&#x27;hello&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//propsçš„ç¬¬äºŒç§å†™æ³•ï¼Œå€¼ä¸ºå¸ƒå°”å€¼ï¼Œè‹¥å¸ƒå°”å€¼ä¸ºçœŸï¼Œå°±ä¼šæŠŠè¯¥è·¯ç”±ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°ï¼Œä»¥propsçš„å½¢å¼ä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">                <span class="comment">// props:true</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//propsçš„ç¬¬ä¸‰ç§å†™æ³•ï¼Œå€¼ä¸ºå‡½æ•°</span></span><br><span class="line">                <span class="title function_">props</span>(<span class="params">$route</span>)&#123;</span><br><span class="line">                  <span class="keyword">return</span> &#123;</span><br><span class="line">                      <span class="attr">id</span>:$route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">                      <span class="attr">title</span>:$route.<span class="property">query</span>.<span class="property">title</span></span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ç»“æ„èµ‹å€¼</span></span><br><span class="line">                <span class="comment">// props(&#123;query&#125;)&#123;</span></span><br><span class="line">                <span class="comment">// return &#123;</span></span><br><span class="line">                <span class="comment">//     id: query.id,</span></span><br><span class="line">                <span class="comment">//     title : query.title</span></span><br><span class="line">                <span class="comment">// &#125;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"><a href="#ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª" class="headerlink" title="ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"></a>ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª</h3><blockquote><p>ä½œç”¨ï¼šä¸å€ŸåŠ© <code>router-link</code>å®ç°è·¯ç”±çš„è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»</p></blockquote><p>å…·ä½“ç¼–ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $outerçš„ä¸¤ä¸ªAPI</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">query</span>:&#123;</span><br><span class="line">        <span class="attr">id</span>:m.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">title</span>:m.<span class="property">title</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">query</span>:&#123;</span><br><span class="line">        <span class="attr">id</span>:m.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">title</span>:m.<span class="property">title</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">forward</span>()  <span class="comment">// å‰è¿›</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>();  <span class="comment">// åé€€</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(<span class="number">2</span>);  <span class="comment">// å¯å‰è¿›å¯åé€€</span></span><br></pre></td></tr></table></figure><h3 id="ç¼“å­˜è·¯ç”±ç»„ä»¶"><a href="#ç¼“å­˜è·¯ç”±ç»„ä»¶" class="headerlink" title="ç¼“å­˜è·¯ç”±ç»„ä»¶"></a>ç¼“å­˜è·¯ç”±ç»„ä»¶</h3><blockquote><p>ä½œç”¨ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚åœ¨ï¼Œä¸è¢«é”€æ¯</p></blockquote><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ç¼“å­˜ä½¿ç”¨çš„æ˜¯ç»„ä»¶å--&gt;</span><br><span class="line">&lt;keep-alive include=&quot;News&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç¼“å­˜å¤šä¸ªç»„ä»¶,ä½¿ç”¨æ•°ç»„--&gt;</span><br><span class="line">&lt;keep-alive :include=&quot;[&#x27;News&#x27;,&#x27;Message&#x27;]&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±çš„ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#è·¯ç”±çš„ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="è·¯ç”±çš„ç”Ÿå‘½å‘¨æœŸé’©å­"></a>è·¯ç”±çš„ç”Ÿå‘½å‘¨æœŸé’©å­</h3><blockquote><p>ä½œç”¨ï¼šè·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€</p></blockquote><p>å…·ä½“åå­—ï¼š</p><ol><li><code>activated</code>è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘</li><li><code>deactivated</code>è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘</li></ol><h3 id="è·¯ç”±å®ˆå«"><a href="#è·¯ç”±å®ˆå«" class="headerlink" title="è·¯ç”±å®ˆå«"></a>è·¯ç”±å®ˆå«</h3><blockquote><p>ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶</p><p>åˆ†ç±»ï¼šå…¨å±€å®ˆå«ï¼Œç‹¬äº«å®ˆå«ï¼Œç»„ä»¶å†…å®ˆå«</p></blockquote><h4 id="å…¨å±€å®ˆå«"><a href="#å…¨å±€å®ˆå«" class="headerlink" title="å…¨å±€å®ˆå«"></a>å…¨å±€å®ˆå«</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å‰ç½®è·¯ç”±å®ˆå«ï¼Œæ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line"><span class="comment">// to ç›®æ ‡è·¯ç”±  from æ¥è‡ªå“ªä¸ªè·¯ç”± ï¼Œ next æ”¾è¡Œ</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>)&#123;  <span class="comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´å®šæƒé™</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;åµ©é˜³é«˜ä¸­&#x27;</span>)&#123;</span><br><span class="line">            <span class="title function_">next</span>()</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;æ— æƒé™è®¿é—®&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®è·¯ç”±å®ˆå« ,æ¯æ¬¡è·¯ç”±åˆ‡æ¢åè¢«è°ƒç”¨</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> || <span class="string">&#x27;ç¡…è°·ç³»ç»Ÿ&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="ç‹¬äº«å®ˆå«"><a href="#ç‹¬äº«å®ˆå«" class="headerlink" title="ç‹¬äº«å®ˆå«"></a>ç‹¬äº«å®ˆå«</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>:[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">        <span class="attr">meta</span>:&#123;<span class="attr">title</span>:<span class="string">&#x27;æ–°é—»&#x27;</span>,<span class="attr">isAuth</span>:<span class="literal">true</span>&#125;,</span><br><span class="line">        <span class="attr">beforeEnter</span>:(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>)&#123;  <span class="comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´å®šæƒé™</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;school&#x27;</span>) === <span class="string">&#x27;åµ©é˜³é«˜ä¸­&#x27;</span>)&#123;</span><br><span class="line">                    <span class="title function_">next</span>()</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">alert</span>(<span class="string">&#x27;æ— æƒé™è®¿é—®&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">next</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶å†…å®ˆå«"><a href="#ç»„ä»¶å†…å®ˆå«" class="headerlink" title="ç»„ä»¶å†…å®ˆå«"></a>ç»„ä»¶å†…å®ˆå«</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡è·¯ç”±è§„åˆ™è¿›å…¥è¯¥ç»„ä»¶æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="title function_">beforeRouteEnter</span>(<span class="params">to,<span class="keyword">from</span>, next</span>)&#123;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// é€šè¿‡è·¯ç”±è§„åˆ™ç¦»å¼€è¯¥ç»„ä»¶æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span> ,next</span>)&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±å™¨å·¥ä½œçš„ä¸¤ç§æ–¹å¼"><a href="#è·¯ç”±å™¨å·¥ä½œçš„ä¸¤ç§æ–¹å¼" class="headerlink" title="è·¯ç”±å™¨å·¥ä½œçš„ä¸¤ç§æ–¹å¼"></a>è·¯ç”±å™¨å·¥ä½œçš„ä¸¤ç§æ–¹å¼</h3><ol><li>hashæ¨¡å¼<ol><li>åœ°å€ä¸­æ°¸è¿œå¸¦ç€ # å·ï¼Œä¸ç¾è§‚</li><li>ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•</li><li>å…¼å®¹æ€§å¥½</li></ol></li><li>historyæ¨¡å¼<ol><li>åœ°å€å¹²å‡€ï¼Œç¾è§‚</li><li>å…¼å®¹æ€§å’Œhashæ¨¡å¼ç›¸æ¯”ç•¥å·®</li><li>åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜çš„æ”¯æŒï¼Œè§£å†³åˆ·æ–°ç•Œé¢æœåŠ¡404çš„é—®é¢˜</li></ol></li></ol><h2 id="Vue-UI-ç»„ä»¶åº“"><a href="#Vue-UI-ç»„ä»¶åº“" class="headerlink" title="Vue UI ç»„ä»¶åº“"></a>Vue UI ç»„ä»¶åº“</h2><p>ç§»åŠ¨ç«¯ï¼š</p><ul><li>NutUI  <a href="https://nutui.jd.com/#/">https://nutui.jd.com/#/</a></li><li>Vant  <a href="https://vant-contrib.gitee.io/vant/">https://vant-contrib.gitee.io/vant/</a></li><li>Cube UI  <a href="https://didi.github.io/cube-ui/#/zh-CN">https://didi.github.io/cube-ui/#/zh-CN</a></li><li>mint UI  <a href="https://mint-ui.github.io/#!/zh-cn">https://mint-ui.github.io/#!/zh-cn</a></li></ul><p>PC ç«¯</p><ul><li>Element UI  <a href="https://element.eleme.cn/#/zh-CN">https://element.eleme.cn/#/zh-CN</a></li><li>Iview  UI  <a href="https://www.iviewui.com/">https://www.iviewui.com/</a></li></ul><blockquote><p>æ³¨æ„ï¼š</p><p>æŒ‰éœ€å¼•å…¥ Element UIï¼Œbabel.config.jsåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼Œå®˜ç½‘ä¸Šæœ‰æ‰€ä¸å¯¹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>,</span><br><span class="line">    [<span class="string">&quot;@babel/preset-env&quot;</span>, &#123; <span class="string">&quot;modules&quot;</span>: <span class="literal">false</span> &#125;]</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="string">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><h2 id="Vue3å¿«é€Ÿä¸Šæ‰‹"><a href="#Vue3å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="Vue3å¿«é€Ÿä¸Šæ‰‹"></a>Vue3å¿«é€Ÿä¸Šæ‰‹</h2><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323030.png" style="width:200px"><h3 id="1-Vue3ç®€ä»‹"><a href="#1-Vue3ç®€ä»‹" class="headerlink" title="1.Vue3ç®€ä»‹"></a>1.Vue3ç®€ä»‹</h3><ul><li>2020å¹´9æœˆ18æ—¥ï¼ŒVue.jså‘å¸ƒ3.0ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰</li><li>è€—æ—¶2å¹´å¤šã€<a href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/vue-next/graphs/contributors">99ä½è´¡çŒ®è€…</a> </li><li>githubä¸Šçš„tagsåœ°å€ï¼š<a href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li></ul><h3 id="2-Vue3å¸¦æ¥äº†ä»€ä¹ˆ"><a href="#2-Vue3å¸¦æ¥äº†ä»€ä¹ˆ" class="headerlink" title="2.Vue3å¸¦æ¥äº†ä»€ä¹ˆ"></a>2.Vue3å¸¦æ¥äº†ä»€ä¹ˆ</h3><h4 id="1-æ€§èƒ½çš„æå‡"><a href="#1-æ€§èƒ½çš„æå‡" class="headerlink" title="1.æ€§èƒ½çš„æå‡"></a>1.æ€§èƒ½çš„æå‡</h4><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘41%</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«55%, æ›´æ–°æ¸²æŸ“å¿«133%</p></li><li><p>å†…å­˜å‡å°‘54%</p><p>â€¦â€¦</p></li></ul><h4 id="2-æºç çš„å‡çº§"><a href="#2-æºç çš„å‡çº§" class="headerlink" title="2.æºç çš„å‡çº§"></a>2.æºç çš„å‡çº§</h4><ul><li><p>ä½¿ç”¨Proxyä»£æ›¿definePropertyå®ç°å“åº”å¼</p></li><li><p>é‡å†™è™šæ‹ŸDOMçš„å®ç°å’ŒTree-Shaking</p><p>â€¦â€¦</p></li></ul><h4 id="3-æ‹¥æŠ±TypeScript"><a href="#3-æ‹¥æŠ±TypeScript" class="headerlink" title="3.æ‹¥æŠ±TypeScript"></a>3.æ‹¥æŠ±TypeScript</h4><ul><li>Vue3å¯ä»¥æ›´å¥½çš„æ”¯æŒTypeScript</li></ul><h4 id="4-æ–°çš„ç‰¹æ€§"><a href="#4-æ–°çš„ç‰¹æ€§" class="headerlink" title="4.æ–°çš„ç‰¹æ€§"></a>4.æ–°çš„ç‰¹æ€§</h4><ol><li><p>Composition APIï¼ˆç»„åˆAPIï¼‰</p><ul><li>setupé…ç½®</li><li>refä¸reactive</li><li>watchä¸watchEffect</li><li>provideä¸inject</li><li>â€¦â€¦</li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶</p><ul><li>Fragment </li><li>Teleport</li><li>Suspense</li></ul></li><li><p>å…¶ä»–æ”¹å˜</p><ul><li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li><li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li><li>ç§»é™¤keyCodeæ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li><li>â€¦â€¦</li></ul></li></ol><h2 id="ä¸€ã€åˆ›å»ºVue3-0å·¥ç¨‹"><a href="#ä¸€ã€åˆ›å»ºVue3-0å·¥ç¨‹" class="headerlink" title="ä¸€ã€åˆ›å»ºVue3.0å·¥ç¨‹"></a>ä¸€ã€åˆ›å»ºVue3.0å·¥ç¨‹</h2><h3 id="1-ä½¿ç”¨-vue-cli-åˆ›å»º"><a href="#1-ä½¿ç”¨-vue-cli-åˆ›å»º" class="headerlink" title="1.ä½¿ç”¨ vue-cli åˆ›å»º"></a>1.ä½¿ç”¨ vue-cli åˆ›å»º</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## åˆ›å»º</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h3 id="2-ä½¿ç”¨-vite-åˆ›å»º"><a href="#2-ä½¿ç”¨-vite-åˆ›å»º" class="headerlink" title="2.ä½¿ç”¨ vite åˆ›å»º"></a>2.ä½¿ç”¨ vite åˆ›å»º</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p><p>viteå®˜ç½‘ï¼š<a href="https://vitejs.cn/">https://vitejs.cn</a></p><ul><li>ä»€ä¹ˆæ˜¯viteï¼Ÿâ€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚</li><li>ä¼˜åŠ¿å¦‚ä¸‹ï¼š<ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚</li><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li></ul></li><li>ä¼ ç»Ÿæ„å»º ä¸ viteæ„å»ºå¯¹æ¯”å›¾</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºå·¥ç¨‹</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## è¿›å…¥å·¥ç¨‹ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## è¿è¡Œ</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="äºŒã€å¸¸ç”¨-Composition-API"><a href="#äºŒã€å¸¸ç”¨-Composition-API" class="headerlink" title="äºŒã€å¸¸ç”¨ Composition API"></a>äºŒã€å¸¸ç”¨ Composition API</h2><p>å®˜æ–¹æ–‡æ¡£: <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p><h3 id="1-æ‹‰å¼€åºå¹•çš„setup"><a href="#1-æ‹‰å¼€åºå¹•çš„setup" class="headerlink" title="1.æ‹‰å¼€åºå¹•çš„setup"></a>1.æ‹‰å¼€åºå¹•çš„setup</h3><ol><li>ç†è§£ï¼šVue3.0ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</li><li>setupæ˜¯æ‰€æœ‰<strong style="color:#DD5145">Composition APIï¼ˆç»„åˆAPIï¼‰</strong><i style="color:gray;font-weight:bold">â€œ è¡¨æ¼”çš„èˆå° â€</i>ã€‚</li><li>ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨setupä¸­ã€‚</li><li>setupå‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š<ol><li>è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰</li><li><span style="color:#aad">è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰</span></li></ol></li><li>æ³¨æ„ç‚¹ï¼š<ol><li>å°½é‡ä¸è¦ä¸Vue2.xé…ç½®æ··ç”¨<ul><li>Vue2.xé…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ä¸­<strong style="color:#DD5145">å¯ä»¥è®¿é—®åˆ°</strong>setupä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨setupä¸­<strong style="color:#DD5145">ä¸èƒ½è®¿é—®åˆ°</strong>Vue2.xé…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ã€‚</li><li>å¦‚æœæœ‰é‡å, setupä¼˜å…ˆã€‚</li></ul></li><li>setupä¸èƒ½æ˜¯ä¸€ä¸ªasyncå‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯returnçš„å¯¹è±¡, è€Œæ˜¯promise, æ¨¡æ¿çœ‹ä¸åˆ°returnå¯¹è±¡ä¸­çš„å±æ€§ã€‚ï¼ˆåæœŸä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œä½†éœ€è¦Suspenseå’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆï¼‰</li></ol></li></ol><h3 id="2-refå‡½æ•°"><a href="#2-refå‡½æ•°" class="headerlink" title="2.refå‡½æ•°"></a>2.refå‡½æ•°</h3><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®</li><li>è¯­æ³•: <code>const xxx = ref(initValue)</code> <ul><li>åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„<strong style="color:#DD5145">å¼•ç”¨å¯¹è±¡ï¼ˆreferenceå¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼‰</strong>ã€‚</li><li>JSä¸­æ“ä½œæ•°æ®ï¼š <code>xxx.value</code></li><li>æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li></ul></li><li>å¤‡æ³¨ï¼š<ul><li>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚</li><li>åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é <code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>å®Œæˆçš„ã€‚</li><li>å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ <i style="color:gray;font-weight:bold">â€œ æ±‚åŠ© â€</i> äº†Vue3.0ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” <code>reactive</code>å‡½æ•°ã€‚</li></ul></li></ul><h3 id="3-reactiveå‡½æ•°"><a href="#3-reactiveå‡½æ•°" class="headerlink" title="3.reactiveå‡½æ•°"></a>3.reactiveå‡½æ•°</h3><ul><li>ä½œç”¨: å®šä¹‰ä¸€ä¸ª<strong style="color:#DD5145">å¯¹è±¡ç±»å‹</strong>çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>å‡½æ•°ï¼‰</li><li>è¯­æ³•ï¼š<code>const ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ª<strong style="color:#DD5145">ä»£ç†å¯¹è±¡ï¼ˆProxyçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°proxyå¯¹è±¡ï¼‰</strong></li><li>reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚</li><li>å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚</li></ul><h3 id="4-Vue3-0ä¸­çš„å“åº”å¼åŸç†"><a href="#4-Vue3-0ä¸­çš„å“åº”å¼åŸç†" class="headerlink" title="4.Vue3.0ä¸­çš„å“åº”å¼åŸç†"></a>4.Vue3.0ä¸­çš„å“åº”å¼åŸç†</h3><h4 id="vue2-xçš„å“åº”å¼"><a href="#vue2-xçš„å“åº”å¼" class="headerlink" title="vue2.xçš„å“åº”å¼"></a>vue2.xçš„å“åº”å¼</h4><ul><li><p>å®ç°åŸç†ï¼š</p><ul><li><p>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡<code>Object.defineProperty()</code>å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</p></li><li><p>æ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">    get () &#123;&#125;, </span><br><span class="line">    set () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å­˜åœ¨é—®é¢˜ï¼š</p><ul><li>æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚</li><li>ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li></ul></li></ul><h4 id="Vue3-0çš„å“åº”å¼"><a href="#Vue3-0çš„å“åº”å¼" class="headerlink" title="Vue3.0çš„å“åº”å¼"></a>Vue3.0çš„å“åº”å¼</h4><ul><li><p>å®ç°åŸç†: </p><ul><li><p>é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰:  æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚</p></li><li><p>é€šè¿‡Reflectï¼ˆåå°„ï¼‰:  å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚</p></li><li><p>MDNæ–‡æ¡£ä¸­æè¿°çš„Proxyä¸Reflectï¼š</p><ul><li><p>Proxyï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p></li><li><p>Reflectï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line"><span class="comment">// æ‹¦æˆªè¯»å–å±æ€§å€¼</span></span><br><span class="line">    get (target, prop) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§</span></span><br><span class="line">    set (target, prop, value) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ‹¦æˆªåˆ é™¤å±æ€§</span></span><br><span class="line">    deleteProperty (target, prop) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="5-reactiveå¯¹æ¯”ref"><a href="#5-reactiveå¯¹æ¯”ref" class="headerlink" title="5.reactiveå¯¹æ¯”ref"></a>5.reactiveå¯¹æ¯”ref</h3><ul><li>ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š<ul><li>refç”¨æ¥å®šä¹‰ï¼š<strong style="color:#DD5145">åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€‚</li><li>reactiveç”¨æ¥å®šä¹‰ï¼š<strong style="color:#DD5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>ã€‚</li><li>å¤‡æ³¨ï¼šrefä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰<strong style="color:#DD5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡<code>reactive</code>è½¬ä¸º<strong style="color:#DD5145">ä»£ç†å¯¹è±¡</strong>ã€‚</li></ul></li><li>ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š<ul><li>refé€šè¿‡<code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li><li>reactiveé€šè¿‡ä½¿ç”¨<strong style="color:#DD5145">Proxy</strong>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡<strong style="color:#DD5145">Reflect</strong>æ“ä½œ<strong style="color:orange">æºå¯¹è±¡</strong>å†…éƒ¨çš„æ•°æ®ã€‚</li></ul></li><li>ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š<ul><li>refå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®<strong style="color:#DD5145">éœ€è¦</strong><code>.value</code>ï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–<strong style="color:#DD5145">ä¸éœ€è¦</strong><code>.value</code>ã€‚</li><li>reactiveå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼š<strong style="color:#DD5145">å‡ä¸éœ€è¦</strong><code>.value</code>ã€‚</li></ul></li></ul><h3 id="6-setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹"><a href="#6-setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹"></a>6.setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹</h3><ul><li><p>setupæ‰§è¡Œçš„æ—¶æœº</p><ul><li>åœ¨beforeCreateä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthisæ˜¯undefinedã€‚</li></ul></li><li><p>setupçš„å‚æ•°</p><ul><li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚</li><li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡<ul><li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨propsé…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äº <code>this.$attrs</code>ã€‚</li><li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äº <code>this.$slots</code>ã€‚</li><li>emit: åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº <code>this.$emit</code>ã€‚</li></ul></li></ul></li></ul><h3 id="7-è®¡ç®—å±æ€§ä¸ç›‘è§†"><a href="#7-è®¡ç®—å±æ€§ä¸ç›‘è§†" class="headerlink" title="7.è®¡ç®—å±æ€§ä¸ç›‘è§†"></a>7.è®¡ç®—å±æ€§ä¸ç›‘è§†</h3><h4 id="1-computedå‡½æ•°"><a href="#1-computedå‡½æ•°" class="headerlink" title="1.computedå‡½æ•°"></a>1.computedå‡½æ•°</h4><ul><li><p>ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´</p></li><li><p>å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line"><span class="comment">//è®¡ç®—å±æ€§â€”â€”ç®€å†™</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//è®¡ç®—å±æ€§â€”â€”å®Œæ•´</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-watchå‡½æ•°"><a href="#2-watchå‡½æ•°" class="headerlink" title="2.watchå‡½æ•°"></a>2.watchå‡½æ•°</h4><ul><li><p>ä¸Vue2.xä¸­watché…ç½®åŠŸèƒ½ä¸€è‡´</p></li><li><p>ä¸¤ä¸ªå°â€œå‘â€ï¼š</p><ul><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰ã€‚</li><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sumå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="title function_">watch</span>([sum,msg],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sumæˆ–msgå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="comment">è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼</span></span><br><span class="line"><span class="comment">è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">false</span>&#125;) <span class="comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span></span><br><span class="line"><span class="title function_">watch</span>([<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">()=&gt;</span>person.<span class="property">name</span>],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;) <span class="comment">//æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="3-watchEffectå‡½æ•°"><a href="#3-watchEffectå‡½æ•°" class="headerlink" title="3.watchEffectå‡½æ•°"></a>3.watchEffectå‡½æ•°</h4><ul><li><p>watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</p></li><li><p>watchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚</p></li><li><p>watchEffectæœ‰ç‚¹åƒcomputedï¼š</p><ul><li>ä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li><li>è€ŒwatchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">    <span class="keyword">const</span> x2 = person.<span class="property">age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="8-ç”Ÿå‘½å‘¨æœŸ"><a href="#8-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8.ç”Ÿå‘½å‘¨æœŸ"></a>8.ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323735.png" alt="ç”Ÿå‘½å‘¨æœŸ"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172323171.png" alt="img"></p><p>1</p><ul><li>Vue3.0ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨Vue2.xä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š<ul><li><code>beforeDestroy</code>æ”¹åä¸º <code>beforeUnmount</code></li><li><code>destroyed</code>æ”¹åä¸º <code>unmounted</code></li></ul></li><li>Vue3.0ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸Vue2.xä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<ul><li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li><li><code>created</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li><li><code>beforeMount</code> &#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li><li><code>mounted</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li><li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li><li><code>updated</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li><li><code>beforeUnmount</code>Â &#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li><li><code>unmounted</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li></ul></li></ul><h3 id="9-è‡ªå®šä¹‰hookå‡½æ•°"><a href="#9-è‡ªå®šä¹‰hookå‡½æ•°" class="headerlink" title="9.è‡ªå®šä¹‰hookå‡½æ•°"></a>9.è‡ªå®šä¹‰hookå‡½æ•°</h3><ul><li><p>ä»€ä¹ˆæ˜¯hookï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠsetupå‡½æ•°ä¸­ä½¿ç”¨çš„Composition APIè¿›è¡Œäº†å°è£…ã€‚</p></li><li><p>ç±»ä¼¼äºvue2.xä¸­çš„mixinã€‚</p></li><li><p>è‡ªå®šä¹‰hookçš„ä¼˜åŠ¿: å¤ç”¨ä»£ç , è®©setupä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><h3 id="10-toRef"><a href="#10-toRef" class="headerlink" title="10.toRef"></a>10.toRef</h3><ul><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶valueå€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ã€‚</p></li><li><p>è¯­æ³•ï¼š<code>const name = toRef(person,&#39;name&#39;)</code></p></li><li><p>åº”ç”¨:   è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ã€‚</p></li><li><p>æ‰©å±•ï¼š<code>toRefs</code> ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š<code>toRefs(person)</code></p></li></ul><h2 id="ä¸‰ã€å…¶å®ƒ-Composition-API"><a href="#ä¸‰ã€å…¶å®ƒ-Composition-API" class="headerlink" title="ä¸‰ã€å…¶å®ƒ Composition API"></a>ä¸‰ã€å…¶å®ƒ Composition API</h2><h3 id="1-shallowReactive-ä¸-shallowRef"><a href="#1-shallowReactive-ä¸-shallowRef" class="headerlink" title="1.shallowReactive ä¸ shallowRef"></a>1.shallowReactive ä¸ shallowRef</h3><ul><li><p>shallowReactiveï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰ã€‚</p></li><li><p>shallowRefï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†ã€‚</p></li><li><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨?</p><ul><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– &#x3D;&#x3D;&#x3D;&gt; shallowReactiveã€‚</li><li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ &#x3D;&#x3D;&#x3D;&gt; shallowRefã€‚</li></ul></li></ul><h3 id="2-readonly-ä¸-shallowReadonly"><a href="#2-readonly-ä¸-shallowReadonly" class="headerlink" title="2.readonly ä¸ shallowReadonly"></a>2.readonly ä¸ shallowReadonly</h3><ul><li>readonly: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰ã€‚</li><li>shallowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰ã€‚</li><li>åº”ç”¨åœºæ™¯: ä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ã€‚</li></ul><h3 id="3-toRaw-ä¸-markRaw"><a href="#3-toRaw-ä¸-markRaw" class="headerlink" title="3.toRaw ä¸ markRaw"></a>3.toRaw ä¸ markRaw</h3><ul><li>toRawï¼š<ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªç”±<code>reactive</code>ç”Ÿæˆçš„<strong style="color:orange">å“åº”å¼å¯¹è±¡</strong>è½¬ä¸º<strong style="color:orange">æ™®é€šå¯¹è±¡</strong>ã€‚</li><li>ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ã€‚</li></ul></li><li>markRawï¼š<ul><li>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šå†æˆä¸ºå“åº”å¼å¯¹è±¡ã€‚</li><li>åº”ç”¨åœºæ™¯:<ol><li>æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚</li><li>å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ol></li></ul></li></ul><h3 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4.customRef"></a>4.customRef</h3><ul><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</p></li><li><p>å®ç°é˜²æŠ–æ•ˆæœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref,customRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;Demo&#x27;,</span><br><span class="line">setup()&#123;</span><br><span class="line">// let keyword = ref(&#x27;hello&#x27;) //ä½¿ç”¨Vueå‡†å¤‡å¥½çš„å†…ç½®ref</span><br><span class="line">//è‡ªå®šä¹‰ä¸€ä¸ªmyRef</span><br><span class="line">function myRef(value,delay)&#123;</span><br><span class="line">let timer</span><br><span class="line">//é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰</span><br><span class="line">return customRef((track,trigger)=&gt;&#123;</span><br><span class="line">return&#123;</span><br><span class="line">get()&#123;</span><br><span class="line">track() //å‘Šè¯‰Vueè¿™ä¸ªvalueå€¼æ˜¯éœ€è¦è¢«â€œè¿½è¸ªâ€çš„</span><br><span class="line">return value</span><br><span class="line">&#125;,</span><br><span class="line">set(newValue)&#123;</span><br><span class="line">clearTimeout(timer)</span><br><span class="line">timer = setTimeout(()=&gt;&#123;</span><br><span class="line">value = newValue</span><br><span class="line">trigger() //å‘Šè¯‰Vueå»æ›´æ–°ç•Œé¢</span><br><span class="line">&#125;,delay)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">let keyword = myRef(&#x27;hello&#x27;,500) //ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref</span><br><span class="line">return &#123;</span><br><span class="line">keyword</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-provide-ä¸-inject"><a href="#5-provide-ä¸-inject" class="headerlink" title="5.provide ä¸ inject"></a>5.provide ä¸ inject</h3><ul><li><p>ä½œç”¨ï¼šå®ç°<strong style="color:#DD5145">ç¥–ä¸åä»£ç»„ä»¶é—´</strong>é€šä¿¡</p></li><li><p>å¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®</p></li><li><p>å…·ä½“å†™æ³•ï¼š</p><ol><li><p>ç¥–ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">......</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;å¥”é©°&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40ä¸‡&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åä»£ç»„ä»¶ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">......</span><br><span class="line">    <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h3 id="6-å“åº”å¼æ•°æ®çš„åˆ¤æ–­"><a href="#6-å“åº”å¼æ•°æ®çš„åˆ¤æ–­" class="headerlink" title="6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­"></a>6.å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h3><ul><li>isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡</li><li>isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li><li>isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li><li>isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</li></ul><h2 id="å››ã€Composition-API-çš„ä¼˜åŠ¿"><a href="#å››ã€Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="å››ã€Composition API çš„ä¼˜åŠ¿"></a>å››ã€Composition API çš„ä¼˜åŠ¿</h2><h3 id="1-Options-API-å­˜åœ¨çš„é—®é¢˜"><a href="#1-Options-API-å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="1.Options API å­˜åœ¨çš„é—®é¢˜"></a>1.Options API å­˜åœ¨çš„é—®é¢˜</h3><p>ä½¿ç”¨ä¼ ç»ŸOptionsAPIä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨dataï¼Œmethodsï¼Œcomputedé‡Œä¿®æ”¹ ã€‚</p><div style="width:600px;height:370px;overflow:hidden;float:left">    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" style="width:600px;float:left"></div><div style="width:300px;height:370px;overflow:hidden;">    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;width:560px;left"> </div><hr><h3 id="2-Composition-API-çš„ä¼˜åŠ¿"><a href="#2-Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="2.Composition API çš„ä¼˜åŠ¿"></a>2.Composition API çš„ä¼˜åŠ¿</h3><p>æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…çš„ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ï¼Œå‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><div style="width:500px;height:340px;overflow:hidden;float:left">    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image" style="height:360px"></div><div style="width:430px;height:340px;overflow:hidden;">    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image" style="height:360px"></div><hr><h2 id="äº”ã€æ–°çš„ç»„ä»¶"><a href="#äº”ã€æ–°çš„ç»„ä»¶" class="headerlink" title="äº”ã€æ–°çš„ç»„ä»¶"></a>äº”ã€æ–°çš„ç»„ä»¶</h2><h3 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h3><ul><li>åœ¨Vue2ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li><li>åœ¨Vue3ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ªFragmentè™šæ‹Ÿå…ƒç´ ä¸­</li><li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li></ul><h3 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h3><ul><li><p>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” <code>Teleport</code> æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong style="color:#DD5145">ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&quot;ç§»åŠ¨ä½ç½®&quot;&gt;</span><br><span class="line">&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class="line">&lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">&lt;h3&gt;æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—&lt;/h3&gt;</span><br><span class="line">&lt;button @click=&quot;isShow = false&quot;&gt;å…³é—­å¼¹çª—&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h3><ul><li><p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ul><li><p>å¼‚æ­¥å¼•å…¥ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;app&quot;&gt;</span><br><span class="line">&lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;Suspense&gt;</span><br><span class="line">&lt;template v-slot:default&gt;</span><br><span class="line">&lt;Child/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;template v-slot:fallback&gt;</span><br><span class="line">&lt;h3&gt;åŠ è½½ä¸­.....&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="å…­ã€å…¶ä»–"><a href="#å…­ã€å…¶ä»–" class="headerlink" title="å…­ã€å…¶ä»–"></a>å…­ã€å…¶ä»–</h2><h3 id="1-å…¨å±€APIçš„è½¬ç§»"><a href="#1-å…¨å±€APIçš„è½¬ç§»" class="headerlink" title="1.å…¨å±€APIçš„è½¬ç§»"></a>1.å…¨å±€APIçš„è½¬ç§»</h3><ul><li><p>Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚</p><ul><li><p>ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€ç»„ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€æŒ‡ä»¤</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Vue3.0ä¸­å¯¹è¿™äº›APIåšå‡ºäº†è°ƒæ•´ï¼š</p><ul><li><p>å°†å…¨å±€çš„APIï¼Œå³ï¼š<code>Vue.xxx</code>è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ<code>app</code>ï¼‰ä¸Š</p><table><thead><tr><th>2.x å…¨å±€ APIï¼ˆ<code>Vue</code>ï¼‰</th><th>3.x å®ä¾‹ API (<code>app</code>)</th></tr></thead><tbody><tr><td>Vue.config.xxxx</td><td>app.config.xxxx</td></tr><tr><td>Vue.config.productionTip</td><td><strong style="color:#DD5145">ç§»é™¤</strong></td></tr><tr><td>Vue.component</td><td>app.component</td></tr><tr><td>Vue.directive</td><td>app.directive</td></tr><tr><td>Vue.mixin</td><td>app.mixin</td></tr><tr><td>Vue.use</td><td>app.use</td></tr><tr><td>Vue.prototype</td><td>app.config.globalProperties</td></tr></tbody></table></li></ul></li></ul><h3 id="2-å…¶ä»–æ”¹å˜"><a href="#2-å…¶ä»–æ”¹å˜" class="headerlink" title="2.å…¶ä»–æ”¹å˜"></a>2.å…¶ä»–æ”¹å˜</h3><ul><li><p>dataé€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p></li><li><p>è¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š</p><ul><li><p>Vue2.xå†™æ³•</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Vue3.xå†™æ³•</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#DD5145">ç§»é™¤</strong>keyCodeä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ<code>config.keyCodes</code></p></li><li><p><strong style="color:#DD5145">ç§»é™¤</strong><code>v-on.native</code>ä¿®é¥°ç¬¦</p><ul><li><p>çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></li><li><p>å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#x27;close&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong style="color:#DD5145">ç§»é™¤</strong>è¿‡æ»¤å™¨ï¼ˆfilterï¼‰</p><blockquote><p>è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚</p></blockquote></li><li><p>â€¦â€¦</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springcloud</title>
      <link href="/2022/07/07/springcloud/"/>
      <url>/2022/07/07/springcloud/</url>
      
        <content type="html"><![CDATA[<p>è·Ÿéšè§†é¢‘ç»ƒä¹ çš„ä»£ç å­˜æ”¾åœ¨  GitHubä»“åº“ï¼š <a href="https://github.com/wuwei1636/java">https://github.com/wuwei1636/java</a></p><hr><p>SpringCloudä¸SpringBootçš„ç‰ˆæœ¬å¯¹åº”</p><table><thead><tr><th align="center">SpringCloudç‰ˆæœ¬</th><th align="center">SpringBootç‰ˆæœ¬</th></tr></thead><tbody><tr><td align="center">2021.0.1-SNAPSHOT</td><td align="center">Spring Boot &gt;&#x3D;2.6.4-SNAPSHOT and &lt;2.7.0-M1</td></tr><tr><td align="center">2021.0.0</td><td align="center">Spring Boot &gt;&#x3D;2.6.1 and &lt;2.6.4-SNAPSHOT</td></tr><tr><td align="center">2021.0.0-RC1</td><td align="center">Spring Boot &gt;&#x3D;2.6.0-RC1 and &lt;2.6.1</td></tr><tr><td align="center">2021.0.0-M3</td><td align="center">Spring Boot &gt;&#x3D;2.6.0-M3 and &lt;2.6.0-RC1</td></tr><tr><td align="center">2021.0.0-M1</td><td align="center">Spring Boot &gt;&#x3D;2.6.0-M1 and &lt;2.6.0-M3</td></tr><tr><td align="center">2020.0.5</td><td align="center">Spring Boot &gt;&#x3D;2.4.0.M1 and &lt;2.6.0-M1</td></tr><tr><td align="center">Hoxton.SR12</td><td align="center">Spring Boot &gt;&#x3D;2.2.0.RELEASE and &lt;2.4.0.M1</td></tr><tr><td align="center">Hoxton.BUILD-SNAPSHOT</td><td align="center">Spring Boot &gt;&#x3D;2.2.0.BUILD-SNAPSHOT</td></tr><tr><td align="center"><strong>Hoxton.M2</strong></td><td align="center"><strong>Spring Boot &gt;&#x3D;2.2.0.M4 and &lt;&#x3D;2.2.0.M5</strong></td></tr><tr><td align="center">Greenwich.BUILD-SNAPSHO</td><td align="center">Spring Boot &gt;&#x3D;2.1.9.BUILD-SNAPSHOT and &lt;2.2.0.M4</td></tr><tr><td align="center">Greenwich.SR2</td><td align="center">Spring Boot &gt;&#x3D;2.1.0.RELEASE and &lt;2.1.9.BUILD-SNAPSHOT</td></tr><tr><td align="center">Greenwich.M1</td><td align="center">Spring Boot &gt;&#x3D;2.1.0.M3 and &lt;2.1.0.RELEASE</td></tr><tr><td align="center">Finchley.BUILD-SNAPSHOT</td><td align="center">Spring Boot &gt;&#x3D;2.0.999.BUILD-SNAPSHOT and &lt;2.1.0.M3</td></tr><tr><td align="center">Finchley.SR4</td><td align="center">Spring Boot &gt;&#x3D;2.0.3.RELEASE and &lt;2.0.999.BUILD-SNAPSHOT</td></tr><tr><td align="center">Finchley.RC2</td><td align="center">Spring Boot &gt;&#x3D;2.0.2.RELEASE and &lt;2.0.3.RELEASE</td></tr><tr><td align="center">Finchley.RC1</td><td align="center">Spring Boot &gt;&#x3D;2.0.1.RELEASE and &lt;2.0.2.RELEASE</td></tr><tr><td align="center">Finchley.M9</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.RELEASE and &lt;&#x3D;2.0.0.RELEASE</td></tr><tr><td align="center">Finchley.M7</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.RC2 and &lt;&#x3D;2.0.0.RC2</td></tr><tr><td align="center">Finchley.M6</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.RC1 and &lt;&#x3D;2.0.0.RC1</td></tr><tr><td align="center">Finchley.M5</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.M7 and &lt;&#x3D;2.0.0.M7</td></tr><tr><td align="center">Finchley.M4</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.M6 and &lt;&#x3D;2.0.0.M6</td></tr><tr><td align="center">Finchley.M3</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.M5 and &lt;&#x3D;2.0.0.M5</td></tr><tr><td align="center">Finchley.M2</td><td align="center">Spring Boot &gt;&#x3D;2.0.0.M3 and &lt;2.0.0.M5</td></tr><tr><td align="center">Edgware.SR5</td><td align="center">1.5.20.RELEASE</td></tr><tr><td align="center">Edgware.SR5</td><td align="center">1.5.16.RELEASE</td></tr><tr><td align="center">Edgware.RELEASE</td><td align="center">1.5.9.RELEASE</td></tr><tr><td align="center">Dalston.RC1</td><td align="center">1.5.2.RELEASE</td></tr></tbody></table><p>PSï¼šç›®å‰æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ï¼šSpringCloud Hoxton.SR12å’Œ Springboot 2.3.7.RELEASE</p><p>è¯¦ç»†çš„ç‰ˆæœ¬å¯¹åº” ï¼š<a href="https://start.spring.io/actuator/info">https://start.spring.io/actuator/info</a></p><h1 id="åˆ›å»ºspringcloud"><a href="#åˆ›å»ºspringcloud" class="headerlink" title="åˆ›å»ºspringcloud"></a>åˆ›å»ºspringcloud</h1><blockquote><ol><li>å»ºç«‹ä¸€ä¸ªmavençš„çˆ¶é¡¹ç›®</li><li>å»ºç«‹æ¨¡å—ï¼ˆä¸¤ç§æ–¹å¼ï¼‰<ol><li>åˆ›å»ºä¸€ä¸ªmavençš„æ¨¡å—ï¼Œå¯¼å…¥springbootæ‰€éœ€çš„å„ç§ä¾èµ–å’Œæ³¨è§£  </li><li>åˆ›å»ºä¸€ä¸ªspringbootçš„æ¨¡å—ï¼Œåœ¨çˆ¶é¡¹ç›®çš„pom.xmlä¸­è‡ªå·±æ¨¡å—ä¿¡æ¯</li></ol></li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li><li>æ·»åŠ æ³¨è§£ï¼Œè¿è¡Œnacos-serverï¼Œè¿è¡Œé¡¹ç›®</li></ol></blockquote><p>å› ä¸ºå»ºç«‹æ¨¡å—çš„æ–¹å¼å¡äº†ä¸€ä¸Šåˆï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹</p><h2 id="mavençš„pom-xml"><a href="#mavençš„pom-xml" class="headerlink" title="mavençš„pom.xml"></a>mavençš„pom.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SecTest<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Hoxton.SR12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å­æ¨¡å—çš„pom-xml"><a href="#å­æ¨¡å—çš„pom-xml" class="headerlink" title="å­æ¨¡å—çš„pom.xml"></a>å­æ¨¡å—çš„pom.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud-alibaba.version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">spring-cloud-alibaba.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud-alibaba.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.example.demo.DemoApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é…ç½®ç±»"><a href="#é…ç½®ç±»" class="headerlink" title="é…ç½®ç±»"></a>é…ç½®ç±»</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">nacos-provider</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="attr">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// æ·»åŠ æ³¨è§£å³å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319319.png" alt="image-20220710111559066"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webå­¦ä¹ ä¸­å„ç§é—®é¢˜</title>
      <link href="/2022/07/02/web%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/"/>
      <url>/2022/07/02/web%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="springboot"><a href="#springboot" class="headerlink" title="springboot"></a>springboot</h1><h2 id="application-propertiesä¸­æ–‡ä¹±ç "><a href="#application-propertiesä¸­æ–‡ä¹±ç " class="headerlink" title="application.propertiesä¸­æ–‡ä¹±ç "></a>application.propertiesä¸­æ–‡ä¹±ç </h2><blockquote><p>ä½¿ç”¨ideaæ–°å»ºä¸€ä¸ªé¡¹ç›®application.propertiesä¸­æ–‡æ³¨é‡Šå‡ºç°ä¹±ç </p></blockquote><p>è§£å†³åŠæ³• ï¼šæ‰“å¼€setting â€“&gt; Editor â€“&gt; File Encodings</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324180.png" alt="image-20220702110006678"></p><p>ä¸Šé¢çš„å…¨å±€encodingä¹Ÿè¦æ”¹ä¸ºutf-8</p><h2 id="é…ç½®å®Œswaggeræ— æ³•è®¿é—®"><a href="#é…ç½®å®Œswaggeræ— æ³•è®¿é—®" class="headerlink" title="é…ç½®å®Œswaggeræ— æ³•è®¿é—®"></a>é…ç½®å®Œswaggeræ— æ³•è®¿é—®</h2><p>åŸå› ï¼šç‹‚ç¥ä½¿ç”¨çš„æ˜¯ 2.9.2çš„ç‰ˆæœ¬ï¼Œæœ€æ–°ç‰ˆ3.0ä¸æ”¯æŒä¹‹å‰çš„urlåœ°å€</p><p>3.0éœ€è¦çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®çš„åœ°å€å˜ä¸ºï¼š</p><p> <code>http://localhost:8080/swagger-ui/</code>æˆ–è€…</p><p><code>http://localhost:8080/swagger-ui/index.html</code></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324079.png" alt="image-20220706185150574"></p><h2 id="Redis-serveré—ªé€€"><a href="#Redis-serveré—ªé€€" class="headerlink" title="Redis-serveré—ªé€€"></a>Redis-serveré—ªé€€</h2><p> è§£å†³æ–¹æ³•ï¼š</p><p> 1-win+R æ‰“å¼€å‘½ä»¤è¡Œ</p><p> 2-cdè‡³redisç›®å½•ï¼Œä¾‹å¦‚<br>  <strong>D:\redis&gt;</strong></p><p> 3-è¾“å…¥ </p><p> <strong>redis-server.exe redis.windows.conf</strong></p><p> è§‚å¯Ÿæ˜¯å¦å¦‚å›¾1ï¼šè‡³æ­¤ï¼Œå·²æˆåŠŸï¼›å¦åˆ™ï¼Œç»§ç»­è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324535.png" alt="image-20220707122049469"></p><p> 4-è‹¥å¯åŠ¨rediså‡ºç°</p><p> [<strong><strong>]</strong></strong>(å½“å‰æ—¥æœŸ)***** # Creating Server TCP listening socket *:6379: listen: Unknown error</p><p> æ›´æ”¹redisæ–‡ä»¶å¤¹ä¸­çš„ redis.windows.conf</p><p> #bind 127.0.0.1 å»æ‰#</p><p> <img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324510.png" alt="img"></p><p> é‡æ–°æ‰§è¡Œå‘½ä»¤è¡Œ</p><p> D:\redis&gt;<strong>redis-server.exe redis.windows.conf</strong></p><p> è‹¥ä»æŠ¥ä»¥ä¸‹é”™è¯¯ï¼š</p><p>Creating Server TCP listening socket 127.0.0.1:6379: bind: No error</p><p> æŒ‰é¡ºåºè¾“å…¥å¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥è¿æ¥æˆåŠŸ</p><ol><li><strong>redis-cli.exe</strong></li><li><strong>shutdown</strong></li><li><strong>exit</strong></li><li><strong>redis-server.exe redis.windows.conf</strong></li></ol><h2 id="zookeeper"><a href="#zookeeper" class="headerlink" title="zookeeper"></a>zookeeper</h2><p>ä¸‹è½½åœ°å€ï¼š <a href="https://archive.apache.org/dist/zookeeper/">https://archive.apache.org/dist/zookeeper/</a></p><p>å¦‚æœä¸‹è½½é«˜ç‰ˆæœ¬ï¼Œbin.tar.gz æ˜¯ç¼–è¯‘è¿‡çš„ç‰ˆæœ¬ï¼Œæœªç¼–è¯‘è¿‡çš„çš„ç‰ˆæœ¬ä¸èƒ½ä½¿ç”¨ã€‚ä½ç‰ˆæœ¬ä¸‹è½½ tar.gz å³å¯</p><p><strong>ç¬¬ä¸€æ¬¡è¿è¡ŒzkServer.cmdå¯èƒ½ä¼šå‡ºç°é—ªé€€é—®é¢˜</strong></p><p>è§£å†³åŠæ³•ï¼šå°†confä¸‹çš„<code>zoo_sample.cfg</code>å¤åˆ¶ä¸€ä»½æ”¹åä¸º<code>zoo.cfg</code>å³å¯ã€‚</p><h2 id="è¿è¡Œspringbooté¡¹ç›®æ—¶ï¼Œè¿è¡Œç±»ä¸Šæœ‰çº¢è‰²å‰å·"><a href="#è¿è¡Œspringbooté¡¹ç›®æ—¶ï¼Œè¿è¡Œç±»ä¸Šæœ‰çº¢è‰²å‰å·" class="headerlink" title="è¿è¡Œspringbooté¡¹ç›®æ—¶ï¼Œè¿è¡Œç±»ä¸Šæœ‰çº¢è‰²å‰å·"></a>è¿è¡Œspringbooté¡¹ç›®æ—¶ï¼Œè¿è¡Œç±»ä¸Šæœ‰çº¢è‰²å‰å·</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324655.png" alt="image-20221023152028100"></p><p>è§£å†³åŠæ³•ï¼š</p><p>åˆ é™¤å¯åŠ¨ç±»ä¸Šçš„ <code>@SpringBootpplication</code>å¼•å…¥çš„åŒ…ï¼Œç„¶åé‡æ–°å¼•å…¥å³å¯ï¼›</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324387.png" alt="image-20221023152201305"></p><h2 id="nested-exception-is-org-apache-ibatis-binding-BindingException-Parameter-â€˜XXXâ€™-not-found"><a href="#nested-exception-is-org-apache-ibatis-binding-BindingException-Parameter-â€˜XXXâ€™-not-found" class="headerlink" title="nested exception is org.apache.ibatis.binding.BindingException: Parameter â€˜XXXâ€™ not found"></a>nested exception is org.apache.ibatis.binding.BindingException: Parameter â€˜XXXâ€™ not found</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324017.png" alt="image-20221027173332271"></p><p>é—®é¢˜åŸå› ï¼šåœ¨Mapperæ¥å£å£°æ˜ä¸­æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†æ˜¯æ²¡æœ‰ä½¿ç”¨ <code>@Param</code>æ³¨è§£</p><p>è§£å†³åŠæ³•ï¼šåŠ ä¸Š <code>@Param</code> æ³¨è§£</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324540.png" alt="image-20221027173239127"></p><h2 id="AutoWiredæ— æ³•è£…é…"><a href="#AutoWiredæ— æ³•è£…é…" class="headerlink" title="@AutoWiredæ— æ³•è£…é…"></a><code>@AutoWired</code>æ— æ³•è£…é…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> StudentMapper studentMapper;</span><br></pre></td></tr></table></figure><p>ä»Šå¤©ä½¿ç”¨@Autowired è‡ªåŠ¨è£…é…Mapperï¼Œä½†æ˜¯ä¼ å…¥å‚æ•°æŠ¥ç©ºæŒ‡é’ˆé”™è¯¯ï¼Œåæ¥å‘ç°ä¸å°å¿ƒå°†å®ä¾‹å­—æ®µè®¾ç½®ä¸ºé™æ€å­—æ®µï¼ˆstaticï¼‰ã€‚</p><p>ä¸‹é¢æ˜¯åŸå› ï¼š</p><p>é™æ€å­—æ®µé—®é¢˜ï¼š<code>@Autowired</code>æ³¨è§£é€šå¸¸ç”¨äºå®ä¾‹å­—æ®µçš„æ³¨å…¥ï¼Œè€Œä¸æ˜¯é™æ€å­—æ®µã€‚ç”±äºé™æ€å­—æ®µæ˜¯ç±»çº§åˆ«çš„ï¼Œå®ƒä»¬ä¸å®ä¾‹åŒ–çš„Beanæ— å…³ã€‚å¦‚æœä½ éœ€è¦åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­æ³¨å…¥ä¾èµ–é¡¹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>@Autowired</code>æ³¨è§£çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¾‹å¦‚åœ¨é™æ€æ–¹æ³•ä¸­æ‰‹åŠ¨è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</p><p>è§£å†³åŠæ³•ï¼š åˆ é™¤static</p><h2 id="Componentä½œç”¨åŠä½¿ç”¨"><a href="#Componentä½œç”¨åŠä½¿ç”¨" class="headerlink" title="@Componentä½œç”¨åŠä½¿ç”¨"></a>@Componentä½œç”¨åŠä½¿ç”¨</h2><p>@Componentçš„ä½œç”¨æ˜¯æŠŠæ™®é€šPOJOå®ä¾‹åŒ–åˆ°Springå®¹å™¨ä¸­ï¼Œç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­çš„ï¼Œ@Component æ˜¯ä¸€ä¸ªæ³›åŒ–çš„æ¦‚å¿µï¼Œä»…ä»…è¡¨ç¤ºä¸€ä¸ªç»„ä»¶ (Bean) ï¼Œå¯ä»¥ä½œç”¨åœ¨ä»»ä½•å±‚æ¬¡ã€‚åŸºäº@Componentæ³¨è§£æœ‰ä¸‰ä¸ªæ‰©å±•ï¼Œåˆ†åˆ«æ˜¯ï¼š@Repository ã€@Serviceã€ @Controllerã€‚è¢«ä»–ä»¬å››ä¸ªæ ‡æ³¨çš„ç±»ï¼Œä¼šè¢«çº³å…¥åˆ°Springå®¹å™¨ä¸­è¿›è¡Œç®¡ç†</p><p>ä½¿ç”¨ç›´æ¥ä½¿ç”¨ <code>@Autowired</code>å¯¹<code>@Component</code>æ³¨è§£çš„ç±»è¿›è¡Œè£…é…å³å¯ã€‚</p><h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><h2 id="ä»å¤–éƒ¨å¯¼å…¥jaråŒ…åˆ°pomä¸­"><a href="#ä»å¤–éƒ¨å¯¼å…¥jaråŒ…åˆ°pomä¸­" class="headerlink" title="ä»å¤–éƒ¨å¯¼å…¥jaråŒ…åˆ°pomä¸­"></a>ä»å¤–éƒ¨å¯¼å…¥jaråŒ…åˆ°pomä¸­</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -Dfile=jaråŒ…çš„ä½ç½® -DgroupId=ä¸Šé¢çš„groupId -DartifactId=ä¸Šé¢çš„artifactId -Dversion=ä¸Šé¢çš„version -Dpackaging=jar</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ </span><br><span class="line">mvn install:install-file -Dfile=E:\project\æœ¬ç§‘ç”Ÿ\jaråŒ…\json-lib-2 -DgroupId=net.net.sf.json-lib -DartifactId=json-lib -Dversion=2.4 -Dpackaging=jar</span><br></pre></td></tr></table></figure><p>mavenä¼šè‡ªåŠ¨å¸®ä½ æ‰“åŒ…</p><h1 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h1><blockquote><p>åœ¨è¿›è¡Œnpmä¸‹è½½ä¸œè¥¿çš„æ—¶å€™ï¼Œä¼šå‡ºç°<code>run npm fund for details</code> </p></blockquote><p>è§£å†³åŠæ³•ï¼š</p><p>åœ¨ä¸‹è½½çš„æ—¶å€™æ·»åŠ åç¼€å³å¯ <code>--no-fund</code></p><h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><h2 id="å¯åŠ¨é¡¹ç›®æŠ¥é”™"><a href="#å¯åŠ¨é¡¹ç›®æŠ¥é”™" class="headerlink" title="å¯åŠ¨é¡¹ç›®æŠ¥é”™"></a>å¯åŠ¨é¡¹ç›®æŠ¥é”™</h2><blockquote><p>Error: error:0308010C:digital envelope routines::unsupported</p></blockquote><p>é—®é¢˜åŸå› ï¼š</p><p>â€‹        node v17ç‰ˆæœ¬ä»¥åï¼Œä½¿ç”¨äº†æ–°çš„OpenSSL3.0ï¼ŒOpenSSL3.0å¯¹å…è®¸ç®—æ³•å’Œå¯†é’¥å¤§å°å¢åŠ äº†ä¸¥æ ¼çš„é™åˆ¶ï¼Œå¯èƒ½ä¼šå¯¹ç”Ÿæ€ç³»ç»Ÿé€ æˆä¸€äº›å½±å“ã€‚æ•…æ­¤ä»¥å‰çš„é¡¹ç›®åœ¨å‡çº§ nodejs ç‰ˆæœ¬åä¼šæŠ¥é”™ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>â€‹      ä¿®æ”¹package.jsonï¼Œåœ¨ç›¸å…³æ„å»ºå‘½ä»¤ä¹‹å‰åŠ å…¥<code>set NODE_OPTIONS=â€“openssl-legacy-provider</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service build&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨vscodeæ’ä»¶veturåˆ›å»ºvueæ–‡ä»¶æŠ¥é”™"><a href="#ä½¿ç”¨vscodeæ’ä»¶veturåˆ›å»ºvueæ–‡ä»¶æŠ¥é”™" class="headerlink" title="ä½¿ç”¨vscodeæ’ä»¶veturåˆ›å»ºvueæ–‡ä»¶æŠ¥é”™"></a>ä½¿ç”¨vscodeæ’ä»¶veturåˆ›å»ºvueæ–‡ä»¶æŠ¥é”™</h2><blockquote><p><code>Cannot find name &#39;script&#39;ï¼ŒCannot find name &#39;style&#39;</code> æ£€æµ‹è¯­æ³•script è§£å†³åŠæ³•</p></blockquote><p>é¦–é€‰é¡¹ â€“&gt; è®¾ç½® â€“&gt; æœç´¢ï¼ˆveturï¼‰</p><p>å…¨éƒ¨å–æ¶ˆå‹¾é€‰å³å¯</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324436.png" alt="image-20230128112122163"></p><p>æ³¨æ„ï¼šä½¿ç”¨vueçš„æ—¶å€™å°½é‡ä½¿ç”¨é©¼å³°å‘½å</p><h2 id="element-ui-ç»„ä»¶é»˜è®¤å±…ä¸­çš„é—®é¢˜"><a href="#element-ui-ç»„ä»¶é»˜è®¤å±…ä¸­çš„é—®é¢˜" class="headerlink" title="element ui ç»„ä»¶é»˜è®¤å±…ä¸­çš„é—®é¢˜"></a>element ui ç»„ä»¶é»˜è®¤å±…ä¸­çš„é—®é¢˜</h2><blockquote><p>ä½¿ç”¨ç»„ä»¶ä¸‹æ‹‰èœå•å’Œé€‰æ‹©æ¡†ä¼šå‡ºç°é»˜è®¤å±…ä¸­çš„é—®é¢˜ï¼Œå¯¼è‡´ä¸èƒ½æ­£ç¡®çš„æ‘†æ”¾ä½ç½®</p></blockquote><p><strong>åŸå› ï¼š</strong>é»˜è®¤ç»§æ‰¿äº†el-main çš„å±…ä¸­å’Œè¡Œé«˜ï¼Œå¯¼è‡´å‡ºç°é—®é¢˜</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324183.png" alt="image-20230207113913023"></p><p><strong>è§£å†³åŠæ³•</strong>ï¼šåœ¨cssä¸­é™å®šå³å¯</p><hr><h2 id="vue3ä¸­tså¼•å…¥jsæ— æ³•æ­£å¸¸å¼•å…¥çš„é—®é¢˜"><a href="#vue3ä¸­tså¼•å…¥jsæ— æ³•æ­£å¸¸å¼•å…¥çš„é—®é¢˜" class="headerlink" title="vue3ä¸­tså¼•å…¥jsæ— æ³•æ­£å¸¸å¼•å…¥çš„é—®é¢˜"></a>vue3ä¸­tså¼•å…¥jsæ— æ³•æ­£å¸¸å¼•å…¥çš„é—®é¢˜</h2><p>åŸå› ï¼štsä¸­ä¸¥æ ¼çš„ç±»å‹é™åˆ¶ï¼Œç›´æ¥å¼•å…¥jsä¼šå‡ºç° <code>implicitly has an â€˜anyâ€™ type</code>éšå¼<code>any</code>ç±»å‹</p><p>è§£å†³åŠæ³•ï¼ˆç›®å‰ï¼Œæœ€å¥½åº”è¯¥å¼•å…¥çš„jsé‡å†™ä¸ºtsæ–‡ä»¶ï¼‰åœ¨tsconfig.jsonä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;noImplicitAny&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202506091712000.png" alt="image-20240103155044593"></p><h2 id="æ ¹æ®æ—¶é—´æ¼”å˜çš„æ•°æ®å¯è§†åŒ–"><a href="#æ ¹æ®æ—¶é—´æ¼”å˜çš„æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ ¹æ®æ—¶é—´æ¼”å˜çš„æ•°æ®å¯è§†åŒ–"></a>æ ¹æ®æ—¶é—´æ¼”å˜çš„æ•°æ®å¯è§†åŒ–</h2><p><video src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/2025-06-09%2017-06-13.mkv"></video></p><p>å®ç°ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;fir&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;table-container&quot;&gt;</span><br><span class="line">      &lt;table class=&quot;custom-table&quot;&gt;</span><br><span class="line">        &lt;!--        &lt;thead&gt;--&gt;</span><br><span class="line">        &lt;!--        &lt;tr&gt;--&gt;</span><br><span class="line">        &lt;!--          &lt;th&gt;Message&lt;/th&gt;--&gt;</span><br><span class="line">        &lt;!--          &lt;th&gt;æ“ä½œ&lt;/th&gt;--&gt;</span><br><span class="line">        &lt;!--        &lt;/tr&gt;--&gt;</span><br><span class="line">        &lt;!--        &lt;/thead&gt;--&gt;</span><br><span class="line">        &lt;transition-group name=&quot;list&quot; tag=&quot;tbody&quot;&gt;</span><br><span class="line">          &lt;tr v-for=&quot;(row) in sortedTableData&quot;</span><br><span class="line">              :key=&quot;row.createdAt&quot;</span><br><span class="line">              :class=&quot;&#123; &#x27;pinned&#x27;: row.isPinned &#125;&quot;</span><br><span class="line">              class=&quot;row&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;td :title=&quot;row.message&quot; class=&quot;message-cell&quot;&gt;&#123;&#123; row.message &#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">              &lt;el-button style=&quot;width: 50px&quot; v-if=&quot;!row.isPinned&quot; link type=&quot;primary&quot; size=&quot;small&quot; @click=&quot;pinItem(row)&quot;&gt;</span><br><span class="line">                ç½®é¡¶</span><br><span class="line">              &lt;/el-button&gt;</span><br><span class="line">              &lt;el-button style=&quot;width: 50px&quot; v-else link type=&quot;primary&quot; size=&quot;small&quot; @click=&quot;unpinItem(row)&quot; &gt;</span><br><span class="line">                å–æ¶ˆç½®é¡¶</span><br><span class="line">              &lt;/el-button&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/transition-group&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-button</span><br><span class="line">        type=&quot;primary&quot;</span><br><span class="line">        @click=&quot;addNewRow&quot;</span><br><span class="line">        style = &quot;margin-top: 20px;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      æ¨¡æ‹Ÿæ–°å¢æ•°æ®</span><br><span class="line">    &lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">interface Info &#123;</span><br><span class="line">  name: string</span><br><span class="line">  message: string</span><br><span class="line">  createdAt: number // ç”¨äºè®°å½•åŸå§‹ç´¢å¼•</span><br><span class="line">  isPinned?: boolean    // æ˜¯å¦è¢«ç½®é¡¶ï¼Œå³æ˜¯å¦æ˜¯é‡è¦äº‹ä»¶ç½®é¡¶</span><br><span class="line">  pinTime?: number // è®°å½•æœ€åä¸€æ¬¡ç½®é¡¶çš„æ—¶é—´</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åç»­å¯ä»¥å°†æ•°æ®å­˜æ”¾åœ¨localStorage ä¸­</span><br><span class="line">const tableData = ref&lt;Info[]&gt;([</span><br><span class="line">  &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    message: &#x27;æˆ‘æ˜¯ç¤¾ä¼šä¸»ä¹‰æ¥ç­äººæˆ‘æ˜¯ç¤¾ä¼šä¸»ä¹‰æ¥ç­äººæˆ‘æ˜¯ç¤¾ä¼šä¸»ä¹‰æ¥ç­äººæˆ‘æ˜¯ç¤¾ä¼šä¸»ä¹‰æ¥ç­äºº&#x27;,</span><br><span class="line">    createdAt: Date.now() - 4000,</span><br><span class="line">    isPinned: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    message: &#x27;No. 189, Grove St, Los Angeles&#x27;,</span><br><span class="line">    createdAt: Date.now() - 3000,</span><br><span class="line">    isPinned: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    message: &#x27;No. 189, Grove St, Los Angeles&#x27;,</span><br><span class="line">    createdAt: Date.now() - 2000,</span><br><span class="line">    isPinned: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &#x27;Tom&#x27;,</span><br><span class="line">    message: &#x27;No. 189, Grove St, Los Angeles&#x27;,</span><br><span class="line">    createdAt: Date.now() - 1000,</span><br><span class="line">    isPinned: false,</span><br><span class="line">  &#125;,</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å¯¹è¡¨æ ¼æ•°æ®æ’åºï¼Œç”Ÿæˆè¡¨ä¸­å†…å®¹</span><br><span class="line"> * @description</span><br><span class="line"> * ç½®é¡¶åœ¨å‰ï¼Œéç½®é¡¶åœ¨åï¼Œç½®é¡¶é¡¹ä¸­æœ€æ–°çš„æ’åœ¨æœ€å‰</span><br><span class="line"> * åˆ›å»ºå‰¯æœ¬  data = [...tableData.value]</span><br><span class="line"> * ç­›é€‰å‡ºç½®é¡¶é¡¹å’Œæœªç½®é¡¶é¡¹ï¼ŒæŒ‰ createdAt å‡åºæ’åˆ—æœªç½®é¡¶é¡¹</span><br><span class="line"> *</span><br><span class="line"> * æŒ‰ pinTime é™åºæ’åˆ—ç½®é¡¶é¡¹ï¼ˆæœ€æ–°ç½®é¡¶æ’æœ€å‰ï¼‰  return</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">const sortedTableData = computed(() =&gt; &#123;</span><br><span class="line">  //</span><br><span class="line">  const data = [...tableData.value]</span><br><span class="line">  const pinned = data.filter(item =&gt; item.isPinned)</span><br><span class="line">  const unpinned = data.filter(item =&gt; !item.isPinned).sort((a, b) =&gt; b.createdAt - a.createdAt)</span><br><span class="line"></span><br><span class="line">  return [</span><br><span class="line">    ...pinned.sort((a, b) =&gt; (b.pinTime || 0) - (a.pinTime || 0)),</span><br><span class="line">    ...unpinned</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç½®é¡¶  æ¨¡æ‹Ÿçªå‘é‡è¦æ¶ˆæ¯ç½®é¡¶å˜è‰²</span><br><span class="line"> * @param row</span><br><span class="line"> * @description</span><br><span class="line"> *   ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ &#123; ...item &#125; åˆ›å»ºè¯¥å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚</span><br><span class="line"> *   å°†å‰¯æœ¬ä¸­çš„ isPinned è®¾ç½®ä¸º trueï¼Œè¡¨ç¤ºæ­¤è¡Œå·²è¢«ç½®é¡¶ã€‚</span><br><span class="line"> *   æ·»åŠ æˆ–æ›´æ–° pinTime å­—æ®µä¸ºå½“å‰æ—¶é—´æˆ³ï¼ˆDate.now()ï¼‰ï¼Œç”¨äºåç»­æ’åºæ—¶åˆ¤æ–­è°æ˜¯æœ€æ–°çš„ç½®é¡¶é¡¹ã€‚</span><br><span class="line"> *   :item å¯¹äºä¸æ˜¯ç›®æ ‡è¡Œçš„æ•°æ®ï¼Œä¸åšä»»ä½•æ›´æ”¹ï¼ŒåŸæ ·è¿”å›</span><br><span class="line"> */</span><br><span class="line">const pinItem = (row: Info) =&gt; &#123;</span><br><span class="line">  tableData.value = tableData.value.map(item =&gt;</span><br><span class="line">      item.createdAt === row.createdAt</span><br><span class="line">          ? &#123; ...item, isPinned: true, pinTime: Date.now() &#125;</span><br><span class="line">          : item</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å–æ¶ˆç½®é¡¶</span><br><span class="line"> * @param row</span><br><span class="line"> * @description</span><br><span class="line"> * è®¾ç½® isPinned = falseï¼Œå¹¶æ¸…é™¤ pinTime</span><br><span class="line"> * ä¸ç½®é¡¶æ–¹æ³•åŒç†</span><br><span class="line"> */</span><br><span class="line">const unpinItem = (row: Info) =&gt; &#123;</span><br><span class="line">  tableData.value = tableData.value.map(item =&gt;</span><br><span class="line">      item.createdAt === row.createdAt</span><br><span class="line">          ? &#123; ...item, isPinned: false, pinTime: undefined &#125;</span><br><span class="line">          : item</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ–°å¢è¡Œ == æ¨¡æ‹Ÿæ’å…¥æ–°æ•°æ®çš„æƒ…å†µ</span><br><span class="line"> * @description</span><br><span class="line"> */</span><br><span class="line">const addNewRow = () =&gt; &#123;</span><br><span class="line">  const newRow: Info = &#123;</span><br><span class="line">    name: &#x27;æ–°å¢ç”¨æˆ·&#x27;,</span><br><span class="line">    message: &#x27;è¿™æ˜¯ä¸€æ¡æ–°å¢çš„æ•°æ®&#x27;,</span><br><span class="line">    createdAt: Date.now(),</span><br><span class="line">    isPinned: false</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // æ’å…¥åˆ°æ•°ç»„å¼€å¤´</span><br><span class="line">  tableData.value.unshift(newRow)</span><br><span class="line"></span><br><span class="line">  // å¦‚æœè¶…è¿‡10æ¡ï¼Œåˆ é™¤ createdAt æœ€å°çš„ä¸€æ¡,å³æœ€æ—©åŠ å…¥çš„é‚£æ¡æ•°æ®</span><br><span class="line">  if (tableData.value.length &gt; 10) &#123;</span><br><span class="line">    const minIndexItem = tableData.value.reduce((prev, current) =&gt;</span><br><span class="line">        prev.createdAt &lt; current.createdAt ? prev : current</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    tableData.value = tableData.value.filter(</span><br><span class="line">        item =&gt; item.createdAt !== minIndexItem.createdAt</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">.table-container &#123;</span><br><span class="line">  height: 400px; /* å›ºå®šä¸º 10 è¡Œçš„é«˜åº¦ */</span><br><span class="line">  opacity: 0.9;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  background-color: #26436e;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å…¥åœºåŠ¨ç”» */</span><br><span class="line">.slide-enter-active &#123;</span><br><span class="line">  animation: slide-in 0.5s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes slide-in &#123;</span><br><span class="line">  from &#123;</span><br><span class="line">    transform: translateY(-30px);</span><br><span class="line">    opacity: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    transform: translateY(0);</span><br><span class="line">    opacity: 1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ç§»åŠ¨åŠ¨ç”»ï¼šå…¶ä»–å…ƒç´ ä¸‹æ»‘ */</span><br><span class="line">.slide-move &#123;</span><br><span class="line">  transition: transform 0.5s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ä¸ºç½®é¡¶è¡Œè®¾ç½®èƒŒæ™¯é¢œè‰² */</span><br><span class="line">.pinned &#123;</span><br><span class="line">  background-color: #a94d4d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.custom-table &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  border-collapse: collapse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.custom-table th,</span><br><span class="line">.custom-table td &#123;</span><br><span class="line">  padding: 7px;</span><br><span class="line">  border-bottom: 1px solid #274877;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.message-cell &#123;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  text-overflow: ellipsis;</span><br><span class="line">  width: 300px;</span><br><span class="line">  max-width: 300px;</span><br><span class="line">  text-align: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* è¿›å…¥åŠ¨ç”» */</span><br><span class="line">.list-enter-active &#123;</span><br><span class="line">  animation: slide-in 0.4s ease;</span><br><span class="line">  transition: opacity 0.4s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ç§»åŠ¨åŠ¨ç”» */</span><br><span class="line">.list-move &#123;</span><br><span class="line">  transition: transform 0.4s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ç¦»å¼€åŠ¨ç”» */</span><br><span class="line">.list-leave-active &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  animation: fade-out 0.3s ease;</span><br><span class="line">  transition: all 0.3s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes slide-in &#123;</span><br><span class="line">  from &#123;</span><br><span class="line">    transform: translateY(-20px);</span><br><span class="line">    opacity: 0;</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    transform: translateY(0);</span><br><span class="line">    opacity: 1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes fade-out &#123;</span><br><span class="line">  to &#123;</span><br><span class="line">    opacity: 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ä¿æŒé«˜åº¦ä¸€è‡´ */</span><br><span class="line">.row &#123;</span><br><span class="line">  height: 40px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h1 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h1><h2 id="è®¾ç½®htmlåŸç”Ÿè¡¨æ ¼å®ç°æ–‘é©¬çº¹æ•ˆæœ"><a href="#è®¾ç½®htmlåŸç”Ÿè¡¨æ ¼å®ç°æ–‘é©¬çº¹æ•ˆæœ" class="headerlink" title="è®¾ç½®htmlåŸç”Ÿè¡¨æ ¼å®ç°æ–‘é©¬çº¹æ•ˆæœ"></a>è®¾ç½®<code>html</code>åŸç”Ÿè¡¨æ ¼å®ç°æ–‘é©¬çº¹æ•ˆæœ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ™®é€šè¡Œçš„æ–‘é©¬çº¹ */</span></span><br><span class="line"><span class="selector-tag">tr</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.pinned</span>)<span class="selector-pseudo">:not</span>(<span class="selector-class">.mostImp</span>)<span class="selector-pseudo">:nth-child</span>(even) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3a5f8c</span>; <span class="comment">/* æµ…æ·±è“ */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">tr</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.pinned</span>)<span class="selector-pseudo">:not</span>(<span class="selector-class">.mostImp</span>)<span class="selector-pseudo">:nth-child</span>(odd) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#2b4d76</span>; <span class="comment">/* ç¨å¾®æ·±ä¸€ç‚¹çš„è“ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="div-ä¸­-img-å’Œ-span-åŒæ—¶æ°´å¹³å±…ä¸­"><a href="#div-ä¸­-img-å’Œ-span-åŒæ—¶æ°´å¹³å±…ä¸­" class="headerlink" title="div ä¸­ img å’Œ span åŒæ—¶æ°´å¹³å±…ä¸­"></a><code>div</code> ä¸­ <code>img</code> å’Œ <code>span</code> åŒæ—¶æ°´å¹³å±…ä¸­</h2><p>è§£å†³æ–¹æ³•ï¼š åœ¨ img å’Œ span ä¸­åŒæ—¶åŠ ä¸Š <code>vertical-align : middle </code>å³å¯    </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 35px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/xxx.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;vertical-align: middle;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot; vertical-align: middle;&quot;</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="divä¸­imgå±…ä¸­æ˜¾ç¤º"><a href="#divä¸­imgå±…ä¸­æ˜¾ç¤º" class="headerlink" title="divä¸­imgå±…ä¸­æ˜¾ç¤º"></a><code>div</code>ä¸­<code>img</code>å±…ä¸­æ˜¾ç¤º</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;r&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./images/kongjian.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">.r &#123;</span><br><span class="line"> display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç½‘é¡µä¸€ç›´å‡ºç°è“è‰²èƒŒæ™¯è§£å†³"><a href="#ç½‘é¡µä¸€ç›´å‡ºç°è“è‰²èƒŒæ™¯è§£å†³" class="headerlink" title="ç½‘é¡µä¸€ç›´å‡ºç°è“è‰²èƒŒæ™¯è§£å†³"></a>ç½‘é¡µä¸€ç›´å‡ºç°è“è‰²èƒŒæ™¯è§£å†³</h2><blockquote><p>å†™å‰ç«¯ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå‡ºç°ç‚¹å‡»aæ ‡ç­¾ï¼Œå¤–é¢åŒ…è£¹çš„spanæ ‡ç­¾æˆ–è€…å…¶ä»–æ ‡ç­¾ä¼šå‡ºç°è“è‰²çš„èƒŒæ™¯</p></blockquote><p>è§£å†³åŠæ³•ï¼š å¯¹<code>html</code>å’Œ<code>body</code>è¿›è¡Œè®¾ç½®</p><p>æ³¨æ„ï¼šä¸å»ºè®®ä½¿ç”¨ï¼Œå¦‚æœç›´æ¥è¿™æ ·è®¾ç½®å…¨å±€ï¼Œå°±ä¼šå‡ºç°æ–‡ç« å†…å®¹æ— æ³•è¢«é€‰ä¸­å¤åˆ¶ï¼Œå¯èƒ½åœ¨æŸäº›æ¡ä»¶ä¸‹å¹¶ä¸æ˜¯å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">html</span>&#123;</span><br><span class="line">    -moz-user-select: none; <span class="comment">/*ç«ç‹*/</span></span><br><span class="line">    -webkit-user-select: none; <span class="comment">/*webkitæµè§ˆå™¨*/</span></span><br><span class="line">    -ms-user-select: none; <span class="comment">/*IE10*/</span></span><br><span class="line">    -khtml-user-select: none; <span class="comment">/*æ—©æœŸæµè§ˆå™¨*/</span></span><br><span class="line">    user-select: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="pæ ‡ç­¾å†…å®¹è¶…è¿‡ä¸€è¡Œï¼ˆå¤šè¡Œï¼‰è‡ªåŠ¨çœç•¥"><a href="#pæ ‡ç­¾å†…å®¹è¶…è¿‡ä¸€è¡Œï¼ˆå¤šè¡Œï¼‰è‡ªåŠ¨çœç•¥" class="headerlink" title="pæ ‡ç­¾å†…å®¹è¶…è¿‡ä¸€è¡Œï¼ˆå¤šè¡Œï¼‰è‡ªåŠ¨çœç•¥"></a>pæ ‡ç­¾å†…å®¹è¶…è¿‡ä¸€è¡Œï¼ˆå¤šè¡Œï¼‰è‡ªåŠ¨çœç•¥</h2><h3 id="å•è¡Œçœç•¥"><a href="#å•è¡Œçœç•¥" class="headerlink" title="å•è¡Œçœç•¥"></a>å•è¡Œçœç•¥</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å•è¡Œæ˜¾ç¤ºçœç•¥å·</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šè¡Œçœç•¥"><a href="#å¤šè¡Œçœç•¥" class="headerlink" title="å¤šè¡Œçœç•¥"></a>å¤šè¡Œçœç•¥</h3><p><code>-webkit-line-clamp: 3; è¡¨ç¤ºè¶…å‡º3è¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œä»¥æ­¤ç±»æ¨</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// å¤šè¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œæ•°å­—<span class="number">3</span>ä¸ºè¶…å‡º<span class="number">3</span>è¡Œæ˜¾ç¤ºï¼Œ</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line">-webkit-line-clamp: <span class="number">3</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¼ æ ‡æ‚¬æµ®ä½¿é¢œè‰²å¹³æ»‘å˜æ¢"><a href="#é¼ æ ‡æ‚¬æµ®ä½¿é¢œè‰²å¹³æ»‘å˜æ¢" class="headerlink" title="é¼ æ ‡æ‚¬æµ®ä½¿é¢œè‰²å¹³æ»‘å˜æ¢"></a>é¼ æ ‡æ‚¬æµ®ä½¿é¢œè‰²å¹³æ»‘å˜æ¢</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¼ æ ‡æ»‘è¿‡<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.ul</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.6s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#2a68cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.6s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.ul2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.6s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis2</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis2</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: orangered;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.6s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis2</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.ul3</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis3</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.6s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis3</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis3</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: darkcyan;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.3s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis3</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.ul4</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis4</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.6s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis4</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis4</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: brown;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: <span class="number">0.3s</span> linear;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.lis4</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:after</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis&quot;</span>&gt;</span>å·¦åˆ°å³<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis&quot;</span>&gt;</span>å·¦åˆ°å³<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis&quot;</span>&gt;</span>å·¦åˆ°å³<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis&quot;</span>&gt;</span>å·¦åˆ°å³<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis&quot;</span>&gt;</span>å·¦åˆ°å³<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ul2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis2&quot;</span>&gt;</span>ä¸Šåˆ°ä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis2&quot;</span>&gt;</span>ä¸Šåˆ°ä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis2&quot;</span>&gt;</span>ä¸Šåˆ°ä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis2&quot;</span>&gt;</span>ä¸Šåˆ°ä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis2&quot;</span>&gt;</span>ä¸Šåˆ°ä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ul3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis3&quot;</span>&gt;</span>ä¸Šä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis3&quot;</span>&gt;</span>ä¸Šä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis3&quot;</span>&gt;</span>ä¸Šä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis3&quot;</span>&gt;</span>ä¸Šä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis3&quot;</span>&gt;</span>ä¸Šä¸‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ul4&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis4&quot;</span>&gt;</span>ä¸‹åˆ°ä¸Š<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis4&quot;</span>&gt;</span>ä¸‹åˆ°ä¸Š<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis4&quot;</span>&gt;</span>ä¸‹åˆ°ä¸Š<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis4&quot;</span>&gt;</span>ä¸‹åˆ°ä¸Š<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;lis4&quot;</span>&gt;</span>ä¸‹åˆ°ä¸Š<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç½‘ç«™å˜é»‘ç™½"><a href="#ç½‘ç«™å˜é»‘ç™½" class="headerlink" title="ç½‘ç«™å˜é»‘ç™½"></a>ç½‘ç«™å˜é»‘ç™½</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">        -moz-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">        -o-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">filter</span>: gray;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å›ºå®šhtmlä¸­imgçš„æ¯”ä¾‹"><a href="#å›ºå®šhtmlä¸­imgçš„æ¯”ä¾‹" class="headerlink" title="å›ºå®šhtmlä¸­imgçš„æ¯”ä¾‹"></a>å›ºå®šhtmlä¸­imgçš„æ¯”ä¾‹</h2><blockquote><p>æœ€è¿‘ä¿®æ”¹çš„ä¸€ä¸ªé¡¹ç›®ï¼Œè¦æ±‚è½®æ’­å›¾å›ºå®šä¸åŒæ¯”ä¾‹å¤§å°å›¾ç‰‡çš„æ¯”ä¾‹</p></blockquote><p>è§£å†³æ–¹æ¡ˆï¼šåœ¨cssæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆé™åˆ¶ å®½&#x2F;é«˜ï¼‰</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aspect-ratio: <span class="number">19</span>/<span class="number">8</span>;</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®aæ ‡ç­¾ä¸­è¶…è¿‡é•¿åº¦æ˜¾ç¤ºçœç•¥å·"><a href="#è®¾ç½®aæ ‡ç­¾ä¸­è¶…è¿‡é•¿åº¦æ˜¾ç¤ºçœç•¥å·" class="headerlink" title="è®¾ç½®aæ ‡ç­¾ä¸­è¶…è¿‡é•¿åº¦æ˜¾ç¤ºçœç•¥å·"></a>è®¾ç½®aæ ‡ç­¾ä¸­è¶…è¿‡é•¿åº¦æ˜¾ç¤ºçœç•¥å·</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">80%</span> - <span class="number">80px</span>);  // åŠ¨æ€è®¡ç®—å®½åº¦</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-line-clamp: <span class="number">2</span>;  // è®¾ç½®è¡Œæ•°</span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure><h1 id="å‰åç«¯å¯¹æ¥"><a href="#å‰åç«¯å¯¹æ¥" class="headerlink" title="å‰åç«¯å¯¹æ¥"></a>å‰åç«¯å¯¹æ¥</h1><h2 id="åŠ¨æ€ç”Ÿæˆè¡¨æ ¼"><a href="#åŠ¨æ€ç”Ÿæˆè¡¨æ ¼" class="headerlink" title="åŠ¨æ€ç”Ÿæˆè¡¨æ ¼"></a>åŠ¨æ€ç”Ÿæˆè¡¨æ ¼</h2><blockquote><p>éœ€æ±‚ï¼šåç«¯ä¼ æ•°æ®ï¼Œå‰ç«¯ajaxæ¥æ”¶ä¹‹åè¿›è¡Œæ•°æ®çš„å¤„ç†ï¼ŒåŠ¨æ€ç”Ÿæˆæ‰€éœ€è¦çš„è¡¨æ ¼</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&quot;http://localhost:8080/getScore&quot;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;<span class="string">&quot;year&quot;</span>:year,<span class="string">&quot;semester&quot;</span>:time&#125;,</span><br><span class="line">            <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> con = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                $.<span class="title function_">each</span>(response,<span class="keyword">function</span>(<span class="params">index,obj</span>)&#123;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;tr&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">course_id</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">course_name</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">teacher_name</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">credit</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">credit_hour</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">stu_num</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">session_time</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;td&gt;&#x27;</span>+ obj.<span class="property">classroom</span>+<span class="string">&#x27;&lt;/td&gt;&#x27;</span>;</span><br><span class="line">                    con += <span class="string">&#x27;&lt;/tr&gt;&#x27;</span>;</span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">                $(<span class="string">&quot;#mytable&quot;</span>).<span class="title function_">html</span>(con)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1111&quot;</span>)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆè¡¨æ ¼çš„åœ°æ–¹ï¼Œæ³¨é‡Šæ‰çš„åœ°æ–¹æ˜¯ä¹‹å‰çš„é™æ€æ•°æ®ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;mytable&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                            &lt;tr&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;[00200011]å¤§å­¦è‹±è¯­è¯»å†™è¯‘(å››)&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;2.0&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;36&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;xxx&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;é‡‘æ˜æ ¡åŒºç»¼åˆæ¥¼2204&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;å‘¨äºŒä¸‰-å››èŠ‚&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;å…¬å…±åŸºç¡€å¹³å°è¯¾/å¿…ä¿®è¯¾&lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                    &lt;button type=&quot;button&quot; class=&quot;btn btn-info&quot; id=&quot;edit1&quot; &gt;æäº¤&lt;/button&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                    &lt;button type=&quot;button&quot; class=&quot;btn btn-info&quot; id=&quot;edit2&quot; &gt;é€€é€‰&lt;/button&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;/td&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                            &lt;/tr&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼å®ç°æ­£å¸¸çš„ç‚¹å‡»åŠŸèƒ½"><a href="#åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼å®ç°æ­£å¸¸çš„ç‚¹å‡»åŠŸèƒ½" class="headerlink" title="åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼å®ç°æ­£å¸¸çš„ç‚¹å‡»åŠŸèƒ½"></a>åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼å®ç°æ­£å¸¸çš„ç‚¹å‡»åŠŸèƒ½</h2><blockquote><p>éœ€æ±‚ï¼šåŠ¨æ€ç”Ÿæˆè¡¨æ ¼ä¹‹åï¼Œè¦å¯¹è¡¨æ ¼å†…çš„æŸä¸€ä¸ªå…ƒç´ è®¾ç½®ç‚¹å‡»äº‹ä»¶</p></blockquote><p>éœ€è¦å…ˆè·å–é™æ€çš„å…ƒç´ ï¼Œç„¶åè®¾ç½®é‡Œé¢çš„ç‚¹å‡»äº‹ä»¶ï¼Œç„¶åæ ¹æ®<code>$(this)</code>è¿›è¡Œå…ƒç´ çš„æŸ¥æ‰¾ï¼Œä»è€Œå®ç°ç‚¹å‡»äº‹ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#mytable&quot;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="string">&quot;button[id=&#x27;edit1&#x27;]&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> uu = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&quot;tr&quot;</span>).<span class="title function_">find</span>(<span class="string">&quot;#course_name&quot;</span>).<span class="title function_">text</span>();</span><br><span class="line">    <span class="keyword">let</span> te1 = uu.<span class="title function_">split</span>(<span class="string">&#x27;[&#x27;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;]&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">    te1 = <span class="title class_">Number</span>(te1);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(te1)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="jqè®¾è®¡è·³è½¬"><a href="#jqè®¾è®¡è·³è½¬" class="headerlink" title="jqè®¾è®¡è·³è½¬"></a>jqè®¾è®¡è·³è½¬</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;#mytable&quot;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="string">&quot;button[id=&#x27;btnn2&#x27;]&quot;</span> ,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> text1 = $(<span class="variable language_">this</span>).<span class="title function_">parents</span>(<span class="string">&quot;tr&quot;</span>).<span class="title function_">find</span>(<span class="string">&quot;#stu_id&quot;</span>).<span class="title function_">text</span>();</span><br><span class="line">    text1 = <span class="title class_">Number</span>(text1)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(text1)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®é¡¹ç›®å†…çš„è·³è½¬è¯·æ±‚é“¾æ¥</span></span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">&quot;/toAdminCourseUpdate/&quot;</span>+text1;</span><br><span class="line">    location.<span class="property">href</span> = url</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Springbootå’ŒVueä½¿ç”¨axiosè¿›è¡Œæ•°æ®å¯¹æ¥"><a href="#Springbootå’ŒVueä½¿ç”¨axiosè¿›è¡Œæ•°æ®å¯¹æ¥" class="headerlink" title="Springbootå’ŒVueä½¿ç”¨axiosè¿›è¡Œæ•°æ®å¯¹æ¥"></a>Springbootå’ŒVueä½¿ç”¨axiosè¿›è¡Œæ•°æ®å¯¹æ¥</h2><h3 id="VueåŠ è½½axios"><a href="#VueåŠ è½½axios" class="headerlink" title="VueåŠ è½½axios"></a>VueåŠ è½½axios</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><h3 id="åœ¨å…¨å±€ä½¿ç”¨axiosï¼ˆåœ¨main-jsä¸­è¿›è¡Œé…ç½®ï¼‰"><a href="#åœ¨å…¨å±€ä½¿ç”¨axiosï¼ˆåœ¨main-jsä¸­è¿›è¡Œé…ç½®ï¼‰" class="headerlink" title="åœ¨å…¨å±€ä½¿ç”¨axiosï¼ˆåœ¨main.jsä¸­è¿›è¡Œé…ç½®ï¼‰"></a>åœ¨å…¨å±€ä½¿ç”¨axiosï¼ˆåœ¨main.jsä¸­è¿›è¡Œé…ç½®ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&quot;http://localhost:8080/api&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$axios</span> = axios</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®è·¨åŸŸ"><a href="#è®¾ç½®è·¨åŸŸ" class="headerlink" title="è®¾ç½®è·¨åŸŸ"></a>è®¾ç½®è·¨åŸŸ</h3><blockquote><p>æ‰“å¼€<code>vue.config.js</code>ï¼Œè¿›è¡Œè·¨åŸŸè¯·æ±‚çš„é…ç½®</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8081&#x27;</span>, <span class="comment">// æˆ‘åç«¯è¯·æ±‚çš„åœ°å€æ˜¯8081åœ°å€</span></span><br><span class="line">            <span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/api&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,</span><br><span class="line">            <span class="attr">ws</span>: <span class="literal">true</span>, <span class="comment">// ç”¨äºæ”¯æŒwebsocket</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span>   <span class="comment">//  ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å»ºä¸€ä¸ªç®€å•çš„åç«¯è¯·æ±‚"><a href="#å»ºä¸€ä¸ªç®€å•çš„åç«¯è¯·æ±‚" class="headerlink" title="å»ºä¸€ä¸ªç®€å•çš„åç«¯è¯·æ±‚"></a>å»ºä¸€ä¸ªç®€å•çš„åç«¯è¯·æ±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/AxiosTest&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">AxiosTest</span><span class="params">(<span class="meta">@RequestParam(&quot;test&quot;)</span> String test)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;111111111111&quot;</span>);</span><br><span class="line">    System.out.println(test);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;nihao&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰åç«¯äº¤äº’"><a href="#å‰åç«¯äº¤äº’" class="headerlink" title="å‰åç«¯äº¤äº’"></a>å‰åç«¯äº¤äº’</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">        // ç¬¬ä¸€ç§æ–¹å¼</span><br><span class="line">        kk()&#123;</span><br><span class="line">            this.$axios.get(&#x27;/AxiosTest&#x27;,&#123;</span><br><span class="line">                params: &#123;</span><br><span class="line">                    test: &#x27;coco&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .then((response)=&gt;&#123;</span><br><span class="line">                console.log(response);</span><br><span class="line">            &#125;).catch((response)=&gt;&#123;</span><br><span class="line">                console.log(response);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        // ç¬¬äºŒç§æ–¹å¼</span><br><span class="line">        async tesst()&#123;</span><br><span class="line"></span><br><span class="line">            const &#123;data: res&#125; = await this.$axios.get(&#x27;/AxiosTest&#x27;,&#123;</span><br><span class="line">                params: &#123;</span><br><span class="line">                    test: this.test</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            console.log(res);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324764.png" alt="image-20230219015243374"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172324094.png" alt="image-20230219015256383"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot</title>
      <link href="/2022/07/01/springboot/"/>
      <url>/2022/07/01/springboot/</url>
      
        <content type="html"><![CDATA[<p>è·Ÿéšè§†é¢‘ç»ƒä¹ çš„ä»£ç å­˜æ”¾åœ¨  GitHubä»“åº“ï¼š <a href="https://github.com/wuwei1636/java">https://github.com/wuwei1636/java</a></p><p>è¿™è¾¹åšå®¢æˆ‘åªå†™äº†ä¸€å°éƒ¨åˆ†ï¼Œè¯¦ç»†ç¬”è®°å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/qq_43167873/article/details/122471275">è¯¥ç¯‡åšå®¢</a>ï¼Œæˆ–è€…å»<a href="http://mp.weixin.qq.com/mp/homepage?__biz=Mzg2NTAzMTExNg==&hid=1&sn=3247dca1433a891523d9e4176c90c499&scene=18#wechat_redirect">ç‹‚ç¥çš„å…¬ä¼—å·</a></p><hr><h1 id="Springboot"><a href="#Springboot" class="headerlink" title="Springboot"></a>Springboot</h1><h2 id="ç¬¬ä¸€ä¸ªSpring-booté¡¹ç›®"><a href="#ç¬¬ä¸€ä¸ªSpring-booté¡¹ç›®" class="headerlink" title="ç¬¬ä¸€ä¸ªSpring booté¡¹ç›®"></a>ç¬¬ä¸€ä¸ªSpring booté¡¹ç›®</h2><h3 id="ä½¿ç”¨springå®˜ç½‘ç”Ÿæˆ"><a href="#ä½¿ç”¨springå®˜ç½‘ç”Ÿæˆ" class="headerlink" title="ä½¿ç”¨springå®˜ç½‘ç”Ÿæˆ"></a>ä½¿ç”¨springå®˜ç½‘ç”Ÿæˆ</h3><p>æ‰“å¼€spring bootå®˜ç½‘ï¼Œåœ°å€ï¼š<a href="https://start.spring.io/">https://start.spring.io/</a></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319137.png" alt="image-20220702095433847"></p><p>é€‰æ‹©ä¹‹åç‚¹å‡»ä¸‹é¢æœ€å·¦ä¾§çš„æŒ‰é’®ï¼Œä¸‹è½½å‹ç¼©åŒ…ï¼Œç„¶åè§£å‹å¯¼å…¥ideaå³å¯ã€‚</p><p><strong>å¯¼å…¥ï¼šåœ¨ä¹‹å‰çš„ideaä¸­æœ‰importæŒ‰é’®ï¼Œä½†æ˜¯æœ€æ–°ç‰ˆçš„ideaæ²¡æœ‰å¯¼å…¥ï¼Œç›´æ¥openè§£å‹åçš„é¡¹ç›®å°±å¯ä»¥ç›´æ¥è¿è¡Œï¼Œå¦‚æœjdkä¸åŒçš„è¯ï¼Œå°±æ‰“å¼€settingä¿®æ”¹jdkç‰ˆæœ¬</strong></p><p>ä½¿ç”¨spring.ioéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒè¿›è¡Œspringbootçš„é¡¹ç›®åˆ›å»ºï¼Œæ­¥éª¤åŒä¸Š</p><p>é˜¿é‡Œäº‘åˆ›å»ºspring boot <a href="https://start.aliyun.com/bootstrap.html">https://start.aliyun.com/bootstrap.html</a></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319423.png" alt="image-20220702095731963"></p><h3 id="ä½¿ç”¨ideaç”Ÿæˆ"><a href="#ä½¿ç”¨ideaç”Ÿæˆ" class="headerlink" title="ä½¿ç”¨ideaç”Ÿæˆ"></a>ä½¿ç”¨ideaç”Ÿæˆ</h3><p>æ‰“å¼€ideaï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319770.png" alt="image-20220702095825152"></p><p>Server URLï¼šé»˜è®¤çš„æ˜¯ spring.io</p><p>ä½†æ˜¯å®¹æ˜“è¿æ¥ä¸ä¸Šï¼Œæ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒ<a href="https://start.aliyun.com/">https://start.aliyun.com/</a> </p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319349.png" alt="image-20220702095949054"></p><p>ç‚¹å‡»nextåé€‰æ‹©æ‰€éœ€çš„ä¾èµ–ï¼Œç„¶åcreateå³å¯ã€‚</p><h2 id="Springbootæ•´åˆmybatis"><a href="#Springbootæ•´åˆmybatis" class="headerlink" title="Springbootæ•´åˆmybatis"></a>Springbootæ•´åˆmybatis</h2><blockquote><p>æ­¥éª¤ï¼š</p><ol><li>å¯¼å…¥pomä¾èµ–</li><li>é…ç½®æ•°æ®åº“ï¼ˆapplication.propertiesï¼‰</li><li>ç¼–å†™å®ä½“ç±» pojo</li><li>ç¼–å†™æ•°æ®åº“åº•å±‚ mapper&#x2F; dao</li><li>ç¼–å†™ mybatis çš„ mapper.xml ï¼ˆæ•°æ®åº“æ“ä½œï¼‰</li><li>ç¼–å†™ service å±‚æ¥å£ å’Œ å¯¹åº”çš„ serviceæ–¹æ³•</li><li>ç¼–å†™ controller å±‚</li><li>å®ç°å‰åç«¯çš„æ•°æ®äº¤äº’ï¼ˆthymeleaf+springboot+mybatisï¼‰</li><li>è¿è¡Œæµ‹è¯•</li></ol></blockquote><p><strong>ä»¥ä¸‹çš„ä»£ç çš„éƒ½åªæ˜¯ä¸ºäº†å±•ç¤ºæ­¥éª¤ï¼Œæ‰€ä»¥ä»£ç æ²¡æœ‰æ”¾å…¨ï¼Œè¯¦ç»†çš„è¯·å‚è€ƒæˆ‘GitHubä¸Šspringbootä¸­çš„<a href="https://github.com/wuwei1636/java/tree/main/springboot/springboot-03-web">03-web</a></strong></p><h3 id="å¯¼å…¥Pomä¾èµ–"><a href="#å¯¼å…¥Pomä¾èµ–" class="headerlink" title="å¯¼å…¥Pomä¾èµ–"></a>å¯¼å…¥Pomä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--jdbc--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ•°æ®åº“"><a href="#é…ç½®æ•°æ®åº“" class="headerlink" title="é…ç½®æ•°æ®åº“"></a>é…ç½®æ•°æ®åº“</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…³é—­æ¨¡æ¿å¼•æ“çš„ç¼“å­˜</span></span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶çš„çœŸå®ä½ç½®ï¼ˆå›½é™…åŒ–ï¼Œç™»å½•ç•Œé¢ä¸­è‹±åˆ‡æ¢ï¼‰</span></span><br><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">i18n.login</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="attr">spring.mvc.format.date</span>=<span class="string">yyyy-MM-dd</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æ•°æ®åº“é©±åŠ¨ï¼š</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æ•°æ®åº“è¿æ¥åœ°å€</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=false&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“ç”¨æˆ·å&amp;å¯†ç ï¼š</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ•´åˆmybatis</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.li.pojo</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/mapper/*.xml</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®ä½“ç±»-pojo"><a href="#ç¼–å†™å®ä½“ç±»-pojo" class="headerlink" title="ç¼–å†™å®ä½“ç±» pojo"></a>ç¼–å†™å®ä½“ç±» pojo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘˜å·¥è¡¨ Employee</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;  <span class="comment">// 0 : å¥³   1 : ç”·</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> departmentId;</span><br><span class="line">    <span class="keyword">private</span> Department department;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(Integer id, String name, String email, Integer gender, Department department,<span class="type">int</span> departmentId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.department = department;</span><br><span class="line">        <span class="built_in">this</span>.departmentId = departmentId;</span><br><span class="line">        <span class="built_in">this</span>.birth = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éƒ¨é—¨è¡¨ Department</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String departmentName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æ•°æ®åº“åº•å±‚Mapper"><a href="#ç¼–å†™æ•°æ®åº“åº•å±‚Mapper" class="headerlink" title="ç¼–å†™æ•°æ®åº“åº•å±‚Mapper"></a>ç¼–å†™æ•°æ®åº“åº•å±‚Mapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">    Collection&lt;Employee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Employee <span class="title function_">getEmployee</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span> <span class="comment">// mybatis</span></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">// è¢«springæ‰˜ç®¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DepartmentMapper</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–æ‰€æœ‰çš„department</span></span><br><span class="line">    Collection&lt;Department&gt; <span class="title function_">getAllDepartment</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡idè·å–department</span></span><br><span class="line">    Department <span class="title function_">getDepartment</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™mybatisçš„Mapper-xml"><a href="#ç¼–å†™mybatisçš„Mapper-xml" class="headerlink" title="ç¼–å†™mybatisçš„Mapper.xml"></a>ç¼–å†™mybatisçš„Mapper.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.li.Mapper.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;EmployeeMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;departmentId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;departmentId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">column</span>=<span class="string">&quot;birth&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;department&quot;</span>  <span class="attr">javaType</span>=<span class="string">&quot;Department&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;departmentId&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllEmployee&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;EmployeeMap&quot;</span>&gt;</span></span><br><span class="line">        select e.id,e.name,e.email,e.gender,e.departmentId,e.birth,d.departmentName</span><br><span class="line">        from mybatis.employee e left join mybatis.department d</span><br><span class="line">        on e.departmentId = d.id</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmployee&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.employee where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmployee&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.employee (id,name,email,gender,birth,departmentId)</span><br><span class="line">        values (#&#123;id&#125;,#&#123;name&#125;,#&#123;email&#125;,#&#123;gender&#125;,#&#123;birth&#125;,#&#123;departmentId&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        update mybatis.employee set name = #&#123;name&#125; ,email = #&#123;email&#125;,gender = #&#123;gender&#125;</span><br><span class="line">        ,birth=#&#123;birth&#125;,departmentId=#&#123;departmentId&#125;</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        delete from mybatis.employee where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™serviceå±‚æ¥å£å’Œå¯¹åº”çš„serviceæ–¹æ³•"><a href="#ç¼–å†™serviceå±‚æ¥å£å’Œå¯¹åº”çš„serviceæ–¹æ³•" class="headerlink" title="ç¼–å†™serviceå±‚æ¥å£å’Œå¯¹åº”çš„serviceæ–¹æ³•"></a>ç¼–å†™serviceå±‚æ¥å£å’Œå¯¹åº”çš„serviceæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">    Collection&lt;Employee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Employee <span class="title function_">getEmployee</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmployeeMapper</span><span class="params">(EmployeeMapper employeeMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.employeeMapper = employeeMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.addEmployee(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.getAllEmployee();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmployee</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.getEmployee(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.update(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™controllerå±‚"><a href="#ç¼–å†™controllerå±‚" class="headerlink" title="ç¼–å†™controllerå±‚"></a>ç¼–å†™controllerå±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentService departmentService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// list æ˜¾ç¤ºæ‰€æœ‰æˆå‘˜</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">list</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        Collection&lt;Employee&gt; employees = employeeService.getAllEmployee();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;emps&quot;</span>,employees);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;emp/list&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ è¯·æ±‚ è·³è½¬ç•Œé¢</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/emp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toAddEmployee</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        Collection&lt;Department&gt; department = departmentService.getAllDepartment();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;departments&quot;</span>,department);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;emp/add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ ç”¨æˆ·å®ç°</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/emp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">        employeeService.addEmployee(employee); <span class="comment">// ä¿å­˜å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=====================================&gt;&quot;</span>+employee);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹ä¿¡æ¯ è·³è½¬ç•Œé¢</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/change/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">changeEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span>&#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeService.getEmployee(id);</span><br><span class="line">        Collection&lt;Department&gt; department = departmentService.getAllDepartment();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;emp&quot;</span>,employee);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;change&quot;</span>,department);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/emp/change&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¡®è®¤ä¿®æ”¹è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">        employeeService.update(employee);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id)</span>&#123;</span><br><span class="line">        employeeService.delete(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°å‰åç«¯æ•°æ®äº¤äº’"><a href="#å®ç°å‰åç«¯æ•°æ®äº¤äº’" class="headerlink" title="å®ç°å‰åç«¯æ•°æ®äº¤äº’"></a>å®ç°å‰åç«¯æ•°æ®äº¤äº’</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">&quot;~&#123;common/commons.html::headbar&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">&quot;~&#123;common/commons.html::sidebar(active = &#x27;list.html&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">role</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-md-9 ml-sm-auto col-lg-10 pt-3 px-4&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success btn-sm&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emp&#125;&quot;</span>&gt;</span>æ·»åŠ å‘˜å·¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-responsive&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-striped table-sm&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>department<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>birth<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;emp:$&#123;emps&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getName()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getEmail()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getGender() == 1 ? &#x27;ç”·&#x27;:&#x27;å¥³&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getDepartment().getDepartmentName()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(emp.getBirth(),&#x27;yyyy-MM-dd HH:mm&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-primary&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/change/&#125; + $&#123;emp.getId()&#125;&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-danger&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/delete/&#125; + $&#123;emp.getId()&#125;&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Springbootæ•´åˆMongodb"><a href="#Springbootæ•´åˆMongodb" class="headerlink" title="Springbootæ•´åˆMongodb"></a>Springbootæ•´åˆMongodb</h2><blockquote><ol><li>å¯¼å…¥pomä¾èµ–</li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶  properties</li><li>ç¼–å†™å®ä½“ç±» pojo</li><li>ç¼–å†™ daoå±‚å’Œdaoçš„å®ç°ç±»</li><li>ç¼–å†™serviceå±‚å’Œserviceçš„å®ç°</li><li>ç¼–å†™controller</li><li>æµ‹è¯•</li></ol></blockquote><h3 id="å¯¼å…¥pomä¾èµ–"><a href="#å¯¼å…¥pomä¾èµ–" class="headerlink" title="å¯¼å…¥pomä¾èµ–"></a>å¯¼å…¥pomä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mongodb--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-mongodb<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--çƒ­éƒ¨ç½²--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--jsonè½¬æ¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mongodbé…ç½®</span></span><br><span class="line"><span class="attr">spring.data.mongodb.uri</span>=<span class="string">mongodb://localhost:27017/Test</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®ä½“ç±»"><a href="#ç¼–å†™å®ä½“ç±»" class="headerlink" title="ç¼–å†™å®ä½“ç±»"></a>ç¼–å†™å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Document(collection = &quot;test1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String _id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;test2&gt; test2List;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Document(collection = &quot;test2&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String _id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™daoå±‚"><a href="#ç¼–å†™daoå±‚" class="headerlink" title="ç¼–å†™daoå±‚"></a>ç¼–å†™daoå±‚</h3><h4 id="daoå±‚æ¥å£"><a href="#daoå±‚æ¥å£" class="headerlink" title="daoå±‚æ¥å£"></a>daoå±‚æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SiteFlowDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®åå­—æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤šè¡¨è”æŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="daoå±‚æ¥å£å®ç°"><a href="#daoå±‚æ¥å£å®ç°" class="headerlink" title="daoå±‚æ¥å£å®ç°"></a>daoå±‚æ¥å£å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SiteFlowDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">SiteFlowDao</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MongoTemplate mongoTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        mongoTemplate.save(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;id&quot;</span>).is(id));</span><br><span class="line">        mongoTemplate.remove(query,test1.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;name&quot;</span>).is(name));</span><br><span class="line">        <span class="type">test1</span> <span class="variable">one</span> <span class="operator">=</span> mongoTemplate.findOne(query, test1.class);</span><br><span class="line">        <span class="keyword">return</span> one;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;id&quot;</span>).is(s1.getId()));</span><br><span class="line">        <span class="type">Update</span> <span class="variable">update</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Update</span>();</span><br><span class="line">        update.set(<span class="string">&quot;name&quot;</span>,s1.getName()).set(<span class="string">&quot;age&quot;</span>,s1.getAge());</span><br><span class="line">        <span class="type">UpdateResult</span> <span class="variable">updateResult</span> <span class="operator">=</span> mongoTemplate.updateMulti(query, update, test1.class);</span><br><span class="line">        <span class="keyword">if</span>(updateResult.getModifiedCount()&gt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">LookupOperation</span> <span class="variable">lookupOperation</span> <span class="operator">=</span> LookupOperation.newLookup()</span><br><span class="line">                .from(<span class="string">&quot;test2&quot;</span>) <span class="comment">//å…³è”ä»è¡¨å</span></span><br><span class="line">                .localField(<span class="string">&quot;id&quot;</span>) <span class="comment">//ä¸»è¡¨å…³è”å­—æ®µ</span></span><br><span class="line">                .foreignField(<span class="string">&quot;id&quot;</span>)<span class="comment">//ä»è¡¨å…³è”çš„å­—æ®µ</span></span><br><span class="line">                .as(<span class="string">&quot;test2List&quot;</span>); <span class="comment">//æŸ¥è¯¢ç»“æœå</span></span><br><span class="line">        <span class="comment">// è·å–æŒ‡å®šå­—æ®µçš„æ•°æ®  ProjectionOperation project = Aggregation.project(&quot;id&quot;,&quot;name&quot;,&quot;age&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> Criteria.where(<span class="string">&quot;test2List&quot;</span>).not().size(<span class="number">0</span>); <span class="comment">// ä¸ºè¾“å‡ºçš„list æ·»åŠ æ¡ä»¶</span></span><br><span class="line">        <span class="type">AggregationOperation</span> <span class="variable">match</span> <span class="operator">=</span> Aggregation.match(criteria);</span><br><span class="line">        <span class="comment">//UnwindOperation unwind = Aggregation.unwind(&quot;test2List&quot;); // åˆ†è§£å­—æ®µ ï¼Œ ä¾‹å¦‚ å°†æ•°ç»„å¤§å°ä¸ºnçš„å…ƒç´ ï¼Œåˆ†è§£ä¸ºnä¸ªæ–‡æ¡£</span></span><br><span class="line">        <span class="type">Aggregation</span> <span class="variable">aggregation</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,match);</span><br><span class="line">        List&lt;test1&gt; deto = mongoTemplate.aggregate(aggregation, <span class="string">&quot;test1&quot;</span>,test1.class).getMappedResults();</span><br><span class="line">        <span class="comment">//// ä¸Šé¢ test1 å¿…é¡»æ˜¯ ä¸»è¡¨çš„åå­—</span></span><br><span class="line">        <span class="comment">//for (test1 test1 : deto) &#123;</span></span><br><span class="line">        <span class="comment">//    System.out.println(test1);</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="keyword">return</span> deto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™serviceå±‚"><a href="#ç¼–å†™serviceå±‚" class="headerlink" title="ç¼–å†™serviceå±‚"></a>ç¼–å†™serviceå±‚</h3><h4 id="serviceå±‚æ¥å£"><a href="#serviceå±‚æ¥å£" class="headerlink" title="serviceå±‚æ¥å£"></a>serviceå±‚æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SiteFlowService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="serviceå±‚æ¥å£å®ç°"><a href="#serviceå±‚æ¥å£å®ç°" class="headerlink" title="serviceå±‚æ¥å£å®ç°"></a>serviceå±‚æ¥å£å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SiteFlowServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SiteFlowService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SiteFlowDao siteFlowDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        siteFlowDao.add(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        siteFlowDao.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> siteFlowDao.findByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> siteFlowDao.update(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> siteFlowDao.findListByTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="controllerå±‚"><a href="#controllerå±‚" class="headerlink" title="controllerå±‚"></a>controllerå±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SiteFlowService siteFlowService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(test1 ss1)</span>&#123;</span><br><span class="line">        siteFlowService.add(ss1);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        siteFlowService.remove(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;delete&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        siteFlowService.remove(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;delete&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(test1 ss1)</span>&#123;</span><br><span class="line">        siteFlowService.update(ss1);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;update&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/TwoList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;test1&gt; listByTest = siteFlowService.findListByTest();</span><br><span class="line">        System.out.println(<span class="string">&quot;=======================&quot;</span>+listByTest+<span class="string">&quot;============================&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h2><h3 id="springbooté›†æˆswagger"><a href="#springbooté›†æˆswagger" class="headerlink" title="springbooté›†æˆswagger"></a>springbooté›†æˆswagger</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–°å»º ä¸€ä¸ª<code>SwaggerConfig.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">swaggerConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®çš„åœ°å€å˜ä¸ºï¼š</p><p> <code>http://localhost:8080/swagger-ui/</code>æˆ–è€…</p><p><code>http://localhost:8080/swagger-ui/index.html</code></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319629.png" alt="image-20220706185150574"></p><h3 id="é…ç½®swaggerä¿¡æ¯"><a href="#é…ç½®swaggerä¿¡æ¯" class="headerlink" title="é…ç½®swaggerä¿¡æ¯"></a>é…ç½®swaggerä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">swaggerConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®äº†swaggerçš„docketå®ä¾‹</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®swaggerçš„ä¿¡æ¯=apiInfo</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;æå¤æ¾&quot;</span>, <span class="string">&quot;https://nan-bluesky.top/&quot;</span>, <span class="string">&quot;1537628435@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfo</span>(</span><br><span class="line">                <span class="string">&quot;æå¤æ¾çš„swaggeræ–‡æ¡£&quot;</span>,</span><br><span class="line">                <span class="string">&quot;é‡äº‹ä¸å†³ï¼Œä½†é—®æ˜¥é£&quot;</span>,</span><br><span class="line">                <span class="string">&quot;v1.0&quot;</span>,</span><br><span class="line">                <span class="string">&quot;https://nan-bluesky.top/&quot;</span>,</span><br><span class="line">                contact,</span><br><span class="line">                <span class="string">&quot;Apache 2.0&quot;</span>,</span><br><span class="line">                <span class="string">&quot;http://www.apache.org/licenses/LICENSE-2.0&quot;</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayList</span>()</span><br><span class="line"></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202207072101228.png" alt="image-20220706190844903"></p><h3 id="swaggeré…ç½®æ‰«ææ¥å£"><a href="#swaggeré…ç½®æ‰«ææ¥å£" class="headerlink" title="swaggeré…ç½®æ‰«ææ¥å£"></a>swaggeré…ç½®æ‰«ææ¥å£</h3><p>Docket:select()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo())</span><br><span class="line">        .select()</span><br><span class="line">        <span class="comment">// RequestHandlerSelectors é…ç½®è¦æ‰«ææ¥å£çš„æ–¹å¼</span></span><br><span class="line">        <span class="comment">// basePackage æŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br><span class="line">        <span class="comment">// any() æ‰«æå…¨éƒ¨</span></span><br><span class="line">        <span class="comment">// none() éƒ½ä¸æ‰«æ</span></span><br><span class="line">        <span class="comment">//withClassAnnotation() æ‰«æç±»ä¸Šçš„æ³¨è§£ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªæ³¨è§£çš„åå°„å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// withMethodAnnotation() æ‰«ææ–¹æ³•ä¸Šçš„æ³¨è§£</span></span><br><span class="line">        .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.li.swagger.controller&quot;</span>))</span><br><span class="line">        <span class="comment">// paths  è¿‡æ»¤å¸¦æœ‰ï¼ˆï¼‰è¯·æ±‚è·¯å¾„çš„æ¥å£</span></span><br><span class="line">        .paths(PathSelectors.ant(<span class="string">&quot;/&quot;</span>))</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ˜¯å¦å¯åŠ¨swagger"><a href="#é…ç½®æ˜¯å¦å¯åŠ¨swagger" class="headerlink" title="é…ç½®æ˜¯å¦å¯åŠ¨swagger"></a>é…ç½®æ˜¯å¦å¯åŠ¨swagger</h3><p>åœ¨æŒ‡å®šç¯å¢ƒä¸­ï¼Œå¯åŠ¨swagger</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//é…ç½®äº†swaggerçš„docketå®ä¾‹</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®è¦æ˜¾ç¤ºçš„swaggerç¯å¢ƒ</span></span><br><span class="line">    <span class="type">Profiles</span> <span class="variable">pro</span> <span class="operator">=</span> Profiles.of(<span class="string">&quot;dev&quot;</span>);</span><br><span class="line">    <span class="comment">//è·å–é¡¹ç›®çš„ç¯å¢ƒ</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> environment.acceptsProfiles(pro);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo())</span><br><span class="line">        .enable(b)</span><br><span class="line">        .select()</span><br><span class="line">        <span class="comment">// RequestHandlerSelectors é…ç½®è¦æ‰«ææ¥å£çš„æ–¹å¼</span></span><br><span class="line">        <span class="comment">// basePackage æŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br><span class="line">        <span class="comment">// any() æ‰«æå…¨éƒ¨</span></span><br><span class="line">        <span class="comment">// none() éƒ½ä¸æ‰«æ</span></span><br><span class="line">        <span class="comment">//withClassAnnotation() æ‰«æç±»ä¸Šçš„æ³¨è§£ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªæ³¨è§£çš„åå°„å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// withMethodAnnotation() æ‰«ææ–¹æ³•ä¸Šçš„æ³¨è§£</span></span><br><span class="line">        .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.li.swagger.controller&quot;</span>))</span><br><span class="line">        <span class="comment">// paths  è¿‡æ»¤å¸¦æœ‰ï¼ˆï¼‰è¯·æ±‚è·¯å¾„çš„æ¥å£</span></span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®apiçš„æ–‡æ¡£åå­—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.groupName(<span class="string">&quot;lks&quot;</span>)</span><br></pre></td></tr></table></figure><p>é…ç½®å¤šä¸ªåˆ†ç»„ï¼Œå¤šä¸ªdocketå³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.swagger.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModel(&quot;ç”¨æˆ·å®ä½“ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String passwrod;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.swagger.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.swagger.pojo.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Api(tags = &quot;helloçš„controllerç±»&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">helloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Operaæ¥å£ï¼Œä¸æ˜¯æ”¾åœ¨ç±»ä¸Šï¼Œæ˜¯æ¥å£ä¸Š</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;helloæ§åˆ¶ç±»&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello2</span><span class="params">(<span class="meta">@ApiParam(&quot;ç”¨æˆ·å&quot;)</span> String username)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello2&quot;</span>+username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;postæ§åˆ¶ç±»&quot;)</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/hello3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello3</span><span class="params">(<span class="meta">@ApiParam(&quot;ç”¨æˆ·å&quot;)</span> String username)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello2&quot;</span>+username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»»åŠ¡"><a href="#ä»»åŠ¡" class="headerlink" title="ä»»åŠ¡"></a>ä»»åŠ¡</h2><h3 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h3><p>æ·»åŠ æ³¨è§£<code>@Async</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°æ®æ­£åœ¨å¤„ç†&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot09TestApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot09TestApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‚®ä»¶å‘é€"><a href="#é‚®ä»¶å‘é€" class="headerlink" title="é‚®ä»¶å‘é€"></a>é‚®ä»¶å‘é€</h3><p>pom.xml å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--emailé…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¼€å¯qqé‚®ç®±æƒé™</p><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202207072101229.png" alt="image-20220707104734783"></p><p>application.propertiesç¼–å†™é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘é€é‚®ä»¶é…ç½®</span></span><br><span class="line"><span class="attr">spring.mail.host</span>=<span class="string">smtp.qq.com</span></span><br><span class="line"><span class="attr">spring.mail.username</span>=<span class="string">********@qq.com</span></span><br><span class="line"><span class="attr">spring.mail.password</span>=<span class="string">å¼€å¯é‚®ç®±æƒé™è·å–çš„æˆæƒç </span></span><br><span class="line"><span class="comment"># å¼€å¯åŠ å¯†éªŒè¯</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtl.ssl.enable</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot09TestApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸€ä¸ªç®€å•çš„é‚®ä»¶å‘é€</span></span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">simpleMailMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        simpleMailMessage.setSubject(<span class="string">&quot;ä½ å¥½å‘€&quot;</span>); <span class="comment">// é‚®ä»¶é¢˜ç›®</span></span><br><span class="line">        simpleMailMessage.setText(<span class="string">&quot;è°¢è°¢ä½ çš„è´¡çŒ®&quot;</span>); <span class="comment">// é‚®ä»¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line">        simpleMailMessage.setTo(<span class="string">&quot;15378435@qq.com&quot;</span>);</span><br><span class="line">        simpleMailMessage.setFrom(<span class="string">&quot;15628435@qq.com&quot;</span>);</span><br><span class="line">        mailSender.send(simpleMailMessage);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoad</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">        <span class="comment">//     ä¸€ä¸ªå¤æ‚çš„é‚®ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">        <span class="comment">// ç»„è£…</span></span><br><span class="line">        <span class="type">MimeMessageHelper</span> <span class="variable">messageHelper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        messageHelper.setSubject(<span class="string">&quot;ä½ å¥½å‘€&quot;</span>);</span><br><span class="line">        messageHelper.setText(<span class="string">&quot;&lt;p&gt;è°¢è°¢ä½ çš„è´¡çŒ®&lt;/p&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é™„ä»¶  æ–‡ä»¶å¯ä»¥ä½¿ç”¨æœ¬åœ°ç»å¯¹åœ°å€</span></span><br><span class="line">        messageHelper.addAttachment(<span class="string">&quot;infinity-1966300.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\Pictures\\bgc\\infinity-1966300.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">        messageHelper.setTo(<span class="string">&quot;15378435@qq.com&quot;</span>);</span><br><span class="line">        messageHelper.setFrom(<span class="string">&quot;15378435@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">        mailSender.send(mimeMessage);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚®ä»¶å‘é€æ•´åˆçš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> html : æ˜¯å¦æ”¯æŒhtml</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject  é‚®ä»¶çš„æ ‡é¢˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text  é‚®ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sendToEmail å‘é€é‚®ä»¶ç»™è°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sendFromEmail è°æ¥å‘é€é‚®ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> MessagingException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> lks</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">(<span class="type">boolean</span> html,String subject,String text,String sendToEmail,String sendFromEmail)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">    <span class="comment">// ç»„è£…</span></span><br><span class="line">    <span class="type">MimeMessageHelper</span> <span class="variable">messageHelper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage,html);</span><br><span class="line"></span><br><span class="line">    messageHelper.setSubject(subject);</span><br><span class="line">    <span class="comment">// é»˜è®¤æ”¯æŒhtmlæ ¼å¼æ˜¯true</span></span><br><span class="line">    messageHelper.setText(text,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™„ä»¶  æ–‡ä»¶å¯ä»¥ä½¿ç”¨æœ¬åœ°ç»å¯¹åœ°å€</span></span><br><span class="line">    messageHelper.addAttachment(<span class="string">&quot;infinity-1966300.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\Pictures\\bgc\\infinity-1966300.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">    messageHelper.setTo(sendToEmail);</span><br><span class="line">    messageHelper.setFrom(sendFromEmail);</span><br><span class="line"></span><br><span class="line">    mailSender.send(mimeMessage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduledService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨ç‰¹å®šçš„æ—¶é—´æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// cron è¡¨è¾¾å¼ ç§’ åˆ† æ—¶ æ—¥ æœˆ å‘¨å‡ </span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;00 09 11 * * ?&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="meta">@EnableScheduling</span>  <span class="comment">// å¼€å¯å®šæ—¶ä»»åŠ¡çš„æ³¨è§£</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot09TestApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot09TestApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Redisæ•´åˆ"><a href="#Redisæ•´åˆ" class="headerlink" title="Redisæ•´åˆ"></a>Redisæ•´åˆ</h2><p>æµ‹è¯•çš„æ—¶å€™ï¼Œè¦æ‰“å¼€redis-server.exe</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot10RedisApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•çš„æ—¶å€™ è¦å¼€å¯ redis-server.exe</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    redisTemplate</span></span><br><span class="line">    <span class="comment">//    opsForValue() æ“ä½œå­—ç¬¦ä¸² ï¼Œç±»ä¼¼string</span></span><br><span class="line">    <span class="comment">//     è·å–é“¾æ¥</span></span><br><span class="line">    <span class="comment">//    RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span></span><br><span class="line">    <span class="comment">//    connection.flushDb();</span></span><br><span class="line">    <span class="comment">//    connection.flushAll();</span></span><br><span class="line"></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;myksy&quot;</span>,<span class="string">&quot;lks&quot;</span>);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;myksy&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span>  <span class="title function_">text1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;æå¤æ¾&quot;</span>, <span class="number">4</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(user);</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;user&quot;</span>,s);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="redis-config"><a href="#redis-config" class="headerlink" title="redis config"></a>redis config</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  ç¼–å†™è‡ªå®šä¹‰çš„ redisTemplate</span></span><br><span class="line"><span class="comment">     *  è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå›ºå®šçš„æ¨¡æ¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="comment">// ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œç›´æ¥ä½¿ç”¨&lt;String, Object&gt;</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Json é…ç½®åºåˆ—åŒ–</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ jackson è§£æä»»æ„çš„å¯¹è±¡</span></span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>&lt;&gt;(Object.class);</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ objectMapper è¿›è¡Œè½¬ä¹‰</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        objectMapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(objectMapper);</span><br><span class="line">        <span class="comment">// String çš„åºåˆ—åŒ–</span></span><br><span class="line">        <span class="type">StringRedisSerializer</span> <span class="variable">stringRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// key é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line">        <span class="comment">// Hash çš„ key é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line">        <span class="comment">// value é‡‡ç”¨ jackson çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">// Hash çš„ value é‡‡ç”¨ jackson çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">// æŠŠæ‰€æœ‰çš„é…ç½® set è¿› template</span></span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="redis-å·¥å…·ç±»"><a href="#redis-å·¥å…·ç±»" class="headerlink" title="redis å·¥å…·ç±»"></a>redis å·¥å…·ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">RedisUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// =============================common============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(String key, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®key è·å–è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ—¶é—´(ç§’) è¿”å›0ä»£è¡¨ä¸ºæ°¸ä¹…æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getExpire</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(String... key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key != <span class="literal">null</span> &amp;&amp; key.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.length == <span class="number">1</span>) &#123;</span><br><span class="line">                redisTemplate.delete(key[<span class="number">0</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                redisTemplate.delete(CollectionUtils.arrayToList(key));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============================String=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> key == <span class="literal">null</span> ? <span class="literal">null</span> : redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜æ”¾å…¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">set</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ false å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">set</span><span class="params">(String key, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta è¦å¢åŠ å‡ (å¤§äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">incr</span><span class="params">(String key, <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€’å¢å› å­å¿…é¡»å¤§äº0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta è¦å‡å°‘å‡ (å°äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">decr</span><span class="params">(String key, <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€’å‡å› å­å¿…é¡»å¤§äº0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, -delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ================================Map=================================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashGet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">hget</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().get(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–hashKeyå¯¹åº”çš„æ‰€æœ‰é”®å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¯¹åº”çš„å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hmget</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashSet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map å¯¹åº”å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashSet å¹¶è®¾ç½®æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map  å¯¹åº”å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hset</span><span class="params">(String key, String item, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’) æ³¨æ„:å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hset</span><span class="params">(String key, String item, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤hashè¡¨ä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ å¯ä»¥ä½¿å¤šä¸ª ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hdel</span><span class="params">(String key, Object... item)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().delete(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰è¯¥é¡¹çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hHasKey</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashé€’å¢ å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª å¹¶æŠŠæ–°å¢åçš„å€¼è¿”å›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by   è¦å¢åŠ å‡ (å¤§äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hincr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, by);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashé€’å‡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by   è¦å‡å°‘è®°(å°äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hdecr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, -by);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============================set=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">sGet</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®valueä»ä¸€ä¸ªsetä¸­æŸ¥è¯¢,æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">sHasKey</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().isMember(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ•°æ®æ”¾å…¥setç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sSet</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†setæ•°æ®æ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time   æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sSetAndTime</span><span class="params">(String key, <span class="type">long</span> time, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>)</span><br><span class="line">                expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–setç¼“å­˜çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sGetSetSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤å€¼ä¸ºvalueçš„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç§»é™¤çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setRemove</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ===============================list=================================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–listç¼“å­˜çš„å†…å®¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start å¼€å§‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   ç»“æŸ 0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">lGet</span><span class="params">(String key, <span class="type">long</span> start, <span class="type">long</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–listç¼“å­˜çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">lGetListSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç´¢å¼• è·å–listä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼• index&gt;=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">lGetIndex</span><span class="params">(String key, <span class="type">long</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().index(key, index);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>)</span><br><span class="line">                expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>)</span><br><span class="line">                expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç´¢å¼•ä¿®æ”¹listä¸­çš„æŸæ¡æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lUpdateIndex</span><span class="params">(String key, <span class="type">long</span> index, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().set(key, index, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤Nä¸ªå€¼ä¸ºvalue</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> count ç§»é™¤å¤šå°‘ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç§»é™¤çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">lRemove</span><span class="params">(String key, <span class="type">long</span> count, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">remove</span> <span class="operator">=</span> redisTemplate.opsForList().remove(key, count, value);</span><br><span class="line">            <span class="keyword">return</span> remove;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ†å¸ƒå¼Dubbo-Zookeeper-Springboot"><a href="#åˆ†å¸ƒå¼Dubbo-Zookeeper-Springboot" class="headerlink" title="åˆ†å¸ƒå¼Dubbo+Zookeeper+Springboot"></a>åˆ†å¸ƒå¼Dubbo+Zookeeper+Springboot</h2><p>Zookeeper å®‰è£…åœ°å€ï¼Œbin.tar.gz æ—¶ç¼–è¯‘ç‰ˆçš„ï¼Œè¦ä¸‹è¿™ä¸ª</p><p><a href="https://archive.apache.org/dist/zookeeper/">https://archive.apache.org/dist/zookeeper/</a></p><p>å¦‚æœæ˜¯æŒ‰ç…§ç‹‚ç¥çš„è¿›è¡Œå­¦ä¹ ï¼Œä¸‹è½½3.4.14ï¼Œä¸ç„¶åé¢ä¼šå‡ºç°æŠ¥é”™çš„é—®é¢˜</p><h2 id="springbootæ•´åˆspringsecurity"><a href="#springbootæ•´åˆspringsecurity" class="headerlink" title="springbootæ•´åˆspringsecurity"></a>springbootæ•´åˆspringsecurity</h2><p><a href="https://github.com/wuwei1636/java">demoä»£ç </a></p><p><a href="https://cloud.tencent.com/developer/article/1674681#:~:text=Spring%20Security%20%E6%98%AF%E9%92%88%E5%AF%B9%20Spring%20%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%B9%9F%E6%98%AF,Spring%20Boot%20%E5%BA%95%E5%B1%82%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9D%97%E9%BB%98%E8%AE%A4%E7%9A%84%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%EF%BC%8C%E5%AE%83%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E9%9C%80%E5%BC%95%E5%85%A5%20spring-boot-starter-security%20%E6%A8%A1%E5%9D%97%EF%BC%8C%E5%86%8D%E8%BF%9B%E8%A1%8C%E5%B0%91%E9%87%8F%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%8D%B3%E5%8F%AF%E5%AE%9E%E7%8E%B0%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E3%80%82">ç‹‚ç¥è¯´çš„springbootæ•´åˆspringsecurityï¼ˆæ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ï¼‰</a></p><p><strong>SpringSecurityçš„æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p><ul><li><strong>ç”¨æˆ·è®¤è¯ï¼ˆAuthenticationï¼‰ï¼šç³»ç»Ÿåˆ¤æ–­ç”¨æˆ·æ˜¯å¦èƒ½ç™»å½•</strong></li><li><strong>ç”¨æˆ·æˆæƒï¼ˆAuthorizationï¼‰ï¼šç³»ç»Ÿåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å»åšæŸäº›äº‹æƒ…</strong></li></ul><h3 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--springsecurityçš„ä¾èµ– å’Œ thymeleafå¯¹springsecurityçš„ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-springsecurity5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®Mybatis"><a href="#é…ç½®Mybatis" class="headerlink" title="é…ç½®Mybatis"></a>é…ç½®Mybatis</h3><p>å…·ä½“å‚è€ƒä¸Šé¢ Springbootæ•´åˆmybatis</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®åº“é©±åŠ¨ï¼š</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment"># æ•°æ®æºåç§°</span></span><br><span class="line"><span class="attr">spring.datasource.name</span>=<span class="string">defaultDataSource</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“è¿æ¥åœ°å€</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/myself?serverTimezone=UTC</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“ç”¨æˆ·å&amp;å¯†ç ï¼š</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>= <span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>= <span class="string">123456</span></span><br><span class="line"><span class="comment">#ä¸‹é¢è¿™äº›å†…å®¹æ˜¯ä¸ºäº†è®©MyBatisæ˜ å°„</span></span><br><span class="line"><span class="comment">#æŒ‡å®šMybatisçš„Mapperæ–‡ä»¶</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/mapper/*xml</span></span><br><span class="line"><span class="comment">#æŒ‡å®šMybatisçš„å®ä½“ç›®å½•</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.li.pojo</span></span><br><span class="line"><span class="comment"># åº”ç”¨æœåŠ¡ WEB è®¿é—®ç«¯å£</span></span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“çš„è®¾è®¡"><a href="#æ•°æ®åº“çš„è®¾è®¡" class="headerlink" title="æ•°æ®åº“çš„è®¾è®¡"></a>æ•°æ®åº“çš„è®¾è®¡</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319077.png" alt="image-20220918200703517"></p><h3 id="SpringSecurity-åˆ†æ"><a href="#SpringSecurity-åˆ†æ" class="headerlink" title="SpringSecurity åˆ†æ"></a>SpringSecurity åˆ†æ</h3><h4 id="è‡ªå®šä¹‰SpringSecurity"><a href="#è‡ªå®šä¹‰SpringSecurity" class="headerlink" title="è‡ªå®šä¹‰SpringSecurity"></a>è‡ªå®šä¹‰SpringSecurity</h4><p>è‡ªå®šä¹‰springsecurityéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª <strong>SecurityConfigçš„ç±»</strong> ç»§æ‰¿ <code>WebSecurityConfigurerAdapter</code>ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  å¯†ç åŠ å¯† springsecurity å¿…é¡»è¿›è¡Œå¯†ç åŠ å¯†</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">password</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        auth.userDetailsService(userDetailsService).passwordEncoder(password());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// ç™»å½•</span></span><br><span class="line">        http.formLogin() </span><br><span class="line">                .loginPage(<span class="string">&quot;/login&quot;</span>)  <span class="comment">// è‡ªå®šä¹‰ç™»å½•çš„ç•Œé¢</span></span><br><span class="line">                .defaultSuccessUrl(<span class="string">&quot;/hello&quot;</span>).permitAll()</span><br><span class="line">                .and().csrf().disable();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®è®¿é—®æƒé™</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">            <span class="comment">// è¿™é‡Œçš„æƒé™éªŒè¯ä¸éœ€è¦ æ·»åŠ   &#x27;ROLE_&#x27;</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/hello1&quot;</span>).hasRole(<span class="string">&quot;vip1&quot;</span>)  <span class="comment">// åªæœ‰ vip1çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—® /hello1 çš„è¯·æ±‚</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;/user/login&quot;</span>,<span class="string">&quot;/user/register&quot;</span>,<span class="string">&quot;/register&quot;</span>).permitAll();  <span class="comment">// æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®çš„è¯·æ±‚</span></span><br><span class="line">                     </span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½å¿…é¡»ç»è¿‡è®¤è¯æ‰èƒ½è®¿é—®ï¼Œå¿…é¡»ç™»å½•</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‡åˆ°æ²¡æœ‰æƒé™è®¿é—®è·³è½¬çš„ç•Œé¢</span></span><br><span class="line">        http.exceptionHandling().accessDeniedPage(<span class="string">&quot;/uncheck&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¿½ç•¥æ‹¦æˆªï¼Œå¯¹é™æ€èµ„æºæ‰€éœ€çš„jsï¼Œcssç­‰ä¸è®¾ç½®æ‹¦æˆª</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(WebSecurity web)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        web.ignoring()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/**/*.js&quot;</span>,<span class="string">&quot;/**/*.css&quot;</span>,<span class="string">&quot;/**/*.jpg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®ç°ç™»å½•éªŒè¯"><a href="#å®ç°ç™»å½•éªŒè¯" class="headerlink" title="å®ç°ç™»å½•éªŒè¯"></a>å®ç°ç™»å½•éªŒè¯</h4><p>ä½¿ç”¨UserDetailsService æ¥å£ä»æ•°æ®åº“ä¸­è·å–ä¿¡æ¯ï¼Œå®ç°ç™»å½•éªŒè¯åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userDetailsService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyUserDetailsService</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨å·²ç»ç¼–è¾‘å¥½çš„ usermapper è¿›è¡Œæ•°æ®åº“çš„æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">        com.li.pojo.<span class="type">User</span>  <span class="variable">user</span> <span class="operator">=</span> userMapper.getUserByName(username);</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;ç”¨æˆ·åä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// springsecurity å¯¹role æœ‰è§„å®šï¼Œå‰ç¼€éœ€è¦æœ‰ä¸€ä¸ª ROLE_ , å¦åˆ™æ— æ³•å®ç°æƒé™çš„éªŒè¯</span></span><br><span class="line">        List&lt;GrantedAuthority&gt; auth = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;ROLE_&quot;</span>+user.getRole());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ„å»ºsecurityçš„ User å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(user.getUsername(),<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(user.getPassword()),auth);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘controller"><a href="#ç¼–è¾‘controller" class="headerlink" title="ç¼–è¾‘controller"></a>ç¼–è¾‘controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç™»å½•åçš„ç¬¬ä¸€ä¸ªç•Œé¢</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg1&quot;</span>,<span class="string">&quot;è¾“å‡º&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;view/hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç™»å½•</span></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/login&quot;,&quot;/&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;view/login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å†Œ</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/register&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">register</span><span class="params">(User user, String pwd2, Model model)</span>&#123;</span><br><span class="line">        System.out.println(pwd2);</span><br><span class="line">        <span class="keyword">if</span>(user.getPassword().equals(pwd2))&#123;</span><br><span class="line">            userService.addUser(user);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ³¨å†ŒæˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;è¯·è¾“å…¥å®Œæ•´çš„è´¦å·å¯†ç &quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:view/login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// vip1 æ‰èƒ½è®¿é—®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;view/hello1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ²¡æœ‰æƒé™è®¿é—®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/uncheck&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">uncheck</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;view/403&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springmvc</title>
      <link href="/2022/06/14/springmvc/"/>
      <url>/2022/06/14/springmvc/</url>
      
        <content type="html"><![CDATA[<p>è·Ÿéšè§†é¢‘ç»ƒä¹ çš„ä»£ç å­˜æ”¾åœ¨  GitHubä»“åº“ï¼š <a href="https://github.com/wuwei1636/java">https://github.com/wuwei1636/java</a></p><p>è¯¾ç¨‹æ˜¯ç‹‚ç¥è¯´çš„springmvc ï¼ŒåŸæ€»ç»“å‚è€ƒç‹‚ç¥è¯´çš„<a href="https://mp.weixin.qq.com/s/yuQqZzAsCefk9Jv_kbh_eA">å¾®ä¿¡å…¬ä¼—å·</a></p><p>è¯¥åšå®¢å†…å®¹å¤åˆ¶æ¥æºäº<a href="https://blog.csdn.net/weixin_44635198/article/details/107444925">https://blog.csdn.net/weixin_44635198/article/details/107444925</a></p><p>ssmï¼š mybatis+spring+springmvc</p><h1 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h1><h2 id="å›é¡¾MVC"><a href="#å›é¡¾MVC" class="headerlink" title="å›é¡¾MVC"></a>å›é¡¾MVC</h2><h3 id="ä»€ä¹ˆæ˜¯MVC"><a href="#ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="ä»€ä¹ˆæ˜¯MVC"></a>ä»€ä¹ˆæ˜¯MVC</h3><ul><li>MVCæ˜¯æ¨¡å‹(Model)ã€è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚</li><li>æ˜¯å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚</li><li>MVCä¸»è¦ä½œç”¨æ˜¯<strong>é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘å¶åˆ</strong>ã€‚</li><li>MVCä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œ<strong>MVCæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼</strong>ã€‚å½“ç„¶ä¸åŒçš„MVCå­˜åœ¨å·®å¼‚ã€‚</li></ul><p><strong>Modelï¼ˆæ¨¡å‹ï¼‰ï¼š</strong>æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®Daoï¼‰ å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚</p><p><strong>Viewï¼ˆè§†å›¾ï¼‰ï¼š</strong>è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p><p><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š</strong>æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚</p><p><strong>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚</strong></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320819.png" alt="å›¾ç‰‡"></p><h3 id="Model1æ—¶ä»£"><a href="#Model1æ—¶ä»£" class="headerlink" title="Model1æ—¶ä»£"></a>Model1æ—¶ä»£</h3><ul><li>åœ¨webæ—©æœŸçš„å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨çš„éƒ½æ˜¯Model1ã€‚</li><li>Model1ä¸­ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼Œè§†å›¾å±‚å’Œæ¨¡å‹å±‚ã€‚</li></ul><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320804.png" alt="å›¾ç‰‡"></p><p>Model1ä¼˜ç‚¹ï¼šæ¶æ„ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆå°å‹é¡¹ç›®å¼€å‘ï¼›</p><p>Model1ç¼ºç‚¹ï¼šJSPèŒè´£ä¸å•ä¸€ï¼ŒèŒè´£è¿‡é‡ï¼Œä¸ä¾¿äºç»´æŠ¤ï¼›</p><h3 id="Model2æ—¶ä»£"><a href="#Model2æ—¶ä»£" class="headerlink" title="Model2æ—¶ä»£"></a>Model2æ—¶ä»£</h3><p>Model2æŠŠä¸€ä¸ªé¡¹ç›®åˆ†æˆä¸‰éƒ¨åˆ†ï¼ŒåŒ…æ‹¬<strong>è§†å›¾ã€æ§åˆ¶ã€æ¨¡å‹ã€‚</strong></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320829.png" alt="å›¾ç‰‡"></p><ol><li>ç”¨æˆ·å‘è¯·æ±‚</li><li>Servletæ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li><li>ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™servlet</li><li>servletè½¬å‘åˆ°JSPï¼Œç”±JSPæ¥æ¸²æŸ“é¡µé¢</li><li>å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢</li></ol><p><strong>èŒè´£åˆ†æï¼š</strong></p><p><strong>Controllerï¼šæ§åˆ¶å™¨</strong></p><ol><li>å–å¾—è¡¨å•æ•°æ®</li><li>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</li><li>è½¬å‘æŒ‡å®šçš„é¡µé¢</li></ol><p><strong>Modelï¼šæ¨¡å‹</strong></p><ol><li>ä¸šåŠ¡é€»è¾‘</li><li>ä¿å­˜æ•°æ®çš„çŠ¶æ€</li></ol><p><strong>Viewï¼šè§†å›¾</strong></p><ol><li>æ˜¾ç¤ºé¡µé¢</li></ol><p>Model2è¿™æ ·ä¸ä»…æé«˜çš„ä»£ç çš„å¤ç”¨ç‡ä¸é¡¹ç›®çš„æ‰©å±•æ€§ï¼Œä¸”å¤§å¤§é™ä½äº†é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚Model 1æ¨¡å¼çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘å°è§„æ¨¡é¡¹ç›®ï¼ŒModel1ä¸­JSPé¡µé¢èº«å…¼Viewå’ŒControllerä¸¤ç§è§’è‰²ï¼Œå°†æ§åˆ¶é€»è¾‘å’Œè¡¨ç°é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œä»è€Œå¯¼è‡´ä»£ç çš„é‡ç”¨æ€§éå¸¸ä½ï¼Œå¢åŠ äº†åº”ç”¨çš„æ‰©å±•æ€§å’Œç»´æŠ¤çš„éš¾åº¦ã€‚Model2æ¶ˆé™¤äº†Model1çš„ç¼ºç‚¹ã€‚</p><h3 id="å›é¡¾Servlet"><a href="#å›é¡¾Servlet" class="headerlink" title="å›é¡¾Servlet"></a>å›é¡¾Servlet</h3><ol><li><p>æ–°å»ºä¸€ä¸ªMavenå·¥ç¨‹å½“åšçˆ¶å·¥ç¨‹ï¼pomä¾èµ–ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å»ºç«‹ä¸€ä¸ªMoudleï¼šspringmvc-01-servlet ï¼Œ æ·»åŠ Web appçš„æ”¯æŒï¼</p></li><li><p>å¯¼å…¥servlet å’Œ jsp çš„ jar ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªServletç±»ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.servlet;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°Servletæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//å–å¾—å‚æ•°</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;method&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (method.equals(<span class="string">&quot;add&quot;</span>))&#123;</span><br><span class="line">           req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†addæ–¹æ³•&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">if</span> (method.equals(<span class="string">&quot;delete&quot;</span>))&#123;</span><br><span class="line">           req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†deleteæ–¹æ³•&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="comment">//ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">       <span class="comment">//è§†å›¾è·³è½¬</span></span><br><span class="line">       req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/hello.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req,resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™Hello.jspï¼Œåœ¨WEB-INFç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªjspçš„æ–‡ä»¶å¤¹ï¼Œæ–°å»ºhello.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;title&gt;li&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">$&#123;msg&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨web.xmlä¸­æ³¨å†ŒServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcatï¼Œå¹¶å¯åŠ¨æµ‹è¯•</p></li><li><ul><li>localhost:8080&#x2F;user?method&#x3D;add</li><li>localhost:8080&#x2F;user?method&#x3D;delete</li></ul></li></ol><p><strong>MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</strong></p><ol><li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³• .</li><li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ® .</li><li>å¤„ç†è¯·æ±‚â€“è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†â€“å°è£…å“åº”æ•°æ® .</li><li>å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp &#x2F; html ç­‰è¡¨ç¤ºå±‚æ•°æ® .</li></ol><p><strong>è¯´æ˜ï¼š</strong></p><p>â€‹å¸¸è§çš„æœåŠ¡å™¨ç«¯MVCæ¡†æ¶æœ‰ï¼šStrutsã€Spring MVCã€ASP.NET MVCã€Zend Frameworkã€JSFï¼›å¸¸è§å‰ç«¯MVCæ¡†æ¶ï¼švueã€angularjsã€reactã€backboneï¼›ç”±MVCæ¼”åŒ–å‡ºäº†å¦å¤–ä¸€äº›æ¨¡å¼å¦‚ï¼šMVPã€MVVM ç­‰ç­‰â€¦.</p><h2 id="ä»€ä¹ˆæ˜¯SpringMVC"><a href="#ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="ä»€ä¹ˆæ˜¯SpringMVC"></a>ä»€ä¹ˆæ˜¯SpringMVC</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320868.png" alt="å›¾ç‰‡"></p><p>Spring MVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚</p><p>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring/docs/5.2.0.RELEASE/spring-framework-reference/web.html#spring-web">https://docs.spring.io/spring/docs/5.2.0.RELEASE/spring-framework-reference/web.html#spring-web</a></p><p><strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ SpringMVCå‘¢?</strong></p><p> Spring MVCçš„ç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼Œç®€å•æ˜“å­¦</li><li>é«˜æ•ˆ , åŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶</li><li>ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ</li><li>çº¦å®šä¼˜äºé…ç½®</li><li>åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰</li><li>ç®€æ´çµæ´»</li></ol><p>Springçš„webæ¡†æ¶å›´ç»•<strong>DispatcherServlet</strong> [ è°ƒåº¦Servlet ] è®¾è®¡ã€‚</p><p>DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£å½¢å¼è¿›è¡Œå¼€å‘ï¼Œååˆ†ç®€æ´ï¼›</p><p>æ­£å› ä¸ºSpringMVCå¥½ , ç®€å• , ä¾¿æ· , æ˜“å­¦ , å¤©ç”Ÿå’ŒSpringæ— ç¼é›†æˆ(ä½¿ç”¨SpringIoCå’ŒAop) , ä½¿ç”¨çº¦å®šä¼˜äºé…ç½® . èƒ½å¤Ÿè¿›è¡Œç®€å•çš„junitæµ‹è¯• . æ”¯æŒRestfulé£æ ¼ .å¼‚å¸¸å¤„ç† , æœ¬åœ°åŒ– , å›½é™…åŒ– , æ•°æ®éªŒè¯ , ç±»å‹è½¬æ¢ , æ‹¦æˆªå™¨ ç­‰ç­‰â€¦â€¦æ‰€ä»¥æˆ‘ä»¬è¦å­¦ä¹  .</p><p><strong>æœ€é‡è¦çš„ä¸€ç‚¹è¿˜æ˜¯ç”¨çš„äººå¤š , ä½¿ç”¨çš„å…¬å¸å¤š .</strong> </p><h3 id="ä¸­å¿ƒæ§åˆ¶å™¨"><a href="#ä¸­å¿ƒæ§åˆ¶å™¨" class="headerlink" title="ä¸­å¿ƒæ§åˆ¶å™¨"></a>ä¸­å¿ƒæ§åˆ¶å™¨</h3><p>â€‹Springçš„webæ¡†æ¶å›´ç»•DispatcherServletè®¾è®¡ã€‚DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„controllerå£°æ˜æ–¹å¼ã€‚</p><p>â€‹Spring MVCæ¡†æ¶åƒè®¸å¤šå…¶ä»–MVCæ¡†æ¶ä¸€æ ·, <strong>ä»¥è¯·æ±‚ä¸ºé©±åŠ¨</strong> , <strong>å›´ç»•ä¸€ä¸ªä¸­å¿ƒServletåˆ†æ´¾è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½</strong>ï¼Œ**DispatcherServletæ˜¯ä¸€ä¸ªå®é™…çš„Servlet (å®ƒç»§æ‰¿è‡ªHttpServlet åŸºç±»)**ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320284.png" alt="å›¾ç‰‡"></p><p>SpringMVCçš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>â€‹å½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚</p><p><img src="/data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h3 id="SpringMVCæ‰§è¡ŒåŸç†"><a href="#SpringMVCæ‰§è¡ŒåŸç†" class="headerlink" title="SpringMVCæ‰§è¡ŒåŸç†"></a>SpringMVCæ‰§è¡ŒåŸç†</h3><p><img src="/data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p><p><strong>ç®€è¦åˆ†ææ‰§è¡Œæµç¨‹</strong></p><ol><li><p>DispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒã€‚ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServletæ¥æ”¶è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚</p><p>æˆ‘ä»¬å‡è®¾è¯·æ±‚çš„urlä¸º : <a href="http://localhost:8080/SpringMVC/hello">http://localhost:8080/SpringMVC/hello</a></p><p><strong>å¦‚ä¸Šurlæ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼š</strong></p><p><a href="http://localhost:8080æœåŠ¡å™¨åŸŸå">http://localhost:8080æœåŠ¡å™¨åŸŸå</a></p><p>SpringMVCéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„webç«™ç‚¹</p><p>helloè¡¨ç¤ºæ§åˆ¶å™¨</p><p>é€šè¿‡åˆ†æï¼Œå¦‚ä¸Šurlè¡¨ç¤ºä¸ºï¼šè¯·æ±‚ä½äºæœåŠ¡å™¨localhost:8080ä¸Šçš„SpringMVCç«™ç‚¹çš„helloæ§åˆ¶å™¨ã€‚</p></li><li><p>HandlerMappingä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServletè°ƒç”¨HandlerMapping,HandlerMappingæ ¹æ®è¯·æ±‚urlæŸ¥æ‰¾Handlerã€‚</p></li><li><p>HandlerExecutionè¡¨ç¤ºå…·ä½“çš„Handler,å…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®urlæŸ¥æ‰¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šurlè¢«æŸ¥æ‰¾æ§åˆ¶å™¨ä¸ºï¼šhelloã€‚</p></li><li><p>HandlerExecutionå°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™DispatcherServlet,å¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚</p></li><li><p>HandlerAdapterè¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡ŒHandlerã€‚</p></li><li><p>Handlerè®©å…·ä½“çš„Controlleræ‰§è¡Œã€‚</p></li><li><p>Controllerå°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™HandlerAdapter,å¦‚ModelAndViewã€‚</p></li><li><p>HandlerAdapterå°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™DispatcherServletã€‚</p></li><li><p>DispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨(ViewResolver)æ¥è§£æHandlerAdapterä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚</p></li><li><p>è§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™DispatcherServletã€‚</p></li><li><p>DispatcherServletæ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚</p></li><li><p>æœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚</p></li></ol><p>åœ¨è¿™é‡Œå…ˆå¬ä¸€éåŸç†ï¼Œä¸ç†è§£æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬é©¬ä¸Šæ¥å†™ä¸€ä¸ªå¯¹åº”çš„ä»£ç å®ç°å¤§å®¶å°±æ˜ç™½äº†ï¼Œå¦‚æœä¸æ˜ç™½ï¼Œé‚£å°±å†™10éï¼Œæ²¡æœ‰ç¬¨äººï¼Œåªæœ‰æ‡’äººï¼</p><p>ä¸‹é¢æˆ‘ä»¬å‡†å¤‡ç¼–å†™æˆ‘ä»¬çš„å…¥é—¨ç¨‹åºäº†ï¼</p><p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº† ä»€ä¹ˆæ˜¯SpringMVCä»¥åŠå®ƒçš„æ‰§è¡ŒåŸç†ï¼</p><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483970&idx=1&sn=352e571ee88957ce391e972344e2a3d7&chksm=ce6104e1f9168df7f98eea39bd8478bb5082853ec8727c9da58c894625c43d44ebd64d36e2a8&scene=21#wechat_redirect">ç‹‚ç¥è¯´SpringMVC01ï¼šä»€ä¹ˆæ˜¯SpringMVC</a></p><h2 id="ç¬¬ä¸€ä¸ªMVCç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªMVCç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªMVCç¨‹åº"></a>ç¬¬ä¸€ä¸ªMVCç¨‹åº</h2><h3 id="é…ç½®ç‰ˆ"><a href="#é…ç½®ç‰ˆ" class="headerlink" title="é…ç½®ç‰ˆ"></a>é…ç½®ç‰ˆ</h3><ol><li><p>æ–°å»ºä¸€ä¸ªMoudle ï¼Œ springmvc-02-hello ï¼Œ æ·»åŠ webçš„æ”¯æŒï¼</p></li><li><p>ç¡®å®šå¯¼å…¥äº†SpringMVC çš„ä¾èµ–ï¼</p></li><li><p>é…ç½®web.xml ï¼Œ æ³¨å†ŒDispatcherServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--1.æ³¨å†ŒDispatcherServlet--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--å…³è”ä¸€ä¸ªspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™SpringMVC çš„ é…ç½®æ–‡ä»¶ï¼åç§°ï¼šspringmvc-servlet.xml : [servletname]-servlet.xml</p><p>è¯´æ˜ï¼Œè¿™é‡Œçš„åç§°è¦æ±‚æ˜¯æŒ‰ç…§å®˜æ–¹æ¥çš„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ  å¤„ç†æ˜ å°„å™¨ï¼ˆå¯çœç•¥ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ  å¤„ç†å™¨é€‚é…å™¨ï¼ˆå¯çœç•¥ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ  è§†å›¾è§£æå™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æˆ‘ä»¬è¦æ“ä½œä¸šåŠ¡Controller ï¼Œè¦ä¹ˆå®ç°Controlleræ¥å£ï¼Œè¦ä¹ˆå¢åŠ æ³¨è§£ï¼›éœ€è¦è¿”å›ä¸€ä¸ªModelAndViewï¼Œè£…æ•°æ®ï¼Œå°è§†å›¾ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nuc.ss.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å…ˆå¯¼å…¥Controlleræ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//ModelAndView æ¨¡å‹å’Œè§†å›¾</span></span><br><span class="line">       <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//å°è£…å¯¹è±¡ï¼Œæ”¾åœ¨ModelAndViewä¸­ã€‚Model</span></span><br><span class="line">       mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;HelloSpringMVC!&quot;</span>);</span><br><span class="line">       <span class="comment">//å°è£…è¦è·³è½¬çš„è§†å›¾ï¼Œæ”¾åœ¨ModelAndViewä¸­</span></span><br><span class="line">       mv.setViewName(<span class="string">&quot;hello&quot;</span>); <span class="comment">//: /WEB-INF/jsp/hello.jsp</span></span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†è‡ªå·±çš„ç±»äº¤ç»™SpringIOCå®¹å™¨ï¼Œæ³¨å†Œbean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Handler--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nuc.ss.controller.HelloController&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å†™è¦è·³è½¬çš„jspé¡µé¢ï¼Œæ˜¾ç¤ºModelandViewå­˜æ”¾çš„æ•°æ®ï¼Œä»¥åŠæˆ‘ä»¬çš„æ­£å¸¸é¡µé¢ï¼›</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Kuangshen<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcat å¯åŠ¨æµ‹è¯•ï¼</p></li></ol><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320979.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šè®¿é—®å‡ºç°404ï¼Œæ’æŸ¥æ­¥éª¤ï¼š</strong></p><ol><li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯ç¼ºå°‘äº†ä»€ä¹ˆjaråŒ…ã€‚</li><li>å¦‚æœjaråŒ…å­˜åœ¨ï¼Œæ˜¾ç¤ºæ— æ³•è¾“å‡ºï¼Œå°±åœ¨IDEAçš„é¡¹ç›®å‘å¸ƒä¸­ï¼Œæ·»åŠ libä¾èµ–ï¼</li><li>é‡å¯Tomcat å³å¯è§£å†³ï¼</li></ol><p>å°ç»“ï¼šæˆ‘ä»¬æ¥çœ‹ä¸ªæ³¨è§£ç‰ˆå®ç°ï¼Œè¿™æ‰æ˜¯SpringMVCçš„ç²¾é«“ã€‚</p><h3 id="æ³¨è§£ç‰ˆ"><a href="#æ³¨è§£ç‰ˆ" class="headerlink" title="æ³¨è§£ç‰ˆ"></a>æ³¨è§£ç‰ˆ</h3><ol><li><p><strong>æ–°å»ºä¸€ä¸ªMoudleï¼Œspringmvc-03-hello-annotation ã€‚æ·»åŠ webæ”¯æŒï¼</strong></p></li><li><p>ç”±äºMavenå¯èƒ½å­˜åœ¨èµ„æºè¿‡æ»¤çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†é…ç½®å®Œå–„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨pom.xmlæ–‡ä»¶å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼šä¸»è¦æœ‰Springæ¡†æ¶æ ¸å¿ƒåº“ã€Spring MVCã€servlet , JSTLç­‰ã€‚æˆ‘ä»¬åœ¨çˆ¶ä¾èµ–ä¸­å·²ç»å¼•å…¥äº†ï¼</p></li><li><p><strong>é…ç½®web.xml</strong></p><p>æ³¨æ„ç‚¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--1.æ³¨å†Œservlet--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿›è¡Œå…³è”--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å¯åŠ¨é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œå¯åŠ¨è¶Šæ—© --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«springmvcæ‹¦æˆª --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><strong>&#x2F; å’Œ &#x2F;* çš„åŒºåˆ«ï¼š</strong></p><ul><li>&lt; url-pattern &gt; &#x2F; &lt;&#x2F; url-pattern &gt; ä¸ä¼šåŒ¹é…åˆ°.jspï¼Œ åªé’ˆå¯¹æˆ‘ä»¬ç¼–å†™çš„è¯·æ±‚ï¼›å³ï¼š.jsp ä¸ä¼šè¿›å…¥springçš„ DispatcherServletç±» ã€‚</li><li>&lt; url-pattern &gt; &#x2F;* &lt;&#x2F; url-pattern &gt; ä¼šåŒ¹é… *.jspï¼Œä¼šå‡ºç°è¿”å› jspè§†å›¾ æ—¶å†æ¬¡è¿›å…¥springçš„DispatcherServlet ç±»ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å¯¹åº”çš„controlleræ‰€ä»¥æŠ¥404é”™ã€‚</li></ul></li><li><p><strong>æ·»åŠ Spring MVCé…ç½®æ–‡ä»¶</strong></p><p>åœ¨resourceç›®å½•ä¸‹æ·»åŠ springmvc-servlet.xmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®çš„å½¢å¼ä¸Springå®¹å™¨é…ç½®åŸºæœ¬ç±»ä¼¼ï¼Œä¸ºäº†æ”¯æŒåŸºäºæ³¨è§£çš„IOCï¼Œè®¾ç½®äº†è‡ªåŠ¨æ‰«æåŒ…çš„åŠŸèƒ½ï¼Œå…·ä½“é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;nuc.ss.controller&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">       åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">       è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">       å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">       å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">       è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">       è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>åœ¨è§†å›¾è§£æå™¨ä¸­æˆ‘ä»¬æŠŠæ‰€æœ‰çš„è§†å›¾éƒ½å­˜æ”¾åœ¨&#x2F;WEB-INF&#x2F;ç›®å½•ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è§†å›¾å®‰å…¨ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥è®¿é—®ã€‚</p><ul><li>è®©IOCçš„æ³¨è§£ç”Ÿæ•ˆ</li><li>é™æ€èµ„æºè¿‡æ»¤ ï¼šHTML . JS . CSS . å›¾ç‰‡ ï¼Œ è§†é¢‘ â€¦<ul><li>MVCçš„æ³¨è§£é©±åŠ¨</li><li>é…ç½®è§†å›¾è§£æå™¨</li></ul></li></ul><ol><li><p><strong>åˆ›å»ºController</strong></p><p>ç¼–å†™ä¸€ä¸ªJavaæ§åˆ¶ç±»ï¼šnuc.ss.controller.HelloController , æ³¨æ„ç¼–ç è§„èŒƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nuc.ss.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/HelloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//çœŸå®è®¿é—®åœ°å€ : é¡¹ç›®å/HelloController/hello</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">       <span class="comment">//å‘æ¨¡å‹ä¸­æ·»åŠ å±æ€§msgä¸å€¼ï¼Œå¯ä»¥åœ¨JSPé¡µé¢ä¸­å–å‡ºå¹¶æ¸²æŸ“</span></span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello,SpringMVC&quot;</span>);</span><br><span class="line">       <span class="comment">//web-inf/jsp/hello.jsp</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>@Controlleræ˜¯ä¸ºäº†è®©Spring IOCå®¹å™¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ‰«æåˆ°ï¼›</li><li>@RequestMappingæ˜¯ä¸ºäº†æ˜ å°„è¯·æ±‚è·¯å¾„ï¼Œè¿™é‡Œå› ä¸ºç±»ä¸æ–¹æ³•ä¸Šéƒ½æœ‰æ˜ å°„æ‰€ä»¥è®¿é—®æ—¶åº”è¯¥æ˜¯&#x2F;HelloController&#x2F;helloï¼›</li><li>æ–¹æ³•ä¸­å£°æ˜Modelç±»å‹çš„å‚æ•°æ˜¯ä¸ºäº†æŠŠActionä¸­çš„æ•°æ®å¸¦åˆ°è§†å›¾ä¸­ï¼›</li><li>æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯è§†å›¾çš„åç§°helloï¼ŒåŠ ä¸Šé…ç½®æ–‡ä»¶ä¸­çš„å‰åç¼€å˜æˆWEB-INF&#x2F;jsp&#x2F;<strong>hello</strong>.jsp</li></ul></li><li><p><strong>åˆ›å»ºè§†å›¾å±‚</strong></p><p>åœ¨WEB-INF&#x2F; jspç›®å½•ä¸­åˆ›å»ºhello.jsp ï¼Œ è§†å›¾å¯ä»¥ç›´æ¥å–å‡ºå¹¶å±•ç¤ºä»Controllerå¸¦å›çš„ä¿¡æ¯ï¼›</p><p>å¯ä»¥é€šè¿‡ELè¡¨ç¤ºå–å‡ºModelä¸­å­˜æ”¾çš„å€¼ï¼Œæˆ–è€…å¯¹è±¡ï¼›</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®Tomcatè¿è¡Œ</strong></p><p>é…ç½®Tomcat ï¼Œ å¼€å¯æœåŠ¡å™¨ ï¼Œ è®¿é—® å¯¹åº”çš„è¯·æ±‚è·¯å¾„ï¼</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320765.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>OKï¼Œè¿è¡ŒæˆåŠŸï¼</strong></p></li></ol><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>å®ç°æ­¥éª¤å…¶å®éå¸¸çš„ç®€å•ï¼š</p><ol><li>æ–°å»ºä¸€ä¸ªwebé¡¹ç›®</li><li>å¯¼å…¥ç›¸å…³jaråŒ…</li><li>ç¼–å†™web.xml , æ³¨å†ŒDispatcherServlet</li><li>ç¼–å†™springmvcé…ç½®æ–‡ä»¶</li><li>æ¥ä¸‹æ¥å°±æ˜¯å»åˆ›å»ºå¯¹åº”çš„æ§åˆ¶ç±» , controller</li><li>æœ€åå®Œå–„å‰ç«¯è§†å›¾å’Œcontrollerä¹‹é—´çš„å¯¹åº”</li><li>æµ‹è¯•è¿è¡Œè°ƒè¯•.</li></ol><p>ä½¿ç”¨springMVCå¿…é¡»é…ç½®çš„ä¸‰å¤§ä»¶</p><p><strong>å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨</strong></p><p>é€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦<strong>æ‰‹åŠ¨é…ç½®è§†å›¾è§£æå™¨</strong>ï¼Œè€Œ<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>å’Œ<strong>å¤„ç†å™¨é€‚é…å™¨</strong>åªéœ€è¦å¼€å¯<strong>æ³¨è§£é©±åŠ¨</strong>å³å¯ï¼Œè€Œçœå»äº†å¤§æ®µçš„xmlé…ç½®</p><h2 id="RestFulå’Œæ§åˆ¶å™¨"><a href="#RestFulå’Œæ§åˆ¶å™¨" class="headerlink" title="RestFulå’Œæ§åˆ¶å™¨"></a>RestFulå’Œæ§åˆ¶å™¨</h2><h3 id="æ§åˆ¶å™¨Controller"><a href="#æ§åˆ¶å™¨Controller" class="headerlink" title="æ§åˆ¶å™¨Controller"></a>æ§åˆ¶å™¨Controller</h3><ul><li>æ§åˆ¶å™¨å¤æ‚æä¾›è®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œé€šå¸¸é€šè¿‡æ¥å£å®šä¹‰æˆ–æ³¨è§£å®šä¹‰ä¸¤ç§æ–¹æ³•å®ç°ã€‚</li><li>æ§åˆ¶å™¨è´Ÿè´£è§£æç”¨æˆ·çš„è¯·æ±‚å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ¨¡å‹ã€‚</li><li>åœ¨Spring MVCä¸­ä¸€ä¸ªæ§åˆ¶å™¨ç±»å¯ä»¥åŒ…å«å¤šä¸ªæ–¹æ³•</li><li>åœ¨Spring MVCä¸­ï¼Œå¯¹äºControllerçš„é…ç½®æ–¹å¼æœ‰å¾ˆå¤šç§</li></ul><h3 id="å®ç°Controlleræ¥å£"><a href="#å®ç°Controlleræ¥å£" class="headerlink" title="å®ç°Controlleræ¥å£"></a>å®ç°Controlleræ¥å£</h3><p>Controlleræ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨org.springframework.web.servlet.mvcåŒ…ä¸‹ï¼Œæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ç°è¯¥æ¥å£çš„ç±»è·å¾—æ§åˆ¶å™¨åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">   <span class="comment">//å¤„ç†è¯·æ±‚ä¸”è¿”å›ä¸€ä¸ªæ¨¡å‹ä¸è§†å›¾å¯¹è±¡</span></span><br><span class="line">   ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest var1, HttpServletResponse var2)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><ol><li><p>æ–°å»ºä¸€ä¸ªMoudleï¼Œspringmvc-04-controllerï¼</p></li><li><ul><li>mvcçš„é…ç½®æ–‡ä»¶åªç•™ä¸‹ è§†å›¾è§£æå™¨ï¼</li></ul></li><li><p>ç¼–å†™ä¸€ä¸ªControllerç±»ï¼ŒControllerTest1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment">//æ³¨æ„ç‚¹ï¼šä¸è¦å¯¼é”™åŒ…ï¼Œå®ç°Controlleræ¥å£ï¼Œé‡å†™æ–¹æ³•ï¼›</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest1</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span></span><br><span class="line">       <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">       mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Test1Controller&quot;</span>);</span><br><span class="line">       mv.setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™å®Œæ¯•åï¼Œå»Springé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œè¯·æ±‚çš„beanï¼›nameå¯¹åº”è¯·æ±‚è·¯å¾„ï¼Œclasså¯¹åº”å¤„ç†è¯·æ±‚çš„ç±»</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;/t1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nuc.ss.controller.ControllerTest1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">12</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™å‰ç«¯test.jspï¼Œæ³¨æ„åœ¨WEB-INF&#x2F;jspç›®å½•ä¸‹ç¼–å†™ï¼Œå¯¹åº”æˆ‘ä»¬çš„è§†å›¾è§£æå™¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Kuangshen<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcatè¿è¡Œæµ‹è¯•ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰é¡¹ç›®å‘å¸ƒåé…ç½®çš„å°±æ˜¯ä¸€ä¸ª &#x2F; ï¼Œæ‰€ä»¥è¯·æ±‚ä¸ç”¨åŠ é¡¹ç›®åï¼ŒOKï¼</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172320596.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ol><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>å®ç°æ¥å£Controllerå®šä¹‰æ§åˆ¶å™¨æ˜¯è¾ƒè€çš„åŠæ³•</li><li>ç¼ºç‚¹æ˜¯ï¼šä¸€ä¸ªæ§åˆ¶å™¨ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚æœè¦å¤šä¸ªæ–¹æ³•åˆ™éœ€è¦å®šä¹‰å¤šä¸ªControllerï¼›å®šä¹‰çš„æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼›</li></ul><h3 id="ä½¿ç”¨æ³¨è§£-Controller"><a href="#ä½¿ç”¨æ³¨è§£-Controller" class="headerlink" title="ä½¿ç”¨æ³¨è§£@Controller"></a>ä½¿ç”¨æ³¨è§£@Controller</h3><ul><li><p>@Controlleræ³¨è§£ç±»å‹ç”¨äºå£°æ˜Springç±»çš„å®ä¾‹æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆåœ¨è®²IOCæ—¶è¿˜æåˆ°äº†å¦å¤–3ä¸ªæ³¨è§£ï¼‰ï¼›</p></li><li><p>Springå¯ä»¥ä½¿ç”¨æ‰«ææœºåˆ¶æ¥æ‰¾åˆ°åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰åŸºäºæ³¨è§£çš„æ§åˆ¶å™¨ç±»ï¼Œä¸ºäº†ä¿è¯Springèƒ½æ‰¾åˆ°ä½ çš„æ§åˆ¶å™¨ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ç»„ä»¶æ‰«æã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;nuc.ss.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¢åŠ ä¸€ä¸ªControllerTest2ç±»ï¼Œä½¿ç”¨æ³¨è§£å®ç°ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Controlleræ³¨è§£çš„ç±»ä¼šè‡ªåŠ¨æ·»åŠ åˆ°Springä¸Šä¸‹æ–‡ä¸­</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest2</span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æ˜ å°„è®¿é—®è·¯å¾„</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">       <span class="comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span></span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ControllerTest2&quot;</span>);</span><br><span class="line">       <span class="comment">//è¿”å›è§†å›¾ä½ç½®</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œtomcatæµ‹è¯•</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321218.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul><p><strong>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬çš„ä¸¤ä¸ªè¯·æ±‚éƒ½å¯ä»¥æŒ‡å‘ä¸€ä¸ªè§†å›¾(test)ï¼Œä½†æ˜¯é¡µé¢ç»“æœçš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œä»è¿™é‡Œå¯ä»¥çœ‹å‡ºè§†å›¾æ˜¯è¢«å¤ç”¨çš„ï¼Œè€Œæ§åˆ¶å™¨ä¸è§†å›¾ä¹‹é—´æ˜¯å¼±å¶åˆå…³ç³»ã€‚</strong></p><p><strong>æ³¨è§£æ–¹å¼æ˜¯å¹³æ—¶ä½¿ç”¨çš„æœ€å¤šçš„æ–¹å¼ï¼</strong></p><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="RequestMapping"></a>RequestMapping</h3><p><strong>@RequestMapping</strong></p><ul><li><p>@RequestMappingæ³¨è§£ç”¨äºæ˜ å°„urlåˆ°æ§åˆ¶å™¨ç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„å¤„ç†ç¨‹åºæ–¹æ³•ã€‚å¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p></li><li><p>ä¸ºäº†æµ‹è¯•ç»“è®ºæ›´åŠ å‡†ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šä¸€ä¸ªé¡¹ç›®åæµ‹è¯• myweb</p></li><li><p>åªæ³¨è§£åœ¨æ–¹æ³•ä¸Šé¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/h1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/">http://localhost:8080</a> &#x2F; é¡¹ç›®å &#x2F; h1</p></li><li><p>åŒæ—¶æ³¨è§£ç±»ä¸æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/h1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/">http://localhost:8080</a> &#x2F; é¡¹ç›®å&#x2F; admin &#x2F;h1 , éœ€è¦å…ˆæŒ‡å®šç±»çš„è·¯å¾„å†æŒ‡å®šæ–¹æ³•çš„è·¯å¾„ï¼›</p></li></ul><h3 id="RestFul-é£æ ¼"><a href="#RestFul-é£æ ¼" class="headerlink" title="RestFul é£æ ¼"></a>RestFul é£æ ¼</h3><p><strong>æ¦‚å¿µ</strong></p><p>Restfulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p><p><strong>åŠŸèƒ½</strong></p><p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº</p><p>èµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚</p><p>åˆ†åˆ«å¯¹åº” æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚</p><p><strong>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº</strong> ï¼šé€šè¿‡ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼æ–¹æ³•å•ä¸€ï¼Œpost å’Œ get</p><p> <a href="http://127.0.0.1/item/queryItem.action?id=1">http://127.0.0.1/item/queryItem.action?id=1</a> æŸ¥è¯¢,GET</p><p> <a href="http://127.0.0.1/item/saveItem.action">http://127.0.0.1/item/saveItem.action</a> æ–°å¢,POST</p><p> <a href="http://127.0.0.1/item/updateItem.action">http://127.0.0.1/item/updateItem.action</a> æ›´æ–°,POST</p><p> <a href="http://127.0.0.1/item/deleteItem.action?id=1">http://127.0.0.1/item/deleteItem.action?id=1</a> åˆ é™¤,GETæˆ–POST</p><p><strong>ä½¿ç”¨RESTfulæ“ä½œèµ„æº</strong> ï¼šå¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒï¼</p><p> <a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> æŸ¥è¯¢,GET</p><p> <a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ–°å¢,POST</p><p> <a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ›´æ–°,PUT</p><p> <a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> åˆ é™¤,DELETE</p><p><strong>å­¦ä¹ æµ‹è¯•</strong></p><ol><li><p>åœ¨æ–°å»ºä¸€ä¸ªç±» RestFulController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestFulController</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Spring MVCä¸­å¯ä»¥ä½¿ç”¨ @PathVariable æ³¨è§£ï¼Œè®©æ–¹æ³•å‚æ•°çš„å€¼å¯¹åº”ç»‘å®šåˆ°ä¸€ä¸ªURIæ¨¡æ¿å˜é‡ä¸Šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestFulController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æ˜ å°„è®¿é—®è·¯å¾„</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/add/&#123;p1&#125;/&#123;p2&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> p1, <span class="meta">@PathVariable</span> <span class="type">int</span> p2, Model model)</span>&#123;</span><br><span class="line">       </span><br><span class="line">       <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> p1+p2;</span><br><span class="line">       <span class="comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span></span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">       <span class="comment">//è¿”å›è§†å›¾ä½ç½®</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">       </span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬æ¥æµ‹è¯•è¯·æ±‚æŸ¥çœ‹ä¸‹</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321058.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>æ€è€ƒï¼šä½¿ç”¨è·¯å¾„å˜é‡çš„å¥½å¤„ï¼Ÿ</p><ul><li><p>ä½¿è·¯å¾„å˜å¾—æ›´åŠ ç®€æ´ï¼›</p></li><li><p>è·å¾—å‚æ•°æ›´åŠ æ–¹ä¾¿ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p></li><li><p>é€šè¿‡è·¯å¾„å˜é‡çš„ç±»å‹å¯ä»¥çº¦æŸè®¿é—®å‚æ•°ï¼Œå¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ™è®¿é—®ä¸åˆ°å¯¹åº”çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚è¿™é‡Œè®¿é—®æ˜¯çš„è·¯å¾„æ˜¯&#x2F;add&#x2F;1&#x2F;aï¼Œåˆ™è·¯å¾„ä¸æ–¹æ³•ä¸åŒ¹é…ï¼Œè€Œä¸ä¼šæ˜¯å‚æ•°è½¬æ¢å¤±è´¥ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321528.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul></li><li><p>æˆ‘ä»¬æ¥ä¿®æ”¹ä¸‹å¯¹åº”çš„å‚æ•°ç±»å‹ï¼Œå†æ¬¡æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ˜ å°„è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/add/&#123;p1&#125;/&#123;p2&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> p1, <span class="meta">@PathVariable</span> String p2, Model model)</span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> p1+p2;</span><br><span class="line">   <span class="comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span></span><br><span class="line">   model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">   <span class="comment">//è¿”å›è§†å›¾ä½ç½®</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>ã€<img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202207011008461.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>ä½¿ç”¨methodå±æ€§æŒ‡å®šè¯·æ±‚ç±»å‹</strong></p><p>ç”¨äºçº¦æŸè¯·æ±‚çš„ç±»å‹ï¼Œå¯ä»¥æ”¶çª„è¯·æ±‚èŒƒå›´ã€‚æŒ‡å®šè¯·æ±‚è°“è¯çš„ç±»å‹å¦‚GET, POST, HEAD, OPTIONS, PUT, PATCH, DELETE, TRACEç­‰</p><p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><ul><li><p>å¢åŠ ä¸€ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ˜ å°„è®¿é—®è·¯å¾„,å¿…é¡»æ˜¯POSTè¯·æ±‚</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/hello&quot;,method = &#123;RequestMethod.POST&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index2</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">   model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;hello!&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨åœ°å€æ è¿›è¡Œè®¿é—®é»˜è®¤æ˜¯Getè¯·æ±‚ï¼Œä¼šæŠ¥é”™405ï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321757.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>å¦‚æœå°†POSTä¿®æ”¹ä¸ºGETåˆ™æ­£å¸¸äº†ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ˜ å°„è®¿é—®è·¯å¾„,å¿…é¡»æ˜¯Getè¯·æ±‚</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/hello&quot;,method = &#123;RequestMethod.GET&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index2</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">   model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;hello!&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321677.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul><p><strong>å°ç»“ï¼š</strong></p><p>Spring MVC çš„ @RequestMapping æ³¨è§£èƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚çš„æ–¹æ³•, æ¯”å¦‚ GET, PUT, POST, DELETE ä»¥åŠ PATCHã€‚</p><p><strong>æ‰€æœ‰çš„åœ°å€æ è¯·æ±‚é»˜è®¤éƒ½ä¼šæ˜¯ HTTP GET ç±»å‹çš„ã€‚</strong></p><p>æ–¹æ³•çº§åˆ«çš„æ³¨è§£å˜ä½“æœ‰å¦‚ä¸‹å‡ ä¸ªï¼šç»„åˆæ³¨è§£</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@GetMapping</span></span><br><span class="line"><span class="variable">@PostMapping</span></span><br><span class="line"><span class="variable">@PutMapping</span></span><br><span class="line"><span class="variable">@DeleteMapping</span></span><br><span class="line"><span class="variable">@PatchMapping</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>@GetMapping æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå¹³æ—¶ä½¿ç”¨çš„ä¼šæ¯”è¾ƒå¤šï¼</p><p>å®ƒæ‰€æ‰®æ¼”çš„æ˜¯ @RequestMapping(method &#x3D;RequestMethod.GET) çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚</p><h3 id="æ‰©å±•ï¼šå°é»„é¸­è°ƒè¯•æ³•"><a href="#æ‰©å±•ï¼šå°é»„é¸­è°ƒè¯•æ³•" class="headerlink" title="æ‰©å±•ï¼šå°é»„é¸­è°ƒè¯•æ³•"></a>æ‰©å±•ï¼šå°é»„é¸­è°ƒè¯•æ³•</h3><p>åœºæ™¯ä¸€ï¼š<em>æˆ‘ä»¬éƒ½æœ‰è¿‡å‘åˆ«äººï¼ˆç”šè‡³å¯èƒ½å‘å®Œå…¨ä¸ä¼šç¼–ç¨‹çš„äººï¼‰æé—®åŠè§£é‡Šç¼–ç¨‹é—®é¢˜çš„ç»å†ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™å°±åœ¨æˆ‘ä»¬è§£é‡Šçš„è¿‡ç¨‹ä¸­è‡ªå·±å´æƒ³åˆ°äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œç„¶åå¯¹æ–¹å´ä¸€è„¸èŒ«ç„¶ã€‚</em></p><p>åœºæ™¯äºŒï¼šä½ çš„åŒè¡Œè·‘æ¥é—®ä½ ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å½“ä»–è‡ªå·±æŠŠé—®é¢˜è¯´å®Œï¼Œæˆ–è¯´åˆ°ä¸€åŠçš„æ—¶å€™å°±æƒ³å‡ºç­”æ¡ˆèµ°äº†ï¼Œç•™ä¸‹ä¸€è„¸èŒ«ç„¶çš„ä½ ã€‚</p><p>å…¶å®ä¸Šé¢ä¸¤ç§åœºæ™¯ç°è±¡å°±æ˜¯æ‰€è°“çš„å°é»„é¸­è°ƒè¯•æ³•ï¼ˆRubber Duck Debugingï¼‰ï¼Œåˆç§°æ©¡çš®é¸­è°ƒè¯•æ³•ï¼Œå®ƒæ˜¯æˆ‘ä»¬è½¯ä»¶å·¥ç¨‹ä¸­æœ€å¸¸ä½¿ç”¨è°ƒè¯•æ–¹æ³•ä¹‹ä¸€ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321987.png" alt="img"></p><p>æ­¤æ¦‚å¿µæ®è¯´æ¥è‡ªã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“ã€‹ä¹¦ä¸­çš„ä¸€ä¸ªæ•…äº‹ï¼Œä¼ è¯´ç¨‹åºå¤§å¸ˆéšèº«æºå¸¦ä¸€åªå°é»„é¸­ï¼Œåœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™ä¼šåœ¨æ¡Œä¸Šæ”¾ä¸Šè¿™åªå°é»„é¸­ï¼Œç„¶åè¯¦ç»†åœ°å‘é¸­å­è§£é‡Šæ¯è¡Œä»£ç ï¼Œç„¶åå¾ˆå¿«å°±å°†é—®é¢˜å®šä½ä¿®å¤äº†ã€‚</p><h2 id="ç»“æœè·³è½¬æ–¹å¼"><a href="#ç»“æœè·³è½¬æ–¹å¼" class="headerlink" title="ç»“æœè·³è½¬æ–¹å¼"></a>ç»“æœè·³è½¬æ–¹å¼</h2><h3 id="ModelAndView"><a href="#ModelAndView" class="headerlink" title="ModelAndView"></a>ModelAndView</h3><p>è®¾ç½®ModelAndViewå¯¹è±¡ , æ ¹æ®viewçš„åç§° , å’Œè§†å›¾è§£æå™¨è·³åˆ°æŒ‡å®šçš„é¡µé¢ .</p><p>é¡µé¢ : {è§†å›¾è§£æå™¨å‰ç¼€} + viewName +{è§†å›¾è§£æå™¨åç¼€}</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„controllerç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest1</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span></span><br><span class="line">       <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">       mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ControllerTest1&quot;</span>);</span><br><span class="line">       mv.setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ServletAPI"><a href="#ServletAPI" class="headerlink" title="ServletAPI"></a>ServletAPI</h3><p>ServletAPI</p><p>é€šè¿‡è®¾ç½®ServletAPI , ä¸éœ€è¦è§†å›¾è§£æå™¨ .</p><ol><li><p>é€šè¿‡HttpServletResponseè¿›è¡Œè¾“å‡º</p></li><li><p>é€šè¿‡HttpServletResponseå®ç°é‡å®šå‘</p></li><li><p>é€šè¿‡HttpServletResponseå®ç°è½¬å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultGo</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/result/t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       rsp.getWriter().println(<span class="string">&quot;Hello,Spring BY servlet API&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/result/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       rsp.sendRedirect(<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/result/t3&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//è½¬å‘</span></span><br><span class="line">       req.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;/result/t3&quot;</span>);</span><br><span class="line">       req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/test.jsp&quot;</span>).forward(req,rsp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h3><p><strong>é€šè¿‡SpringMVCæ¥å®ç°è½¬å‘å’Œé‡å®šå‘ - æ— éœ€è§†å›¾è§£æå™¨ï¼›</strong></p><p>æµ‹è¯•å‰ï¼Œéœ€è¦å°†è§†å›¾è§£æå™¨æ³¨é‡Šæ‰</p><ul><li>é»˜è®¤ä¸ºforwardè½¬å‘ï¼ˆä¹Ÿå¯ä»¥åŠ ä¸Šï¼‰</li><li>redirectè½¬å‘éœ€ç‰¹åˆ«åŠ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultSpringMVC</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm/t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//è½¬å‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//è½¬å‘äºŒ</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;forward:/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm/t3&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//é‡å®šå‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é€šè¿‡SpringMVCæ¥å®ç°è½¬å‘å’Œé‡å®šå‘ - æœ‰è§†å›¾è§£æå™¨ï¼›</strong></p><p>é‡å®šå‘ , ä¸éœ€è¦è§†å›¾è§£æå™¨ , æœ¬è´¨å°±æ˜¯é‡æ–°è¯·æ±‚ä¸€ä¸ªæ–°åœ°æ–¹å˜› , æ‰€ä»¥æ³¨æ„è·¯å¾„é—®é¢˜.</p><p>å¯ä»¥é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªè¯·æ±‚å®ç° .</p><ul><li>é»˜è®¤ä¸ºforwardè½¬å‘ï¼ˆä¸å¯ä»¥åŠ ä¸Šï¼‰</li><li>redirectè½¬å‘éœ€ç‰¹åˆ«åŠ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultSpringMVC2</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm2/t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//è½¬å‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm2/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//é‡å®šå‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">       <span class="comment">//return &quot;redirect:hello.do&quot;; //hello.doä¸ºå¦ä¸€ä¸ªè¯·æ±‚/</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><h3 id="å¤„ç†æäº¤æ•°æ®"><a href="#å¤„ç†æäº¤æ•°æ®" class="headerlink" title="å¤„ç†æäº¤æ•°æ®"></a>å¤„ç†æäº¤æ•°æ®</h3><p><strong>1ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´</strong></p><p>æäº¤æ•°æ® : <a href="http://localhost:8080/hello?name=kuangshen">http://localhost:8080/hello?name=kuangshen</a></p><p>å¤„ç†æ–¹æ³• :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(String name)</span>&#123;</span><br><span class="line">   System.out.println(name);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åå°è¾“å‡º : kuangshen</p><p><strong>2ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´</strong></p><p>æäº¤æ•°æ® : <a href="http://localhost:8080/hello?username=kuangshen">http://localhost:8080/hello?username=kuangshen</a></p><p>å¤„ç†æ–¹æ³• :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@RequestParam(&quot;username&quot;) : usernameæäº¤çš„åŸŸçš„åç§° .</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name)</span>&#123;</span><br><span class="line">   System.out.println(name);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åå°è¾“å‡º : kuangshen</p><p><strong>3ã€æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</strong></p><p>è¦æ±‚æäº¤çš„è¡¨å•åŸŸå’Œå¯¹è±¡çš„å±æ€§åä¸€è‡´ , å‚æ•°ä½¿ç”¨å¯¹è±¡å³å¯</p><ol><li><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">   <span class="comment">//æ„é€ </span></span><br><span class="line">   <span class="comment">//get/set</span></span><br><span class="line">   <span class="comment">//tostring()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æäº¤æ•°æ® : <a href="http://localhost:8080/mvc04/user?name=kuangshen&id=1&age=15">http://localhost:8080/mvc04/user?name=kuangshen&amp;id=1&amp;age=15</a></p></li><li><p>å¤„ç†æ–¹æ³• :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">user</span><span class="params">(User user)</span>&#123;</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>åå°è¾“å‡º : User { id&#x3D;1, name&#x3D;â€˜kuangshenâ€™, age&#x3D;15 }</p><p>è¯´æ˜ï¼šå¦‚æœä½¿ç”¨å¯¹è±¡çš„è¯ï¼Œå‰ç«¯ä¼ é€’çš„å‚æ•°åå’Œå¯¹è±¡åå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™å°±æ˜¯nullã€‚</p><h3 id="æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"><a href="#æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯" class="headerlink" title="æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"></a>æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯</h3><p><strong>ç¬¬ä¸€ç§ : é€šè¿‡ModelAndView</strong></p><p>æˆ‘ä»¬å‰é¢ä¸€ç›´éƒ½æ˜¯å¦‚æ­¤ . å°±ä¸è¿‡å¤šè§£é‡Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest1</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span></span><br><span class="line">       <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">       mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ControllerTest1&quot;</span>);</span><br><span class="line">       mv.setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç¬¬äºŒç§ : é€šè¿‡ModelMap</strong></p><p>ModelMap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name, ModelMap modelMap)</span>&#123;</span><br><span class="line">   <span class="comment">//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">   <span class="comment">//ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span></span><br><span class="line">   modelMap.addAttribute(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">   System.out.println(name);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰ç§ : é€šè¿‡Model</strong></p><p>Model</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/ct2/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name, Model model)</span>&#123;</span><br><span class="line">   <span class="comment">//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">   <span class="comment">//ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span></span><br><span class="line">   model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line">   System.out.println(name);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h3><p>å°±å¯¹äºæ–°æ‰‹è€Œè¨€ç®€å•æ¥è¯´ä½¿ç”¨åŒºåˆ«å°±æ˜¯ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Model</span> åªæœ‰å¯¥å¯¥å‡ ä¸ªæ–¹æ³•åªé€‚åˆç”¨äºå‚¨å­˜æ•°æ®ï¼Œç®€åŒ–äº†æ–°æ‰‹å¯¹äº<span class="keyword">Model</span>å¯¹è±¡çš„æ“ä½œå’Œç†è§£ï¼›</span><br><span class="line">ModelMap ç»§æ‰¿äº† LinkedMap ï¼Œé™¤äº†å®ç°äº†è‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ ·çš„ç»§æ‰¿ LinkedMap çš„æ–¹æ³•å’Œç‰¹æ€§ï¼›</span><br><span class="line">ModelAndView å¯ä»¥åœ¨å‚¨å­˜æ•°æ®çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œè®¾ç½®è¿”å›çš„é€»è¾‘è§†å›¾ï¼Œè¿›è¡Œæ§åˆ¶å±•ç¤ºå±‚çš„è·³è½¬ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“ç„¶æ›´å¤šçš„ä»¥åå¼€å‘è€ƒè™‘çš„æ›´å¤šçš„æ˜¯æ€§èƒ½å’Œä¼˜åŒ–ï¼Œå°±ä¸èƒ½å•å•ä»…é™äºæ­¤çš„äº†è§£ã€‚</p><p><strong>è¯·ä½¿ç”¨80%çš„æ—¶é—´æ‰“å¥½æ‰å®çš„åŸºç¡€ï¼Œå‰©ä¸‹18%çš„æ—¶é—´ç ”ç©¶æ¡†æ¶ï¼Œ2%çš„æ—¶é—´å»å­¦ç‚¹è‹±æ–‡ï¼Œæ¡†æ¶çš„å®˜æ–¹æ–‡æ¡£æ°¸è¿œæ˜¯æœ€å¥½çš„æ•™ç¨‹ã€‚</strong></p><h2 id="ä¹±ç é—®é¢˜"><a href="#ä¹±ç é—®é¢˜" class="headerlink" title="ä¹±ç é—®é¢˜"></a>ä¹±ç é—®é¢˜</h2><p>æµ‹è¯•æ­¥éª¤ï¼š</p><ol><li><p>æˆ‘ä»¬å¯ä»¥åœ¨é¦–é¡µç¼–å†™ä¸€ä¸ªæäº¤çš„è¡¨å•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/e/t&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åå°ç¼–å†™å¯¹åº”çš„å¤„ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Encoding</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/e/t&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(Model model,String name)</span>&#123;</span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>,name); <span class="comment">//è·å–è¡¨å•æäº¤çš„å€¼</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>; <span class="comment">//è·³è½¬åˆ°testé¡µé¢æ˜¾ç¤ºè¾“å…¥çš„å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è¾“å…¥ä¸­æ–‡æµ‹è¯•ï¼Œå‘ç°ä¹±ç </p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321861.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ol><p>ä¸å¾—ä¸è¯´ï¼Œä¹±ç é—®é¢˜æ˜¯åœ¨æˆ‘ä»¬å¼€å‘ä¸­ååˆ†å¸¸è§çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯è®©æˆ‘ä»¬ç¨‹åºçŒ¿æ¯”è¾ƒå¤´å¤§çš„é—®é¢˜ï¼</p><p>ä»¥å‰ä¹±ç é—®é¢˜é€šè¿‡è¿‡æ»¤å™¨è§£å†³ , è€ŒSpringMVCç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè¿‡æ»¤å™¨ , å¯ä»¥åœ¨web.xmlä¸­é…ç½® .</p><p>ä¿®æ”¹äº†xmlæ–‡ä»¶éœ€è¦é‡å¯æœåŠ¡å™¨ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œå†™&#x2F;*ï¼Œå†™&#x2F;çš„è¯è¿‡æ»¤ä¸äº†jspé¡µé¢ï¼Œä¸èƒ½è§£å†³ä¹±ç </p><p>ä½†æ˜¯æˆ‘ä»¬å‘ç° , æœ‰äº›æç«¯æƒ…å†µä¸‹.è¿™ä¸ªè¿‡æ»¤å™¨å¯¹getçš„æ”¯æŒä¸å¥½ .</p><p>å¤„ç†æ–¹æ³• :</p><ol><li><p>ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶ ï¼šè®¾ç½®ç¼–ç ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">URIEncoding</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆä¸‡èƒ½è§£å†³ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequestWrapper;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è§£å†³getå’Œpostè¯·æ±‚ å…¨éƒ¨ä¹±ç çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericEncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">       <span class="comment">//å¤„ç†responseçš„å­—ç¬¦ç¼–ç </span></span><br><span class="line">       HttpServletResponse myResponse=(HttpServletResponse) response;</span><br><span class="line">       myResponse.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// è½¬å‹ä¸ºä¸åè®®ç›¸å…³å¯¹è±¡</span></span><br><span class="line">       <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">       <span class="comment">// å¯¹requeståŒ…è£…å¢å¼º</span></span><br><span class="line">       <span class="type">HttpServletRequest</span> <span class="variable">myrequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRequest</span>(httpServletRequest);</span><br><span class="line">       chain.doFilter(myrequest, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰requestå¯¹è±¡ï¼ŒHttpServletRequestçš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRequest</span> <span class="keyword">extends</span> <span class="title class_">HttpServletRequestWrapper</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">   <span class="comment">//æ˜¯å¦ç¼–ç çš„æ ‡è®°</span></span><br><span class="line">   <span class="keyword">private</span> <span class="type">boolean</span> hasEncode;</span><br><span class="line">   <span class="comment">//å®šä¹‰ä¸€ä¸ªå¯ä»¥ä¼ å…¥HttpServletRequestå¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œè£…é¥°</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">MyRequest</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>(request);<span class="comment">// superå¿…é¡»å†™</span></span><br><span class="line">       <span class="built_in">this</span>.request = request;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å¯¹éœ€è¦å¢å¼ºæ–¹æ³• è¿›è¡Œè¦†ç›–</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Map <span class="title function_">getParameterMap</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">// å…ˆè·å¾—è¯·æ±‚æ–¹å¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">       <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;post&quot;</span>)) &#123;</span><br><span class="line">           <span class="comment">// postè¯·æ±‚</span></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="comment">// å¤„ç†postä¹±ç </span></span><br><span class="line">               request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">               <span class="keyword">return</span> request.getParameterMap();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;get&quot;</span>)) &#123;</span><br><span class="line">           <span class="comment">// getè¯·æ±‚</span></span><br><span class="line">           Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">           <span class="keyword">if</span> (!hasEncode) &#123; <span class="comment">// ç¡®ä¿getæ‰‹åŠ¨ç¼–ç é€»è¾‘åªè¿è¡Œä¸€æ¬¡</span></span><br><span class="line">               <span class="keyword">for</span> (String parameterName : parameterMap.keySet()) &#123;</span><br><span class="line">                   String[] values = parameterMap.get(parameterName);</span><br><span class="line">                   <span class="keyword">if</span> (values != <span class="literal">null</span>) &#123;</span><br><span class="line">                       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">                           <span class="keyword">try</span> &#123;</span><br><span class="line">                               <span class="comment">// å¤„ç†getä¹±ç </span></span><br><span class="line">                               values[i] = <span class="keyword">new</span> <span class="title class_">String</span>(values[i]</span><br><span class="line">                                      .getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                          &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                               e.printStackTrace();</span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">               hasEncode = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">           <span class="keyword">return</span> parameterMap;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">super</span>.getParameterMap();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//å–ä¸€ä¸ªå€¼</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getParameter</span><span class="params">(String name)</span> &#123;</span><br><span class="line">       Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">       String[] values = parameterMap.get(name);</span><br><span class="line">       <span class="keyword">if</span> (values == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">return</span> values[<span class="number">0</span>]; <span class="comment">// å–å›å‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//å–æ‰€æœ‰å€¼</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String[] getParameterValues(String name) &#123;</span><br><span class="line">       Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">       String[] values = parameterMap.get(name);</span><br><span class="line">       <span class="keyword">return</span> values;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringMVCé»˜è®¤çš„ä¹±ç å¤„ç†å°±å·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³äº†ï¼</p><p><strong>ç„¶ååœ¨web.xmlä¸­é…ç½®è¿™ä¸ªè¿‡æ»¤å™¨å³å¯ï¼</strong></p><p>ä¹±ç é—®é¢˜ï¼Œéœ€è¦å¹³æ—¶å¤šæ³¨æ„ï¼Œåœ¨å°½å¯èƒ½èƒ½è®¾ç½®ç¼–ç çš„åœ°æ–¹ï¼Œéƒ½è®¾ç½®ä¸ºç»Ÿä¸€ç¼–ç  UTF-8ï¼</p></li></ol><h2 id="Jsonäº¤äº’å¤„ç†"><a href="#Jsonäº¤äº’å¤„ç†" class="headerlink" title="Jsonäº¤äº’å¤„ç†"></a>Jsonäº¤äº’å¤„ç†</h2><h3 id="ä»€ä¹ˆæ˜¯JSONï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯JSONï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯JSONï¼Ÿ"></a>ä»€ä¹ˆæ˜¯JSONï¼Ÿ</h3><ul><li>JSON(JavaScript Object Notation, JS å¯¹è±¡æ ‡è®°) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç›®å‰ä½¿ç”¨ç‰¹åˆ«å¹¿æ³›ã€‚</li><li>é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„<strong>æ–‡æœ¬æ ¼å¼</strong>æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚</li><li>ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚</li><li>æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li></ul><p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œä»»ä½•JavaScript æ”¯æŒçš„ç±»å‹éƒ½å¯ä»¥é€šè¿‡ JSON æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰ã€‚çœ‹çœ‹ä»–çš„è¦æ±‚å’Œè¯­æ³•æ ¼å¼ï¼š</p><ul><li>å¯¹è±¡è¡¨ç¤ºä¸ºé”®å€¼å¯¹ï¼Œæ•°æ®ç”±é€—å·åˆ†éš”</li><li>èŠ±æ‹¬å·ä¿å­˜å¯¹è±¡</li><li>æ–¹æ‹¬å·ä¿å­˜æ•°ç»„</li></ul><p><strong>JSON é”®å€¼å¯¹</strong>æ˜¯ç”¨æ¥ä¿å­˜ JavaScript å¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œå’Œ JavaScript å¯¹è±¡çš„å†™æ³•ä¹Ÿå¤§åŒå°å¼‚ï¼Œé”®&#x2F;å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å· â€œâ€ åŒ…è£¹ï¼Œä½¿ç”¨å†’å· : åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;QinJiang&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;age&quot;</span>: <span class="string">&quot;3&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;sex&quot;</span>: <span class="string">&quot;ç”·&quot;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¾ˆå¤šäººæä¸æ¸…æ¥š JSON å’Œ JavaScript å¯¹è±¡çš„å…³ç³»ï¼Œç”šè‡³è¿è°æ˜¯è°éƒ½ä¸æ¸…æ¥šã€‚å…¶å®ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p><p>JSON æ˜¯ JavaScript å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ï¼Œå®ƒä½¿ç”¨æ–‡æœ¬è¡¨ç¤ºä¸€ä¸ª JS å¯¹è±¡çš„ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;; <span class="comment">//è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„é”®åä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¼•å·åŒ…è£¹çš„</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>; <span class="comment">//è¿™æ˜¯ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h3 id="JSON-å’Œ-JavaScript-å¯¹è±¡äº’è½¬"><a href="#JSON-å’Œ-JavaScript-å¯¹è±¡äº’è½¬" class="headerlink" title="JSON å’Œ JavaScript å¯¹è±¡äº’è½¬"></a><strong>JSON å’Œ JavaScript å¯¹è±¡äº’è½¬</strong></h3><p>è¦å®ç°ä»JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaScript å¯¹è±¡ï¼Œä½¿ç”¨ JSON.parse() æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>);</span><br><span class="line"><span class="comment">//ç»“æœæ˜¯ &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¦å®ç°ä»JavaScript å¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ JSON.stringify() æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;);</span><br><span class="line"><span class="comment">//ç»“æœæ˜¯ &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä»£ç æµ‹è¯•</strong></p><ol><li><p>æ–°å»ºä¸€ä¸ªmodule ï¼Œspringmvc-05-json ï¼Œ æ·»åŠ webçš„æ”¯æŒ</p></li><li><p>åœ¨webç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª json-1.html ï¼Œ ç¼–å†™æµ‹è¯•å†…å®¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSON_ç§¦ç–†<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="comment">//ç¼–å†™ä¸€ä¸ªjsçš„å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">var</span> user = &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">name</span>:<span class="string">&quot;ç§¦ç–†&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">age</span>:<span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">sex</span>:<span class="string">&quot;ç”·&quot;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript">   <span class="comment">//å°†jså¯¹è±¡è½¬æ¢æˆjsonå­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">var</span> str = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user);</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span></span><br><span class="line"><span class="language-javascript">   </span></span><br><span class="line"><span class="language-javascript">   <span class="comment">//å°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjså¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">var</span> user2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(str);</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(user2.<span class="property">age</span>,user2.<span class="property">name</span>,user2.<span class="property">sex</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨IDEAä¸­ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼</p></li></ol><h3 id="Controllerè¿”å›JSONæ•°æ®"><a href="#Controllerè¿”å›JSONæ•°æ®" class="headerlink" title="Controllerè¿”å›JSONæ•°æ®"></a>Controllerè¿”å›JSONæ•°æ®</h3><ul><li><p>Jacksonåº”è¯¥æ˜¯ç›®å‰æ¯”è¾ƒå¥½çš„jsonè§£æå·¥å…·äº†</p></li><li><p>å½“ç„¶å·¥å…·ä¸æ­¢è¿™ä¸€ä¸ªï¼Œæ¯”å¦‚è¿˜æœ‰é˜¿é‡Œå·´å·´çš„ fastjson ç­‰ç­‰ã€‚</p></li><li><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Jacksonï¼Œä½¿ç”¨å®ƒéœ€è¦å¯¼å…¥å®ƒçš„jaråŒ…ï¼›</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®SpringMVCéœ€è¦çš„é…ç½®</p><ul><li><p>ï¼ˆweb.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--1.æ³¨å†Œservlet--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿›è¡Œå…³è”--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å¯åŠ¨é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œå¯åŠ¨è¶Šæ—© --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«springmvcæ‹¦æˆª --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>springmvc-servlet.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.kuang.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬éšä¾¿ç¼–å†™ä¸€ä¸ªUserçš„å®ä½“ç±»ï¼Œç„¶åæˆ‘ä»¬å»ç¼–å†™æˆ‘ä»¬çš„æµ‹è¯•Controllerï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ–°ä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯@ResponseBodyï¼Œä¸€ä¸ªæ˜¯ObjectMapperå¯¹è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸‹å…·ä½“çš„ç”¨æ³•</p><p>ç¼–å†™ä¸€ä¸ªControllerï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"><span class="meta">@RequestMapping(&quot;/j1&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//ä»–å°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">        <span class="comment">//jackson,ObjectMapper</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;ç§¦ç–†ä¸€å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="comment">//System.out.println(user);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>æ­¤æ—¶è¾“å…¥ä¸­æ–‡ä¼šäº§ç”Ÿä¹±ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//produces:æŒ‡å®šå“åº”ä½“è¿”å›ç±»å‹å’Œç¼–ç </span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/j1&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®Tomcat ï¼Œ å¯åŠ¨æµ‹è¯•ä¸€ä¸‹ï¼<a href="http://localhost:8080/j1">http://localhost:8080/j1</a></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321432.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul></li></ul><p>ã€æ³¨æ„ï¼šä½¿ç”¨jsonè®°å¾—å¤„ç†ä¹±ç é—®é¢˜ã€‘</p><h3 id="ä»£ç ä¼˜åŒ–"><a href="#ä»£ç ä¼˜åŒ–" class="headerlink" title="ä»£ç ä¼˜åŒ–"></a>ä»£ç ä¼˜åŒ–</h3><p><strong>ä¹±ç ç»Ÿä¸€è§£å†³</strong></p><p>ä¸Šä¸€ç§æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰è®¸å¤šè¯·æ±‚åˆ™æ¯ä¸€ä¸ªéƒ½è¦æ·»åŠ ï¼Œå¯ä»¥é€šè¿‡Springé…ç½®ç»Ÿä¸€æŒ‡å®šï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½å»å¤„ç†äº†ï¼</p><p>æˆ‘ä»¬å¯ä»¥åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸Šæ·»åŠ ä¸€æ®µæ¶ˆæ¯StringHttpMessageConverterè½¬æ¢é…ç½®ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³</strong></p><ul><li><p>@ResponseBodyè§£å†³ï¼ˆæ¯ä¸ªæ–¹æ³•éƒ½å¾—åŠ ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">   <span class="comment">//produces:æŒ‡å®šå“åº”ä½“è¿”å›ç±»å‹å’Œç¼–ç </span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/json1&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">       <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">       <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;ç§¦ç–†ä¸€å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">       <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">       <span class="comment">//ç”±äº@ResponseBodyæ³¨è§£ï¼Œè¿™é‡Œä¼šå°†strè½¬æˆjsonæ ¼å¼è¿”å›ï¼›ååˆ†æ–¹ä¾¿</span></span><br><span class="line">       <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>@RestController</strong>ï¼ˆç›´æ¥åŠ åˆ°ç±»ä¸Šå³å¯ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/j1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">       <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">       <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;ç§¦ç–†ä¸€å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">       <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">       <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="æµ‹è¯•é›†åˆè¾“å‡º"><a href="#æµ‹è¯•é›†åˆè¾“å‡º" class="headerlink" title="æµ‹è¯•é›†åˆè¾“å‡º"></a>æµ‹è¯•é›†åˆè¾“å‡º</h3><p>å¢åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json2</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">   <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;ç§¦ç–†1å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">2</span>, <span class="string">&quot;ç§¦ç–†2å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">3</span>, <span class="string">&quot;ç§¦ç–†3å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>, <span class="string">&quot;ç§¦ç–†4å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">5</span>, <span class="string">&quot;ç§¦ç–†5å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">    list.add(user1);</span><br><span class="line">    list.add(user2);</span><br><span class="line">    list.add(user3);</span><br><span class="line">    list.add(user4);</span><br><span class="line">    list.add(user5);</span><br><span class="line">    <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(list);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ : ååˆ†å®Œç¾ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321308.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="è¾“å‡ºæ—¶é—´å¯¹è±¡"><a href="#è¾“å‡ºæ—¶é—´å¯¹è±¡" class="headerlink" title="è¾“å‡ºæ—¶é—´å¯¹è±¡"></a>è¾“å‡ºæ—¶é—´å¯¹è±¡</h3><ul><li><p>å¢åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åˆ›å»ºæ—¶é—´ä¸€ä¸ªå¯¹è±¡ï¼Œjava.util.Date</span></span><br><span class="line">   <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(date);</span><br><span class="line">   <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œç»“æœ :</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321441.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>é»˜è®¤æ—¥æœŸæ ¼å¼ä¼šå˜æˆä¸€ä¸ªæ•°å­—ï¼Œæ˜¯1970å¹´1æœˆ1æ—¥åˆ°å½“å‰æ—¥æœŸçš„æ¯«ç§’æ•°ï¼</p></li><li><p>Jackson é»˜è®¤æ˜¯ä¼šæŠŠæ—¶é—´è½¬æˆtimestampså½¢å¼</p></li></ul><p><strong>è§£å†³æ–¹æ¡ˆï¼šå–æ¶ˆtimestampså½¢å¼ ï¼Œ è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json4</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼</span></span><br><span class="line">   mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="literal">false</span>);</span><br><span class="line">   <span class="comment">//è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼å¯¹è±¡</span></span><br><span class="line">   <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">   <span class="comment">//æŒ‡å®šæ—¥æœŸæ ¼å¼</span></span><br><span class="line">   mapper.setDateFormat(sdf);</span><br><span class="line"></span><br><span class="line">   <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(date);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ : æˆåŠŸçš„è¾“å‡ºäº†æ—¶é—´ï¼</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172321664.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æŠ½å–ä¸ºå·¥å…·ç±»</strong></p><p><strong>å¦‚æœè¦ç»å¸¸ä½¿ç”¨çš„è¯ï¼Œè¿™æ ·æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä»£ç å°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼›æˆ‘ä»¬å»ç¼–å†™ä¸‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getJson(object,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object, String dateFormat)</span> &#123;</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//javaè‡ªå®šä¹‰æ—¥æœŸæ ¼å¼</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(dateFormat);</span><br><span class="line">        <span class="comment">//sdf.format(date)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ObjectMapper æ¥æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">        mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,<span class="literal">false</span>);</span><br><span class="line">        mapper.setDateFormat(sdf);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ObjectMapper,æ—¶é—´è§£æåçš„é»˜è®¤æ ¼å¼ä¸ºï¼šTImestamp.æ—¶é—´æˆ³</span></span><br><span class="line">            <span class="keyword">return</span> mapper.writeValueAsString(object);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨å·¥å…·ç±»ï¼Œä»£ç å°±æ›´åŠ ç®€æ´äº†ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JsonUtils.getJson(date,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§åŠŸå‘Šæˆï¼å®Œç¾ï¼</p><h3 id="FastJson"><a href="#FastJson" class="headerlink" title="FastJson"></a>FastJson</h3><ul><li>fastjson.jaræ˜¯é˜¿é‡Œå¼€å‘çš„ä¸€æ¬¾ä¸“é—¨ç”¨äºJavaå¼€å‘çš„åŒ…ï¼Œ</li><li>å®ç°jsonå¯¹è±¡ä¸JavaBeanå¯¹è±¡çš„è½¬æ¢ï¼Œ</li><li>å®ç°JavaBeanå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œ</li><li>å®ç°jsonå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ã€‚</li><li>å®ç°jsonçš„è½¬æ¢æ–¹æ³•å¾ˆå¤šï¼Œæœ€åçš„å®ç°ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</li></ul><p>fastjson çš„ pomä¾èµ–ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.60<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>fastjson ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼š</strong></p><ol><li>JSONObject ä»£è¡¨ json å¯¹è±¡<ul><li>JSONObjectå®ç°äº†Mapæ¥å£, çŒœæƒ³ JSONObjectåº•å±‚æ“ä½œæ˜¯ç”±Mapå®ç°çš„ã€‚</li><li>JSONObjectå¯¹åº”jsonå¯¹è±¡ï¼Œé€šè¿‡å„ç§å½¢å¼çš„get()æ–¹æ³•å¯ä»¥è·å–jsonå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œä¹Ÿå¯åˆ©ç”¨è¯¸å¦‚size()ï¼ŒisEmpty()ç­‰æ–¹æ³•è·å–â€é”®ï¼šå€¼â€å¯¹çš„ä¸ªæ•°å’Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡å®ç°Mapæ¥å£å¹¶è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•å®Œæˆçš„ã€‚</li></ul></li><li>JSONArray ä»£è¡¨ json å¯¹è±¡æ•°ç»„<ul><li>å†…éƒ¨æ˜¯æœ‰Listæ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ã€‚</li></ul></li><li>JSONä»£è¡¨ JSONObjectå’ŒJSONArrayçš„è½¬åŒ–<ul><li>JSONç±»æºç åˆ†æä¸ä½¿ç”¨</li><li>ä»”ç»†è§‚å¯Ÿè¿™äº›æ–¹æ³•ï¼Œä¸»è¦æ˜¯å®ç°jsonå¯¹è±¡ï¼Œjsonå¯¹è±¡æ•°ç»„ï¼Œjavabeanå¯¹è±¡ï¼Œjsonå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸äº’è½¬åŒ–ã€‚</li></ul></li></ol><p><strong>ä»£ç æµ‹è¯•ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªFastJsonDemo ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j4&quot;)</span></span><br><span class="line">    <span class="comment">//@ResponseBody//ä»–å°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json4</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;ç§¦ç–†1å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">2</span>, <span class="string">&quot;ç§¦ç–†2å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">3</span>, <span class="string">&quot;ç§¦ç–†3å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>, <span class="string">&quot;ç§¦ç–†4å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">5</span>, <span class="string">&quot;ç§¦ç–†5å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">        list.add(user1);</span><br><span class="line">        list.add(user2);</span><br><span class="line">        list.add(user3);</span><br><span class="line">        list.add(user4);</span><br><span class="line">        list.add(user5);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦ä¸²*******&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> JSON.toJSONString(list);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.toJSONString(list)==&gt;&quot;</span>+str1);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> JSON.toJSONString(user1);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.toJSONString(user1)==&gt;&quot;</span>+str2);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******&quot;</span>);</span><br><span class="line">        User jp_user1=JSON.parseObject(str2,User.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.parseObject(str2,User.class)==&gt;&quot;</span>+jp_user1);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡ ******&quot;</span>);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> (JSONObject) JSON.toJSON(user2);</span><br><span class="line">        System.out.println(<span class="string">&quot;(JSONObject) JSON.toJSON(user2)==&gt;&quot;</span>+jsonObject1.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡ ******&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">to_java_user</span> <span class="operator">=</span> JSON.toJavaObject(jsonObject1, User.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.toJavaObject(jsonObject1, User.class)==&gt;&quot;</span>+to_java_user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(list);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å·¥å…·ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ä½¿ç”¨å°±å¥½äº†ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™åœ¨æ ¹æ®å…·ä½“çš„ä¸šåŠ¡å»æ‰¾å¯¹åº”çš„å®ç°ã€‚å’Œä»¥å‰çš„commons-ioé‚£ç§å·¥å…·åŒ…ä¸€æ ·ï¼Œæ‹¿æ¥ç”¨å°±å¥½äº†ï¼</p><h2 id="Ajaxç ”ç©¶"><a href="#Ajaxç ”ç©¶" class="headerlink" title="Ajaxç ”ç©¶"></a>Ajaxç ”ç©¶</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><ul><li><strong>AJAX &#x3D; Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚</strong></li><li>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</li><li><strong>Ajax ä¸æ˜¯ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºæ›´å¥½æ›´å¿«ä»¥åŠäº¤äº’æ€§æ›´å¼ºçš„Webåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚</strong></li><li>åœ¨ 2005 å¹´ï¼ŒGoogle é€šè¿‡å…¶ Google Suggest ä½¿ AJAX å˜å¾—æµè¡Œèµ·æ¥ã€‚Google Suggestèƒ½å¤Ÿè‡ªåŠ¨å¸®ä½ å®Œæˆæœç´¢å•è¯ã€‚</li><li>Google Suggest ä½¿ç”¨ AJAX åˆ›é€ å‡ºåŠ¨æ€æ€§æå¼ºçš„ web ç•Œé¢ï¼šå½“æ‚¨åœ¨è°·æ­Œçš„æœç´¢æ¡†è¾“å…¥å…³é”®å­—æ—¶ï¼ŒJavaScript ä¼šæŠŠè¿™äº›å­—ç¬¦å‘é€åˆ°æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæœç´¢å»ºè®®çš„åˆ—è¡¨ã€‚</li><li>å°±å’Œå›½å†…ç™¾åº¦çš„æœç´¢æ¡†ä¸€æ ·!</li><li>ä¼ ç»Ÿçš„ç½‘é¡µ(å³ä¸ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µ)ï¼Œæƒ³è¦æ›´æ–°å†…å®¹æˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œéƒ½éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µã€‚</li><li>ä½¿ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µï¼Œé€šè¿‡åœ¨åå°æœåŠ¡å™¨è¿›è¡Œå°‘é‡çš„æ•°æ®äº¤æ¢ï¼Œå°±å¯ä»¥å®ç°å¼‚æ­¥å±€éƒ¨æ›´æ–°ã€‚</li><li>ä½¿ç”¨Ajaxï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºæ¥è¿‘æœ¬åœ°æ¡Œé¢åº”ç”¨çš„ç›´æ¥ã€é«˜å¯ç”¨ã€æ›´ä¸°å¯Œã€æ›´åŠ¨æ€çš„Webç”¨æˆ·ç•Œé¢ã€‚</li></ul><h3 id="ä¼ªé€ Ajax"><a href="#ä¼ªé€ Ajax" class="headerlink" title="ä¼ªé€ Ajax"></a>ä¼ªé€ Ajax</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç«¯çš„ä¸€ä¸ªæ ‡ç­¾æ¥ä¼ªé€ ä¸€ä¸ªajaxçš„æ ·å­ã€‚iframeæ ‡ç­¾</p><ol><li><p>æ–°å»ºä¸€ä¸ªmodule ï¼šsspringmvc-06-ajax ï¼Œ å¯¼å…¥webæ”¯æŒï¼</p></li><li><p>ç¼–å†™ä¸€ä¸ª ajax-frame.html ä½¿ç”¨ iframe æµ‹è¯•ï¼Œæ„Ÿå—ä¸‹æ•ˆæœ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>kuangshen<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;currentTime&#x27;</span>).<span class="property">innerText</span> = myDate.<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span> <span class="title function_">LoadPage</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> targetUrl =  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;url&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(targetUrl);</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;iframePosition&quot;</span>).<span class="property">src</span> = targetUrl;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¯·è¾“å…¥è¦åŠ è½½çš„åœ°å€ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;currentTime&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;url&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;https://www.baidu.com/&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;LoadPage()&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>åŠ è½½é¡µé¢ä½ç½®ï¼š<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframePosition&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height: 500px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨IDEAå¼€æµè§ˆå™¨æµ‹è¯•ä¸€ä¸‹ï¼</p></li></ol><p><strong>åˆ©ç”¨AJAXå¯ä»¥åšï¼š</strong></p><ul><li>æ³¨å†Œæ—¶ï¼Œè¾“å…¥ç”¨æˆ·åè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</li><li>ç™»é™†æ—¶ï¼Œæç¤ºç”¨æˆ·åå¯†ç é”™è¯¯</li><li>åˆ é™¤æ•°æ®è¡Œæ—¶ï¼Œå°†è¡ŒIDå‘é€åˆ°åå°ï¼Œåå°åœ¨æ•°æ®åº“ä¸­åˆ é™¤ï¼Œæ•°æ®åº“åˆ é™¤æˆåŠŸåï¼Œåœ¨é¡µé¢DOMä¸­å°†æ•°æ®è¡Œä¹Ÿåˆ é™¤ã€‚</li><li>â€¦ç­‰ç­‰</li></ul><h3 id="jQuery-ajax"><a href="#jQuery-ajax" class="headerlink" title="jQuery.ajax"></a>jQuery.ajax</h3><ul><li>çº¯JSåŸç”Ÿå®ç°Ajaxæˆ‘ä»¬ä¸å»è®²è§£è¿™é‡Œï¼Œç›´æ¥ä½¿ç”¨jqueryæä¾›çš„ï¼Œæ–¹ä¾¿å­¦ä¹ å’Œä½¿ç”¨ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»äº†è§£ä¸‹JSåŸç”ŸXMLHttpRequest ï¼</li><li>Ajaxçš„æ ¸å¿ƒæ˜¯XMLHttpRequestå¯¹è±¡(XHR)ã€‚XHRä¸ºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚å’Œè§£ææœåŠ¡å™¨å“åº”æä¾›äº†æ¥å£ã€‚èƒ½å¤Ÿä»¥å¼‚æ­¥æ–¹å¼ä»æœåŠ¡å™¨è·å–æ–°æ•°æ®ã€‚</li><li>jQuery æä¾›å¤šä¸ªä¸ AJAX æœ‰å…³çš„æ–¹æ³•ã€‚</li><li>é€šè¿‡ jQuery AJAX æ–¹æ³•ï¼Œæ‚¨èƒ½å¤Ÿä½¿ç”¨ HTTP Get å’Œ HTTP Post ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šè¯·æ±‚æ–‡æœ¬ã€HTMLã€XML æˆ– JSON â€“ åŒæ—¶æ‚¨èƒ½å¤ŸæŠŠè¿™äº›å¤–éƒ¨æ•°æ®ç›´æ¥è½½å…¥ç½‘é¡µçš„è¢«é€‰å…ƒç´ ä¸­ã€‚</li><li>jQuery ä¸æ˜¯ç”Ÿäº§è€…ï¼Œè€Œæ˜¯å¤§è‡ªç„¶æ¬è¿å·¥ã€‚</li><li>jQuery Ajaxæœ¬è´¨å°±æ˜¯ XMLHttpRequestï¼Œå¯¹ä»–è¿›è¡Œäº†å°è£…ï¼Œæ–¹ä¾¿è°ƒç”¨ï¼</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">jQuery.<span class="title function_">ajax</span>(...)</span><br><span class="line">      éƒ¨åˆ†å‚æ•°ï¼š</span><br><span class="line">            urlï¼šè¯·æ±‚åœ°å€</span><br><span class="line">            typeï¼šè¯·æ±‚æ–¹å¼ï¼Œ<span class="variable constant_">GET</span>ã€<span class="variable constant_">POST</span>ï¼ˆ<span class="number">1.9</span><span class="number">.0</span>ä¹‹åç”¨methodï¼‰</span><br><span class="line">        headersï¼šè¯·æ±‚å¤´</span><br><span class="line">            dataï¼šè¦å‘é€çš„æ•°æ®</span><br><span class="line">    contentTypeï¼šå³å°†å‘é€ä¿¡æ¯è‡³æœåŠ¡å™¨çš„å†…å®¹ç¼–ç ç±»å‹(é»˜è®¤: <span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>)</span><br><span class="line">          <span class="keyword">async</span>ï¼šæ˜¯å¦å¼‚æ­¥</span><br><span class="line">        timeoutï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line">      beforeSendï¼šå‘é€è¯·æ±‚å‰æ‰§è¡Œçš„å‡½æ•°(å…¨å±€)</span><br><span class="line">        completeï¼šå®Œæˆä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">        successï¼šæˆåŠŸä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">          errorï¼šå¤±è´¥ä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">        acceptsï¼šé€šè¿‡è¯·æ±‚å¤´å‘é€ç»™æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨å½“å‰å®¢æˆ·ç«¯å¯æ¥å—çš„æ•°æ®ç±»å‹</span><br><span class="line">        dataTypeï¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®è½¬æ¢æˆæŒ‡å®šç±»å‹</span><br><span class="line">          <span class="string">&quot;xml&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆxmlæ ¼å¼</span><br><span class="line">          <span class="string">&quot;text&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼</span><br><span class="line">          <span class="string">&quot;html&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼ï¼Œåœ¨æ’å…¥<span class="variable constant_">DOM</span>ä¸­æ—¶ï¼Œå¦‚æœåŒ…å«<span class="title class_">JavaScript</span>æ ‡ç­¾ï¼Œåˆ™ä¼šå°è¯•å»æ‰§è¡Œã€‚</span><br><span class="line">        <span class="string">&quot;script&quot;</span>: å°è¯•å°†è¿”å›å€¼å½“ä½œ<span class="title class_">JavaScript</span>å»æ‰§è¡Œï¼Œç„¶åå†å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼</span><br><span class="line">          <span class="string">&quot;json&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆç›¸åº”çš„<span class="title class_">JavaScript</span>å¯¹è±¡</span><br><span class="line">        <span class="string">&quot;jsonp&quot;</span>: <span class="title class_">JSON</span>P æ ¼å¼ä½¿ç”¨ <span class="title class_">JSON</span>P å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ <span class="string">&quot;myurl?callback=?&quot;</span> jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°</span><br></pre></td></tr></table></figure><p><strong>æˆ‘ä»¬æ¥ä¸ªç®€å•çš„æµ‹è¯•ï¼Œä½¿ç”¨æœ€åŸå§‹çš„HttpServletResponseå¤„ç† , .æœ€ç®€å• , æœ€é€šç”¨</strong></p><ol><li><p>é…ç½®web.xml å’Œ springmvcçš„é…ç½®æ–‡ä»¶ã€è®°å¾—é™æ€èµ„æºè¿‡æ»¤å’Œæ³¨è§£é©±åŠ¨é…ç½®ä¸Šã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.kuang.controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é™æ€èµ„æºè¿‡æ»¤--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨è§£é©±åŠ¨é…--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªAjaxController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/a1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ajax1</span><span class="params">(String name , HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name))&#123;</span><br><span class="line">           response.getWriter().print(<span class="string">&quot;true&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           response.getWriter().print(<span class="string">&quot;false&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¯¼å…¥jquery ï¼Œ å¯ä»¥ä½¿ç”¨åœ¨çº¿çš„CDN ï¼Œ ä¹Ÿå¯ä»¥ä¸‹è½½å¯¼å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™index.jspæµ‹è¯•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  &lt;%--<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>--%&gt;</span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;name&#x27;</span>:$(<span class="string">&quot;#txtName&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data,status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="title function_">alert</span>(data);</span></span><br><span class="line"><span class="language-javascript">                   <span class="title function_">alert</span>(status);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;%--onblurï¼šå¤±å»ç„¦ç‚¹è§¦å‘äº‹ä»¶--%&gt;</span><br><span class="line">ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtName&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a1()&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨tomcatæµ‹è¯•ï¼æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œå½“æˆ‘ä»¬é¼ æ ‡ç¦»å¼€è¾“å…¥æ¡†çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°å‘å‡ºäº†ä¸€ä¸ªajaxçš„è¯·æ±‚ï¼æ˜¯åå°è¿”å›ç»™æˆ‘ä»¬çš„ç»“æœï¼æµ‹è¯•æˆåŠŸï¼</p></li></ol><h3 id="Springmvcå®ç°"><a href="#Springmvcå®ç°" class="headerlink" title="Springmvcå®ç°"></a><strong>Springmvcå®ç°</strong></h3><ol><li><p>å®ä½“ç±»userï¼ˆä½¿ç”¨äº†lombokæ’ä»¶ï¼Œå¯ä»¥è‡ªå·±å†™å®ç°ç±»æ–¹æ³•ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">   <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬æ¥è·å–ä¸€ä¸ªé›†åˆå¯¹è±¡ï¼Œå±•ç¤ºåˆ°å‰ç«¯é¡µé¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">ajax2</span><span class="params">()</span>&#123;</span><br><span class="line">   List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†1å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†2å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†3å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   <span class="keyword">return</span> list; <span class="comment">//ç”±äº@RestControlleræ³¨è§£ï¼Œå°†listè½¬æˆjsonæ ¼å¼è¿”å›</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å‰ç«¯é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/static/js/jquery-3.4.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// console.log(&#x27;ç‚¹å‡»äº‹ä»¶æˆåŠŸ&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// $.post(url,param,[å¯ä»¥çœç•¥],success)</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">post</span>(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a2&quot;</span>,<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>].<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> html =  <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        html += <span class="string">`&lt;tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].name&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].age&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].sex&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                &lt;/tr&gt;`</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">html</span>(html)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(html)</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŠ è½½æ•°æ®&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        &lt;%--æ•°æ®ï¼šåå°--%&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p><strong>æˆåŠŸå®ç°äº†æ•°æ®å›æ˜¾ï¼å¯ä»¥ä½“ä¼šä¸€ä¸‹Ajaxçš„å¥½å¤„ï¼</strong></p><h3 id="æ³¨å†Œæç¤ºæ•ˆæœ"><a href="#æ³¨å†Œæç¤ºæ•ˆæœ" class="headerlink" title="æ³¨å†Œæç¤ºæ•ˆæœ"></a>æ³¨å†Œæç¤ºæ•ˆæœ</h3><ol><li><p>æˆ‘ä»¬å†™ä¸€ä¸ªController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">ajax3</span><span class="params">(String name,String pwd)</span>&#123;</span><br><span class="line">   <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">   <span class="comment">//æ¨¡æ‹Ÿæ•°æ®åº“ä¸­å­˜åœ¨æ•°æ®</span></span><br><span class="line">   <span class="keyword">if</span> (name!=<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name))&#123;</span><br><span class="line">           msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           msg = <span class="string">&quot;ç”¨æˆ·åè¾“å…¥é”™è¯¯&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">if</span> (pwd!=<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;123456&quot;</span>.equals(pwd))&#123;</span><br><span class="line">           msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           msg = <span class="string">&quot;å¯†ç è¾“å…¥æœ‰è¯¯&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">return</span> msg; <span class="comment">//ç”±äº@RestControlleræ³¨è§£ï¼Œå°†msgè½¬æˆjsonæ ¼å¼è¿”å›</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å‰ç«¯é¡µé¢ login.jsp</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;name&#x27;</span>:$(<span class="string">&quot;#name&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">if</span> (data.<span class="title function_">toString</span>()==<span class="string">&#x27;OK&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;green&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                   $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">html</span>(data);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a2</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;pwd&#x27;</span>:$(<span class="string">&quot;#pwd&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">if</span> (data.<span class="title function_">toString</span>()==<span class="string">&#x27;OK&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;green&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                   $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">html</span>(data);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a1()&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  å¯†ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a2()&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;pwdInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è®°å¾—å¤„ç†jsonä¹±ç é—®é¢˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--JSONä¹±ç é—®é¢˜é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼ŒåŠ¨æ€è¯·æ±‚å“åº”ï¼Œå±€éƒ¨åˆ·æ–°ï¼Œå°±æ˜¯å¦‚æ­¤ï¼</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322368.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ol><h3 id="è·å–baiduæ¥å£Demo"><a href="#è·å–baiduæ¥å£Demo" class="headerlink" title="è·å–baiduæ¥å£Demo"></a>è·å–baiduæ¥å£Demo</h3><ol><li><p>JSONP.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSONPç™¾åº¦æœç´¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#q</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">width</span>: <span class="number">520px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin-top</span>: -<span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">background-color</span>: <span class="number">#f60</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">   </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 2.æ­¥éª¤äºŒ</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// å®šä¹‰demoå‡½æ•° (åˆ†ææ¥å£ã€æ•°æ®)</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> <span class="title class_">Ul</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> html = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// å¦‚æœæœç´¢æ•°æ®å­˜åœ¨ æŠŠå†…å®¹æ·»åŠ è¿›å»</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">if</span> (data.<span class="property">s</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// éšè—æ‰çš„ulæ˜¾ç¤ºå‡ºæ¥</span></span></span><br><span class="line"><span class="language-javascript">               <span class="title class_">Ul</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// æœç´¢åˆ°çš„æ•°æ®å¾ªç¯è¿½åŠ åˆ°lié‡Œ</span></span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;data.<span class="property">s</span>.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                   html += <span class="string">&#x27;&lt;li&gt;&#x27;</span>+data.<span class="property">s</span>[i]+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// å¾ªç¯çš„liå†™å…¥ul</span></span></span><br><span class="line"><span class="language-javascript">               <span class="title class_">Ul</span>.<span class="property">innerHTML</span> = html;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 1.æ­¥éª¤ä¸€</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// è·å–è¾“å…¥æ¡†å’Œul</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> Q = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;q&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> <span class="title class_">Ul</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// äº‹ä»¶é¼ æ ‡æŠ¬èµ·æ—¶å€™</span></span></span><br><span class="line"><span class="language-javascript">           Q.<span class="property">onkeyup</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// å¦‚æœè¾“å…¥æ¡†ä¸ç­‰äºç©º</span></span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span> != <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†JSONPzé‡ç‚¹â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// åˆ›å»ºæ ‡ç­¾</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//ç»™å®šè¦è·¨åŸŸçš„åœ°å€ èµ‹å€¼ç»™src</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//è¿™é‡Œæ˜¯è¦è¯·æ±‚çš„è·¨åŸŸçš„åœ°å€ æˆ‘å†™çš„æ˜¯ç™¾åº¦æœç´¢çš„è·¨åŸŸåœ°å€</span></span></span><br><span class="line"><span class="language-javascript">                   script.<span class="property">src</span> = <span class="string">&#x27;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">value</span>+<span class="string">&#x27;&amp;cb=demo&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// å°†ç»„åˆå¥½çš„å¸¦srcçš„scriptæ ‡ç­¾è¿½åŠ åˆ°bodyé‡Œ</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;q&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322294.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ol><h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><ul><li>SpringMVCçš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äºServletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨Filter,ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚</li><li>å¼€å‘è€…å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</li></ul><p><strong>è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«ï¼š</strong>æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ã€‚</p><p><strong>è¿‡æ»¤å™¨</strong></p><ul><li>servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•javawebå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨</li><li>åœ¨url-patternä¸­é…ç½®äº†&#x2F;*ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºè¿›è¡Œæ‹¦æˆª</li></ul><p><strong>æ‹¦æˆªå™¨</strong></p><ul><li>æ‹¦æˆªå™¨æ˜¯SpringMVCæ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº†SpringMVCæ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ä½¿ç”¨</li><li>æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œ å¦‚æœè®¿é—®çš„æ˜¯jsp&#x2F;html&#x2F;css&#x2F;image&#x2F;jsæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</li></ul><h3 id="è‡ªå®šä¹‰æ‹¦æˆªå™¨"><a href="#è‡ªå®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="è‡ªå®šä¹‰æ‹¦æˆªå™¨"></a>è‡ªå®šä¹‰æ‹¦æˆªå™¨</h3><ol><li><p>æ–°å»ºä¸€ä¸ªMoudule ï¼Œ springmvc-Interceptor ï¼Œ æ·»åŠ webæ”¯æŒ</p></li><li><p>é…ç½®web.xml å’Œ springmvc-servlet.xml æ–‡ä»¶</p></li><li><p>ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨ï¼ˆå¿…é¡»å®ç° HandlerInterceptor æ¥å£ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nuc.ss.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">//return true; æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ”¾è¡Œ</span></span><br><span class="line">    <span class="comment">//return false; ä¸æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========å¤„ç†å‰===========&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========å¤„ç†å===========&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========æ¸…ç†===========&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ‹¦æˆªå™¨é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åŒ…æ‹¬è¿™ä¸ªè¯·æ±‚ä¸‹é¢çš„æ‰€æœ‰è¯·æ±‚--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;nuc.ss.config.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªControllerï¼Œæ¥æ”¶è¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nuc.ss.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestController.test&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨tomcat æµ‹è¯•ä¸€ä¸‹ï¼(<a href="http://localhost:8888/t1">http://localhost:8888/t1</a>)</p></li></ol><h3 id="éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•-è®¤è¯ç”¨æˆ·"><a href="#éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•-è®¤è¯ç”¨æˆ·" class="headerlink" title="éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• (è®¤è¯ç”¨æˆ·)"></a>éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• (è®¤è¯ç”¨æˆ·)</h3><p><strong>å®ç°æ€è·¯</strong></p><ol><li>æœ‰ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œéœ€è¦å†™ä¸€ä¸ªcontrollerè®¿é—®é¡µé¢ã€‚</li><li>ç™»é™†é¡µé¢æœ‰ä¸€æäº¤è¡¨å•çš„åŠ¨ä½œã€‚éœ€è¦åœ¨controllerä¸­å¤„ç†ã€‚åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ­£ç¡®ï¼Œå‘sessionä¸­å†™å…¥ç”¨æˆ·ä¿¡æ¯ã€‚<em>è¿”å›ç™»é™†æˆåŠŸã€‚</em></li><li>æ‹¦æˆªç”¨æˆ·è¯·æ±‚ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†ã€‚å¦‚æœç”¨æˆ·å·²ç»ç™»é™†ã€‚æ”¾è¡Œï¼Œ å¦‚æœç”¨æˆ·æœªç™»é™†ï¼Œè·³è½¬åˆ°ç™»é™†é¡µé¢</li></ol><p><strong>æµ‹è¯•ï¼š</strong></p><ol><li><p>ç¼–å†™ä¸€ä¸ªç™»é™†é¡µé¢ login.jsp</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&lt;%--åœ¨web-infä¸‹é¢çš„æ‰€æœ‰é¡µé¢æˆ–è€…èµ„æºï¼Œåªèƒ½é€šè¿‡controlleræˆ–è€…Servletè¿›è¡Œè®¿é—®--%&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªControllerå¤„ç†è¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/main&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/goLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(HttpSession session, String username, String password, Model model)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŠŠç”¨æˆ·çš„ä¿¡æ¯å­˜åœ¨sessionä¸­</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;userLoginInfo&quot;</span>,username);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/goOut&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">goOut</span><span class="params">(HttpSession sessionl)</span> &#123;</span><br><span class="line">        sessionl.removeAttribute(<span class="string">&quot;userLoginInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸€ä¸ªç™»é™†æˆåŠŸçš„é¡µé¢ main.jsp</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>$&#123;password&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>$&#123;username&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/goOut&quot;</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ index é¡µé¢ä¸Šæµ‹è¯•è·³è½¬ï¼å¯åŠ¨Tomcat æµ‹è¯•ï¼Œæœªç™»å½•ä¹Ÿå¯ä»¥è¿›å…¥ä¸»é¡µï¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/goLogin&quot;</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/main&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ç”¨æˆ·ç™»å½•æ‹¦æˆªå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nuc.ss.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="comment">//æ”¾è¡Œ:åˆ¤æ–­ä»€ä¹ˆæƒ…å†µä¸‹ç™»å½•</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç™»å½•é¡µé¢ä¹Ÿä¼šæ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (request.getRequestURI().contains(<span class="string">&quot;goLogin&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (request.getRequestURI().contains(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (session.getAttribute(<span class="string">&quot;userLoginInfo&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­ä»€ä¹ˆæƒ…å†µä¸‹æ²¡æœ‰ç™»å½•</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/login.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åœ¨Springmvcçš„é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ‹¦æˆªå™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å…³äºæ‹¦æˆªå™¨çš„é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;loginInterceptor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.interceptor.LoginInterceptor&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡é‡å¯Tomcatæµ‹è¯•ï¼</p></li></ol><p><strong>OKï¼Œæµ‹è¯•ç™»å½•æ‹¦æˆªåŠŸèƒ½æ— è¯¯.</strong></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172322443.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h2><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><ul><li>æ–‡ä»¶ä¸Šä¼ æ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§çš„åŠŸèƒ½ä¹‹ä¸€ ,springMVC å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€‚</li><li>SpringMVCä¸Šä¸‹æ–‡ä¸­é»˜è®¤æ²¡æœ‰è£…é…MultipartResolverï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å…¶ä¸èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ å·¥ä½œã€‚å¦‚æœæƒ³ä½¿ç”¨Springçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®MultipartResolverã€‚</li><li>å‰ç«¯è¡¨å•è¦æ±‚ï¼šä¸ºäº†èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œå¿…é¡»å°†è¡¨å•çš„methodè®¾ç½®ä¸ºPOSTï¼Œå¹¶å°†enctypeè®¾ç½®ä¸ºmultipart&#x2F;form-dataã€‚åªæœ‰åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼›</li></ul><p><strong>å¯¹è¡¨å•ä¸­çš„ enctype å±æ€§åšä¸ªè¯¦ç»†çš„è¯´æ˜ï¼š</strong></p><ul><li>application&#x2F;x-www&#x3D;form-urlencodedï¼šé»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•åŸŸä¸­çš„ value å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆ URL ç¼–ç æ–¹å¼ã€‚</li><li>multipart&#x2F;form-dataï¼šè¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šæŠŠæ–‡ä»¶åŸŸæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä¹Ÿå°è£…åˆ°è¯·æ±‚å‚æ•°ä¸­ï¼Œä¸ä¼šå¯¹å­—ç¬¦ç¼–ç ã€‚</li><li>text&#x2F;plainï¼šé™¤äº†æŠŠç©ºæ ¼è½¬æ¢ä¸º â€œ+â€ å·å¤–ï¼Œå…¶ä»–å­—ç¬¦éƒ½ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨ç›´æ¥é€šè¿‡è¡¨å•å‘é€é‚®ä»¶ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦è®¾ç½®äº†enctypeä¸ºmultipart&#x2F;form-dataï¼Œæµè§ˆå™¨å³ä¼šé‡‡ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè€Œå¯¹äºæ–‡ä»¶ä¸Šä¼ çš„å¤„ç†åˆ™æ¶‰åŠåœ¨æœåŠ¡å™¨ç«¯è§£æåŸå§‹çš„HTTPå“åº”ã€‚åœ¨2003å¹´ï¼ŒApache Software Foundationå‘å¸ƒäº†å¼€æºçš„Commons FileUploadç»„ä»¶ï¼Œå…¶å¾ˆå¿«æˆä¸ºServlet&#x2F;JSPç¨‹åºå‘˜ä¸Šä¼ æ–‡ä»¶çš„æœ€ä½³é€‰æ‹©ã€‚</p><ul><li>Servlet3.0è§„èŒƒå·²ç»æä¾›æ–¹æ³•æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œä½†è¿™ç§ä¸Šä¼ éœ€è¦åœ¨Servletä¸­å®Œæˆã€‚</li><li>è€ŒSpring MVCåˆ™æä¾›äº†æ›´ç®€å•çš„å°è£…ã€‚</li><li>Spring MVCä¸ºæ–‡ä»¶ä¸Šä¼ æä¾›äº†ç›´æ¥çš„æ”¯æŒï¼Œè¿™ç§æ”¯æŒæ˜¯ç”¨å³æ’å³ç”¨çš„MultipartResolverå®ç°çš„ã€‚</li><li>Spring MVCä½¿ç”¨Apache Commons FileUploadæŠ€æœ¯å®ç°äº†ä¸€ä¸ªMultipartResolverå®ç°ç±»ï¼š</li><li>CommonsMultipartResolverã€‚å› æ­¤ï¼ŒSpringMVCçš„æ–‡ä»¶ä¸Šä¼ è¿˜éœ€è¦ä¾èµ–Apache Commons FileUploadçš„ç»„ä»¶ã€‚</li></ul><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><ol><li><p>å¯¼å…¥æ–‡ä»¶ä¸Šä¼ çš„jaråŒ…ï¼Œcommons-fileupload ï¼Œ Mavenä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥ä»–çš„ä¾èµ–åŒ… commons-ioåŒ…ï¼›</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--servlet-apiå¯¼å…¥é«˜ç‰ˆæœ¬çš„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®beanï¼šmultipartResolver</p><p>ã€<strong>æ³¨æ„ï¼ï¼ï¼è¿™ä¸ªbenaçš„idå¿…é¡»ä¸ºï¼šmultipartResolver ï¼Œ å¦åˆ™ä¸Šä¼ æ–‡ä»¶ä¼šæŠ¥400çš„é”™è¯¯ï¼åœ¨è¿™é‡Œæ ½è¿‡å‘,æ•™è®­ï¼</strong>ã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10485760&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>CommonsMultipartFile çš„ å¸¸ç”¨æ–¹æ³•ï¼š</p><ul><li><strong>String getOriginalFilename()ï¼šè·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå</strong></li><li><strong>InputStream getInputStream()ï¼šè·å–æ–‡ä»¶æµ</strong></li><li><strong>void transferTo(File dest)ï¼šå°†ä¸Šä¼ æ–‡ä»¶ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•æ–‡ä»¶ä¸­</strong></li></ul><p>æˆ‘ä»¬å»å®é™…æµ‹è¯•ä¸€ä¸‹</p></li><li><p>ç¼–å†™å‰ç«¯é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;upload&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><strong>Controller</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> nuc.ss.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestParam(&quot;file&quot;) å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFile å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">fileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file , HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶å : file.getOriginalFilename();</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uploadFileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.equals(uploadFileName))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶å : &quot;</span>+uploadFileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">        <span class="comment">//å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="keyword">if</span> (!realPath.exists())&#123;</span><br><span class="line">            realPath.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&quot;</span>+realPath);</span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> file.getInputStream(); <span class="comment">//æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(realPath,uploadFileName)); <span class="comment">//æ–‡ä»¶è¾“å‡ºæµ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯»å–å†™å‡º</span></span><br><span class="line">        <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len=is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            os.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        os.close();</span><br><span class="line">        is.close();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ä¸Šä¼ æ–‡ä»¶ï¼ŒOKï¼</p></li></ol><p><strong>é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</strong></p><ol><li><p>ç¼–å†™Controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/upload2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String  <span class="title function_">fileUpload2</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">   <span class="type">File</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">   <span class="keyword">if</span> (!realPath.exists())&#123;</span><br><span class="line">       realPath.mkdir();</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//ä¸Šä¼ æ–‡ä»¶åœ°å€</span></span><br><span class="line">   System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&quot;</span>+realPath);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span></span><br><span class="line">   file.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(realPath +<span class="string">&quot;/&quot;</span>+ file.getOriginalFilename()));</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‰ç«¯è¡¨å•æäº¤åœ°å€ä¿®æ”¹</p></li><li><p>è®¿é—®æäº¤æµ‹è¯•ï¼ŒOKï¼</p></li></ol><h3 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h3><p><strong>æ–‡ä»¶ä¸‹è½½æ­¥éª¤ï¼š</strong></p><ol><li>è®¾ç½® response å“åº”å¤´</li><li>è¯»å–æ–‡ä»¶ â€“ InputStream</li><li>å†™å‡ºæ–‡ä»¶ â€“ OutputStream</li><li>æ‰§è¡Œæ“ä½œ</li><li>å…³é—­æµ ï¼ˆå…ˆå¼€åå…³ï¼‰</li></ol><p><strong>ä»£ç å®ç°ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">downloads</span><span class="params">(HttpServletResponse response ,HttpServletRequest request)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">   <span class="comment">//è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line">   <span class="type">String</span>  <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">   <span class="type">String</span>  <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;åŸºç¡€è¯­æ³•.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//1ã€è®¾ç½®response å“åº”å¤´</span></span><br><span class="line">   response.reset(); <span class="comment">//è®¾ç½®é¡µé¢ä¸ç¼“å­˜,æ¸…ç©ºbuffer</span></span><br><span class="line">   response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>); <span class="comment">//å­—ç¬¦ç¼–ç </span></span><br><span class="line">   response.setContentType(<span class="string">&quot;multipart/form-data&quot;</span>); <span class="comment">//äºŒè¿›åˆ¶ä¼ è¾“æ•°æ®</span></span><br><span class="line">   <span class="comment">//è®¾ç½®å“åº”å¤´</span></span><br><span class="line">   response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,</span><br><span class="line">           <span class="string">&quot;attachment;fileName=&quot;</span>+URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path,fileName);</span><br><span class="line">   <span class="comment">//2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span></span><br><span class="line">   InputStream input=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">   <span class="comment">//3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span></span><br><span class="line">   <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line"></span><br><span class="line">   <span class="type">byte</span>[] buff =<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">   <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">//4ã€æ‰§è¡Œ å†™å‡ºæ“ä½œ</span></span><br><span class="line">   <span class="keyword">while</span>((index= input.read(buff))!= -<span class="number">1</span>)&#123;</span><br><span class="line">       out.write(buff, <span class="number">0</span>, index);</span><br><span class="line">       out.flush();</span><br><span class="line">  &#125;</span><br><span class="line">   out.close();</span><br><span class="line">   input.close();</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰ç«¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/download&quot;</span>&gt;</span>ç‚¹å‡»ä¸‹è½½<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼Œæ–‡ä»¶ä¸‹è½½OK</p><p><img src="/data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring</title>
      <link href="/2022/06/06/spring/"/>
      <url>/2022/06/06/spring/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç å­˜æ”¾åœ¨  GitHubä»“åº“ï¼š <a href="https://github.com/wuwei1636/java">https://github.com/wuwei1636/java</a></p><h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å‚è€ƒ<a href="https://mybatis.net.cn/index.html">å®˜æ–¹æ–‡æ¡£</a></p><ul><li>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶</strong></li><li>å®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚</li><li>MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚</li><li>MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li><li>ç°åœ¨è¿ç§»åˆ°GitHubä¸­ã€‚</li></ul><h3 id="å¦‚ä½•è·å–Mybatis"><a href="#å¦‚ä½•è·å–Mybatis" class="headerlink" title="å¦‚ä½•è·å–Mybatis"></a>å¦‚ä½•è·å–Mybatis</h3><ul><li>mavenä»“åº“</li><li>GitHubä»“åº“</li><li><a href="https://mybatis.net.cn/index.html">å®˜æ–¹æ–‡æ¡£</a></li></ul><h3 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h3><p>æ•°æ®æŒä¹…åŒ–</p><ul><li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œé¡ºåŠ¿çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹</li><li>å†…å­˜ï¼šæ–­ç”µå³å¤±</li><li>æ•°æ®åº“ï¼ˆjdbcï¼‰ï¼šioæ–‡ä»¶æŒä¹…åŒ–</li></ul><h3 id="æŒä¹…å±‚"><a href="#æŒä¹…å±‚" class="headerlink" title="æŒä¹…å±‚"></a>æŒä¹…å±‚</h3><p>Daoå±‚ï¼ŒServiceå±‚ï¼ŒControllerå±‚</p><ul><li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li><li>å±‚ç•Œé™ååˆ†æ˜æ˜¾</li></ul><h2 id="ç¬¬ä¸€ä¸ªMybatisç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªMybatisç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªMybatisç¨‹åº"></a>ç¬¬ä¸€ä¸ªMybatisç¨‹åº</h2><p>æ€è·¯ï¼šæ­å»ºç¯å¢ƒ â€“&gt; å¯¼å…¥Mybatis â€“&gt; ç¼–å†™ä»£ç  â€“ &gt; æµ‹è¯•</p><h3 id="æ­å»ºæ•°æ®åº“ï¼ˆMySQLï¼‰"><a href="#æ­å»ºæ•°æ®åº“ï¼ˆMySQLï¼‰" class="headerlink" title="æ­å»ºæ•°æ®åº“ï¼ˆMySQLï¼‰"></a>æ­å»ºæ•°æ®åº“ï¼ˆMySQLï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis`;</span><br><span class="line"></span><br><span class="line">USE `mybatis`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">`id` <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">`name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`pwd` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> `<span class="keyword">user</span>`(`id`,`name`,`pwd`) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®</p><ol><li><p>æ–°å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®</p></li><li><p>åˆ é™¤srcç›®å½•</p></li><li><p>å¯¼å…¥mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatisé©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--junité©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>åˆ›å»ºä¸€ä¸ªæ¨¡å—</h3><ul><li>ç¼–å†™mybatisçš„æ ¸å¿ƒé…ç½®</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ ¸å¿ƒé…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/li/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™mybatisçš„å·¥å…·ç±»ï¼ˆmybatis-confing.xmlï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨mybatisç¬¬ä¸€æ­¥  è·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-confing.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">        sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment">//        SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="keyword">return</span> sqlSession;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h3><h4 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String name, String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPwd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPwd</span><span class="params">(String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="daoæ¥å£"><a href="#daoæ¥å£" class="headerlink" title="daoæ¥å£"></a>daoæ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¥å£å®ç°ç±»"><a href="#æ¥å£å®ç°ç±»" class="headerlink" title="æ¥å£å®ç°ç±»"></a>æ¥å£å®ç°ç±»</h4><p>ç”±åŸæ¥çš„UserDaoImplæ–‡ä»¶(java)è½¬åŒ–ä¸ºMapperé…ç½®æ–‡ä»¶(xml)</p><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202206061742303.png" alt="image-20220606174207840"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;!--ç»‘å®šä¸€ä¸ªDao/Mapperæ¥å£--&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.li.dao.UserDao&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--    æŸ¥è¯¢è¯­å¥--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getUserList&quot;</span> resultType=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ï¼ˆjunitï¼‰"><a href="#æµ‹è¯•ï¼ˆjunitï¼‰" class="headerlink" title="æµ‹è¯•ï¼ˆjunitï¼‰"></a>æµ‹è¯•ï¼ˆjunitï¼‰</h3><p><strong>æ³¨æ„ï¼šè¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmapper</strong></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172317681.png" alt="image-20220606175759210"></p><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.li.util.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ­¥ï¼š è·å¾—sqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€ï¼šgetMapper(æ¨èä½¿ç”¨)</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line">        List&lt;User&gt; userList = mapper.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼äºŒ</span></span><br><span class="line"><span class="comment">//        List&lt;User&gt; userList = sqlSession.selectList(&quot;com.li.dao.UserDao.getUserList&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(User user : userList)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p><ol><li>é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œ</li><li>ç»‘å®šæ¥å£é”™è¯¯</li><li>æ–¹æ³•åä¸å¯¹</li><li>è¿”å›ç±»å‹ä¸å¯¹</li><li>mavenèµ„æºè¿‡æ»¤é—®é¢˜</li></ol><h3 id="Mavenèµ„æºè¿‡æ»¤é—®é¢˜"><a href="#Mavenèµ„æºè¿‡æ»¤é—®é¢˜" class="headerlink" title="Mavenèµ„æºè¿‡æ»¤é—®é¢˜"></a>Mavenèµ„æºè¿‡æ»¤é—®é¢˜</h3><p>è§£å†³æ–¹æ³•ï¼šåœ¨pom.xmlæ·»åŠ buildé…ç½®resource</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜--&gt;</span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;resources&gt;</span><br><span class="line">            &lt;resource&gt;</span><br><span class="line">                &lt;directory&gt;src/main/java&lt;/directory&gt;</span><br><span class="line">                &lt;includes&gt;</span><br><span class="line">                    &lt;include&gt;**<span class="comment">/*.properties&lt;/include&gt;</span></span><br><span class="line"><span class="comment">                    &lt;include&gt;**/</span>*.xml&lt;/include&gt;</span><br><span class="line">                &lt;/includes&gt;</span><br><span class="line">                &lt;filtering&gt;<span class="literal">false</span>&lt;/filtering&gt;</span><br><span class="line">            &lt;/resource&gt;</span><br><span class="line">            &lt;resource&gt;</span><br><span class="line">                &lt;directory&gt;src/main/resources&lt;/directory&gt;</span><br><span class="line">                &lt;includes&gt;</span><br><span class="line">                    &lt;include&gt;**<span class="comment">/*.properties&lt;/include&gt;</span></span><br><span class="line"><span class="comment">                    &lt;include&gt;**/</span>*.xml&lt;/include&gt;</span><br><span class="line">                &lt;/includes&gt;</span><br><span class="line">                &lt;filtering&gt;<span class="literal">false</span>&lt;/filtering&gt;</span><br><span class="line">            &lt;/resource&gt;</span><br><span class="line">        &lt;/resources&gt;</span><br><span class="line">    &lt;/build&gt;</span><br></pre></td></tr></table></figure><h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><h3 id="namespce"><a href="#namespce" class="headerlink" title="namespce"></a>namespce</h3><p>namespaceä¸­çš„åŒ…åè¦å’ŒDao&#x2F;Mapperæ¥å£çš„åŒ…åä¸€è‡´</p><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥ï¼›</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">idï¼š å°±æ˜¯å¯¹åº”çš„<span class="keyword">namespace</span>ä¸­çš„æ–¹æ³•å</span><br><span class="line"><span class="symbol">resultType</span>ï¼š <span class="symbol">sql</span>è¯­å¥çš„è¿”å›å€¼</span><br><span class="line"><span class="symbol">parameterType</span>ï¼š <span class="symbol">c</span></span><br></pre></td></tr></table></figure><h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// insertä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><p>ç¼–å†™mapperä¸­çš„sqlè¯­å¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// id å¯¹åº”å‰é¢çš„æ¥å£ç±»çš„æ–¹æ³• parameterType æ˜¯è¾“å…¥çš„ç±»å‹ï¼Œç”±äºä¸‹ä¾‹ä½¿ç”¨çš„æ˜¯å®ä½“ç±»ï¼Œæ‰€ä»¥ç›´æ¥ç´¢å¼•åˆ° com.li.pojo.User </span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥ï¼Œæ‰€ä»¥ä¸‹é¢ä½¿ç”¨çš„æ˜¯#&#123;id&#125;,#&#123;name&#125;,$&#123;pwd&#125;--&gt;</span></span><br><span class="line">    insert into mybatis.user (id, name, pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¢åˆ æ”¹æŸ¥éœ€è¦ç¡®å®šäº‹åŠ¡</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> mapper.addUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>,<span class="string">&quot;å›°å›°&quot;</span>,<span class="string">&quot;123456&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>update å’Œ deleteçš„ä»£ç å’Œinsertçš„ä»£ç ç±»ä¼¼ï¼Œæ‰€ä»¥ç›´æ¥æ”¾æ‰€æœ‰çš„ä»£ç ã€‚</p><h3 id="CRUDæ‰€æœ‰ä»£ç "><a href="#CRUDæ‰€æœ‰ä»£ç " class="headerlink" title="CRUDæ‰€æœ‰ä»£ç "></a>CRUDæ‰€æœ‰ä»£ç </h3><h4 id="UserMapper-java-æ¥å£ç±»"><a href="#UserMapper-java-æ¥å£ç±»" class="headerlink" title="UserMapper.java(æ¥å£ç±»)"></a>UserMapper.java(æ¥å£ç±»)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å…¨éƒ¨ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®ç”¨æˆ·idè·å–ç”¨æˆ·</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// insertä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="User-Mapper-xmlï¼ˆç¼–å†™sqlï¼‰"><a href="#User-Mapper-xmlï¼ˆç¼–å†™sqlï¼‰" class="headerlink" title="User Mapper.xmlï¼ˆç¼–å†™sqlï¼‰"></a>User Mapper.xmlï¼ˆç¼–å†™sqlï¼‰</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»‘å®šä¸€ä¸ªDao/Mapperæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.li.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æŸ¥è¯¢è¯­å¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.user (id, name, pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        update mybatis.user set name = #&#123;name&#125;,pwd = #&#123;pwd&#125; where id = #&#123;id&#125; ;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from mybatis.user where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="UserMapperTestï¼ˆæµ‹è¯•ï¼‰"><a href="#UserMapperTestï¼ˆæµ‹è¯•ï¼‰" class="headerlink" title="UserMapperTestï¼ˆæµ‹è¯•ï¼‰"></a>UserMapperTestï¼ˆæµ‹è¯•ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.li.util.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ­¥ï¼š è·å¾—sqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€ï¼šgetMapper(æ¨èä½¿ç”¨)</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; userList = mapper.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼äºŒ</span></span><br><span class="line"><span class="comment">//        List&lt;User&gt; userList = sqlSession.selectList(&quot;com.li.dao.UserDao.getUserList&quot;);</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(User user : userList)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®idæŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">text</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ­¥ï¼š è·å¾—sqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€ï¼šgetMapper(æ¨èä½¿ç”¨)</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">userById</span> <span class="operator">=</span> mapper.getUserById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(userById);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¢åˆ æ”¹æŸ¥éœ€è¦ç¡®å®šäº‹åŠ¡</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> mapper.addUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>,<span class="string">&quot;å›°å›°&quot;</span>,<span class="string">&quot;123456&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> mapper.updateUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;å¹³å®‰&quot;</span>,<span class="string">&quot;12345&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> mapper.deleteUser(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ol><li>å¢åˆ æ”¹æŸ¥çš„æ—¶å€™è¦æäº¤äº‹åŠ¡æ‰å¯ä»¥ä¿®æ”¹æ•°æ®åº“ä¸­çš„æ•°æ®<code>sqlSession.commit();</code></li><li>æµ‹è¯•ç±»ä¸åœ¨javaæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œåœ¨testä¸­</li></ol><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172317542.png" alt="image-20220606235041322"></p><p> mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®mapper.xmléœ€è¦ç”¨ &#x2F; è¡¨ç¤ºè·¯å¾„</p><h3 id="ä¸‡èƒ½çš„map"><a href="#ä¸‡èƒ½çš„map" class="headerlink" title="ä¸‡èƒ½çš„map"></a>ä¸‡èƒ½çš„map</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ ç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser2</span><span class="params">(Map&lt;String,Object&gt; map)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®mapè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">User <span class="title function_">getUserById2</span><span class="params">(Map&lt;String,Object&gt; map)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    insert into mybatis.user (id,name,pwd) values (#&#123;userid&#125;,#&#123;username&#125;,#&#123;userpwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.user where id = #&#123;userid&#125; and name = #&#123;username&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;userid&quot;</span>,<span class="number">5</span>);</span><br><span class="line">    map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;makabaka&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;userpwd&quot;</span>,<span class="string">&quot;222333&quot;</span>);</span><br><span class="line"></span><br><span class="line">    mapper.addUser2(map);</span><br><span class="line"></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">text2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;userid&quot;</span>,<span class="number">5</span>);</span><br><span class="line">    map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;makabaka&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(map);</span><br><span class="line">    <span class="type">User</span> <span class="variable">userById2</span> <span class="operator">=</span> mapper.getUserById2(map);</span><br><span class="line"></span><br><span class="line">    System.out.println(userById2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­sqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºkeyå³å¯</p><p>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å¯¹è±¡çš„å±æ€§å³å¯</p><p>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°</p><p>å¤šä¸ªå‚æ•°ç”¨mapï¼Œæˆ–è€…æ³¨è§£</p><h3 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h3><p>åœ¨ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼ é€’é€šé…ç¬¦%</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; userlist = mapper.getUserLike(<span class="string">&quot;%æ%&quot;</span>);</span><br></pre></td></tr></table></figure><p>åœ¨sqlæ‹¼æ¥ä¸­ä½¿ç”¨é€šé…ç¬¦</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.user where name like &quot;%&quot;#&#123;value&#125;&quot;%&quot;;  // ä¼šæŠ¥é”™ ï¼Œä¸‹é¢ä¸¤ç§å‡å¯ä»¥</span><br><span class="line">    select * from ssmbuild.books where bookName like &#x27;%$&#123;bookName&#125;%&#x27;;</span><br><span class="line">    select * from ssmbuild.books where bookName like concat(&#x27;%&#x27;,#&#123;bookName&#125;,&#x27;%&#x27;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®è§£æ"><a href="#é…ç½®è§£æ" class="headerlink" title="é…ç½®è§£æ"></a>é…ç½®è§£æ</h2><h3 id="æ ¸å¿ƒé…ç½®"><a href="#æ ¸å¿ƒé…ç½®" class="headerlink" title="æ ¸å¿ƒé…ç½®"></a>æ ¸å¿ƒé…ç½®</h3><p><code>mybatis-config.xml </code>  MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"><a href="#ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰" class="headerlink" title="ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"></a>ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰</h3><p>å­¦ä¼šé…ç½®ä½¿ç”¨å¤šå¥—è¿è¡Œç¯å¢ƒ</p><p>Mybatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯JDBCï¼Œè¿æ¥æ± ï¼šPOOLED</p><h3 id="å±æ€§ï¼ˆpropertiesï¼‰"><a href="#å±æ€§ï¼ˆpropertiesï¼‰" class="headerlink" title="å±æ€§ï¼ˆpropertiesï¼‰"></a>å±æ€§ï¼ˆpropertiesï¼‰</h3><p>é€šè¿‡propertieså±æ€§æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶</p><p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚ã€db.propertiesã€‘</p><p>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ db.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ˜ å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶</li><li>å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½®</li><li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰åŒä¸€ä¸ªå­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶</li></ul><h3 id="ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"><a href="#ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰" class="headerlink" title="ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"></a>ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</h3><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.li.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMybatisä¼šåœ¨åŒ…åä¸‹æœç´¢Java Beanï¼Œæ¯”å¦‚</p><p>æ‰«æå®ä½“ç±»çš„åŒ…ï¼Œä»–çš„é»˜è®¤åå°±ä¸ºè¿™ä¸ªç±»çš„ ç±»åï¼Œé¦–å­—æ¯å°å†™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.li.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§ã€‚</p><p>å¦‚æœå®ä½“ç±»æ¯”è¾ƒå¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚</p><p>ç¬¬ä¸€ç§ä½¿ç”¨å¯ä»¥diyï¼Œç¬¬äºŒç§ä¸å¯ä»¥ã€‚å¦‚æœéè¦æ”¹ï¼Œéœ€è¦åœ¨å®ä½“ç±»ä¸­æ·»åŠ æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">user</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ï¼ˆsettingsï¼‰"><a href="#è®¾ç½®ï¼ˆsettingsï¼‰" class="headerlink" title="è®¾ç½®ï¼ˆsettingsï¼‰"></a>è®¾ç½®ï¼ˆsettingsï¼‰</h3><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172317890.png" alt="image-20220607104110278"></p><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202206091754808.png" alt="image-20220607104125727"></p><h3 id="å…¶ä»–é…ç½®"><a href="#å…¶ä»–é…ç½®" class="headerlink" title="å…¶ä»–é…ç½®"></a>å…¶ä»–é…ç½®</h3><ul><li><a href="https://mybatis.net.cn/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li><li><a href="https://mybatis.net.cn/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li><li>pluginsï¼ˆæ’ä»¶ï¼‰<ul><li>mybatis-generator-core</li><li>mybatis-plus</li><li>é€šç”¨mapper</li></ul></li></ul><h3 id="æ˜ å°„å™¨ï¼ˆMapperï¼‰"><a href="#æ˜ å°„å™¨ï¼ˆMapperï¼‰" class="headerlink" title="æ˜ å°„å™¨ï¼ˆMapperï¼‰"></a>æ˜ å°„å™¨ï¼ˆMapperï¼‰</h3><p>MapperRegistryï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶</p><p>æ–¹å¼ä¸€ï¼š**(æ¨èä½¿ç”¨)**</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/li/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼šä½¿ç”¨clasæ–‡ä»¶ç»‘å®šæ³¨å†Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.li.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ç‚¹ï¼š</p><ul><li>æ¥å£å’Œå®ƒçš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li><li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</li></ul><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å†Œç»‘å®š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.li.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ç‚¹ï¼š</p><ul><li>æ¥å£å’Œå®ƒçš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li><li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</li></ul><h2 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h2><p>ç»“æœé›†æ˜ å°„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>mybatisè¿˜æ²¡æœ‰å­¦å®Œï¼Œç”±äºéƒ¨åˆ†åŸå› ï¼Œç›´æ¥å¼€å§‹springçš„å­¦ä¹ ï¼Œæ—¥åæœ‰æ—¶é—´ä¼šè¡¥ä¸Šmybatis</p><h1 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- services --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;petStore&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.samples.jpetstore.services.PetStoreServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;accountDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;accountDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;itemDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;itemDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- more bean definitions for services go here --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;u1&quot;</span>);</span><br><span class="line">        user1.show();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#ä½¿ç”¨IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="ä½¿ç”¨IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>ä½¿ç”¨IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2><p>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤</p><p>å‡è®¾æˆ‘ä»¬è¦ä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡</p><ul><li><p>ä¸‹æ ‡èµ‹å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;property name=&quot;name&quot; value=&quot;likunsong&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç¬¬ä¸€ç§ï¼Œä¸‹æ ‡èµ‹å€¼--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;likun&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ç±»å‹åˆ›å»º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ä¸å»ºè®®ä½¿ç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123465346&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡å‚æ•°å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œå®¹å™¨ä¸­çš„å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†</p><h2 id="springé…ç½®"><a href="#springé…ç½®" class="headerlink" title="springé…ç½®"></a>springé…ç½®</h2><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚æœæ·»åŠ äº†åˆ«åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åæ¥è®¿é—® ï¼ˆbeans.xmlä¸­é…ç½®åˆ«åï¼‰</span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;usernew&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="beançš„é…ç½®"><a href="#beançš„é…ç½®" class="headerlink" title="beançš„é…ç½®"></a>beançš„é…ç½®</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.User&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user2,u1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    id : beançš„å”¯ä¸€æ ‡è¯†ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬å­¦åˆ°çš„å¯¹è±¡å</span></span><br><span class="line"><span class="comment">    classï¼š beanå¯¹è±¡æ‰€å¯¹åº”çš„å…¨é™å®šåï¼š åŒ…å + ç±»å‹</span></span><br><span class="line"><span class="comment">    name ï¼š ä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶èµ·å¤šä¸ªåˆ«å</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><p>ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œä»–å¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ª</p><p>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œä¸‰ä¸ªäººåˆ†åˆ«å¼€å‘ä¸åŒçš„ç±»ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨importï¼Œå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„</p><p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®å³å¯ï¼ˆapplicationContext.xmlï¼‰</p><p>å†…å®¹ç›¸åŒä¹Ÿä¼šè¢«åˆå¹¶</p><h2 id="DIä¾èµ–æ³¨å…¥"><a href="#DIä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¾èµ–æ³¨å…¥"></a>DIä¾èµ–æ³¨å…¥</h2><h3 id="æ„é€ å™¨æ³¨å…¥"><a href="#æ„é€ å™¨æ³¨å…¥" class="headerlink" title="æ„é€ å™¨æ³¨å…¥"></a>æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢æœ‰ï¼Œæœ‰å‚æ„é€ </p><h3 id="setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰"><a href="#setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰"></a>setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰</h3><ul><li>ä¾èµ–æ³¨å…¥ï¼š setæ³¨å…¥<ul><li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨</li><li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥</li></ul></li></ul><p>ã€ç¯å¢ƒæ­å»ºã€‘</p><h4 id="å¤æ‚ç±»å‹"><a href="#å¤æ‚ç±»å‹" class="headerlink" title="å¤æ‚ç±»å‹"></a>å¤æ‚ç±»å‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="çœŸå®æµ‹è¯•å¯¹è±¡"><a href="#çœŸå®æµ‹è¯•å¯¹è±¡" class="headerlink" title="çœŸå®æµ‹è¯•å¯¹è±¡"></a>çœŸå®æµ‹è¯•å¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbys;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getBooks() &#123;</span><br><span class="line">        <span class="keyword">return</span> books;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBooks</span><span class="params">(String[] books)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.books = books;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getHobbys</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hobbys;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHobbys</span><span class="params">(List&lt;String&gt; hobbys)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hobbys = hobbys;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">getCard</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> card;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCard</span><span class="params">(Map&lt;String, String&gt; card)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.card = card;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">getGames</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> games;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGames</span><span class="params">(Set&lt;String&gt; games)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.games = games;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWife</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> wife;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWife</span><span class="params">(String wife)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.wife = wife;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Properties <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setInfo</span><span class="params">(Properties info)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.info = info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, address=&quot;</span> + address +</span><br><span class="line">                <span class="string">&quot;, books=&quot;</span> + Arrays.toString(books) +</span><br><span class="line">                <span class="string">&quot;, hobbys=&quot;</span> + hobbys +</span><br><span class="line">                <span class="string">&quot;, card=&quot;</span> + card +</span><br><span class="line">                <span class="string">&quot;, games=&quot;</span> + games +</span><br><span class="line">                <span class="string">&quot;, wife=&#x27;&quot;</span> + wife + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, info=&quot;</span> + info +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="beans-xml"><a href="#beans-xml" class="headerlink" title="beans.xml"></a>beans.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studeng&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ç¬¬ä¸€ç§ï¼Œæ™®é€šçº¸æ³¨å…¥ï¼Œvalue--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æå¤æ¾&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ç±»"><a href="#æµ‹è¯•ç±»" class="headerlink" title="æµ‹è¯•ç±»"></a>æµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">studdent</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;studeng&quot;</span>);</span><br><span class="line">        System.out.println(studdent.getName());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®Œå–„æ³¨å…¥ä¿¡æ¯"><a href="#å®Œå–„æ³¨å…¥ä¿¡æ¯" class="headerlink" title="å®Œå–„æ³¨å…¥ä¿¡æ¯"></a>å®Œå–„æ³¨å…¥ä¿¡æ¯</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.Address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ²³å—çœéƒ‘å·å¸‚ç™»å°å¸‚&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studeng&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ç¬¬ä¸€ç§ï¼Œæ™®é€šçº¸æ³¨å…¥ï¼Œvalue--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æå¤æ¾&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ç¬¬äºŒç§ï¼Œbeanæ³¨å…¥ï¼Œref--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        ç¬¬ä¸‰ç§ï¼Œæ•°ç»„æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’ä¼ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        listæ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbys&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¬æ­Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çœ‹ç”µå½±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Map--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;èº«ä»½è¯&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;é“¶è¡Œå¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123fasdf&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Set--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;games&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>COC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        null--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Properties--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å­¦å·&quot;</span>&gt;</span>123123123<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å§“å&quot;</span>&gt;</span>æå¤æ¾<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="æ‹“å±•æ–¹å¼æ³¨å…¥"></a>æ‹“å±•æ–¹å¼æ³¨å…¥</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:c</span>=<span class="string">&quot;http://www.springframework.org/schema/c&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    på‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§çš„å€¼ï¼šproperty--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.User&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;æå¤æ¾&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;19&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    cå‘½åç©ºé—´æ³¨å…¥ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼Œconstruct-args--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.User&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;19&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;æå¤æ¾&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;userbeans.xml&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;user2&quot;</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼špå‘½åå’Œcå‘½åç©ºé—´ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å¯¼å…¥xmlçº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br></pre></td></tr></table></figure><h3 id="Beançš„ä½œç”¨åŸŸ"><a href="#Beançš„ä½œç”¨åŸŸ" class="headerlink" title="Beançš„ä½œç”¨åŸŸ"></a>Beançš„ä½œç”¨åŸŸ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172317036.png" alt="image-20220609160934937"></p><p>1.å•ä¾‹æ¨¡å¼ï¼ˆspringé»˜è®¤æœºåˆ¶ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;user&quot;</span> class=<span class="string">&quot;com.li.pojo.User&quot;</span> p:name=<span class="string">&quot;æå¤æ¾&quot;</span> p:age=<span class="string">&quot;19&quot;</span> scope=<span class="string">&quot;singleton&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><p>2.åŸå‹æ¨¡å¼ï¼š æ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;accountService&quot;</span> class=<span class="string">&quot;com.something.DefaultAccountService&quot;</span> scope=<span class="string">&quot;prototype&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><p>3.å…¶ä½™çš„requestï¼Œsessionï¼Œapplicationï¼Œè¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ä½¿ç”¨</p><h2 id="Beançš„è‡ªåŠ¨è£…é…"><a href="#Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="Beançš„è‡ªåŠ¨è£…é…"></a>Beançš„è‡ªåŠ¨è£…é…</h2><ul><li>è‡ªåŠ¨è£…é…æ˜¯Springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼</li><li>Springä¼šåœ¨ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§</li></ul><p>åœ¨Springä¸­æœ‰ä¸‰ç§è£…é…æ–¹å¼</p><ol><li>åœ¨xmlä¸­æ˜¾ç¤ºçš„é…ç½®</li><li>åœ¨javaä¸­æ˜¾ç¤ºçš„é…ç½®</li><li>éšå¼çš„è‡ªåŠ¨è£…é…beanï¼ˆé‡è¦ï¼‰</li></ol><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>ç¯å¢ƒæ­å»ºï¼šä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©</p><h3 id="è‡ªåŠ¨è£…é…"><a href="#è‡ªåŠ¨è£…é…" class="headerlink" title="è‡ªåŠ¨è£…é…"></a>è‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    byName: ä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„ bean id</span></span><br><span class="line"><span class="comment">    byTypeï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„ bean id</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;likunsong&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;likunsong&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>bynameçš„æ—¶å€™ï¼Œè¦ä¿è¯æ‰€æœ‰beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§setæ–¹æ³•ä¸€è‡´</li><li>bynameçš„æ—¶å€™ï¼Œè¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´</li></ul><h3 id="ä½¿ç”¨æ³¨è§£è‡ªåŠ¨è£…é…"><a href="#ä½¿ç”¨æ³¨è§£è‡ªåŠ¨è£…é…" class="headerlink" title="ä½¿ç”¨æ³¨è§£è‡ªåŠ¨è£…é…"></a>ä½¿ç”¨æ³¨è§£è‡ªåŠ¨è£…é…</h3><p>jdk1.5ï¼ŒSpring2.5æ”¯æŒæ³¨è§£</p><p>ä½¿ç”¨æ³¨è§£é¡»çŸ¥ï¼š</p><ol><li>å¯¼å…¥çº¦æŸ</li><li>é…ç½®æ³¨è§£çš„æ”¯æŒ</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>@Autowired</strong></p><p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨ï¼ ä¹Ÿå¯ä»¥åœ¨setæ–¹å¼ä¸Šä½¿ç”¨</p><p>ä½¿ç”¨Autowired æˆ‘ä¹ˆä½ å¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•ï¼Œå‰ææ˜¯è‡ªåŠ¨è£…é…çš„å±æ€§åœ¨IOCï¼ˆSpringï¼‰å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆåå­—byName</p><p>ç§‘æ™®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Nullable å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull</span><br></pre></td></tr></table></figure><p>å¦‚æœ@Autowiredè‡ªåŠ¨è£…é…çš„ç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨è§£ @Autowiredå®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @Qulifier(value &#x3D; â€œxxxâ€) å»é…ç½® @Autowired çš„ä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">people</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;cat&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;dog&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>@resource</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">people</span>&#123;</span><br><span class="line">    <span class="meta">@Resource(value = &quot;cat&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Resource(value = &quot;dog&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°ç»“ï¼š</p><p>@Resource å’Œ @Autowired çš„åŒºåˆ«</p><ul><li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„é¢ï¼Œéƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</li><li>@Autowired é€šè¿‡byTypeçš„æ–¹å¼å®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ </li><li>@Resource é»˜è®¤é€šè¿‡bynameçš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeå®ç°ï¼Œä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œå°±æŠ¥é”™</li><li>æ‰§è¡Œé¡ºåºä¸åŒï¼š @Autowired é€šè¿‡byTypeçš„æ–¹å¼å®ç°  @Resource é»˜è®¤é€šè¿‡bynameçš„æ–¹å¼å®ç°</li></ul><h2 id="ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="ä½¿ç”¨æ³¨è§£å¼€å‘"></a>ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>Spring4 ä¹‹åï¼Œå¿…é¡»è¦å¯¼å…¥aopçš„åŒ…</p><p>ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥contextçš„çº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>1.bean</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> ï¼šç»„ä»¶ï¼Œæ”¾åœ¨ç±»ä¸Šï¼Œè¯´æ˜è¿™ä¸ªç±»è¢«Springç®¡ç†äº†ï¼Œå°±æ˜¯bean</span><br></pre></td></tr></table></figure><p>2.å±æ€§å¦‚ä½•æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;likun&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.è¡ç”Ÿçš„æ³¨è§£</p><p>@component æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨webå¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§mvcä¸‰å±‚æ¶æ„åˆ†å±‚</p><ul><li>dao ã€@Repositoryã€‘</li><li>service ã€@Serviceã€‘</li><li>controller ã€@Controllerã€‘</li></ul><p>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°Springä¸­ï¼Œè£…é…bean </p><p>4.è‡ªåŠ¨è£…é…</p><p>ä¸Šé¢æœ‰ï¼Œè‡ªè¡Œç¿»æ‰¾</p><p>5.ä½œç”¨åŸŸ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;singleton&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name ;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;likun&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.å°ç»“</p><p>xmlä¸æ³¨è§£ï¼š</p><ul><li>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼ç»´æŠ¤ç®€å•æ–¹ä¾¿</li><li>æ³¨è§£ ä¸æ˜¯è‡ªå·±çš„ç±»ä¸èƒ½ä½¿ç”¨ï¼Œç»´æŠ¤ç›¸å¯¹å¤æ‚</li></ul><p>æœ€ä½³å®è·µï¼š</p><ul><li>xmlç”¨æ¥ç®¡ç†bean</li><li>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥</li><li>æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œè¦æƒ³ä½¿æ³¨è§£ç”Ÿæ•ˆï¼Œå°±éœ€è¦å¼€å¯æ³¨è§£æ”¯æŒ</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.li&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å®Œå…¨ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Srping"><a href="#å®Œå…¨ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Srping" class="headerlink" title="å®Œå…¨ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Srping"></a>å®Œå…¨ä½¿ç”¨javaçš„æ–¹å¼é…ç½®Srping</h2><p>æˆ‘ä»¬ç°åœ¨è¦å®Œå…¨ä¸é€‚ç”¨springçš„xmlé…ç½®ï¼Œå…¨æƒäº¤ç»™java</p><p>javaConfigæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œåœ¨Spring 4 ä¹‹åï¼Œä»–æˆä¸ºäº†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½</p><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªæ³¨è§£çš„æ„æ€æ˜¯ï¼Œè¿™ä¸ªç±»è¢«Springæ¥ç®¡äº†ï¼Œæ³¨å†Œåˆ°äº†å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Value(&quot;nihao&quot;)</span> <span class="comment">// å±æ€§æ³¨å…¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªä¹Ÿä¼šè¢«Springå®¹å™¨ä¸­æ‰˜ç®¡ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ª @Component , @COnfiguration ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="comment">// å°±åƒæˆ‘ä»¬ä¹‹å‰çš„beans.xml</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.li.pojo&quot;)</span></span><br><span class="line"><span class="meta">@Import(config2.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">myconfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å†Œä¸€ä¸ªbeanï¼Œå°±ç›¸å½“äºæˆ‘ä»¬ä¹‹å‰å†™çš„beanæ ‡ç­¾</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ–¹æ³•çš„åå­— == beanæ ‡ç­¾ä¸­çš„ id</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ == beanæ ‡ç­¾ä¸­çš„class</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mytest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå®Œå…¨ä½¿ç”¨é…ç½®ç±»æ“ä½œï¼Œæˆ‘ä»¬å°±åªèƒ½ ä½¿ç”¨AnnotationConfigApplicationContextï¼Œè·å–ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(myconfig.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">getUser</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;getUser&quot;</span>);</span><br><span class="line">        System.out.println(getUser.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çº¯javaé…ç½®çš„æ–¹å¼ï¼Œåœ¨SpringBootä¸­éšå¤„å¯è§</p><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><p>ä»£ç†æ¨¡å¼åˆ†ç±»ï¼š</p><ul><li>é™æ€ä»£ç†</li><li>åŠ¨æ€ä»£ç†</li></ul><h3 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h3><ul><li>æŠ½è±¡çš„è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³</li><li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²</li><li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</li><li>å®¢æˆ·ï¼šã€€è®¿é—®ä»£ç†å¯¹è±¡çš„äºº</li></ul><p>ä»£ç æ­¥éª¤ï¼š</p><p>ï¼‘.æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§Ÿæˆ¿çš„æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ï¼’.çœŸå®è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ¿ä¸œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span> <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼“.ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">proxy</span> <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Host host;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">proxy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">proxy</span><span class="params">(Host host)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.host = host;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        seeHouse();</span><br><span class="line">        host.rent();</span><br><span class="line">        hetong();</span><br><span class="line">        fare();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹çœ‹æˆ¿&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­¾åˆåŒ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hetong</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾åˆåŒ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ”¶ä¸­ä»‹è´¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fare</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼”.å®¢æˆ·ç«¯è®¿é—®è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// æˆ¿ä¸œè¦ç§Ÿæˆ¿å­</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line">        <span class="comment">// ä¸­ä»‹å¸®æˆ¿ä¸œç§Ÿæˆ¿å­ ï¼Œè¿˜æœ‰é™„å±æ“ä½œ</span></span><br><span class="line">        <span class="type">proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">proxy</span>(host);</span><br><span class="line"></span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</p><ul><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li><li>å…¬å…±ä¸šåŠ¡å°±äº¤ç»™ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li><li>å…¬å…±ä¸šåŠ¡åœ¨å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡å˜ä½</li></ul><p>ç†è§£</p><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserServide</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çœŸæ˜¯å¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserServide</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceProxy</span> <span class="keyword">implements</span> <span class="title class_">UserServide</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserServiceImpl userService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        log(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">        userService.update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">        userService.query();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String masg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½¿ç”¨äº†&quot;</span>+masg + <span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserServiceProxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceProxy</span>();</span><br><span class="line">        proxy.setUserService(userService);</span><br><span class="line">        proxy.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h3><ul><li>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</li><li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„</li><li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†<ul><li>åŸºäºæ¥å£ â€“ JDKåŠ¨æ€ä»£ç†</li><li>åŸºäºç±»ï¼š cglib</li><li>javaå­—èŠ‚ç å®ç°ï¼š javassist</li></ul></li></ul><p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼šProxy   ä»£ç†ï¼Œ InvocationHandler  è°ƒç”¨å¤„ç†ç¨‹åº</p><p>åŠ¨æ€ä»£ç†çš„å¥½å¤„ï¼š</p><ul><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li><li>å…¬å…±ä¸šåŠ¡å°±äº¤ç»™ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li><li>å…¬å…±ä¸šåŠ¡åœ¨å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬å¯¹åº”çš„å°±æ˜¯ä¸€ç±»ä¸šåŠ¡</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œåªè¦æ˜¯å®ç°äº†åŒä¸€ä¸ªæ¥å£å°±è¡Œ</li></ul><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h3 id="ä»€ä¹ˆæ˜¯AOP"><a href="#ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="ä»€ä¹ˆæ˜¯AOP"></a>ä»€ä¹ˆæ˜¯AOP</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318719.png" alt="image-20220612150745554"></p><h3 id="AOPåœ¨Springä¸­çš„ä½œç”¨"><a href="#AOPåœ¨Springä¸­çš„ä½œç”¨" class="headerlink" title="AOPåœ¨Springä¸­çš„ä½œç”¨"></a>AOPåœ¨Springä¸­çš„ä½œç”¨</h3><p>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p><p>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ç­‰ç­‰â€¦<br>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚<br>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚<br>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚<br>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚<br>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚<br>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318600.png" alt="image-20220612150822204"></p><p>SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Adviceï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318388.png" alt="image-20220612151518767"></p><p>å³AOPåœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</p><h3 id="AOPçš„ä½¿ç”¨"><a href="#AOPçš„ä½¿ç”¨" class="headerlink" title="AOPçš„ä½¿ç”¨"></a>AOPçš„ä½¿ç”¨</h3><p>åœ¨applicationContest.xmlä¸­åŠ å…¥aopçš„çº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨pom.xmlä¸­æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼ä¸€ï¼š"><a href="#æ–¹å¼ä¸€ï¼š" class="headerlink" title="æ–¹å¼ä¸€ï¼š"></a>æ–¹å¼ä¸€ï¼š</h4><p>ä½¿ç”¨Springå®ç°APIæ¥å£ã€ä¸»è¦æ˜¯spring apiæ¥å£å®ç°ã€‘</p><p>applicationContest é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼ä¸€--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.log.log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterlog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.log.Afterlog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®aop: éœ€è¦å¯¼å…¥aopçš„çº¦æŸ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        åˆ‡å…¥ç‚¹   excution(è¦æ‰§è¡Œçš„ä½ç½®)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.li.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        æ‰§è¡Œç¯ç»•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;log&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;afterlog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span>    </span><br></pre></td></tr></table></figure><p>log AfterLog</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Afterlog</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+method.getName()+<span class="string">&quot;è¿”å›ç»“æœä¸º&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>log beforelog</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">log</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     methodï¼š è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     argsï¼š å‚æ•°</span></span><br><span class="line"><span class="comment">     targetï¼š ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(target.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¥å£å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒï¼š"><a href="#æ–¹å¼äºŒï¼š" class="headerlink" title="æ–¹å¼äºŒï¼š"></a>æ–¹å¼äºŒï¼š</h4><p>è‡ªå®šä¹‰æ¥å®ç°AOPã€ä¸»è¦æ˜¯åˆ‡é¢å®šä¹‰ã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.log.log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterlog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.log.Afterlog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼äºŒï¼š è‡ªå®šä¹‰ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diycut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.diy.DiyPointCut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è‡ªå®šä¹‰åˆ‡é¢  ref è¦å¼•ç”¨çš„ç±»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diycut&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.li.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            é€šçŸ¥--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>diyç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiyPointCut</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå‰======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=======æ–¹æ³•æ‰§è¡Œå=======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£å’Œæ¥å£å®ç°ç±»å¹¶æ— æ”¹å˜</p><h4 id="æ–¹å¼ä¸‰ï¼š"><a href="#æ–¹å¼ä¸‰ï¼š" class="headerlink" title="æ–¹å¼ä¸‰ï¼š"></a>æ–¹å¼ä¸‰ï¼š</h4><p>ä½¿ç”¨æ³¨è§£å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.diy;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°aop</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.Signature;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotataionPointCut</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.li.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œå‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.li.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œå&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è·å–å¤„ç†çš„æ¥å…¥ç‚¹</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.li.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ç¯ç»•&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> jp.getSignature();<span class="comment">// è·å¾—ç­¾å</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾å&quot;</span>+ signature);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> jp.proceed();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.log.log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterlog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.log.Afterlog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼ä¸‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;AnnotataionPointCut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.diy.AnnotataionPointCut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--   å¼€å¯æ³¨è§£æ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ•´åˆMyBatis"><a href="#æ•´åˆMyBatis" class="headerlink" title="æ•´åˆMyBatis"></a>æ•´åˆMyBatis</h2><p>æ­¥éª¤ï¼š</p><ol><li><p>å¯¼å…¥ç›¸å…³jaråŒ…</p><ul><li><p>junit</p></li><li><p>mybatis</p></li><li><p>mysqlæ•°æ®åº“</p></li><li><p>springç›¸å…³çš„</p></li><li><p>aopæ¤å…¥</p></li><li><p>mybatis-spring</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        springæ“ä½œæ•°æ®åº“çš„è¯ï¼Œè¿˜éœ€è¦ä¸€ä¸ªspring-jdbc--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p></li><li><p>æµ‹è¯•</p></li></ol><h3 id="å›å¿†mybatis"><a href="#å›å¿†mybatis" class="headerlink" title="å›å¿†mybatis"></a>å›å¿†mybatis</h3><ol><li><p>ç¼–å†™å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ ¸å¿ƒé…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.li.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/li/mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">seleectuser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™mapper.xml</p></li><li><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;!--ç»‘å®šä¸€ä¸ªDao/Mapperæ¥å£--&gt;&lt;mapper namespace=&quot;com.li.mapper.UserMapper&quot;&gt;    &lt;!--    æŸ¥è¯¢è¯­å¥--&gt;    &lt;select id=&quot;seleectuser&quot; resultType=&quot;user&quot;&gt;        select * from mybatis.user    &lt;/select&gt;&lt;/mapper&gt;<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> æµ‹è¯•</span><br><span class="line"></span><br><span class="line">   ```java</span><br><span class="line">   <span class="keyword">import</span> com.li.mapper.UserMapper;</span><br><span class="line">   <span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line">   <span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line">   <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line">   <span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">   <span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">   <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> java.io.IOException;</span><br><span class="line">   <span class="keyword">import</span> java.io.InputStream;</span><br><span class="line">   <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mtest</span> &#123;</span><br><span class="line">       <span class="meta">@Test</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">resources</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">           <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(resources);</span><br><span class="line">   </span><br><span class="line">           <span class="type">SqlSessionFactory</span> <span class="variable">build</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in);</span><br><span class="line">           <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> build.openSession(<span class="literal">true</span>);</span><br><span class="line">   </span><br><span class="line">           <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">           List&lt;User&gt; seleectuser = mapper.seleectuser();</span><br><span class="line">   </span><br><span class="line">           <span class="keyword">for</span> (User user : seleectuser)&#123;</span><br><span class="line">               System.out.println(user);</span><br><span class="line">           &#125;</span><br><span class="line">   </span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></code></pre></li></ol><h3 id="MyBatis-Spring"><a href="#MyBatis-Spring" class="headerlink" title="MyBatis-Spring"></a>MyBatis-Spring</h3><h4 id="æ–¹å¼ä¸€ï¼š-1"><a href="#æ–¹å¼ä¸€ï¼š-1" class="headerlink" title="æ–¹å¼ä¸€ï¼š"></a>æ–¹å¼ä¸€ï¼š</h4><p>å®ç°ç±»ï¼ˆUserï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£ç±»ï¼ˆUserMapperï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">seleectuser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°æ¥å£ï¼Œç¼–å†™sqlè¯­å¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»‘å®šä¸€ä¸ªDao/Mapperæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.li.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    æŸ¥è¯¢è¯­å¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;seleectuser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>UserMapperImpl</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆ‘ä»¬çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯ç”¨sqlsessionæ¥æ‰§è¡Œï¼Œç°åœ¨éƒ½æ˜¯ç”¨SqlSessionTemplate</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate sqlSessionTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlSessionTemplate</span><span class="params">(SqlSessionTemplate sqlSessionTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSessionTemplate = sqlSessionTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">seleectuser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSessionTemplate.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">return</span> mapper.seleectuser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>resourceé…ç½®æ–‡ä»¶</p><p><code>applicationContext.xml</code>  æ³¨å†Œbean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-dao.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--useMapper2 æ–¹å¼äºŒ ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;useMapper2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.li.mapper.UserMapperImpl2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>mybatis-config.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ ¸å¿ƒé…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.li.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>spring-dao.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    DataSouerceï¼šä½¿ç”¨springçš„æ•°æ®æºæ›¿æ¢mybatisçš„é…ç½®</span></span><br><span class="line"><span class="comment">        ä½¿ç”¨springæä¾›çš„jdbcï¼šorg.springframework.jdbc.datasource</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    sqlSessionFactory--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span> = <span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span> = <span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ç»‘å®šmybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/li/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    SqlsessionTemplate:å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„sqlSession--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºä»–æ²¡æœ‰setæ–¹æ³•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.li.mapper.UserMapperImpl;</span><br><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mtest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> (UserMapper) context.getBean(<span class="string">&quot;userMapper&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(User user : userMapper.seleectuser())&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h4><p>ä¿®æ”¹<code>UserMapperImpl</code> ä¸º <code>UserMapperImpl2</code>  ä½¿ç”¨ <code>SqlSessionDaoSupport</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.support.SqlSessionDaoSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl2</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">seleectuser</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).seleectuser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h2><p>äº‹ç‰©çš„ACIDåŸåˆ™:</p><ul><li>åŸå­æ€§</li><li>ä¸€è‡´æ€§</li><li>éš”ç¦»æ€§<ul><li>å¤šä¸ªä¸šåŠ¡å¯èƒ½æ“ä½œåŒä¸€ä¸ªèµ„æº,é˜²æ­¢æ•°æ®æŸå</li></ul></li><li>æŒä¹…æ€§<ul><li>äº‹åŠ¡ä¸€æ—¦æäº¤,æ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé—®é¢˜,ç»“æœéƒ½ä¸ä¼šè¢«å½±å“,è¢«æŒä¹…åŒ–å†™åˆ°å­˜å‚¨å™¨ä¸­</li></ul></li></ul><h3 id="springä¸­çš„äº‹åŠ¡ç®¡ç†"><a href="#springä¸­çš„äº‹åŠ¡ç®¡ç†" class="headerlink" title="springä¸­çš„äº‹åŠ¡ç®¡ç†"></a>springä¸­çš„äº‹åŠ¡ç®¡ç†</h3><ul><li>å£°æ˜å¼äº‹åŠ¡ : AOP</li><li>ç¼–ç¨‹å¼äº‹åŠ¡ : éœ€è¦åœ¨ä»£ç ä¸­è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†</li></ul><p>springé…ç½®å£°æ˜å¼äº‹åŠ¡</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172318779.png" alt="image-20220613165906252"></p><p>å¦‚æœæˆ‘ä»¬ä¸åœ¨springä¸­é…ç½®å£°æ˜å¼äº‹åŠ¡,æˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡</p><p>é…ç½®äº‹åŠ¡</p><p>ä¿®æ”¹æ¥å£ç±»(UserMapper)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">del</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™sqlè¯­å¥(UserMapper.xml)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»‘å®šä¸€ä¸ªDao/Mapperæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.li.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    æŸ¥è¯¢è¯­å¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;del&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from mybatis.user where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®ç°æ–¹æ³•(UserMapperImpl)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.li.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionTemplate;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.support.SqlSessionDaoSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">6</span>, <span class="string">&quot;å°ç‹&quot;</span>, <span class="string">&quot;123324&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> getSqlSession().getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        mapper.addUser(user);</span><br><span class="line">        mapper.del(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">del</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).del(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹spring-dao.xml  æ·»åŠ äº†äº‹åŠ¡çš„å¤„ç†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    DataSouerceï¼šä½¿ç”¨springçš„æ•°æ®æºæ›¿æ¢mybatisçš„é…ç½®</span></span><br><span class="line"><span class="comment">        ä½¿ç”¨springæä¾›çš„jdbcï¼šorg.springframework.jdbc.datasource</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    sqlSessionFactory--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span> = <span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span> = <span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ç»‘å®šmybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/li/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    SqlsessionTemplate:å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„sqlSession--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºä»–æ²¡æœ‰setæ–¹æ³•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®å£°æ˜å¼äº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span> = <span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span> = <span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    ç»“åˆAOPå®ç°äº‹åŠ¡çš„æ¤å…¥--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®äº‹åŠ¡çš„ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.li.mapper.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µè„‘æ—¥å¸¸é—®é¢˜</title>
      <link href="/2022/05/13/%E7%94%B5%E8%84%91%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
      <url>/2022/05/13/%E7%94%B5%E8%84%91%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”µè„‘è¿ä¸Šwifiæµè§ˆå™¨æ— æ³•ä¸Šç½‘é—®é¢˜"><a href="#ç”µè„‘è¿ä¸Šwifiæµè§ˆå™¨æ— æ³•ä¸Šç½‘é—®é¢˜" class="headerlink" title="ç”µè„‘è¿ä¸Šwifiæµè§ˆå™¨æ— æ³•ä¸Šç½‘é—®é¢˜"></a>ç”µè„‘è¿ä¸Šwifiæµè§ˆå™¨æ— æ³•ä¸Šç½‘é—®é¢˜</h1><h2 id="æ‰“å¼€è®¾ç½®ä¿®æ”¹æ–‡ä»¶"><a href="#æ‰“å¼€è®¾ç½®ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="æ‰“å¼€è®¾ç½®ä¿®æ”¹æ–‡ä»¶"></a>æ‰“å¼€è®¾ç½®ä¿®æ”¹æ–‡ä»¶</h2><h3 id="æ‰¾åˆ°ç½‘ç»œå’ŒInternet-ï¼Œæ‰“å¼€æ›´æ”¹é€‚é…å™¨é€‰é¡¹ï¼ŒåŒå‡»WLANã€‚"><a href="#æ‰¾åˆ°ç½‘ç»œå’ŒInternet-ï¼Œæ‰“å¼€æ›´æ”¹é€‚é…å™¨é€‰é¡¹ï¼ŒåŒå‡»WLANã€‚" class="headerlink" title="æ‰¾åˆ°ç½‘ç»œå’ŒInternet ï¼Œæ‰“å¼€æ›´æ”¹é€‚é…å™¨é€‰é¡¹ï¼ŒåŒå‡»WLANã€‚"></a>æ‰¾åˆ°ç½‘ç»œå’ŒInternet ï¼Œæ‰“å¼€æ›´æ”¹é€‚é…å™¨é€‰é¡¹ï¼ŒåŒå‡»WLANã€‚</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312217456.png" alt="image-20220513131708208"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312217321.png" alt="image-20220513131731796"></p><h3 id="ä¿®æ”¹WLANå±æ€§"><a href="#ä¿®æ”¹WLANå±æ€§" class="headerlink" title="ä¿®æ”¹WLANå±æ€§"></a>ä¿®æ”¹WLANå±æ€§</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312217618.png" alt="image-20220513131940933"></p><h3 id="æ›´æ”¹ipå’ŒDNSçš„è·å¾—æ–¹å¼"><a href="#æ›´æ”¹ipå’ŒDNSçš„è·å¾—æ–¹å¼" class="headerlink" title="æ›´æ”¹ipå’ŒDNSçš„è·å¾—æ–¹å¼"></a>æ›´æ”¹ipå’ŒDNSçš„è·å¾—æ–¹å¼</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218780.png" alt="image-20220513132002760"></p><h2 id="ä¸€èˆ¬è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æœè¿˜ä¸å¯ä»¥"><a href="#ä¸€èˆ¬è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æœè¿˜ä¸å¯ä»¥" class="headerlink" title="ä¸€èˆ¬è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æœè¿˜ä¸å¯ä»¥"></a>ä¸€èˆ¬è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æœè¿˜ä¸å¯ä»¥</h2><h3 id="win-rï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥inetcpl-cpl"><a href="#win-rï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥inetcpl-cpl" class="headerlink" title="win+rï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥inetcpl.cpl"></a>win+rï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥<code>inetcpl.cpl</code></h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218091.png" alt="image-20220513132248357"></p><h3 id="è¿›å…¥â€œInternet-å±æ€§-â€“-è¿æ¥-â€“-å±€åŸŸç½‘è®¾ç½®â€"><a href="#è¿›å…¥â€œInternet-å±æ€§-â€“-è¿æ¥-â€“-å±€åŸŸç½‘è®¾ç½®â€" class="headerlink" title="è¿›å…¥â€œInternet å±æ€§  â€“ &gt; è¿æ¥ â€“&gt; å±€åŸŸç½‘è®¾ç½®â€"></a>è¿›å…¥â€œInternet å±æ€§  â€“ &gt; è¿æ¥ â€“&gt; å±€åŸŸç½‘è®¾ç½®â€</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218044.png" alt="image-20220513132308519"></p><h3 id="å–æ¶ˆå‹¾é€‰å³å¯ä¸Šç½‘"><a href="#å–æ¶ˆå‹¾é€‰å³å¯ä¸Šç½‘" class="headerlink" title="å–æ¶ˆå‹¾é€‰å³å¯ä¸Šç½‘"></a>å–æ¶ˆå‹¾é€‰å³å¯ä¸Šç½‘</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218552.png" alt="image-20220513132416289"></p><h1 id="åˆ é™¤æ–‡ä»¶å¤¹éœ€è¦ç®¡ç†å‘˜æƒé™æ— æ³•åˆ é™¤"><a href="#åˆ é™¤æ–‡ä»¶å¤¹éœ€è¦ç®¡ç†å‘˜æƒé™æ— æ³•åˆ é™¤" class="headerlink" title="åˆ é™¤æ–‡ä»¶å¤¹éœ€è¦ç®¡ç†å‘˜æƒé™æ— æ³•åˆ é™¤"></a>åˆ é™¤æ–‡ä»¶å¤¹éœ€è¦ç®¡ç†å‘˜æƒé™æ— æ³•åˆ é™¤</h1><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ‰“å¼€è®°äº‹æœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEL /F /A /Q \\?\%1RD /S /Q \\?\%1</span><br></pre></td></tr></table></figure><ol start="2"><li>ç‚¹å‡» â€œ ä¿å­˜ â€ ï¼Œå¦å­˜åˆ° æ¡Œé¢ï¼›</li><li>å°†æ–‡ä»¶å‘½ååç¼€æ”¹ä¸ºâ€œ bat â€ï¼Œå¹¶ç‚¹å‡»ç¡®å®šï¼›</li><li>å°†éœ€è¦åˆ é™¤çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ‹–åˆ°åˆšåˆšå‘½ååç¼€ä¸ºâ€œ bat â€ä¸Šå³å¯åˆ é™¤ï¼›</li></ol><p>åœ¨æ¡Œé¢æ—¶ï¼Œå®ƒæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218712.png" alt="image-20220707132407016"></p><p>æ‰“å¼€åï¼Œå®ƒæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218556.png" alt="image-20220707132423767"></p><p>å‘½ä»¤é‡Šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">del åˆ é™¤å‘½ä»¤ã€‚</span><br><span class="line">/F å¼ºåˆ¶åˆ baié™¤åªè¯»æ–‡ä»¶ã€‚</span><br><span class="line">/S ä»æ‰€æœ‰duå­ç›®å½•åˆ é™¤æŒ‡å®šæ–‡ä»¶ã€‚</span><br><span class="line">/Q å®‰é™æ¨¡å¼zhiã€‚åˆ é™¤å…¨daoå±€é€šé…ç¬¦æ—¶ï¼Œä¸è¦æ±‚ç¡®è®¤ã€‚</span><br><span class="line">%systemdrive% ç³»ç»Ÿæ–‡ä»¶å¤¹ï¼Œå¦‚C:\windowsï¼Œæœ‰çš„æœ‹å‹å°†ç³»ç»Ÿè£…åœ¨Dä¸­ï¼Œåˆ™è¡¨ç¤ºD:\WINDOWS</span><br><span class="line">*.tmp æŒ‡ä¸´æ—¶æ–‡ä»¶çš„é€šé…ç¬¦</span><br><span class="line">å…¨å¥æ„æ€æ˜¯ï¼šå¼ºåˆ¶åˆ é™¤ç³»ç»Ÿæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ ¼å¼ä¸ºtmpçš„æ–‡ä»¶(å“ªæ€•æ–‡ä»¶æ˜¯åªè¯»çš„)ï¼Œå¹¶ä¸”åœ¨åˆ é™¤æ—¶ä¸ç”¨å‘ç”¨æˆ·è¯¢é—®æ˜¯å¦ç»§ç»­æˆ–ç»ˆæ­¢!</span><br><span class="line">RD [/S] [/Q] [é©±åŠ¨å™¨:]è·¯å¾„</span><br><span class="line">/S é™¤ç›®å½•æœ¬èº«å¤–ï¼Œè¿˜å°†åˆ é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•å’Œ</span><br><span class="line">æ–‡ä»¶ã€‚ç”¨äºåˆ é™¤ç›®å½•æ ‘ã€‚</span><br><span class="line">/Q å®‰é™æ¨¡å¼ï¼ŒåŠ  /S æ—¶ï¼Œåˆ é™¤ç›®å½•æ ‘ç»“æ„ä¸å†è¦æ±‚ç¡®è®¤</span><br></pre></td></tr></table></figure><p>è¯¥å†…å®¹è½¬è½½è‡ªï¼š<a href="https://blog.csdn.net/qq_43779149/article/details/107696585">https://blog.csdn.net/qq_43779149/article/details/107696585</a></p><h1 id="win11æ¡Œé¢å›¾æ ‡å ç”¨ç©ºé—´å˜æˆé•¿æ–¹å½¢æ¢å¤ä¸ºæ­£æ–¹å½¢"><a href="#win11æ¡Œé¢å›¾æ ‡å ç”¨ç©ºé—´å˜æˆé•¿æ–¹å½¢æ¢å¤ä¸ºæ­£æ–¹å½¢" class="headerlink" title="win11æ¡Œé¢å›¾æ ‡å ç”¨ç©ºé—´å˜æˆé•¿æ–¹å½¢æ¢å¤ä¸ºæ­£æ–¹å½¢"></a>win11æ¡Œé¢å›¾æ ‡å ç”¨ç©ºé—´å˜æˆé•¿æ–¹å½¢æ¢å¤ä¸ºæ­£æ–¹å½¢</h1><p>å…ˆè¯•è¯•æŒ‰ä½ctrlç„¶åæ¥å›æ»šé¼ æ ‡æ»šè½®èƒ½ä¸èƒ½è°ƒå¥½<br>å¦‚æœæ˜¯ç½‘æ ¼é—´è·è¿‡å®½ï¼Œåº”è¯¥æ˜¯åˆ†è¾¨ç‡åˆ‡æ¢ä¸å½“é€ æˆçš„<br>1ã€æŒ‰Win+Rï¼Œç„¶åè¾“å…¥regeditï¼Œå›è½¦è¿›å…¥æ³¨å†Œè¡¨ç¼–è¾‘å™¨ã€‚<br>2ã€æ‰¾åˆ°HKEY CURRENT USERI&#x2F;Control Panel&#x2F;Desktop&#x2F;WindowMetrics<br>3ã€å°†IconSpacingä¿®æ”¹ä¸º-1125ï¼ŒIconVerticalSpacingä¹Ÿä¿®æ”¹ä¸º-1125<br>ç„¶åé‡å¯è®¡ç®—æœºå°±OKäº†</p>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸å°é—®é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸å°é—®é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>androidå¸¸è§æŠ€å·§çš„ä½¿ç”¨</title>
      <link href="/2022/05/05/android%E5%B8%B8%E8%A7%81%E6%8A%80%E5%B7%A7%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/05/05/android%E5%B8%B8%E8%A7%81%E6%8A%80%E5%B7%A7%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="LinearLayout-è®¾ç½®è¾¹æ¡†"><a href="#LinearLayout-è®¾ç½®è¾¹æ¡†" class="headerlink" title="LinearLayout è®¾ç½®è¾¹æ¡†"></a>LinearLayout è®¾ç½®è¾¹æ¡†</h1><h2 id="æ–°å»ºä¸€ä¸ªshapeçš„xml"><a href="#æ–°å»ºä¸€ä¸ªshapeçš„xml" class="headerlink" title="æ–°å»ºä¸€ä¸ªshapeçš„xml"></a>æ–°å»ºä¸€ä¸ªshapeçš„xml</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312202181.png" alt="image-20220505230711328"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312202487.png" alt="image-20220505230746449"></p><p>ç‚¹å‡»okï¼Œå³å¯åˆ›å»ºæˆåŠŸã€‚</p><h2 id="è¾¹æ¡†"><a href="#è¾¹æ¡†" class="headerlink" title="è¾¹æ¡†"></a>è¾¹æ¡†</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># ç›´çº¿è¾¹æ¡†</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#FFFFFF&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:width</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:color</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">padding</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:bottom</span>=<span class="string">&quot;0.1dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:left</span>=<span class="string">&quot;0.5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:right</span>=<span class="string">&quot;0.5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:top</span>=<span class="string">&quot;0dp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># åªæœ‰ä¸€æ¡è¾¹çš„è¾¹æ¡†</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿æ¡†é¢œè‰²å€¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸»ä½“èƒŒæ™¯é¢œè‰²å€¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">&quot;1dp&quot;</span>&gt;</span>   <span class="comment">&lt;!--è®¾ç½®åªæœ‰åº•éƒ¨æœ‰è¾¹æ¡†--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#ffffff&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># åœ†å½¢è¾¹æ¡†</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/white&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  åœ†è§’ &lt;corners android:radius=&quot;15dp&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:topRightRadius</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:bottomRightRadius</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:bottomLeftRadius</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:topLeftRadius</span>=<span class="string">&quot;15dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1dp&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;#DCDCDC&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ <span class="keyword">xml</span> <span class="title">ä¸­è°ƒç”¨ android</span>:background = <span class="string">&quot;@drawable/è®¾ç½®è¾¹æ¡†çš„åå­—&quot;</span>  ï¼ˆä¸åŠ xmlï¼‰</span><br></pre></td></tr></table></figure><h1 id="Fragmentä¸‹ä½¿ç”¨Intent"><a href="#Fragmentä¸‹ä½¿ç”¨Intent" class="headerlink" title="Fragmentä¸‹ä½¿ç”¨Intent"></a>Fragmentä¸‹ä½¿ç”¨Intent</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextView</span> <span class="variable">shezhi</span> <span class="operator">=</span> (TextView) view.findViewById(R.id.shezhi);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹å‡»è®¾ç½®ï¼Œè·³è½¬åˆ°å­ç•Œé¢</span></span><br><span class="line">shezhi.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(getActivity(), Myinfoset.class);</span><br><span class="line"><span class="comment">// éœ€è¦ä½¿ç”¨ getActivity()æ–¹æ³•</span></span><br><span class="line">startActivity(it);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£å¸¸æƒ…å†µä¸‹</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line">it.putExtra(<span class="string">&quot;sendinfo&quot;</span>,name);</span><br><span class="line">it.putExtra(<span class="string">&quot;value&quot;</span>,i);</span><br><span class="line">startActivityForResult(it,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h1 id="ImageViewè‡ªå®šä¹‰ä¸ºåœ†å½¢"><a href="#ImageViewè‡ªå®šä¹‰ä¸ºåœ†å½¢" class="headerlink" title="ImageViewè‡ªå®šä¹‰ä¸ºåœ†å½¢"></a>ImageViewè‡ªå®šä¹‰ä¸ºåœ†å½¢</h1><h2 id="æ–°å»ºä¸€ä¸ªjava-class"><a href="#æ–°å»ºä¸€ä¸ªjava-class" class="headerlink" title="æ–°å»ºä¸€ä¸ªjava class"></a>æ–°å»ºä¸€ä¸ªjava class</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapShader;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Matrix;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Shader;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.BitmapDrawable;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CircleImageView</span> <span class="keyword">extends</span> <span class="title class_">androidx</span>.appcompat.widget.AppCompatImageView&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»ç¬”</span></span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line">    <span class="comment">//åœ†å½¢å›¾ç‰‡çš„åŠå¾„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> mRadius;</span><br><span class="line">    <span class="comment">//å›¾ç‰‡çš„å®¿æ”¾æ¯”ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> mScale;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CircleImageView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CircleImageView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CircleImageView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        <span class="comment">//ç”±äºæ˜¯åœ†å½¢ï¼Œå®½é«˜åº”ä¿æŒä¸€è‡´</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Math.min(getMeasuredWidth(), getMeasuredHeight());</span><br><span class="line">        mRadius = size / <span class="number">2</span>;</span><br><span class="line">        setMeasuredDimension(size, size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;DrawAllocation&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line"></span><br><span class="line">        mPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Drawable</span> <span class="variable">drawable</span> <span class="operator">=</span> getDrawable();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != drawable) &#123;</span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> ((BitmapDrawable) drawable).getBitmap();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åˆå§‹åŒ–BitmapShaderï¼Œä¼ å…¥bitmapå¯¹è±¡</span></span><br><span class="line">            <span class="type">BitmapShader</span> <span class="variable">bitmapShader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BitmapShader</span>(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);</span><br><span class="line">            <span class="comment">//è®¡ç®—ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">            mScale = (mRadius * <span class="number">2.0f</span>) / Math.min(bitmap.getHeight(), bitmap.getWidth());</span><br><span class="line"></span><br><span class="line">            <span class="type">Matrix</span> <span class="variable">matrix</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Matrix</span>();</span><br><span class="line">            matrix.setScale(mScale, mScale);</span><br><span class="line">            bitmapShader.setLocalMatrix(matrix);</span><br><span class="line">            mPaint.setShader(bitmapShader);</span><br><span class="line">            <span class="comment">//ç”»åœ†å½¢ï¼ŒæŒ‡å®šå¥½åæ ‡ï¼ŒåŠå¾„ï¼Œç”»ç¬”</span></span><br><span class="line">            canvas.drawCircle(mRadius, mRadius, mRadius, mPaint);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨xmlä¸­ä½¿ç”¨"><a href="#åœ¨xmlä¸­ä½¿ç”¨" class="headerlink" title="åœ¨xmlä¸­ä½¿ç”¨"></a>åœ¨xmlä¸­ä½¿ç”¨</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.henu.eltfood.CircleImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/firname&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å°†æŒ‰é’®å›ºå®šåœ¨æœ€ä¸‹é¢"><a href="#å°†æŒ‰é’®å›ºå®šåœ¨æœ€ä¸‹é¢" class="headerlink" title="å°†æŒ‰é’®å›ºå®šåœ¨æœ€ä¸‹é¢"></a>å°†æŒ‰é’®å›ºå®šåœ¨æœ€ä¸‹é¢</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;bottom|center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;é€€å‡ºç™»å½•&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:minWidth</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="TextViewè®¾ç½®ç‚¹å‡»äº‹ä»¶"><a href="#TextViewè®¾ç½®ç‚¹å‡»äº‹ä»¶" class="headerlink" title="TextViewè®¾ç½®ç‚¹å‡»äº‹ä»¶"></a>TextViewè®¾ç½®ç‚¹å‡»äº‹ä»¶</h1><p>å’Œæ­£å¸¸çš„buttonçš„ç‚¹å‡»äº‹ä»¶ä¸€æ ·ï¼Œå°†TextViewé‡Œé¢æ·»åŠ ä¸€ä¸‹ <code>android:clickable=&quot;true&quot;</code></p>]]></content>
      
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>huffman-coding</title>
      <link href="/2022/05/01/coding/"/>
      <url>/2022/05/01/coding/</url>
      
        <content type="html"><![CDATA[<h1 id="haffman-c"><a href="#haffman-c" class="headerlink" title="haffman c++"></a>haffman c++</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m,n;</span><br><span class="line"></span><br><span class="line"><span class="comment">// int letter[27] = &#123;64, 13, 22, 32, 103, 21, 15, 47, 57, 1, 5, 32, 20, 57, 63, 15, 1, 48, 51, 80, 23, 8, 18, 1, 16, 1, 168&#125;;</span></span><br><span class="line"><span class="comment">// 64 13 22 32 103 21 15 47 57 1 5 32 20 57 63 15 1 48 51 80 23 8 18 1 16 1 168</span></span><br><span class="line"><span class="type">int</span> letter[<span class="number">28</span>]; <span class="comment">// ç”¨äºå­˜å‚¨26ä¸ªå­—æ¯ä»¥åŠç©ºæ ¼çš„å‡ºç°çš„æ¦‚ç‡æ¬¡æ•°</span></span><br><span class="line"><span class="type">char</span> lee[<span class="number">28</span>] = &#123;<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;j&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;n&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;p&#x27;</span>,<span class="string">&#x27;q&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;t&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;z&#x27;</span>,<span class="string">&#x27; &#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€åˆ†é…æ•°ç»„å­˜å‚¨å“ˆå¤«æ›¼ç¼–ç è¡¨</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">char</span>** HCode;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“ˆå¤«æ›¼æ ‘çš„å­˜å‚¨ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> w;</span><br><span class="line"><span class="type">int</span> parent,lchild,rchild;</span><br><span class="line">&#125;HTNode,*HTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€è°ƒç”¨</span></span><br><span class="line">HTree T;</span><br><span class="line">HCode HC;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================= å“ˆå¤«æ›¼æ ‘çš„æ„é€  ===========================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ ‘Tä¸­ï¼Œkä¸ºèŠ‚ç‚¹çš„æ€»ä¸ªæ•°ï¼Œè·å–ä¸¤ä¸ªèŠ‚ç‚¹æƒå€¼æœ€å°çš„å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Select</span><span class="params">(HTree T,<span class="type">int</span> k ,<span class="type">int</span> &amp;s1 ,<span class="type">int</span> &amp;s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> tmp = <span class="number">100000</span>,tmp1 = <span class="number">100000</span>;</span><br><span class="line"><span class="comment">// å…ˆè·å¾—ä¸€ä¸ªæœ€å°çš„ï¼Œç„¶åå†è·å¾—å€’æ•°ç¬¬äºŒå°çš„ï¼Œä¾æ¬¡éå†ï¼Œæ±‚æœ€å°æƒå€¼</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= k;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(!T[i].parent)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(tmp &gt; T[i].w)</span><br><span class="line">&#123;</span><br><span class="line">tmp = T[i].w;</span><br><span class="line">s1 = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= k;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(!T[i].parent &amp;&amp; i != s1)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(tmp1 &gt; T[i].w)</span><br><span class="line">&#123;</span><br><span class="line">tmp1 = T[i].w;</span><br><span class="line">s2 = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å“ˆå¤«æ›¼ç¼–ç æ ‘</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateHuffmanTree</span><span class="params">(HTree &amp;T,<span class="type">int</span> n)</span> <span class="comment">// n æ˜¯æŒ‡å¶å­èŠ‚ç‚¹çš„ä¸ªæ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(n &lt;= <span class="number">1</span>) <span class="keyword">return</span> ;</span><br><span class="line">m = <span class="number">2</span> * n - <span class="number">1</span>; <span class="comment">// æ‹¥æœ‰nä¸ªå¶å­ç»“ç‚¹çš„å“ˆå¤«æ›¼æ ‘å…±æœ‰2n-1ä¸ªç»“ç‚¹</span></span><br><span class="line">T = <span class="keyword">new</span> HTNode[m + <span class="number">1</span>]; <span class="comment">// åˆ†é…å•å…ƒï¼Œå­˜æ”¾ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= m;i ++)</span><br><span class="line">&#123;</span><br><span class="line">T[i].parent = <span class="number">0</span>;</span><br><span class="line">T[i].lchild = <span class="number">0</span>;</span><br><span class="line">T[i].rchild = <span class="number">0</span>;</span><br><span class="line">T[i].w = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i ++) T[i].w = letter[i];  <span class="comment">// å°†è¾“å…¥çš„æƒå€¼èµ‹ç»™æ¯ä¸ªç»“ç‚¹çš„æƒå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = n+<span class="number">1</span>;i &lt;= m;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> s1 = <span class="number">0</span>,s2 = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// é€‰æ‹©ä¸¤ä¸ªåŒäº²åŸŸä¸º0ï¼Œä¸”æƒå€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›ä»–ä»¬çš„åºå·s1,s2;</span></span><br><span class="line"><span class="built_in">Select</span>(T,i - <span class="number">1</span>, s1,s2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾—åˆ°æ–°èŠ‚ç‚¹iï¼Œä»æ£®æ—ä¸­åˆ é™¤s1,s2ï¼Œå°†s1,s2çš„åŒäº²åŸŸç”±0å˜ä¸ºi</span></span><br><span class="line">T[s1].parent = i;T[s2].parent = i;</span><br><span class="line"></span><br><span class="line"><span class="comment">// s1,s2ä¸ºæ–°èŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­ï¼Œiçš„æƒå€¼æ˜¯ä¸¤ä¸ªå­å­©å­çš„å’Œ</span></span><br><span class="line">T[i].lchild = s1;T[i].rchild = s2;</span><br><span class="line">T[i].w = T[s1].w + T[s2].w;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================= å“ˆå¤«æ›¼æ ‘ç¼–ç çš„ç”Ÿæˆ ===========================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå“ˆå¤«æ›¼ç¼–ç </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CreateHCode</span><span class="params">(HTree T , HCode &amp;HC , <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HC = <span class="keyword">new</span> <span class="type">char</span>* [n + <span class="number">1</span>]; <span class="comment">// å­˜æ”¾nä¸ªå­—ç¬¦çš„ç¼–ç çš„è¡¨</span></span><br><span class="line"><span class="type">char</span>* cd = <span class="keyword">new</span> <span class="type">char</span>[n]; <span class="comment">// ä¸´æ—¶å­˜æ”¾æ¯ä¸ªå­—ç¬¦çš„ç¼–ç </span></span><br><span class="line"></span><br><span class="line">cd[n - <span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>; <span class="comment">// ç¼–ç ç»“æŸç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€æ¬¡å¾—åˆ°æ¯ä¸ªç»“ç‚¹çš„ç¼–ç </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// start ä¸€èˆ¬æŒ‡å‘æœ€åä¸€ä¸ª ï¼Œå€’ç€å¼€å§‹éå†</span></span><br><span class="line"><span class="type">int</span> start = n - <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> c = <span class="number">0</span> , f = <span class="number">0</span>;</span><br><span class="line">c = i;f = T[i].parent;</span><br><span class="line"><span class="keyword">while</span>(f != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">-- start ;</span><br><span class="line"><span class="keyword">if</span>(T[f].lchild == c) cd[start] = <span class="string">&#x27;0&#x27;</span>; </span><br><span class="line"><span class="keyword">else</span> cd[start] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">c = f ; f = T[f].parent;</span><br><span class="line">&#125;</span><br><span class="line">HC[i] = <span class="keyword">new</span> <span class="type">char</span>[n - start];</span><br><span class="line"><span class="comment">// ä» start åçš„æ‰€æœ‰å€¼ å¤åˆ¶ç»™ HC[i] </span></span><br><span class="line"><span class="built_in">strcpy</span>(HC[i], &amp;cd[start]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">delete</span> cd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°å“ˆå¤«æ›¼ç¼–ç çš„æ‰“å°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintHTree</span><span class="params">(HCode &amp;HC,<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; std::left &lt;&lt; <span class="built_in">setw</span>(<span class="number">10</span>) &lt;&lt;<span class="string">&quot;å­—æ¯&quot;</span> &lt;&lt; std::left &lt;&lt; <span class="built_in">setw</span>(<span class="number">10</span>) &lt;&lt; <span class="string">&quot;ç¼–ç &quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// std::left ä½¿åé¢è¾“å‡ºçš„å€¼å‘å·¦å¯¹é½</span></span><br><span class="line">cout &lt;&lt; std::left &lt;&lt; <span class="built_in">setw</span>(<span class="number">10</span>) &lt;&lt; lee[i] ;</span><br><span class="line">string str = HC[i];</span><br><span class="line">cout &lt;&lt; std::left &lt;&lt; <span class="built_in">setw</span>(<span class="number">10</span>) &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//======================= å­—ç¬¦çš„è½¬ç åŠŸèƒ½ ============================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰è¾“å…¥çš„å­—ç¬¦æ‰“å°ç¼–ç </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Printe</span><span class="params">(HCode &amp;HC,<span class="type">int</span> l)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = HC[l];</span><br><span class="line">cout &lt;&lt;str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦çš„è½¬ç </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cin.<span class="built_in">ignore</span>();</span><br><span class="line"><span class="type">char</span> a[<span class="number">100</span>]; <span class="comment">// æœ€å¤šè¾“å…¥ä¸€ç™¾ä¸ªå­—ç¬¦ï¼ŒåŒ…å«ç©ºæ ¼</span></span><br><span class="line">cin.<span class="built_in">getline</span>(a,<span class="number">100</span>);</span><br><span class="line"><span class="type">int</span> len = <span class="built_in">strlen</span>(a);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; len ;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> l = a[i]; <span class="comment">// è½¬åŒ–ä¸ºASCIIå€¼</span></span><br><span class="line"><span class="keyword">if</span>(a[i] == <span class="string">&#x27; &#x27;</span>) l = <span class="number">27</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(l &gt;= <span class="number">97</span>)&#123;</span><br><span class="line">l -= <span class="number">96</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(l &lt; <span class="number">97</span> &amp;&amp; l &gt;= <span class="number">65</span>)&#123;</span><br><span class="line">l -= <span class="number">64</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Printe</span>(HC,l);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ======================== å“ˆå¤«æ›¼ç¼–ç è§£ç  =================================</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">decoding</span><span class="params">(HCode &amp;HC,<span class="type">int</span> n,string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string temp = <span class="string">&quot;&quot;</span>; <span class="comment">// ä¾æ¬¡è·å–ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å’Œç¼–ç è¡¨é‡Œé¢çš„å­—ç¬¦ä¸²å¯¹æ¯”</span></span><br><span class="line"><span class="type">char</span> str[<span class="number">1000</span>]; <span class="comment">// ç”¨æ¥å­˜æ”¾è§£ç åçš„æ•°å­—</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">1000</span>;i ++) str[i] = <span class="string">&#x27;1&#x27;</span>; <span class="comment">// æ¯æ¬¡å®šä¹‰char ï¼Œé˜²æ­¢ä¸Šæ¬¡çš„ç»“æœå½±å“è¿™æ¬¡çš„ç­”æ¡ˆ</span></span><br><span class="line"><span class="type">int</span> h = <span class="number">0</span>; <span class="comment">// str å­˜å‚¨çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">unsigned</span> <span class="type">int</span> i = <span class="number">0</span>;i &lt; s.<span class="built_in">length</span>();i ++)</span><br><span class="line">&#123;</span><br><span class="line">temp = temp + s[i]; <span class="comment">// ä¾æ¬¡è·å–ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>;j &lt;= n;j ++)</span><br><span class="line">&#123;</span><br><span class="line">string str2 = HC[j];</span><br><span class="line"><span class="keyword">if</span>(temp == str2)</span><br><span class="line">&#123;</span><br><span class="line">str[h ++] = lee[j];</span><br><span class="line">temp = <span class="string">&quot;&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(i == s.<span class="built_in">length</span>() - <span class="number">1</span>&amp;&amp; j == n  &amp;&amp; temp != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;è§£ç é”™è¯¯&quot;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">1000</span> ;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(str[i] != <span class="string">&#x27;1&#x27;</span>) cout &lt;&lt; str[i];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==================== åŠŸèƒ½çš„å±•ç¤º ============================</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;1 ---- è¾“å…¥26å­—æ¯çš„å‡ºç°é¢‘ç‡&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;2 ---- åˆ›å»ºå“ˆå¤«æ›¼æ ‘å’Œç¼–ç è¡¨ï¼Œå¹¶è¾“å‡ºç¼–ç è¡¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;3 ---- è¾“å…¥å­—ç¬¦ï¼Œå¹¶å®ç°è½¬ç &quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;4 ---- è¾“å…¥ç¼–ç ï¼Œå¹¶ç¿»è¯‘ä¸ºå­—ç¬¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;5 ---- é€€å‡º&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">show</span>();</span><br><span class="line"><span class="built_in">memset</span>(letter , <span class="number">0</span> ,<span class="keyword">sizeof</span> letter);</span><br><span class="line">n = <span class="number">27</span>;</span><br><span class="line">m = <span class="number">2</span>*n - <span class="number">1</span>;</span><br><span class="line"><span class="type">char</span> fir;</span><br><span class="line"><span class="keyword">while</span>(cin &gt;&gt; fir)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(fir == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= n;i ++)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; letter[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fir == <span class="string">&#x27;2&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">CreateHuffmanTree</span>(T,n);</span><br><span class="line"><span class="built_in">CreateHCode</span>(T,HC,n);</span><br><span class="line"><span class="built_in">PrintHTree</span>(HC,n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fir == <span class="string">&#x27;3&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">change</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fir == <span class="string">&#x27;4&#x27;</span>)&#123;</span><br><span class="line">string s;</span><br><span class="line">cin &gt;&gt; s;</span><br><span class="line"><span class="built_in">decoding</span>(HC,n,s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fir == <span class="string">&#x27;5&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥åˆæ³•çš„å­—ç¬¦&quot;</span>&lt;&lt;endl;</span><br><span class="line"><span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é‡åˆ°çš„é—®é¢˜ï¼š"><a href="#é‡åˆ°çš„é—®é¢˜ï¼š" class="headerlink" title="é‡åˆ°çš„é—®é¢˜ï¼š"></a>é‡åˆ°çš„é—®é¢˜ï¼š</h1><h3 id="é—®é¢˜ä¸€ï¼š"><a href="#é—®é¢˜ä¸€ï¼š" class="headerlink" title="é—®é¢˜ä¸€ï¼š"></a>é—®é¢˜ä¸€ï¼š</h3><p> <code>Permission denied collect2.exe: error: ld returned 1 exit status</code></p><h3 id="é—®é¢˜äºŒï¼š"><a href="#é—®é¢˜äºŒï¼š" class="headerlink" title="é—®é¢˜äºŒï¼š"></a>é—®é¢˜äºŒï¼š</h3><blockquote><p>æœ‰æ—¶å€™å†™ç¨‹åºçš„æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°getline(cin,str);è¿™æ ·çš„è¯­å¥æ˜¯ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥è·³è¿‡çš„ï¼Œ</p></blockquote><p><strong>è§£é‡Šï¼š</strong></p><p>è®¤çœŸæ£€æŸ¥ï¼Œåœ¨ä½ å†™getline()å‡½æ•°ä¹‹å‰ï¼Œä¸€å®šæœ‰è¾“å…¥è¿‡å›è½¦é”®ï¼Œä¸è®ºä½ è¾“å…¥çš„æ˜¯å­—ç¬¦ï¼Œæ•°å­—æˆ–æ˜¯å›è½¦ï¼Œç©ºæ ¼ç¬¦ï¼Œgetline()å‡½æ•°éƒ½æ¥æ”¶<br>è€Œcin&gt;&gt;è¿™ç§è¾“å…¥æ–¹å¼å´æ˜¯å¿½ç•¥å›è½¦çš„ï¼Œå¦‚æœä½ åœ¨getline()ä¹‹å‰cinçš„ä¸€ä¸ªæ•°ï¼Œå›è½¦è¢«cinå¿½ç•¥äº†ï¼Œå´è¢«getlineå‡½æ•°æ¥æ”¶äº†ï¼Œæ„Ÿè§‰å°±æ˜¯è¿™æ¡è¯­å¥è¢«è·³è¿‡äº† æ‰€ä»¥è§£å†³çš„åŠæ³•æ˜¯åœ¨getlineå‡½æ•°ä¹‹å‰å†ä½¿ç”¨getlineä¸€æ¬¡ï¼Œå°†è¾“å…¥æµé‡Œçš„å›è½¦ç¬¦æ¥æ”¶æ‰ï¼Œåé¢å°±èƒ½æ­£å¸¸è¾“å…¥äº†</p><p><strong>ä¸€èˆ¬çš„è§£å†³æ–¹æ³•æ˜¯getlineä¸€å¥ä¹‹å‰åŠ cin.ignore()æˆ–è€…ä¸€å¥cin.get();,æˆ–è€…é‡å¤geiline</strong></p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysqlå®‰è£…å’Œç®€å•ä½¿ç”¨</title>
      <link href="/2022/04/28/mysql%E5%AE%89%E8%A3%85/"/>
      <url>/2022/04/28/mysql%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰å­¦ä¹ phpçš„æ—¶å€™ï¼Œå¸è½½äº†mysqlï¼Œç°åœ¨å­¦ä¹ javawebå‘ç°å¿˜äº†æ€ä¹ˆå®‰è£…mysqlï¼Œå®‰è£…å®Œäº†æ¥è®°å½•ä¸€ä¸‹ï¼Œä¸ºäº†é˜²æ­¢è‡ªå·±ä»¥åå†æ¬¡é‡æ–°å®‰è£…mysqlä¸çŸ¥é“æ€ä¹ˆåŠ</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æˆ‘æ˜¯ä¸‹è½½çš„mysqlå®‰è£…åŒ…ï¼Œä¸æ˜¯ä¸‹è½½çš„è½¯ä»¶ã€‚<a href="https://downloads.mysql.com/archives/community/">mysqlå®‰è£…åŒ…</a>ï¼Œé€‰æ‹©è‡ªå·±æƒ³è¦å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯5.7.27.</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316118.png" alt="image-20220428172317622"></p><p>é€‰æ‹©win64ç‰ˆæœ¬</p><p>å®‰è£…è§£å‹åï¼Œåœ¨è§£å‹çš„æ–‡ä»¶å¤¹æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª  <code>my.ini</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span></span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®3306ç«¯å£</span></span><br><span class="line">port=3306</span><br><span class="line">character_set_server=utf8</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ç›®å½•</span></span><br><span class="line">basedir=D:\lib\mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ç›®å½•ä¸‹dataç›®å½•</span></span><br><span class="line">datadir=D:\lib\mysql\data</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line">[WinMySQLAdmin]</span><br><span class="line">D:\lib\mysql\bin\mysqld.exe</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h3><ul><li>åœ¨æ–°å¢ç³»ç»Ÿå˜é‡ä¸‹ æ–°å¢ MYSQL_HOME ,è·¯å¾„ä¸º mysqlè§£å‹åçš„æ ¹ç›®å½•ã€‚</li><li>åœ¨ç³»ç»Ÿå˜é‡ä¸­æ–°å¢ <code>%MYSQL_HOME%\bin</code></li></ul><h3 id="åˆå§‹åŒ–mysql"><a href="#åˆå§‹åŒ–mysql" class="headerlink" title="åˆå§‹åŒ–mysql"></a>åˆå§‹åŒ–mysql</h3><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥è‡ªå·±mysqlå®‰è£…ç›®å½•çš„binç›®å½•ä¸‹</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316246.png" alt="image-20220428172909452"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å…ˆè¾“å…¥</span><br><span class="line">mysqld -install</span><br><span class="line"></span><br><span class="line">åˆå§‹åŒ–æ•°æ®åº“</span><br><span class="line">mysqld --initialize --console // åˆå§‹åŒ–mysql</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å…¥<code>mysqld -install</code>æ—¶</p><p>æˆåŠŸï¼šå‡ºç°<code>Service successfully install</code>ä»£è¡¨ä½ å·²ç»å®‰è£…æˆåŠŸ</p><p>å¤±è´¥ï¼šå‡ºç° <code>Install/Remove of the Service Denied!</code>è¡¨ç¤ºå®‰è£…å¤±è´¥</p><p>å¤±è´¥è§£å†³åŠæ³•ï¼š ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½é‡æ–°è¿è¡Œå‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤ï¼Œå³å¯ã€‚</p></blockquote><p>åˆå§‹åŒ–åï¼Œä¼šå¾—åˆ°mysqlçš„åˆå§‹å¯†ç ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316179.png" alt="image-20220428173805741"></p><h3 id="å¯åŠ¨mysql"><a href="#å¯åŠ¨mysql" class="headerlink" title="å¯åŠ¨mysql"></a>å¯åŠ¨mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨mysql</span><br><span class="line"></span><br><span class="line">mysql -u root -p</span><br><span class="line">ç„¶åè¾“å…¥åˆšæ‰çš„å¯†ç ï¼ŒæˆåŠŸå³å¯è¿›å…¥mysqlä¸­</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># è‹¥è¾“å…¥å¯†ç é”™è¯¯ï¼Œåˆ™ä¼šæŠ¥é”™mysqlç™»å½•æŠ¥é”™ï¼šERROR 1045 (28000): Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27; (using password: YES)ï¼Œé‡æ–°è¾“å…¥å¯†ç å³å¯</span></span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316000.png" alt="image-20220428174046851"></p><h3 id="ä¿®æ”¹mysqlå¯†ç "><a href="#ä¿®æ”¹mysqlå¯†ç " class="headerlink" title="ä¿®æ”¹mysqlå¯†ç "></a>ä¿®æ”¹mysqlå¯†ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123456&#x27;</span>;</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">flush privileges;</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>quit</code>é€€å‡º</li><li>è¾“å…¥ <code>mysql -u root -p</code> ï¼Œç„¶åå°è¯•æ–°å¯†ç </li></ul><h2 id="MySQLå‡ºç°çš„é—®é¢˜"><a href="#MySQLå‡ºç°çš„é—®é¢˜" class="headerlink" title="MySQLå‡ºç°çš„é—®é¢˜"></a>MySQLå‡ºç°çš„é—®é¢˜</h2><h3 id="å¯åŠ¨MySQLnet-start-mysqlæ—¶ï¼ŒæŠ¥æœåŠ¡åæ— æ•ˆé”™è¯¯"><a href="#å¯åŠ¨MySQLnet-start-mysqlæ—¶ï¼ŒæŠ¥æœåŠ¡åæ— æ•ˆé”™è¯¯" class="headerlink" title="å¯åŠ¨MySQLnet start mysqlæ—¶ï¼ŒæŠ¥æœåŠ¡åæ— æ•ˆé”™è¯¯"></a>å¯åŠ¨MySQL<code>net start mysql</code>æ—¶ï¼ŒæŠ¥æœåŠ¡åæ— æ•ˆé”™è¯¯</h3><p>è§£å†³åŠæ³•ï¼šè¿›å…¥MySQLçš„å®‰è£…ç›®å½•ä¸‹çš„binç›®å½•ï¼Œä½¿ç”¨ç®¡ç†å‘˜å‘½ä»¤è¡Œçª—å£ï¼Œè¾“å…¥<code>mysqld --install</code></p><ul><li>æç¤ºï¼šService successfully installed å³è¡¨ç¤ºæˆåŠŸ</li><li>è‹¥æç¤º <code>Install/Remove of the Service Denied!</code>ï¼Œè¯·ä½¿ç”¨ç®¡ç†å‘˜å‘½ä»¤è¡Œçª—å£</li></ul><h2 id="MySQLç®€å•ä½¿ç”¨"><a href="#MySQLç®€å•ä½¿ç”¨" class="headerlink" title="MySQLç®€å•ä½¿ç”¨"></a>MySQLç®€å•ä½¿ç”¨</h2><h3 id="MySQLæ•°æ®åº“çš„æ“ä½œ"><a href="#MySQLæ•°æ®åº“çš„æ“ä½œ" class="headerlink" title="MySQLæ•°æ®åº“çš„æ“ä½œ"></a>MySQLæ•°æ®åº“çš„æ“ä½œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">2.åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database æ•°æ®åº“å charset=utf-8;</span><br><span class="line"></span><br><span class="line">3.ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use æ•°æ®åº“å</span><br><span class="line"></span><br><span class="line">4.æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line">5.åˆ é™¤æ•°æ®åº“</span><br><span class="line">drop database æ•°æ®åº“å</span><br></pre></td></tr></table></figure><h3 id="MySQLè¡¨çš„æ“ä½œ"><a href="#MySQLè¡¨çš„æ“ä½œ" class="headerlink" title="MySQLè¡¨çš„æ“ä½œ"></a>MySQLè¡¨çš„æ“ä½œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">1.æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">2.åˆ›å»ºè¡¨</span><br><span class="line">create table è¡¨å(å­—æ®µåç§° æ•°æ®ç±»å‹ å¯é€‰çš„çº¦æŸæ¡ä»¶ï¼Œcolumn1ï¼Œdatatype contraiï¼Œ....);</span><br><span class="line"></span><br><span class="line">3.ä¿®æ”¹è¡¨å­—æ®µç±»å‹</span><br><span class="line">alter table è¡¨å modify åˆ—å ç±»å‹ çº¦æŸ;</span><br><span class="line"></span><br><span class="line">4.ä¿®æ”¹è¡¨ä¸­å­—æ®µå</span><br><span class="line">alter table è¡¨å change åŸå­—æ®µå æ–°å­—æ®µå å­—æ®µç±»å‹;  ## å­—æ®µç±»å‹ä¸èƒ½ä¸ºç©º</span><br><span class="line"></span><br><span class="line">5.åœ¨è¡¨ä¸­æ·»åŠ å­—æ®µ</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># åœ¨æœ€åä¸€åˆ—æ·»åŠ </span></span></span><br><span class="line">alter table è¡¨å add å­—æ®µå å­—æ®µç±»å‹  </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># åœ¨ç¬¬ä¸€åˆ—æ·»åŠ </span></span></span><br><span class="line">alter table è¡¨å add å­—æ®µå å­—æ®µç±»å‹ first</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># åœ¨æŒ‡å®šåˆ—åé¢æ·»åŠ å­—æ®µ</span></span></span><br><span class="line">alter table è¡¨å add å­—æ®µå å­—æ®µç±»å‹ after æŒ‡å®šå­—æ®µ</span><br><span class="line"></span><br><span class="line">6.åˆ é™¤å­—æ®µ</span><br><span class="line">alter table è¡¨å drop å­—æ®µå</span><br><span class="line"></span><br><span class="line">7.ä¿®æ”¹å­—æ®µä½ç½®</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å°†å­—æ®µæ”¾åœ¨ç¬¬ä¸€åˆ—</span></span></span><br><span class="line">alter table è¡¨å modify å­—æ®µå å­—æ®µç±»å‹ first</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å°†å­—æ®µæ”¾åœ¨æŸä¸€åˆ—åé¢</span></span></span><br><span class="line">alter table è¡¨å modify å­—æ®µå å­—æ®µç±»å‹ after æŒ‡å®šå­—æ®µ</span><br><span class="line"></span><br><span class="line">8.åˆ é™¤å¤–é”®çº¦æŸ</span><br><span class="line">alter table è¡¨å drop foreign key å¤–é”®çº¦æŸå</span><br><span class="line"></span><br><span class="line">9.åˆ é™¤è¡¨</span><br><span class="line">drop table è¡¨å</span><br><span class="line"></span><br><span class="line">10.æŸ¥çœ‹è¡¨ç»“æ„</span><br><span class="line">desc è¡¨å;</span><br></pre></td></tr></table></figure><h3 id="MySQLåˆ›å»ºè¡¨çš„å…·ä½“ç±»å‹"><a href="#MySQLåˆ›å»ºè¡¨çš„å…·ä½“ç±»å‹" class="headerlink" title="MySQLåˆ›å»ºè¡¨çš„å…·ä½“ç±»å‹"></a>MySQLåˆ›å»ºè¡¨çš„å…·ä½“ç±»å‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">1.æ·»åŠ ä¸»é”®</span><br><span class="line">id int primary key </span><br><span class="line">æˆ–è€…</span><br><span class="line">id int ,</span><br><span class="line">primary key  (id)  // æ‹¬å·é‡Œå¯ä»¥å†™å¤šä¸ªï¼Œè®¾ç½®å¤šä¸ªä¸»é”®</span><br><span class="line"></span><br><span class="line">2. è®¾ç½®å¤–é”®</span><br><span class="line">CONSTRAINT å¤–é”®å FOREIGN KEY å­—æ®µå REFERENCES ä¸»è¡¨å(ä¸»é”®å)</span><br><span class="line"></span><br><span class="line">3.æ·»åŠ å”¯ä¸€çº¦æŸ</span><br><span class="line">id int unique</span><br><span class="line"></span><br><span class="line">4.æ·»åŠ éç©ºçº¦æŸ</span><br><span class="line">id int not null</span><br><span class="line"></span><br><span class="line">5.è‡ªå¢çº¦æŸ</span><br><span class="line">id int auto_increment</span><br><span class="line"></span><br><span class="line">6.é»˜è®¤çº¦æŸ</span><br><span class="line">id int default &#x27;ç”·&#x27;</span><br><span class="line"></span><br><span class="line">7.åˆ›å»ºè§†å›¾</span><br><span class="line">create view è§†å›¾å as select å­—æ®µå from è¡¨;</span><br><span class="line"></span><br><span class="line">8.åˆ é™¤è§†å›¾</span><br><span class="line">drop view è§†å›¾å</span><br><span class="line"></span><br><span class="line">9.åˆ›å»ºç´¢å¼•</span><br><span class="line">## å”¯ä¸€ç´¢å¼•</span><br><span class="line">create unique index ç´¢å¼•å on `è¡¨å`(`å­—æ®µå`)</span><br><span class="line">## æ™®é€šç´¢å¼•</span><br><span class="line">create index ç´¢å¼•å on `è¡¨å`(`å­—æ®µå`)</span><br><span class="line">## ä¸»é”®ç´¢å¼•</span><br><span class="line">primary key</span><br><span class="line"></span><br><span class="line">10.åˆ›å»ºç»„åˆç´¢å¼•</span><br><span class="line">alter table è¡¨å add index ç´¢å¼•å(ç´¢å¼•z)</span><br></pre></td></tr></table></figure><h3 id="MySQLæŸ¥è¯¢"><a href="#MySQLæŸ¥è¯¢" class="headerlink" title="MySQLæŸ¥è¯¢"></a>MySQLæŸ¥è¯¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">## åŸºæœ¬æŸ¥è¯¢</span><br><span class="line">select * from è¡¨å</span><br><span class="line"></span><br><span class="line">## èŒƒå›´æŸ¥è¯¢</span><br><span class="line">select * from è¡¨å between å€¼ and å€¼</span><br><span class="line"></span><br><span class="line">## æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">select * from è¡¨å where å­—æ®µå like &#x27;%å­—ç¬¦%&#x27;</span><br><span class="line"></span><br><span class="line">## ä»¥ xx å¼€å¤´çš„å­—ç¬¦</span><br><span class="line">select * from è¡¨å where å­—æ®µå like &#x27;xx%&#x27;</span><br><span class="line">## ä»¥ xx ç»“å°¾çš„å­—ç¬¦</span><br><span class="line">select * from è¡¨å where å­—æ®µå like &#x27;%xx&#x27;</span><br><span class="line">## ç¬¬äºŒä¸ªå­—ç¬¦ä¸º x</span><br><span class="line">select * from è¡¨å where å­—æ®µå like &#x27;_x%&#x27;</span><br><span class="line">## å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ä¸º x</span><br><span class="line">select * from è¡¨å where å­—æ®µå like &#x27;%&#x27;</span><br><span class="line"></span><br><span class="line">## å»é™¤é‡å¤çš„ç»“æœ</span><br><span class="line">select distinct å­—æ®µå  from è¡¨å</span><br><span class="line"></span><br><span class="line">## é™åˆ¶æŸ¥è¯¢æ•°é‡</span><br><span class="line">select * from è¡¨å limit 1,4  // æŸ¥è¯¢ç¬¬ 2-5 çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">## å¯¹æŸ¥è¯¢çš„ç»“æœæ’åº</span><br><span class="line">select * from è¡¨å order by å­—æ®µå desc(é™åº)|asc(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æŸ¥è¯¢å’ŒèšåˆæŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢å’ŒèšåˆæŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢å’ŒèšåˆæŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢å’ŒèšåˆæŸ¥è¯¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">## å†…è¿æ¥æŸ¥è¯¢  S,C åˆ†åˆ«æ˜¯è¡¨ student class çš„åˆ«å</span><br><span class="line">select S.id , C.class </span><br><span class="line">from student as S join class as C </span><br><span class="line">where S.classid = C.id; </span><br><span class="line"></span><br><span class="line">## å¤–è¿æ¥æŸ¥è¯¢</span><br><span class="line">## å·¦å¤–è¿æ¥æŸ¥è¯¢  æ˜¾ç¤ºå‡ºæ‰€æœ‰ studentè¡¨ä¸­çš„id </span><br><span class="line">select S.id , C.class </span><br><span class="line">from student as S left join class as C </span><br><span class="line">where S.classid = C.id; </span><br><span class="line"></span><br><span class="line">## å³å¤–è¿æ¥æŸ¥è¯¢  æ˜¾ç¤ºå‡ºæ‰€æœ‰ classè¡¨ä¸­çš„ class </span><br><span class="line">select S.id , C.class </span><br><span class="line">from student as S right join class as C </span><br><span class="line">where S.classid = C.id; </span><br><span class="line"></span><br><span class="line">## èšåˆæŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">count()  è®¡æ•°</span><br><span class="line">sum()   æ±‚å’Œ</span><br><span class="line">avg()   æ±‚å¹³å‡å€¼</span><br><span class="line">max()   æ±‚æœ€å¤§å€¼</span><br><span class="line">min()   æ±‚æœ€å°å€¼</span><br></pre></td></tr></table></figure><h3 id="MySQL-countå¤šä¸ªè¡¨æ“ä½œ"><a href="#MySQL-countå¤šä¸ªè¡¨æ“ä½œ" class="headerlink" title="MySQL countå¤šä¸ªè¡¨æ“ä½œ"></a>MySQL countå¤šä¸ªè¡¨æ“ä½œ</h3><blockquote><p>å‚è€ƒ <a href="https://www.jianshu.com/p/79ea682dbe1f">https://www.jianshu.com/p/79ea682dbe1f</a></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(thesisCount) thesisCount ,</span><br><span class="line">       <span class="built_in">sum</span>(awardCount) awardCount ,</span><br><span class="line">       <span class="built_in">sum</span>(academicCount) academicCount ,</span><br><span class="line">       <span class="built_in">sum</span>(projectCount) projectCount ,</span><br><span class="line">       <span class="built_in">sum</span>(teaAchievementCount) teaAchievementCount</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) thesisCount , <span class="number">0</span> awardCount , <span class="number">0</span> academicCount , <span class="number">0</span> projectCount , <span class="number">0</span> teaAchievementCount</span><br><span class="line">    <span class="keyword">from</span> thesis <span class="keyword">where</span> UserId <span class="operator">=</span> <span class="number">201202001</span> <span class="keyword">and</span> status <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">Year</span>(PublicDate) <span class="operator">=</span> <span class="number">2024</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> <span class="number">0</span> thesisCount,<span class="built_in">count</span>(<span class="operator">*</span>) awardCount , <span class="number">0</span> academicCount , <span class="number">0</span> projectCount , <span class="number">0</span> teaAchievementCount</span><br><span class="line">    <span class="keyword">from</span> award <span class="keyword">where</span> UserId <span class="operator">=</span> <span class="number">201202001</span> <span class="keyword">and</span> status <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">Year</span>(PublicDate) <span class="operator">=</span> <span class="number">2019</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> <span class="number">0</span> thesisCount,<span class="number">0</span> awardCount , <span class="built_in">count</span>(<span class="operator">*</span>) academicCount , <span class="number">0</span> projectCount , <span class="number">0</span> teaAchievementCount</span><br><span class="line">    <span class="keyword">from</span> academicbook <span class="keyword">where</span> UserId <span class="operator">=</span> <span class="number">201202001</span> <span class="keyword">and</span> status <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> PublicYear <span class="operator">=</span> <span class="number">2018</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> <span class="number">0</span> thesisCount,<span class="number">0</span> awardCount , <span class="number">0</span> academicCount , <span class="built_in">count</span>(<span class="operator">*</span>) projectCount , <span class="number">0</span> teaAchievementCount</span><br><span class="line">    <span class="keyword">from</span> scientificproject <span class="keyword">where</span> UserId <span class="operator">=</span> <span class="number">201202001</span> <span class="keyword">and</span> status <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> StartYear <span class="operator">=</span> <span class="number">2018</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> <span class="number">0</span> thesisCount,<span class="number">0</span> awardCount , <span class="number">0</span> academicCount , <span class="number">0</span> projectCount , <span class="built_in">count</span>(<span class="operator">*</span>) teaAchievementCount</span><br><span class="line">    <span class="keyword">from</span> teachachievement <span class="keyword">where</span> UserId <span class="operator">=</span> <span class="number">201202001</span> <span class="keyword">and</span> status <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">Year</span>(<span class="type">Date</span>) <span class="operator">=</span> <span class="number">2019</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     ) userCount;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202403071816434.png" alt="image-20240307181615779"></p><h3 id="MySQL-CRUDæ“ä½œ"><a href="#MySQL-CRUDæ“ä½œ" class="headerlink" title="MySQL-CRUDæ“ä½œ"></a>MySQL-CRUDæ“ä½œ</h3><h4 id="1-å¢åŠ æ•°æ®"><a href="#1-å¢åŠ æ•°æ®" class="headerlink" title="1.å¢åŠ æ•°æ®"></a>1.å¢åŠ æ•°æ®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.å…¨åˆ—æ’å…¥:å€¼çš„é¡ºåºå¿…é¡»å’Œå­—æ®µé¡ºåºå®Œå…¨ä¸€è‡´</span><br><span class="line">insert into è¡¨å values(....);</span><br><span class="line"></span><br><span class="line">2.éƒ¨åˆ†åˆ—æ’å…¥:å€¼çš„é¡ºåºå’Œç»™å‡ºçš„åˆ—çš„é¡ºåºå¯¹åº”</span><br><span class="line">insert into è¡¨å(åˆ—1....) values(å€¼1 ...);</span><br><span class="line"></span><br><span class="line">3.å…¨åˆ—å¤šè¡Œæ’å…¥</span><br><span class="line">insert into è¡¨å values(....),(....),(....);</span><br><span class="line"></span><br><span class="line">4.éƒ¨åˆ†åˆ—å¤šè¡Œæ’å…¥</span><br><span class="line">insert into è¡¨å(åˆ—1....) values(å€¼1 ...),(å€¼1 ...),(å€¼1 ...);</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹æ•°æ®"><a href="#2-ä¿®æ”¹æ•°æ®" class="headerlink" title="2.ä¿®æ”¹æ•°æ®"></a>2.ä¿®æ”¹æ•°æ®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update è¡¨å set åˆ—1 = å€¼1ï¼Œåˆ—1=å€¼2....where æ¡ä»¶</span><br><span class="line"></span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line">update students set age=18,gender = &#x27;å¥³&#x27; where id = 6;</span><br></pre></td></tr></table></figure><h4 id="3-åˆ é™¤æ•°æ®"><a href="#3-åˆ é™¤æ•°æ®" class="headerlink" title="3.åˆ é™¤æ•°æ®"></a>3.åˆ é™¤æ•°æ®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete from è¡¨å where æ¡ä»¶</span><br><span class="line"></span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line">deletefromstudents where id = 5;</span><br></pre></td></tr></table></figure><h3 id="MySQLæ•°æ®-å¤‡ä»½å¯¼å‡º"><a href="#MySQLæ•°æ®-å¤‡ä»½å¯¼å‡º" class="headerlink" title="MySQLæ•°æ®-å¤‡ä»½å¯¼å‡º"></a>MySQLæ•°æ®-å¤‡ä»½å¯¼å‡º</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½-å¯¼å‡ºè¯­æ³•</span></span><br><span class="line">mysqldump -u ç”¨æˆ·å -p å¯†ç  æ•°æ®åº“åå­— è¡¨åå­— &gt; data.sql</span><br></pre></td></tr></table></figure><h3 id="MySQLæ•°æ®-æ¢å¤å¯¼å…¥"><a href="#MySQLæ•°æ®-æ¢å¤å¯¼å…¥" class="headerlink" title="MySQLæ•°æ®-æ¢å¤å¯¼å…¥"></a>MySQLæ•°æ®-æ¢å¤å¯¼å…¥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤å¯¼å…¥è¯­æ³•</span></span><br><span class="line">cd åˆ°æ•°æ®æ–‡ä»¶è·¯å¾„ä¸‹</span><br><span class="line">mysql -u ç”¨æˆ·å -p å¯†ç </span><br><span class="line">use æ•°æ®åº“</span><br><span class="line">source data.sql</span><br></pre></td></tr></table></figure><h2 id="åœ¨Javaä¸­ä½¿ç”¨æ•°æ®åº“ï¼ˆjavaweb-Androidï¼‰"><a href="#åœ¨Javaä¸­ä½¿ç”¨æ•°æ®åº“ï¼ˆjavaweb-Androidï¼‰" class="headerlink" title="åœ¨Javaä¸­ä½¿ç”¨æ•°æ®åº“ï¼ˆjavaweb  Androidï¼‰"></a>åœ¨Javaä¸­ä½¿ç”¨æ•°æ®åº“ï¼ˆjavaweb  Androidï¼‰</h2><h3 id="ideaè¿æ¥mysql"><a href="#ideaè¿æ¥mysql" class="headerlink" title="ideaè¿æ¥mysql"></a>ideaè¿æ¥mysql</h3><p>é¦–å…ˆç¡®ä¿è‡ªå·±çš„mysqlå¯åŠ¨ä¸­ï¼Œç„¶åå†ideaä¸­è¿æ¥mysqlå³å¯</p><p><strong>ï¼ˆå¦‚æœæ²¡æœ‰ä¸‹è½½è¿æ¥çš„jaréœ€è¦å…ˆä¸‹è½½jaråŒ…ï¼Œideaæç¤ºçš„downloadå³å¯ï¼‰</strong></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316146.png" alt="image-20220508140612607"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316156.png" alt="image-20220508140739366"></p><h3 id="Android-Studio-è¿æ¥Mysql"><a href="#Android-Studio-è¿æ¥Mysql" class="headerlink" title="Android Studio è¿æ¥Mysql"></a>Android Studio è¿æ¥Mysql</h3><h4 id="åœ¨mainifests-AndroidManifest-xmlä¸‹åŠ å…¥ä¸€ä¸‹ä¸¤è¡Œä»£ç "><a href="#åœ¨mainifests-AndroidManifest-xmlä¸‹åŠ å…¥ä¸€ä¸‹ä¸¤è¡Œä»£ç " class="headerlink" title="åœ¨mainifests&#x2F;AndroidManifest.xmlä¸‹åŠ å…¥ä¸€ä¸‹ä¸¤è¡Œä»£ç "></a>åœ¨mainifests&#x2F;AndroidManifest.xmlä¸‹åŠ å…¥ä¸€ä¸‹ä¸¤è¡Œä»£ç </h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202205152356754.png" alt="image-20220515233455154"></p><h4 id="ä¸ºå·¥ç¨‹å¯¼å…¥mysql-jaråŒ…"><a href="#ä¸ºå·¥ç¨‹å¯¼å…¥mysql-jaråŒ…" class="headerlink" title="ä¸ºå·¥ç¨‹å¯¼å…¥mysql.jaråŒ…"></a>ä¸ºå·¥ç¨‹å¯¼å…¥mysql.jaråŒ…</h4><p><a href="https://mvnrepository.com/artifact/mysql/mysql-connector-java">ä¸‹è½½åœ°å€</a>ï¼Œä¸‹è½½ä¹‹åï¼Œå°†jaråŒ…æ‹–å…¥libs ï¼ˆprojectä¸‹ï¼‰</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316692.png" alt="image-20220515233851743"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316259.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>å‡ºç°ä¸‹å›¾è¿™å‡ ä¸ªä¸œè¥¿ï¼Œè¡¨ç¤ºæˆåŠŸ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172316591.png" alt="image-20220515234056852"></p><h4 id="è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨jdbc"><a href="#è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨jdbc" class="headerlink" title="è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨jdbc"></a>è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨jdbc</h4><p>æ–°å»ºä¸€ä¸ªmysqlçš„æ•°æ®è¿æ¥ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">// An highlighted block</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySQLConnections</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="comment">// è‡ªå·±çš„æ•°æ®åº“ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„äº‘æ•°æ®åº“ï¼Œä¸ªäººæœ¬åœ°è¿æ¥æ•°æ®åº“æœ‰æ‰€ä¸åŒï¼Œè¯·è‡ªè¡Œç™¾åº¦</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–æ•°æ®åº“çš„è¿æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åŠ è½½é©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// è¿æ¥æ•°æ®åº“</span></span><br><span class="line">            connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">closeResource</span><span class="params">(Connection connection, ResultSet resultSet, PreparedStatement preparedStatement)</span>&#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(resultSet != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">                resultSet = <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(connection != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">                connection = <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(preparedStatement != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                preparedStatement.close();</span><br><span class="line">                preparedStatement = <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨Androidæ´»åŠ¨ä¸‹ç¼–å†™æ´»åŠ¨çš„ç±»ï¼Œè°ƒç”¨mysql"><a href="#åœ¨Androidæ´»åŠ¨ä¸‹ç¼–å†™æ´»åŠ¨çš„ç±»ï¼Œè°ƒç”¨mysql" class="headerlink" title="åœ¨Androidæ´»åŠ¨ä¸‹ç¼–å†™æ´»åŠ¨çš„ç±»ï¼Œè°ƒç”¨mysql"></a>åœ¨Androidæ´»åŠ¨ä¸‹ç¼–å†™æ´»åŠ¨çš„ç±»ï¼Œè°ƒç”¨mysql</h4><p><strong>æ³¨ï¼šåœ¨Android ä¸­ä½¿ç”¨mysqlï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ‰èƒ½å¤Ÿè¿›è¡Œæ•°æ®åº“çš„æ“ä½œ</strong></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Looper;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.henu.eltfood.DataSystem.MySQLConnections;</span><br><span class="line"><span class="keyword">import</span> com.henu.eltfood.Main.register_view;</span><br><span class="line"><span class="keyword">import</span> com.henu.eltfood.R;</span><br><span class="line"><span class="keyword">import</span> com.henu.eltfood.util.Constant;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Myinfoname</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span>  &#123;</span><br><span class="line">    Connection con;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_myinfoname);</span><br><span class="line"></span><br><span class="line">        <span class="type">EditText</span> <span class="variable">editq</span> <span class="operator">=</span> <span class="built_in">super</span>.findViewById(R.id.edit1);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">back4</span> <span class="operator">=</span> <span class="built_in">super</span>.findViewById(R.id.back4);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn2</span> <span class="operator">=</span> <span class="built_in">super</span>.findViewById(R.id.mbtn2);</span><br><span class="line"></span><br><span class="line">        editq.setText(Constant.username);</span><br><span class="line">        back4.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        btn2.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">// æ–°å»ºä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            con = MySQLConnections.getConnection();</span><br><span class="line">                        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                            Looper.prepare();</span><br><span class="line">                            Toast.makeText(Myinfoname.<span class="built_in">this</span>, <span class="string">&quot;è¿æ¥æ•°æ®åº“å¤±è´¥&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                            Looper.loop();</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="comment">// sqlè¯­å¥</span></span><br><span class="line">                            sql1 = <span class="string">&quot;update account set username = ? where id = ?&quot;</span>;</span><br><span class="line">                            sql = <span class="string">&quot;select count(1) as sl from text&quot;</span>;</span><br><span class="line">                            stmt = con.prepareStatement(sql1);</span><br><span class="line">                        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                            Looper.prepare();</span><br><span class="line">                            Toast.makeText(Myinfoname.<span class="built_in">this</span>, <span class="string">&quot;é¢„ç¼–è¯‘å¤±è´¥&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                            Looper.loop();</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">fir</span> <span class="operator">=</span> editq.getText().toString();</span><br><span class="line">                            stmt.setString(<span class="number">1</span>,fir);</span><br><span class="line">                            <span class="comment">// Constant æ˜¯æˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªé™æ€ç±»ï¼Œç”¨æ¥å­˜å‚¨ç™»å½•è¿›æ¥ç”¨æˆ·çš„å„ç§æ•°æ®</span></span><br><span class="line">                            stmt.setInt(<span class="number">2</span>, Constant.id);</span><br><span class="line">                            <span class="type">int</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeUpdate();</span><br><span class="line">                            <span class="keyword">if</span>(rs &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                                Looper.prepare();</span><br><span class="line">                                Toast.makeText(Myinfoname.<span class="built_in">this</span>,<span class="string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                                Looper.loop();</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span>&#123;</span><br><span class="line">                                Looper.prepare();</span><br><span class="line">                                Toast.makeText(Myinfoname.<span class="built_in">this</span>, <span class="string">&quot;ä¿®æ”¹å¤±è´¥&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                                Looper.loop();</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                            Looper.prepare();</span><br><span class="line">                            Toast.makeText(Myinfoname.<span class="built_in">this</span>, <span class="string">&quot;è·å–å¤±è´¥&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                            Looper.loop();</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    MySQLConnections.closeResource(con,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javawebå­¦ä¹ </title>
      <link href="/2022/04/23/javaweb%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/04/23/javaweb%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><p>å¼€å‘ä¸€ä¸ªServletåªéœ€è¦ä¸¤éƒ¨ï¼š</p><ul><li>ç¼–å†™ä¸€ä¸ªç±»ï¼Œå®ç°Servletæ¥å£</li><li>æŠŠå¼€å‘å¥½çš„javaç±»éƒ¨ç½²åˆ°webæœåŠ¡å™¨ä¸Š</li></ul><p><strong>æŠŠå®ç°äº†Servletçš„javaç¨‹åºå«åšSevlet</strong></p><h2 id="æ¯æ¬¡éƒ½è¦å…ˆè¿›è¡Œweb-xmlä¿®æ”¹"><a href="#æ¯æ¬¡éƒ½è¦å…ˆè¿›è¡Œweb-xmlä¿®æ”¹" class="headerlink" title="æ¯æ¬¡éƒ½è¦å…ˆè¿›è¡Œweb.xmlä¿®æ”¹"></a>æ¯æ¬¡éƒ½è¦å…ˆè¿›è¡Œweb.xmlä¿®æ”¹</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>ç¼–å†™ä¸€ä¸ªç±»ï¼Œå®ç°servletæ¥å£ï¼Œç›´æ¥ç»§æ‰¿<code>HttpServlet</code></p><p>å¿«é€Ÿè°ƒç”¨ç±»çš„æ–¹æ³•çš„å¿«æ·é”®  <code>ctrl + o</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        super.doGet(req, resp);</span></span><br><span class="line"><span class="comment">//        try (ServletOutputStream servletOutputStream = resp.getOutputStream()) &#123;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> (<span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> resp.getWriter()) &#123; <span class="comment">// å“åº”æµ</span></span><br><span class="line">            printWriter.print(<span class="string">&quot;hello servlet&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--æ³¨å†Œservlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--servletçš„è¯·æ±‚è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h2><p>webå®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªwebç¨‹åºéƒ½åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ServletConTextå¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†å½“å‰çš„webåº”ç”¨ï¼›</p><h3 id="1-å…±äº«æ•°æ®"><a href="#1-å…±äº«æ•°æ®" class="headerlink" title="1.å…±äº«æ•°æ®"></a>1.å…±äº«æ•°æ®</h3><p>æˆ‘åœ¨è¿™ä¸ªServletä¸­ä¿å­˜çš„æ•°æ®ï¼Œå¯ä»¥åœ¨å¦ä¸€ä¸ªServletçš„æ‰¾åˆ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">helloservlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        this.getInitParameter()   åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line"><span class="comment">//        this.getServletConfig()   servleté…ç½®åŸç†</span></span><br><span class="line"><span class="comment">//        this.getServletInfo()     servletä¸Šä¸‹æ–‡</span></span><br><span class="line"></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;likunsong&quot;</span>;</span><br><span class="line">        context.setAttribute(<span class="string">&quot;username&quot;</span>,username);   <span class="comment">// å°†ä¸€ä¸ªæ•°æ®ä¿å­˜åœ¨ServletContextä¸­ï¼Œåå­—ä¸ºusernameï¼Œå€¼ä¸º username</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) context.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.getWriter().print(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.helloservlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.GetServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getc<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-è·å–åˆå§‹åŒ–å‚æ•°"><a href="#2-è·å–åˆå§‹åŒ–å‚æ•°" class="headerlink" title="2.è·å–åˆå§‹åŒ–å‚æ•°"></a>2.è·å–åˆå§‹åŒ–å‚æ•°</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo03<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.ServletDemo03<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo03<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> context.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        resp.getWriter().print(url);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="3-è¯·æ±‚è½¬å‘"><a href="#3-è¯·æ±‚è½¬å‘" class="headerlink" title="3.è¯·æ±‚è½¬å‘"></a>3.è¯·æ±‚è½¬å‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        RequestDispatcher requestDispatcher = context.getRequestDispatcher(&quot;/demo&quot;);   // è½¬å‘çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">//        requestDispatcher.forward(req,resp);  // ç”¨forwordå®ç°è¯·æ±‚è½¬å‘</span></span><br><span class="line"></span><br><span class="line">        context.getRequestDispatcher(<span class="string">&quot;/demo&quot;</span>).forward(req,resp);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥äº†ServlDemo04&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo04<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.ServletDemo04<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo04<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo4<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-è¯»å–èµ„æºæ–‡ä»¶"><a href="#4-è¯»å–èµ„æºæ–‡ä»¶" class="headerlink" title="4.è¯»å–èµ„æºæ–‡ä»¶"></a>4.è¯»å–èµ„æºæ–‡ä»¶</h3><p>Properties</p><ul><li>åœ¨javaç›®å½•ä¸‹æ–°å»ºproperties</li><li>åœ¨resourcesç›®å½•ä¸‹æ–°å»ºproperties</li></ul><p>å‘ç°éƒ½è¢«æ‰“åŒ…æ‰“äº†åŒä¸€ä¸ªè·¯å¾„ä¸‹ï¼šclasses ï¼Œæˆ‘ä»¬ä¿—ç§°è¿™ä¸ªè·¯å¾„ä¸ºclasspathï¼›</p><p>æ€è·¯ï¼šéœ€è¦ä¸€ä¸ªæ–‡ä»¶æµï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span> = <span class="string">root</span></span><br><span class="line"><span class="attr">password</span> = <span class="string">123456</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/WEB-INF/classes/db.properties&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(is);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        resp.getWriter().print(username+<span class="string">&quot; &quot;</span>+password);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®æµ‹è¯•å³å¯ã€‚</p><h2 id="HttpServletResponse"><a href="#HttpServletResponse" class="headerlink" title="HttpServletResponse"></a>HttpServletResponse</h2><p>webæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„httpè¯·æ±‚ï¼Œä¼šé’ˆå¯¹è¿™ä¸ªè¯·æ±‚åˆ†åˆ«åˆ›å»ºä¸€ä¸ªä»£è¡¨è¯·æ±‚çš„requestçš„å¯¹è±¡ï¼Œå’Œä¸€ä¸ªä»£è¡¨ç›¸åº”çš„responseå¯¹è±¡</p><ul><li>å¦‚æœè¦è·å–æˆ‘ä»¬å®¢æˆ·ç«¯è¯·æ±‚çš„å‚æ•°ï¼Œæ‰¾request</li><li>å¦‚æœè¦ç»™å®¢æˆ·ç«¯å“åº”ä¸€äº›ä¸œè¥¿ï¼Œæ‰¾response</li></ul><h3 id="1-å¸¸è§åº”ç”¨"><a href="#1-å¸¸è§åº”ç”¨" class="headerlink" title="1.å¸¸è§åº”ç”¨"></a>1.å¸¸è§åº”ç”¨</h3><ol><li>å‘æµè§ˆå™¨å‘é€æ¶ˆæ¯</li><li>ä¸‹è½½æ–‡ä»¶<ol><li>è·å–è¦ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„</li><li>ä¸‹è½½çš„æ–‡ä»¶å</li><li>è®¾ç½®æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒæˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿</li><li>è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ</li><li>åˆ›å»ºç¼“å­˜åŒº</li><li>è·å–OUTputStreamå¯¹è±¡</li><li>ä½¿FileOutStreamæµå†™å…¥bufferç¼“å†²åŒº</li><li>ä½¿ç”¨OutputStreamå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯</li></ol></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// è·å–è¦ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">    <span class="comment">//        String realPath = this.getServletContext().getRealPath(&quot;/1.jpg&quot;);</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="string">&quot;E:\\project\\demo\\javaweb-02-servlet\\response\\src\\main\\resources\\1.jpg&quot;</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„&quot;</span>+realPath);</span><br><span class="line">    <span class="comment">// ä¸‹è½½çš„æ–‡ä»¶å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒæˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿</span></span><br><span class="line">    resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+filename);</span><br><span class="line">    <span class="comment">//        ä¸­æ–‡åå­—ä½¿ç”¨URLEcoder.encodeç¼–ç ï¼Œå¦åˆ™æœ‰å¯èƒ½ä¹±ç </span></span><br><span class="line">    <span class="comment">//        resp.setHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+URLEncoder.encode(filename,&quot;UTF-8&quot;);</span></span><br><span class="line">    <span class="comment">// è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">    <span class="comment">// åˆ›å»ºç¼“å­˜åŒº</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="comment">// è·å–OUTputStreamå¯¹è±¡</span></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">    <span class="comment">// ä½¿FileOutStreamæµå†™å…¥bufferç¼“å†²åŒº,ä½¿ç”¨OutputStreamå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯</span></span><br><span class="line">    <span class="keyword">while</span>((len = in.read(buffer))&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        out.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line">    in.close();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-éªŒè¯ç åŠŸèƒ½"><a href="#2-éªŒè¯ç åŠŸèƒ½" class="headerlink" title="2.éªŒè¯ç åŠŸèƒ½"></a>2.éªŒè¯ç åŠŸèƒ½</h3><p>éªŒè¯ç æ€ä¹ˆæ¥çš„ï¼Ÿ</p><ul><li>å‰ç«¯å®ç°</li><li>åç«¯å®ç°ï¼Œéœ€è¦ç”¨åˆ°javaçš„å›¾ç‰‡ç±»ï¼Œç”Ÿæˆä¸€ä¸ªå›¾ç‰‡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// å¦‚ä½•è®©æµè§ˆå™¨5ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;5&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨å†…å­˜ä¸­åˆ›å»ºå›¾ç‰‡</span></span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedImage</span>(<span class="number">80</span>,<span class="number">20</span>,BufferedImage.TYPE_INT_RGB);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾—åˆ°å›¾ç‰‡</span></span><br><span class="line">        <span class="type">Graphics2D</span> <span class="variable">g</span> <span class="operator">=</span> (Graphics2D) image.getGraphics(); <span class="comment">// ç¬”</span></span><br><span class="line">        <span class="comment">// è®¾ç½®å›¾ç‰‡çš„èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">        g.setColor(Color.white);</span><br><span class="line">        g.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">80</span>,<span class="number">20</span>);</span><br><span class="line">        <span class="comment">// ç»™å›¾ç‰‡å†™æ•°æ®</span></span><br><span class="line">        g.setColor(Color.BLUE);</span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="literal">null</span>,Font.BOLD,<span class="number">20</span>));</span><br><span class="line">        g.drawString(makeNum(),<span class="number">0</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªè¯·æ±‚ç”¨å›¾ç‰‡çš„æ–¹å¼æ‰“å¼€</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">        <span class="comment">// ç½‘ç«™å­˜åœ¨ç¼“å­˜,ä¸ç„¶æµè§ˆå™¨ç¼“å­˜</span></span><br><span class="line">        resp.setDateHeader(<span class="string">&quot;expires&quot;</span>,-<span class="number">1</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Cache-Control&quot;</span>,<span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Prama&quot;</span>,<span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠŠå›¾ç‰‡å†™ç»™æµè§ˆå™¨</span></span><br><span class="line">        ImageIO.write(image,<span class="string">&quot;jpg&quot;</span>, resp.getOutputStream());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆéšæœºæ•°</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">makeNum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">num</span> <span class="operator">=</span> random.nextInt(<span class="number">9999999</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">7</span> - num.length();i ++)&#123;</span><br><span class="line">            sb.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> sb.toString() + num;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>img<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.ImageServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>img<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/img<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-å®ç°é‡å®šå‘"><a href="#3-å®ç°é‡å®šå‘" class="headerlink" title="3.å®ç°é‡å®šå‘"></a>3.å®ç°é‡å®šå‘</h3><p>Bä¸€ä¸ªwebèµ„æºæ”¶åˆ°å®¢æˆ·ç«¯Aè¯·æ±‚åï¼ŒBä»–ä¼šé€šçŸ¥Aå®¢æˆ·ç«¯å»è®¿é—®å¦ä¸€ä¸ªwebèµ„æºCï¼Œè¿™ä¸ªè¿‡ç¨‹å«é‡å®šå‘</p><p>å¸¸è§åœºæ™¯</p><ul><li><p>ç”¨æˆ·ç™»å½•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">sendRedirect</span><span class="params">(String varl)</span> <span class="keyword">throws</span> IOException</span><br></pre></td></tr></table></figure></li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">resp.setHeader(&quot;Location&quot;,&quot;/r/img&quot;);</span></span><br><span class="line"><span class="comment">resp.setStatus(302);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">resp.sendRedirect(<span class="string">&quot;/r/img&quot;</span>); <span class="comment">//é‡å®šå‘</span></span><br></pre></td></tr></table></figure><p>é¢è¯•é¢˜ï¼šè¯·ä½ èŠä¸€èŠè½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«ï¼Ÿ</p><p>ç›¸åŒç‚¹</p><ul><li>é¡µé¢éƒ½ä¼šå®ç°è·³è½¬</li></ul><p>ä¸åŒç‚¹</p><ul><li>è¯·æ±‚è½¬å‘çš„æ—¶å€™ï¼Œurlä¸ä¼šå‘ç”Ÿå˜åŒ–</li><li>é‡å®šå‘çš„æ—¶å€™ï¼Œurlä¼šå‘ç”Ÿå˜åŒ–</li></ul><p>ç™»å½•å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// è·å–è¯·æ±‚</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(username+<span class="string">&quot;&quot;</span>+password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡å®šå‘çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™404</span></span><br><span class="line">    resp.sendRedirect(<span class="string">&quot;/r/success.jsp&quot;</span>);</span><br><span class="line">    <span class="comment">// è‡ªå·±å†™çš„jspï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªsuccessçš„å­—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="comment">// é˜²æ­¢ä¹±ç </span></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;&quot;</span> pageEncoding=<span class="string">&quot;utf-8&quot;</span> %&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    ç”¨æˆ·åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    å¯†ç ï¼š&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>request<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.Requestext<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>request<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h2><p>ä»£è¡¨å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œé€šè¿‡httpåè®®è®¿é—®æœåŠ¡å™¨ï¼Œhttpè¯·æ±‚ä¸­çš„æ‰€æœ‰ä¿¡æ¯ä¼šè¢«å°è£…åˆ°httpservletrequestã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å¾—å®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚</p><h3 id="1-è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼Œè¯·æ±‚è½¬å‘"><a href="#1-è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼Œè¯·æ±‚è½¬å‘" class="headerlink" title="1.è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼Œè¯·æ±‚è½¬å‘"></a>1.è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼Œè¯·æ±‚è½¬å‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// è§£å†³å‡ºç°çš„ä¹±ç é—®é¢˜</span></span><br><span class="line">    resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    String[] hobbys = req.getParameterValues(<span class="string">&quot;hobbys&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;===========================&quot;</span>);</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    System.out.println(password);</span><br><span class="line">    System.out.println(Arrays.toString(hobbys));</span><br><span class="line">    System.out.println(<span class="string">&quot;===========================&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡è¯·æ±‚è½¬å‘</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯´æ˜ï¼Œè¿™é‡Œçš„ / ä»£è¡¨å½“å‰çš„webåº”ç”¨,æ‰€ä»¥ä¸éœ€è¦åœ¨å‰é¢åŠ è·¯å¾„äº†</span></span><br><span class="line">    req.getRequestDispatcher(<span class="string">&quot;/loginsuccess.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># index.jsp</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ç™»å½•&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;ç™»å½•&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;%--è¡¨å•è¡¨ç¤ºçš„æ„æ€ï¼Œä»¥postçš„æ–¹å¼æäº¤è¡¨å•ï¼Œæäº¤åˆ°æˆ‘ä»¬çš„loginè¯·æ±‚--%&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        ç”¨æˆ·åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        å¯†ç ï¼š&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        çˆ±å¥½ï¼š</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;ä»£ç &quot;</span>&gt; ä»£ç </span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;å”±æ­Œ&quot;</span>&gt; å”±æ­Œ</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;ç”µå½±&quot;</span>&gt; ç”µå½±</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbys&quot;</span> value=<span class="string">&quot;æ¸¸æˆ&quot;</span>&gt; æ¸¸æˆ</span><br><span class="line"></span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># loginsuccess.jsp</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;ç™»å½•æˆåŠŸ&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>é¢è¯•é¢˜ï¼šè¯·ä½ èŠä¸€èŠè½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«ï¼Ÿ</strong></p><p>ç›¸åŒç‚¹</p><ul><li>é¡µé¢éƒ½ä¼šå®ç°è·³è½¬</li></ul><p>ä¸åŒç‚¹</p><ul><li>è¯·æ±‚è½¬å‘çš„æ—¶å€™ï¼Œurlä¸ä¼šå‘ç”Ÿå˜åŒ– ; 307</li><li>é‡å®šå‘çš„æ—¶å€™ï¼Œurlä¼šå‘ç”Ÿå˜åŒ–; 302</li></ul><h1 id="cookie-session"><a href="#cookie-session" class="headerlink" title="cookie session"></a>cookie session</h1><h2 id="1-ä¼šè¯"><a href="#1-ä¼šè¯" class="headerlink" title="1.ä¼šè¯"></a>1.ä¼šè¯</h2><p>ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œç‚¹å‡»äº†è¶…é“¾æ¥ï¼Œè®¿é—®å¤šä¸ªwebèµ„æºï¼Œå…³é—­æµè§ˆå™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä¸ºä¼šè¯ã€‚</p><p><strong>æœ‰çŠ¶æ€ä¼šè¯</strong>  </p><p><strong>ä¸€ä¸ªç½‘ç«™æ€ä¹ˆè¯æ˜ä½ æ¥è¿‡</strong></p><p>å®¢æˆ·ç«¯              æœåŠ¡ç«¯</p><ol><li>æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯ä¸€ä¸ªä¿¡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸‹æ¬¡è®¿é—®æœåŠ¡ç«¯å¸¦ä¸Šä¿¡ä»¶å°±å¯ä»¥äº†ï¼›cookie</li><li>æœåŠ¡å™¨ç™»è®°ä½ æ¥è¿‡äº†ï¼Œä¸‹æ¬¡ä½ æ¥çš„æ—¶å€™ï¼Œæˆ‘æ¥åŒ¹é…ä½ </li></ol><h2 id="2-ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯"><a href="#2-ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯" class="headerlink" title="2.ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯"></a>2.ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯</h2><p><strong>cookie</strong></p><ul><li>å®¢æˆ·ç«¯æŠ€æœ¯ï¼ˆå“åº”ï¼Œè¯·æ±‚ï¼‰</li></ul><p><strong>session</strong></p><ul><li>æœåŠ¡å™¨æŠ€æœ¯ï¼Œåˆ©ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯æˆ–è€…æ•°æ®æ”¾åœ¨sessionä¸­</li></ul><p>å¸¸è§ä¾‹å­ï¼šç½‘ç«™ç™»å½•ä¹‹åï¼Œç¬¬äºŒæ¬¡è®¿é—®ä¸ç”¨ç™»å½•ï¼Œç›´æ¥å°±ç™»ä¸Šå»</p><h2 id="3-cookie"><a href="#3-cookie" class="headerlink" title="3.cookie"></a>3.cookie</h2><ol><li>ä»è¯·æ±‚ä¸­æ‹¿åˆ°cookieä¿¡æ¯</li><li>æœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯cookie</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = req.getCookies(); <span class="comment">// è·å¾—cookie</span></span><br><span class="line">cookie.getName() <span class="comment">// è·å¾—cookieä¸­çš„key</span></span><br><span class="line">cookie.getValue() <span class="comment">// è·å¾—cookieä¸­çš„å€¼</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;Lasttime&quot;</span>, System.currentTimeMillis()+<span class="string">&quot;&quot;</span>); <span class="comment">// æ–°å»ºä¸€ä¸ªcookie</span></span><br><span class="line">cookie.setMaxAge(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>); <span class="comment">// è®¾ç½®cookieçš„æœ‰æ•ˆæœŸ</span></span><br><span class="line">resp.addCookie(cookie);  <span class="comment">// å“åº”ç»™å®¢æˆ·ç«¯</span></span><br></pre></td></tr></table></figure><p><strong>cookieï¼šä¸€èˆ¬ä¼šä¿å­˜åœ¨æœ¬åœ°çš„ ç”¨æˆ·ç›®å½•ä¸‹ appdata</strong></p><p>ä¸€ä¸ªç½‘ç«™cookieæ˜¯å¦å­˜åœ¨ä¸Šé™</p><p><strong>ç»†èŠ‚é—®é¢˜</strong></p><ul><li>ä¸€ä¸ªcookieåªèƒ½ä¿å­˜ä¸€ä¸ªä¿¡æ¯</li><li>ä¸€ä¸ªwebç«™ç‚¹å¯ä»¥ç»™æµè§ˆå™¨å‘é€å¤šä¸ªcookieï¼Œæœ€å¤š20ä¸ª</li><li>cookieå¤§å°æœ‰é™åˆ¶4kb</li><li>æµè§ˆå™¨cookieä¸Šé™300ä¸ª</li></ul><p>åˆ é™¤cookieï¼š</p><ul><li>ä¸è®¾ç½®æœ‰æ•ˆæœŸï¼Œå…³é—­æµè§ˆå™¨ï¼Œè‡ªåŠ¨å¤±æ•ˆ</li><li>æŠŠæœ‰æ•ˆæœŸè®¾ç½®ä¸º0</li></ul><h2 id="4-sessionï¼ˆé‡ç‚¹ï¼‰"><a href="#4-sessionï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="4.sessionï¼ˆé‡ç‚¹ï¼‰"></a>4.sessionï¼ˆé‡ç‚¹ï¼‰</h2><p>ä»€ä¹ˆæ˜¯session</p><ul><li>æœåŠ¡å™¨ä¼šç»™æ¯ä¸€ä¸ªç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰åˆ›å»ºä¸€ä¸ªsessionå¯¹è±¡</li><li>ä¸€ä¸ªsessionç‹¬å ä¸€ä¸ªæµè§ˆå™¨ï¼Œåªè¦æµè§ˆå™¨æ²¡æœ‰å…³é—­ï¼Œè¿™ä¸ªsessionå°±å­˜åœ¨</li><li>ç”¨æˆ·ç™»å½•ä¹‹åï¼Œæ•´ä¸ªç½‘ç«™ä»–éƒ½èƒ½è®¿é—® â€”-ã€‹ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯ï¼Œä¿å­˜è´­ç‰©è½¦çš„ä¿¡æ¯â€¦.</li></ul><p>Sessionå’Œcookieçš„åŒºåˆ«</p><ul><li>cookieæ˜¯å§ç”¨æˆ·çš„æ•°æ®æ”¾åœ¨æµè§ˆå™¨ä¿å­˜</li><li>sessionæŠŠç”¨æˆ·çš„æ•°æ®å†™åˆ°ç”¨æˆ·ç‹¬å sessionä¸­ï¼ŒæœåŠ¡ç«¯åŒ…ä¿å­˜ï¼ˆä¿å­˜é‡è¦çš„ä¿¡æ¯ï¼Œè¾ƒå°‘æœåŠ¡å™¨è‡ªæ„¿çš„æµªè´¹ï¼‰</li><li>sessionå¯¹è±¡ç”±æœåŠ¡åˆ›å»º</li></ul><p>ä½¿ç”¨åœºæ™¯</p><ul><li>ä¿å­˜ä¸€ä¸ªç™»å½•ç”¨æˆ·çš„ä¿¡æ¯</li><li>è´­ç‰©è½¦ä¿¡æ¯</li><li>åœ¨æ•´ä¸ªç½‘ç«™ä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°çš„æ•°æ®ï¼Œä¿å­˜åœ¨sessionä¸­</li></ul><p>ä½¿ç”¨session</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å†³ä¹±ç é—®é¢˜</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"><span class="comment">// å¾—åˆ°session</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™sessionå­˜ä¸œè¥¿</span></span><br><span class="line">session.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;æå¤æ¾&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–sessionçš„ID</span></span><br><span class="line"><span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­sessionæ–°åˆ›å»º</span></span><br><span class="line"><span class="keyword">if</span>(session.isNew())&#123;</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;sessionå·²ç»åˆ›å»ºæˆåŠŸï¼ŒID&quot;</span>+id);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">resp.getWriter().write(<span class="string">&quot;sessionä»¥åŠåœ¨æœåŠ¡å™¨ä¸­å­˜åœ¨äº†ï¼ŒID&quot;</span>+id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰‹åŠ¨æ³¨é”€session</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure><p><strong>ä¼šè¯è‡ªåŠ¨è¿‡æœŸï¼šweb.xmléƒ¨ç½²</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 15åˆ†é’Ÿåsessionè‡ªåŠ¨å¤±æ•ˆï¼Œä»¥åˆ†é’Ÿä¸ºå•ä½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h1><h2 id="1-ä»€ä¹ˆæ˜¯jsp"><a href="#1-ä»€ä¹ˆæ˜¯jsp" class="headerlink" title="1.ä»€ä¹ˆæ˜¯jsp"></a>1.ä»€ä¹ˆæ˜¯jsp</h2><p>æœ€å¤§çš„ç‰¹ç‚¹ï¼š</p><ul><li>å†™jspå°±åƒå†™html</li><li>åŒºåˆ«<ul><li>htmlåªæä¾›åŠ¨æ€ç•Œé¢</li><li>Jspä¸­å¯ä»¥åµŒå…¥javaä»£ç ï¼Œä¸ºç”¨æˆ·æä¾›åŠ¨æ€æ•°æ®</li></ul></li></ul><h2 id="2-JspåŸç†"><a href="#2-JspåŸç†" class="headerlink" title="2.JspåŸç†"></a>2.JspåŸç†</h2><p>æ€è·¯ï¼šjspæ€ä¹ˆæ‰§è¡Œ</p><ul><li><p>ä»£ç å±‚é¢æ²¡æœ‰ä»»ä½•é—®é¢˜</p></li><li><p>æœåŠ¡å™¨å†…éƒ¨å·¥ä½œ</p><p>tomcatå†…éƒ¨æœ‰ä¸€ä¸ªworkç›®å½•</p><p>IDEAä¸­ä½¿ç”¨tomcatä¼šåœ¨ideaä¸­ç”Ÿäº§ä¸€ä¸ªworkç›®å½•</p></li></ul><p>JSPæœ¬è´¨è¿˜æ˜¯ä¸€ä¸ªServlet</p><p>JSPè¡¨è¾¾å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">ä½œç”¨ï¼š ç”¨æ¥å°†ç¨‹åºè¾“å‡ºï¼Œè¾“å‡ºåˆ°å®¢æˆ·ç«¯</span><br><span class="line">    &lt;%=b%&gt;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><h2 id="3-jspæ ‡ç­¾ï¼ŒJSTLæ ‡ç­¾ï¼ŒELè¡¨è¾¾å¼"><a href="#3-jspæ ‡ç­¾ï¼ŒJSTLæ ‡ç­¾ï¼ŒELè¡¨è¾¾å¼" class="headerlink" title="3.jspæ ‡ç­¾ï¼ŒJSTLæ ‡ç­¾ï¼ŒELè¡¨è¾¾å¼"></a>3.jspæ ‡ç­¾ï¼ŒJSTLæ ‡ç­¾ï¼ŒELè¡¨è¾¾å¼</h2><h3 id="ä½¿ç”¨JSTL"><a href="#ä½¿ç”¨JSTL" class="headerlink" title="ä½¿ç”¨JSTL"></a>ä½¿ç”¨JSTL</h3><ul><li><p>å¯¼å…¥ä¾èµ–ï¼ˆpom.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥jspåæ ‡--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/jsp-api --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥jstlåæ ‡--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨jspç•Œé¢ä¸Šå¼•å…¥JSTLæ ‡ç­¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="JSTLä½¿ç”¨çš„è¯­æ³•"><a href="#JSTLä½¿ç”¨çš„è¯­æ³•" class="headerlink" title="JSTLä½¿ç”¨çš„è¯­æ³•"></a>JSTLä½¿ç”¨çš„è¯­æ³•</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">ArrayList&lt;String &gt; people = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">people.add(<span class="number">0</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">people.add(<span class="number">1</span>,<span class="string">&quot;ç”°ä¸ƒ&quot;</span>);</span><br><span class="line">people.add(<span class="number">2</span>,<span class="string">&quot;èµµå…­&quot;</span>);</span><br><span class="line">people.add(<span class="number">3</span>,<span class="string">&quot;ç‹äº”&quot;</span>);</span><br><span class="line">people.add(<span class="number">4</span>,<span class="string">&quot;é‡Œæ–¯&quot;</span>);</span><br><span class="line"></span><br><span class="line">request.setAttribute(<span class="string">&quot;list&quot;</span>,people);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;hello.jsp&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;param.username&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;people&quot;</span> items=<span class="string">&quot;$&#123;list&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;people&#125;&quot;</span>/&gt; &lt;br&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;param.username == &#x27;admin&#x27;&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;admincheck&quot;</span>&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;ç®¡ç†å‘˜æ¬¢è¿ä½ &quot;</span>/&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:set value=<span class="string">&quot;111&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;scope&quot;</span>/&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">&quot;$&#123;scope &gt; 90&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;c:out value=<span class="string">&quot;ä½ çš„æˆç»©ä¸ºä¼˜ç§€&quot;</span>/&gt;</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">&quot;$&#123;scope &gt; 80&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;c:out value=<span class="string">&quot;ä½ çš„æˆç»©ä¸ºè‰¯å¥½&quot;</span>/&gt;</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">&quot;$&#123;scope &gt; 70&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;c:out value=<span class="string">&quot;ä½ çš„æˆç»©ä¸ºä¸€èˆ¬&quot;</span>/&gt;</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">&quot;$&#123;scope &gt; 60&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;c:out value=<span class="string">&quot;ä½ çš„æˆç»©ä¸ºåŠæ ¼&quot;</span>/&gt;</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172313643.png" alt="image-20220508135143804"></p><h1 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h1><p>å®ä½“ç±»</p><p>JavaBeanæœ‰ç‰¹å®šçš„å†™æ³•</p><ul><li>å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ„é€ </li><li>å±æ€§å¿…é¡»ç§æœ‰åŒ–</li><li>å¿…é¡»æœ‰å¯¹åº”çš„set&#x2F;getæ–¹æ³•</li></ul><p>ä¸€èˆ¬ç”¨æ¥å’Œæ•°æ®åº“çš„å­—æ®µåšæ˜ å°„  ORMï¼›</p><p>ORM ï¼šå¯¹è±¡å…³ç³»æ˜ å°„</p><ul><li>è¡¨ â€“&gt; ç±»</li><li>å­—æ®µ â€“&gt; ç±»çš„å±æ€§</li><li>è¡Œè®°å½• â€“&gt; ç±»çš„å¯¹è±¡</li></ul><p><strong>peopleè¡¨</strong></p><table><thead><tr><th>id</th><th>name</th><th>age</th><th>address</th></tr></thead><tbody><tr><td>1</td><td>1å·</td><td>3</td><td>éƒ‘å·</td></tr><tr><td>2</td><td>2å·</td><td>18</td><td>éƒ‘å·</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">people</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">people</span>(<span class="number">1</span>,<span class="string">&quot;1å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="MVCä¸‰å±‚æ¶æ„"><a href="#MVCä¸‰å±‚æ¶æ„" class="headerlink" title="MVCä¸‰å±‚æ¶æ„"></a>MVCä¸‰å±‚æ¶æ„</h1><p>model</p><ul><li>ä¸šåŠ¡å¤„ç†ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰</li><li>æ•°æ®æŒä¹…å±‚ï¼š CURDï¼ˆDaoï¼‰</li></ul><p>View</p><ul><li>å±•ç¤ºæ•°æ®</li><li>æä¾›é“¾æ¥å‘èµ·çš„Servletè¯·æ±‚ ï¼ˆa , form , img ï¼‰</li></ul><p>Controller (servlet)</p><ul><li>æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ï¼šï¼ˆreqï¼šè¯·æ±‚å‚æ•°ï¼ŒSession ä¿¡æ¯ ã€‚ã€‚ï¼‰</li><li>äº¤ç»™ä¸šåŠ¡å±‚å¯¹åº”çš„ä»£ç </li><li>æ§åˆ¶è¯•å›¾çš„è·³è½¬</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç™»å½• --&gt; æ¥æ”¶ç”¨æˆ·çš„ç™»å½•è¯·æ±‚ --&gt;å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ˆè·å–ç”¨æˆ·ç™»é™†çš„å‚æ•°ï¼Œusernameï¼Œpasswordï¼‰ --&gt; äº¤ç»™ä¸šåŠ¡å±‚å¤„ç†ä¸šåŠ¡ï¼ˆåˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®:äº‹åŠ¡ï¼‰ --&gt; Daoå±‚æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡® --&gt; æ•°æ®åº“</span><br></pre></td></tr></table></figure><h1 id="Filterï¼ˆè¿‡æ»¤å™¨ï¼‰é‡ç‚¹"><a href="#Filterï¼ˆè¿‡æ»¤å™¨ï¼‰é‡ç‚¹" class="headerlink" title="Filterï¼ˆè¿‡æ»¤å™¨ï¼‰é‡ç‚¹"></a>Filterï¼ˆè¿‡æ»¤å™¨ï¼‰é‡ç‚¹</h1><p>Filterï¼šè¿‡æ»¤å™¨ï¼Œç”¨æ¥è¿‡æ»¤ç½‘ç«™çš„æ•°æ®</p><ul><li>å¤„ç†ä¸­æ–‡ä¹±ç </li><li>ç™»å½•éªŒè¯</li></ul><h2 id="Filterå¼€å‘æ­¥éª¤"><a href="#Filterå¼€å‘æ­¥éª¤" class="headerlink" title="Filterå¼€å‘æ­¥éª¤"></a>Filterå¼€å‘æ­¥éª¤</h2><h3 id="å¯¼åŒ…"><a href="#å¯¼åŒ…" class="headerlink" title="å¯¼åŒ…"></a>å¯¼åŒ…</h3><p><strong>è¦å¯¼å…¥Filterï¼ˆjavax.servletï¼‰çš„åŒ…</strong></p><h3 id="ç¼–å†™è¿‡æ»¤å™¨"><a href="#ç¼–å†™è¿‡æ»¤å™¨" class="headerlink" title="ç¼–å†™è¿‡æ»¤å™¨"></a>ç¼–å†™è¿‡æ»¤å™¨</h3><p>å®ç°Filteræ¥å£ï¼Œé‡å†™å¯¹åº”çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        servletResponse.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        servletResponse.setContentType(<span class="string">&quot;text/html;charset = utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse) ; <span class="comment">// è®©æˆ‘ä»¬çš„è¯·æ±‚ç»§ç»­èµ°ï¼Œå¦åˆ™æˆ‘ä»¬çš„ç¨‹åºåˆ°è¿™é‡Œå°±è¢«æ‹¦æˆª</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é”€æ¯ï¼ŒæœåŠ¡å™¨å…³é—­çš„æ—¶å€™ï¼Œä¼šé”€æ¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é”€æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨web.xmlä¸­é…ç½®Filter</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.li.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        show/ çš„æ‰€æœ‰ç›®å½•éƒ½ç»è¿‡è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ç›‘å¬å™¨"><a href="#ç›‘å¬å™¨" class="headerlink" title="ç›‘å¬å™¨"></a>ç›‘å¬å™¨</h1><p>ç›‘å¬å™¨çš„æ¥å£ </p><ol><li><p>ç¼–å†™ä¸€ä¸ªç›‘å¬å™¨</p><p>å®ç°ç›‘å¬å™¨çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»Ÿè®¡ç½‘ç«™åœ¨çº¿äººæ•°ç›‘å¬ï¼› ç»Ÿè®¡session</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OnlineCountlisterner</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºsessionç›‘å¬</span></span><br><span class="line">    <span class="comment">// ä¸€æ—¦åˆ›å»ºä¸€ä¸ªsessionå°±ä¼šå‡ºå‘äº‹ä»¶</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">sct</span> <span class="operator">=</span> httpSessionEvent.getSession().getServletContext();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">oct</span> <span class="operator">=</span> (Integer) sct.getAttribute(<span class="string">&quot;OnlineCount&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(oct == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            oct = <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> oct.intValue();</span><br><span class="line">            oct = <span class="keyword">new</span> <span class="title class_">Integer</span>(count + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sct.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>,oct);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é”€æ¯sessionç›‘å¬</span></span><br><span class="line">    <span class="comment">// ä¸€æ—¦é”€æ¯ä¸€ä¸ªsessionå°±ä¼šå‡ºå‘äº‹ä»¶</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">sct</span> <span class="operator">=</span> httpSessionEvent.getSession().getServletContext();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">oct</span> <span class="operator">=</span> (Integer) sct.getAttribute(<span class="string">&quot;OnlineCount&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(oct == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            oct = <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> oct.intValue();</span><br><span class="line">            oct = <span class="keyword">new</span> <span class="title class_">Integer</span>(count - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sct.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>,oct);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        session é”€æ¯ï¼š</span></span><br><span class="line"><span class="comment">        1.æ‰‹åŠ¨é”€æ¯ getSession().invalidate()</span></span><br><span class="line"><span class="comment">        2.è‡ªåŠ¨é”€æ¯</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>web.xmlæ³¨å†Œç›‘å¬å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.li.listenter.OnlineCountlisterner<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>çœ‹æƒ…å†µæ˜¯å¦ä½¿ç”¨ï¼ï¼ˆå‡ ä¹ä¸ç”¨ï¼‰</p></li></ol><h1 id="è¿‡æ»¤å™¨ï¼Œç›‘å¬å™¨çš„å¸¸è§åº”ç”¨"><a href="#è¿‡æ»¤å™¨ï¼Œç›‘å¬å™¨çš„å¸¸è§åº”ç”¨" class="headerlink" title="è¿‡æ»¤å™¨ï¼Œç›‘å¬å™¨çš„å¸¸è§åº”ç”¨"></a>è¿‡æ»¤å™¨ï¼Œç›‘å¬å™¨çš„å¸¸è§åº”ç”¨</h1><p><strong>ç›‘å¬å™¨ï¼šGUIç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨ï¼š</strong></p><ol><li>ç”¨æˆ·ç™»å½•åï¼Œå‘sessionä¸­æ”¾æ•°æ®</li><li>è¿›å…¥ä¸»é¡µè¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼›è¦æ±‚ï¼Œåœ¨è¿‡æ»¤å™¨ä¸­å®ç°</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(request.getSession().getAttribute(<span class="string">&quot;USER_SESSION&quot;</span>) == <span class="literal">null</span>)&#123;</span><br><span class="line">        response.sendRedirect(<span class="string">&quot;/j/login.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><p>å°±æ˜¯javaè¿æ¥æ•°æ®åº“</p><h2 id="å¯¼å…¥jdbcçš„jaråŒ…"><a href="#å¯¼å…¥jdbcçš„jaråŒ…" class="headerlink" title="å¯¼å…¥jdbcçš„jaråŒ…"></a>å¯¼å…¥jdbcçš„jaråŒ…</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JDBCå›ºå®šæ­¥éª¤ï¼š"><a href="#JDBCå›ºå®šæ­¥éª¤ï¼š" class="headerlink" title="JDBCå›ºå®šæ­¥éª¤ï¼š"></a>JDBCå›ºå®šæ­¥éª¤ï¼š</h2><ol><li>åŠ è½½é©±åŠ¨</li><li>è¿æ¥æ•°æ®åº“</li><li>å‘æ•°æ®åº“å‘é€å¯¹è±¡Statementï¼šCRUD</li><li>ç¼–å†™SQLï¼ˆæ ¹æ®ä¸šåŠ¡ï¼Œä¸åŒçš„SQLï¼‰</li><li>æ‰§è¡ŒSQL</li><li>å…³é—­è¿æ¥</li></ol><h3 id="æœªé¢„ç¼–è¯‘"><a href="#æœªé¢„ç¼–è¯‘" class="headerlink" title="æœªé¢„ç¼–è¯‘"></a>æœªé¢„ç¼–è¯‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testjdbc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// useUnicode=true&amp;characterEncoding=utf-8 è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åŠ è½½é©±åŠ¨</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.å‘æ•°æ®åº“å‘é€SQLçš„å¯¹è±¡statement ,preparedStatemetn ï¼š CRUD</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.ç¼–å†™SQL</span></span><br><span class="line"><span class="comment">//        String sql = &quot;select * from jdbc.users&quot;;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from jdbc.users where id=3&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å—å½±å“è¡Œæ•°ï¼Œå¢åˆ æ”¹æŸ¥éƒ½æ˜¯ä½¿ç”¨ executeUpdate</span></span><br><span class="line"><span class="comment">//        int i = statement.executeUpdate(sql);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.æ‰§è¡ŒSQL ï¼Œè¿”å›ä¸€ä¸ªResultSet ï¼š ç»“æœé›†</span></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;id=&quot;</span>+rs.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;name=&quot;</span>+rs.getObject(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;password=&quot;</span>+rs.getObject(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;email=&quot;</span>+rs.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;birthday=&quot;</span>+rs.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºï¼ˆä¸€å®šè¦åšï¼‰ å…ˆå¼€åå…³</span></span><br><span class="line">        rs.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¢„ç¼–è¯‘SQL"><a href="#é¢„ç¼–è¯‘SQL" class="headerlink" title="é¢„ç¼–è¯‘SQL"></a>é¢„ç¼–è¯‘SQL</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// useUnicode=true&amp;characterEncoding=utf-8 è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åŠ è½½é©±åŠ¨</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.ç¼–å†™SQL</span></span><br><span class="line">        <span class="comment">// String sql = &quot;select * from jdbc.users&quot;;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into jdbc.users(id, name, password, email, birthday) values (?,?,?,?,?)&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.é¢„ç¼–è¯‘</span></span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">        preparedStatement.setInt(<span class="number">1</span>,<span class="number">4</span>); <span class="comment">// ç»™ç¬¬ä¸€ä¸ªå ä½ç¬¦ï¼Ÿèµ‹å€¼ä¸º1</span></span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>,<span class="string">&quot;lks&quot;</span>); <span class="comment">// ç»™ç¬¬äºŒä¸ªå ä½ç¬¦ï¼Ÿèµ‹å€¼ä¸º lks</span></span><br><span class="line">        preparedStatement.setString(<span class="number">3</span>,<span class="string">&quot;123456&quot;</span>); <span class="comment">// ç»™ç¬¬ä¸‰ä¸ªå ä½ç¬¦ï¼Ÿèµ‹å€¼ä¸º 123456</span></span><br><span class="line">        preparedStatement.setString(<span class="number">4</span>,<span class="string">&quot;1537628435@qq.com&quot;</span>); <span class="comment">// ç»™ç¬¬å››ä¸ªå ä½ç¬¦ï¼Ÿèµ‹å€¼ä¸º 1537628435@qq.com</span></span><br><span class="line">        preparedStatement.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">java</span>.util.Date().getTime())); <span class="comment">// ç»™ç¬¬äº”ä¸ªå ä½ç¬¦ï¼Ÿèµ‹å€¼ä¸º new Date(new java.util.Date().getTime())</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡ŒSQL</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> preparedStatement.executeUpdate();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºï¼ˆä¸€å®šè¦åšï¼‰ å…ˆå¼€åå…³</span></span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p>è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</p><p>ACIDåŸåˆ™ï¼šä¿è¯æ•°æ®çš„å®‰å…¨</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å¼€å¯äº‹åŠ¡</span><br><span class="line">äº‹åŠ¡æäº¤ <span class="function"><span class="title">commit</span>()</span></span><br><span class="line">äº‹åŠ¡å›æ»š <span class="function"><span class="title">rollback</span>()</span></span><br><span class="line">å…³é—­äº‹åŠ¡</span><br><span class="line"></span><br><span class="line">è½¬è´¦</span><br><span class="line"><span class="variable">A</span>:<span class="number">1000</span></span><br><span class="line"><span class="variable">B</span>:<span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">A</span>(<span class="number">900</span>) --<span class="number">100</span>--&gt; <span class="title">B</span>(<span class="number">1100</span>)</span></span><br></pre></td></tr></table></figure><p><strong>Junitï¼ˆå•å…ƒæµ‹è¯•ï¼‰</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>@Test åªæœ‰åœ¨æ–¹æ³•ä¸Šæœ‰æ•ˆï¼Œåªè¦åŠ äº†è¿™ä¸ªæ³¨è§£çš„æ–¹æ³•ï¼Œå°±èƒ½ç›´æ¥è¿è¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;nimenhao&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172313670.png" alt="image-20220508232830305"></p><h4 id="æ­å»ºä¸€ä¸ªç¯å¢ƒ"><a href="#æ­å»ºä¸€ä¸ªç¯å¢ƒ" class="headerlink" title="æ­å»ºä¸€ä¸ªç¯å¢ƒ"></a>æ­å»ºä¸€ä¸ªç¯å¢ƒ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test3</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// useUnicode=true&amp;characterEncoding=utf-8 è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åŠ è½½é©±åŠ¨</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            <span class="comment">// 2.è¿æ¥æ•°æ®åº“,ä»£è¡¨æ•°æ®åº“</span></span><br><span class="line">            connection = DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3.é€šçŸ¥æ•°æ®åº“å¼€å¯äº‹åŠ¡,false å¼€å¯ï¼Œtrue å…³é—­</span></span><br><span class="line">            connection.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update jdbc.account set money = money - 100 where name=&#x27;A&#x27;&quot;</span>;</span><br><span class="line">            connection.prepareStatement(sql1).executeUpdate();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ¶é€ é”™è¯¯</span></span><br><span class="line"><span class="comment">//            int i= 1/0;</span></span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update jdbc.account set money = money + 100 where name=&#x27;B&#x27;&quot;</span>;</span><br><span class="line">            connection.prepareStatement(sql2).executeUpdate();</span><br><span class="line"></span><br><span class="line">            connection.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;success&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œæ•°æ®åº“å›æ»š</span></span><br><span class="line">                connection.rollback();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312215671.png" alt="image-20220508234802928"></p><hr><h1 id="é¡¹ç›®å®æˆ˜SMBMS"><a href="#é¡¹ç›®å®æˆ˜SMBMS" class="headerlink" title="é¡¹ç›®å®æˆ˜SMBMS"></a>é¡¹ç›®å®æˆ˜SMBMS</h1><h2 id="é¡¹ç›®æ­å»ºå‡†å¤‡å·¥ä½œ"><a href="#é¡¹ç›®æ­å»ºå‡†å¤‡å·¥ä½œ" class="headerlink" title="é¡¹ç›®æ­å»ºå‡†å¤‡å·¥ä½œ"></a>é¡¹ç›®æ­å»ºå‡†å¤‡å·¥ä½œ</h2><ol><li>ä½¿ç”¨mavenæ­å»º</li><li>é…ç½®tomcatåˆ›å»ºæœåŠ¡å™¨</li><li>æµ‹è¯•é¡¹ç›®èƒ½ä¸èƒ½è·‘</li></ol><p>Daoå±‚æ˜¯è¿›è¡Œæ•°æ®åº“çš„æ“ä½œç±»çš„å°è£…ã€‚Serviceå±‚æ˜¯ä¸šåŠ¡å±‚ï¼Œè°ƒç”¨Daoå±‚çš„æ“ä½œç±»ã€‚Servletæ˜¯è¡¨ç¤ºå±‚ï¼Œå¤„ç†é¡µé¢çš„ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œç„¶åè°ƒç”¨service æ¥å®ç°åŠŸèƒ½</p><h3 id="å¯¼å…¥é¡¹ç›®é‡åˆ°çš„jaråŒ…"><a href="#å¯¼å…¥é¡¹ç›®é‡åˆ°çš„jaråŒ…" class="headerlink" title="å¯¼å…¥é¡¹ç›®é‡åˆ°çš„jaråŒ…"></a>å¯¼å…¥é¡¹ç›®é‡åˆ°çš„jaråŒ…</h3><p>jar åŒ…jspï¼Œservletï¼Œjstlï¼Œmysqlé©±åŠ¨ï¼Œstand</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥jspåæ ‡--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/jsp-api --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥jstlåæ ‡--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºé¡¹ç›®åŒ…ç»“æ„</p><p>ç¼–å†™å®ä½“ç±»</p><p>è¡¨æ˜ å°„</p><p>ç¼–å†™åŸºç¡€å…¬å…±ç±»</p><h3 id="æ•°æ®åº“é…ç½®æ–‡ä»¶"><a href="#æ•°æ®åº“é…ç½®æ–‡ä»¶" class="headerlink" title="æ•°æ®åº“é…ç½®æ–‡ä»¶"></a>æ•°æ®åº“é…ç½®æ–‡ä»¶</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span> = <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">usl</span> = <span class="string">jdbc:mysql://localhost:3306?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="attr">username</span> = <span class="string">root</span></span><br><span class="line"><span class="attr">password</span> = <span class="string">123456</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æ•°æ®åº“çš„å…¬å…±ç±»"><a href="#ç¼–å†™æ•°æ®åº“çš„å…¬å…±ç±»" class="headerlink" title="ç¼–å†™æ•°æ®åº“çš„å…¬å…±ç±»"></a>ç¼–å†™æ•°æ®åº“çš„å…¬å…±ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.li.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.Result;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ“ä½œæ•°æ®åº“çš„å…¬å…±ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€ä»£ç å—ï¼Œç±»åŠ è½½çš„æ—¶å€™åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">//é€šè¿‡ç±»åŠ è½½å™¨è¯»å–å¯¹åº”çš„èµ„æº</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> BaseDao.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        username = properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ•°æ®åº“çš„è¿æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åŠ è½½é©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// è¿æ¥æ•°æ®åº“</span></span><br><span class="line">            connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼–å†™æŸ¥è¯¢å…¬å…±ç±»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultSet <span class="title function_">execute</span><span class="params">(Connection connection,String sql,Object[] params,ResultSet resultSet,PreparedStatement preparedStatement)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¢„ç¼–è¯‘ çš„sql åœ¨åé¢ç›´æ¥æ‰§è¡Œ</span></span><br><span class="line">        preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; params.length;i ++)&#123;</span><br><span class="line">            preparedStatement.setObject(i + <span class="number">1</span>,params[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        resultSet = preparedStatement.executeQuery();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resultSet;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼–å†™å¢åˆ æ”¹æŸ¥çš„å…¬å…±æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">execute</span><span class="params">(Connection connection,String sql,Object[] params,PreparedStatement preparedStatement)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¢„ç¼–è¯‘</span></span><br><span class="line">        preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; params.length;i ++)&#123;</span><br><span class="line">            preparedStatement.setObject(i + <span class="number">1</span>,params[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">updateRows</span> <span class="operator">=</span> preparedStatement.executeUpdate(sql);</span><br><span class="line">        <span class="keyword">return</span> updateRows;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">closeResource</span><span class="params">(Connection connection,ResultSet resultSet,PreparedStatement preparedStatement)</span>&#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(resultSet != <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    resultSet.close();</span><br><span class="line">                    resultSet = <span class="literal">null</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(connection != <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                    connection = <span class="literal">null</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(preparedStatement != <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement.close();</span><br><span class="line">                    preparedStatement = <span class="literal">null</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨"><a href="#ç¼–å†™å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨" class="headerlink" title="ç¼–å†™å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨"></a>ç¼–å†™å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    servletRequest.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    servletResponse.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    servletResponse.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line"></span><br><span class="line">    filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¼å…¥é™æ€èµ„æº</p><p><a href="https://github.com/five517/SMBMS">https://github.com/five517/SMBMS</a></p><h2 id="ç™»å½•åŠŸèƒ½å®ç°"><a href="#ç™»å½•åŠŸèƒ½å®ç°" class="headerlink" title="ç™»å½•åŠŸèƒ½å®ç°"></a>ç™»å½•åŠŸèƒ½å®ç°</h2><p>1.ç¼–å†™å‰ç«¯ç•Œé¢</p><p>2.è®¾ç½®æ¬¢è¿ç•Œé¢</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    è®¾ç½®æ¬¢è¿ç•Œé¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.ç¼–å†™daoå±‚ç™»å½•ç”¨æˆ·çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¾—åˆ°ç™»å½•çš„ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getLoginUser</span><span class="params">(Connection connection,String usercode)</span> <span class="keyword">throws</span> SQLException;</span><br></pre></td></tr></table></figure><p>4.ç¼–å†™daoæ¥å£çš„å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoIm1</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getLoginUser</span><span class="params">(Connection connection, String userCode)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstm</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(connection != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from smbms_user where userCode=?&quot;</span>;</span><br><span class="line">            Object[] params = &#123;userCode&#125;;</span><br><span class="line"></span><br><span class="line">            rs = BaseDao.execute(connection, sql, params, rs, pstm);</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">                user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                user.setUserCode(rs.getString(<span class="string">&quot;userCode&quot;</span>));</span><br><span class="line">                user.setUserName(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">                user.setGender(rs.getInt(<span class="string">&quot;gender&quot;</span>));</span><br><span class="line">                user.setBirthday(rs.getDate(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">                user.setPhone(rs.getString(<span class="string">&quot;phone&quot;</span>));</span><br><span class="line">                user.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">                user.setUserRole(rs.getInt(<span class="string">&quot;userRole&quot;</span>));</span><br><span class="line">                user.setCreatedBy(rs.getInt(<span class="string">&quot;createBy&quot;</span>));</span><br><span class="line">                user.setCreationDate(rs.getTimestamp(<span class="string">&quot;creationDate&quot;</span>));</span><br><span class="line">                user.setModifyBy(rs.getInt(<span class="string">&quot;modifyBy&quot;</span>));</span><br><span class="line">                user.setModifyDate(rs.getTimestamp(<span class="string">&quot;modifyDate&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.ä¸šåŠ¡å±‚å®ç°ç±»çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·ç™»å½•</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String userCode , String password)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.ç¼–å†™ä¸šåŠ¡å®ç°ç±»çš„å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImp1</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å±‚ï¼Œéƒ½ä¼šè°ƒç”¨daoå±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¼•å…¥daoå±‚</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserServiceImp1</span><span class="params">()</span>&#123;</span><br><span class="line">        userDao = <span class="keyword">new</span> <span class="title class_">UserDaoIm1</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String userCode, String password)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = BaseDao.getConnection();</span><br><span class="line">            <span class="comment">// é€šè¿‡ä¸šåŠ¡å±‚ï¼Œè°ƒç”¨å¯¹åº”çš„å…·ä½“çš„æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">            user = userDao.getLoginUser(connection, userCode);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            BaseDao.closeResource(connection,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7.ç¼–å†™Servlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">loginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Servlet ï¼šæ§åˆ¶å±‚ï¼Œè°ƒç”¨ä¸šåŠ¡å±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LoginServlet--start....&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">usercode</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;userCode&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userPassword</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;userPassword&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å’Œæ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œå¯¹æ¯”,è°ƒç”¨ä¸šåŠ¡å±‚</span></span><br><span class="line">        <span class="type">UserServiceImp1</span> <span class="variable">userServiceImp1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImp1</span>();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userServiceImp1.login(usercode, userPassword); <span class="comment">// æŸ¥åˆ°äº†ç™»é™†çš„äºº</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user != <span class="literal">null</span>) &#123; <span class="comment">// å¦‚æœæœ‰è¿™ä¸ªäºº</span></span><br><span class="line">            <span class="comment">// å°†ç”¨æˆ·çš„ä¿¡æ¯æ”¾åœ¨sessionä¸­</span></span><br><span class="line">            req.getSession().setAttribute(Constant.USER_SESSION,user);</span><br><span class="line">            <span class="comment">// ç™»å½•æˆåŠŸåæŒ‘æˆ˜åˆ°å†…éƒ¨ä¸»é¡µ</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;jsp/frame.jsp&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; <span class="comment">// æŸ¥æ— æ­¤äººï¼Œæ— æ³•ç™»å½•</span></span><br><span class="line">            <span class="comment">//  è½¬å‘å›åˆ°ç™»å½•ç•Œé¢ï¼Œé¡ºå¸¦æç¤ºå®ƒï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</span></span><br><span class="line">            req.setAttribute(<span class="string">&quot;error&quot;</span>,<span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®&quot;</span>);</span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;login.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8.æ³¨å†ŒServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    Servlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.user.loginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç™»å½•åŠŸèƒ½ä¼˜åŒ–"><a href="#ç™»å½•åŠŸèƒ½ä¼˜åŒ–" class="headerlink" title="ç™»å½•åŠŸèƒ½ä¼˜åŒ–"></a>ç™»å½•åŠŸèƒ½ä¼˜åŒ–</h2><h3 id="æ³¨é”€åŠŸèƒ½ï¼š"><a href="#æ³¨é”€åŠŸèƒ½ï¼š" class="headerlink" title="æ³¨é”€åŠŸèƒ½ï¼š"></a>æ³¨é”€åŠŸèƒ½ï¼š</h3><p>æ€è·¯ï¼š ç§»é™¤sessionï¼Œè¿”å›ç™»å½•ç•Œé¢</p><p>LoginoutServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">loginoutServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// ä¸€å¤„ç™»å½•ç•Œé¢</span></span><br><span class="line">        req.getSession().removeAttribute(Constant.USER_SESSION);</span><br><span class="line">        resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/login.jsp&quot;</span>); <span class="comment">// è¿”å›ç™»é™†ç•Œé¢</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ³¨é”€ç™»å½•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LogintoutServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.li.servlet.user.loginoutServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LogintoutServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/jsp/logout.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç™»å½•æ‹¦æˆªä¼˜åŒ–"><a href="#ç™»å½•æ‹¦æˆªä¼˜åŒ–" class="headerlink" title="ç™»å½•æ‹¦æˆªä¼˜åŒ–"></a>ç™»å½•æ‹¦æˆªä¼˜åŒ–</h3><p>SysFilter.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">req1</span> <span class="operator">=</span> (HttpServletRequest) req;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">resp1</span> <span class="operator">=</span> (HttpServletResponse) resp;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿‡æ»¤å™¨ä»sessionä¸­è·å–ç”¨æˆ·</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">attribute</span> <span class="operator">=</span> (User) req1.getSession().getAttribute(Constant.USER_SESSION);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(attribute == <span class="literal">null</span>)&#123; <span class="comment">// å·²ç»æ³¨é”€äº†ï¼Œæˆ–è€…æœªç™»å½•</span></span><br><span class="line">            resp1.sendRedirect(<span class="string">&quot;/smbms/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(req1,resp1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ç”¨æˆ·ç™»å½•è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>sysfilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.li.filter.SysFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>sysfilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/jsp/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¯†ç ä¿®æ”¹"><a href="#å¯†ç ä¿®æ”¹" class="headerlink" title="å¯†ç ä¿®æ”¹"></a>å¯†ç ä¿®æ”¹</h2><h3 id="UserDaoæ¥å£"><a href="#UserDaoæ¥å£" class="headerlink" title="UserDaoæ¥å£"></a>UserDaoæ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹å½“å‰çš„å¯†ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updatePwd</span><span class="params">(Connection connection,<span class="type">int</span> id , <span class="type">int</span> password)</span> <span class="keyword">throws</span>  SQLException;</span><br></pre></td></tr></table></figure><h3 id="UserDaoæ¥å£å®ç°ç±»"><a href="#UserDaoæ¥å£å®ç°ç±»" class="headerlink" title="UserDaoæ¥å£å®ç°ç±»"></a>UserDaoæ¥å£å®ç°ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¿®æ”¹å¯†ç </span></span><br><span class="line"><span class="comment">// å¦‚æœè¿”å›çš„å€¼å¤§äº1ï¼Œåˆ™æ‰§è¡ŒæˆåŠŸï¼Œå¦åˆ™æ‰§è¡Œå¤±è´¥ã€‚</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updatePwd</span><span class="params">(Connection connection, <span class="type">int</span> id, <span class="type">int</span> password)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstm</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">execute</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(connection != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update smbms.smbms_user set userPassword = ? where id = ?&quot;</span>;</span><br><span class="line">        Object params[] = &#123;password,id&#125;;</span><br><span class="line">        execute = BaseDao.execute(connection, sql, params, pstm);</span><br><span class="line">        BaseDao.closeResource(<span class="literal">null</span>,<span class="literal">null</span>,pstm);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> execute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UserServiceå±‚æ¥å£"><a href="#UserServiceå±‚æ¥å£" class="headerlink" title="UserServiceå±‚æ¥å£"></a>UserServiceå±‚æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®useridä¿®æ”¹å¯†ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updatePwd</span><span class="params">( <span class="type">int</span> id , <span class="type">int</span> pwd)</span>;</span><br></pre></td></tr></table></figure><h3 id="UserServiceå®ç°ç±»"><a href="#UserServiceå®ç°ç±»" class="headerlink" title="UserServiceå®ç°ç±»"></a>UserServiceå®ç°ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹å¯†ç </span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updatePwd</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> pwd)</span> &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    connection = BaseDao.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(userDao.updatePwd(connection,id,pwd)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        BaseDao.closeResource(connection,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UserServletç¼–å†™"><a href="#UserServletç¼–å†™" class="headerlink" title="UserServletç¼–å†™"></a>UserServletç¼–å†™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;method&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(method != <span class="literal">null</span> &amp;&amp; method.equals(<span class="string">&quot;savepwd&quot;</span>))&#123;</span><br><span class="line">        <span class="built_in">this</span>.upadtePwd(req,resp);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(method != <span class="literal">null</span> &amp;&amp; method.equals(<span class="string">&quot;pwdmodify&quot;</span>))&#123;</span><br><span class="line">        <span class="built_in">this</span>.pwdModeify(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doGet(req, resp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹å¯†ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">upadtePwd</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span>&#123;</span><br><span class="line">    <span class="comment">// ä»sessioné‡Œé¢æ‹¿id</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">attribute</span> <span class="operator">=</span> req.getSession().getAttribute(Constant.USER_SESSION);</span><br><span class="line">    <span class="type">String</span> <span class="variable">newpassword</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;newpassword&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span>  <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(attribute != <span class="literal">null</span> &amp;&amp; newpassword != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImp1</span>();</span><br><span class="line">        flag = userService.updatePwd(((User) attribute).getId(), newpassword);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">            req.setAttribute(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;ä¿®æ”¹å¯†ç æˆåŠŸï¼Œè¯·é€€å‡ºä½¿ç”¨æ–°å¯†ç ç™»å½•&quot;</span>);</span><br><span class="line">            <span class="comment">// å¯†ç ä¿®æ”¹æˆåŠŸï¼Œä¸€å¤„å½“å‰session</span></span><br><span class="line">            req.getSession().removeAttribute(Constant.USER_SESSION);</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            req.setAttribute(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;å¯†ç ä¿®æ”¹å¤±è´¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        req.setAttribute(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;å¯†ç ä¿®æ”¹å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;pwdmodify.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–å¯†ç ä½¿ç”¨Ajax"><a href="#ä¼˜åŒ–å¯†ç ä½¿ç”¨Ajax" class="headerlink" title="ä¼˜åŒ–å¯†ç ä½¿ç”¨Ajax"></a>ä¼˜åŒ–å¯†ç ä½¿ç”¨Ajax</h2><h3 id="é˜¿é‡Œå·´å·´çš„fastJaon"><a href="#é˜¿é‡Œå·´å·´çš„fastJaon" class="headerlink" title="é˜¿é‡Œå·´å·´çš„fastJaon"></a>é˜¿é‡Œå·´å·´çš„fastJaon</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹userServletå†…å®¹"><a href="#ä¿®æ”¹userServletå†…å®¹" class="headerlink" title="ä¿®æ”¹userServletå†…å®¹"></a>ä¿®æ”¹userServletå†…å®¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pwdModeify</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span>&#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">attribute</span> <span class="operator">=</span> req.getSession().getAttribute(Constant.USER_SESSION);</span><br><span class="line">    <span class="type">String</span> <span class="variable">oldpassword</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;oldpassword&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‡èƒ½çš„map</span></span><br><span class="line">    Map&lt;String, String&gt; resultMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(attribute == <span class="literal">null</span>)&#123; <span class="comment">// sessionå¤±æ•ˆäº†</span></span><br><span class="line">        resultMap.put(<span class="string">&quot;result&quot;</span>,<span class="string">&quot;sessionerror&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(StringUtils.isNullOrEmpty(oldpassword))&#123;</span><br><span class="line">        resultMap.put(<span class="string">&quot;result&quot;</span>,<span class="string">&quot;error&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userPassword</span> <span class="operator">=</span> ((User) attribute).getUserPassword();</span><br><span class="line">        <span class="keyword">if</span>(oldpassword.equals(userPassword))&#123;</span><br><span class="line">            resultMap.put(<span class="string">&quot;result&quot;</span>,<span class="string">&quot;true&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            resultMap.put(<span class="string">&quot;result&quot;</span>,<span class="string">&quot;false&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/jsion&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// JSONArray é˜¿é‡Œå·´å·´çš„jsonå·¥å…·ç±»ï¼Œè½¬åŒ–æ ¼å¼</span></span><br><span class="line">        writer.write(JSONArray.toJSONString(resultMap));</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç®¡ç†å®ç°"><a href="#ç”¨æˆ·ç®¡ç†å®ç°" class="headerlink" title="ç”¨æˆ·ç®¡ç†å®ç°"></a>ç”¨æˆ·ç®¡ç†å®ç°</h2><p>å¯¼å…¥åˆ†é¡µçš„å·¥å…·ç±»</p><p>ç”¨æˆ·åˆ—è¡¨é¡µé¢å¯¼å…¥</p><h3 id="è·å–ç”¨æˆ·æ•°é‡"><a href="#è·å–ç”¨æˆ·æ•°é‡" class="headerlink" title="è·å–ç”¨æˆ·æ•°é‡"></a>è·å–ç”¨æˆ·æ•°é‡</h3><p>UserDaoï¼ŒUserDaoImplï¼ŒUserServiceï¼ŒUserServiceImpl</p><h4 id="UserDao"><a href="#UserDao" class="headerlink" title="UserDao"></a>UserDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢ç”¨æˆ·æ€»æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserCount</span><span class="params">(Connection connection,String username , <span class="type">int</span> userrole)</span><span class="keyword">throws</span>  SQLException;</span><br></pre></td></tr></table></figure><h4 id="UserDaoImpl"><a href="#UserDaoImpl" class="headerlink" title="UserDaoImpl"></a>UserDaoImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ç”¨æˆ·åæˆ–è€…è§’è‰²ï¼ŒæŸ¥è¯¢ç”¨æˆ·æ€»æ•°</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserCount</span><span class="params">(Connection connection, String username, <span class="type">int</span> userrole)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">pstm</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(connection != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        sql.append(<span class="string">&quot;select count(1) as count from smbms.smbms_user u,smbms.smbms_role r where u.userRole = r.id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Object&gt;();<span class="comment">// å­˜æ”¾æˆ‘ä»¬çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isNullOrEmpty(username))&#123;</span><br><span class="line">            sql.append(<span class="string">&quot; and u.userName like ?&quot;</span>);</span><br><span class="line">            list.add(<span class="string">&quot;%&quot;</span>+username+<span class="string">&quot;%&quot;</span>); <span class="comment">// é»˜è®¤çš„index = 0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userrole &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            sql.append(<span class="string">&quot; and u.userRole = ?&quot;</span>);</span><br><span class="line">            list.add(userrole); <span class="comment">// index = 1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Object[] params = list.toArray();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;text:&quot;</span>+sql.toString());</span><br><span class="line"></span><br><span class="line">        rs = BaseDao.execute(connection, sql.toString(), params, rs, pstm);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">            count = rs.getInt(<span class="string">&quot;count&quot;</span>);<span class="comment">//ä»ç»“æœé›†è·å–æœ€åçš„æ•°é‡</span></span><br><span class="line">        &#125;</span><br><span class="line">        BaseDao.closeResource(<span class="literal">null</span>,rs,pstm);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="UserService"><a href="#UserService" class="headerlink" title="UserService"></a>UserService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢è®°å½•æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserCount</span><span class="params">(String username,<span class="type">int</span> userrole)</span>;</span><br></pre></td></tr></table></figure><h4 id="UserServiceImpl"><a href="#UserServiceImpl" class="headerlink" title="UserServiceImpl"></a>UserServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®°å½•æŸ¥è¯¢æ•°</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserCount</span><span class="params">(String username, <span class="type">int</span> userrole)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = BaseDao.getConnection();</span><br><span class="line">        count = userDao.getUserCount(connection,username,userrole);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        BaseDao.closeResource(connection,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·å–ç”¨æˆ·åˆ—è¡¨"><a href="#è·å–ç”¨æˆ·åˆ—è¡¨" class="headerlink" title="è·å–ç”¨æˆ·åˆ—è¡¨"></a>è·å–ç”¨æˆ·åˆ—è¡¨</h3><p>UserDaoï¼ŒUserDaoImplï¼ŒUserServiceï¼ŒUserServiceImpl</p><h4 id="UserDao-1"><a href="#UserDao-1" class="headerlink" title="UserDao"></a>UserDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡ç”¨æˆ·è¾“å…¥çš„æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">(Connection connection, String userName, <span class="type">int</span> userRole, <span class="type">int</span> currentPageNo, <span class="type">int</span> pageSize)</span> <span class="keyword">throws</span>  Exception;</span><br></pre></td></tr></table></figure><h4 id="UserDaoImpl-1"><a href="#UserDaoImpl-1" class="headerlink" title="UserDaoImpl"></a>UserDaoImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">(Connection connection, String userName, <span class="type">int</span> userRole, <span class="type">int</span> currentPageNo, <span class="type">int</span> pageSize)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">    PreparedStatement pstm=<span class="literal">null</span>;</span><br><span class="line">    ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        sql.append(<span class="string">&quot;select u.*,r.roleName as userRoleName from smbms_user u,smbms_role r where u.userRole = r.id&quot;</span>);</span><br><span class="line">        List&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Object&gt;();</span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isNullOrEmpty(userName))&#123;</span><br><span class="line">            sql.append(<span class="string">&quot; and u.userName like ?&quot;</span>);</span><br><span class="line">            list.add(<span class="string">&quot;%&quot;</span>+userName+<span class="string">&quot;%&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userRole &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            sql.append(<span class="string">&quot; and u.userRole = ?&quot;</span>);</span><br><span class="line">            list.add(userRole);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨æ•°æ®åº“ä¸­ï¼Œåˆ†é¡µä½¿ç”¨  limit startIndex, PageSize æ€»æ•°</span></span><br><span class="line"></span><br><span class="line">        sql.append(<span class="string">&quot; order by creationDate DESC limit ?,?&quot;</span>);</span><br><span class="line">        currentPageNo = (currentPageNo-<span class="number">1</span>)*pageSize;</span><br><span class="line">        list.add(currentPageNo);</span><br><span class="line">        list.add(pageSize);</span><br><span class="line"></span><br><span class="line">        Object[] params = list.toArray();</span><br><span class="line">        System.out.println(<span class="string">&quot;sql ----&gt; &quot;</span> + sql.toString());</span><br><span class="line">        rs = BaseDao.execute(connection,sql.toString(),params,rs,pstm);</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">_user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            _user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            _user.setUserCode(rs.getString(<span class="string">&quot;userCode&quot;</span>));</span><br><span class="line">            _user.setUserName(rs.getString(<span class="string">&quot;userName&quot;</span>));</span><br><span class="line">            _user.setGender(rs.getInt(<span class="string">&quot;gender&quot;</span>));</span><br><span class="line">            _user.setBirthday(rs.getDate(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">            _user.setPhone(rs.getString(<span class="string">&quot;phone&quot;</span>));</span><br><span class="line">            _user.setUserRole(rs.getInt(<span class="string">&quot;userRole&quot;</span>));</span><br><span class="line">            _user.setUserRoleName(rs.getString(<span class="string">&quot;userRoleName&quot;</span>));</span><br><span class="line">            userList.add(_user);</span><br><span class="line">        &#125;</span><br><span class="line">        BaseDao.closeResource( <span class="literal">null</span>, rs, pstm);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> userList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="UserService-1"><a href="#UserService-1" class="headerlink" title="UserService"></a>UserService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">(String queryUserName, <span class="type">int</span> queryUserRole, <span class="type">int</span> currentPageNo, <span class="type">int</span> pageSize)</span>;</span><br></pre></td></tr></table></figure><h4 id="UserServiceImpl-1"><a href="#UserServiceImpl-1" class="headerlink" title="UserServiceImpl"></a>UserServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">(String queryUserName, <span class="type">int</span> queryUserRole, <span class="type">int</span> currentPageNo, <span class="type">int</span> pageSize)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    List&lt;User&gt; userList = <span class="literal">null</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;queryUserName ---- &gt; &quot;</span> + queryUserName);</span><br><span class="line">    System.out.println(<span class="string">&quot;queryUserRole ---- &gt; &quot;</span> + queryUserRole);</span><br><span class="line">    System.out.println(<span class="string">&quot;currentPageNo ---- &gt; &quot;</span> + currentPageNo);</span><br><span class="line">    System.out.println(<span class="string">&quot;pageSize ---- &gt; &quot;</span> + pageSize);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = BaseDao.getConnection();</span><br><span class="line">        userList = userDao.getUserList(connection, queryUserName,queryUserRole,currentPageNo,pageSize);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        BaseDao.closeResource(connection, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> userList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="å‡ºç°é”™è¯¯æ€»ç»“ï¼š"><a href="#å‡ºç°é”™è¯¯æ€»ç»“ï¼š" class="headerlink" title="å‡ºç°é”™è¯¯æ€»ç»“ï¼š"></a>å‡ºç°é”™è¯¯æ€»ç»“ï¼š</h1><h2 id="web-xmlä¸­æ·»åŠ servlet-æ³¨é‡ŠæŠ¥é”™"><a href="#web-xmlä¸­æ·»åŠ servlet-æ³¨é‡ŠæŠ¥é”™" class="headerlink" title="web.xmlä¸­æ·»åŠ servlet æ³¨é‡ŠæŠ¥é”™"></a>web.xmlä¸­æ·»åŠ servlet æ³¨é‡ŠæŠ¥é”™</h2><p> å‡ºç°é”™è¯¯ä¿¡æ¯ï¼š <code>Element &#39;web-app&#39; cannot have character [children], because the type&#39;s content type is element-only</code></p><p>åŸå› ï¼šweb.xmlä¸­æ³¨é‡Šå†™çš„æœ‰é—®é¢˜ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨  &#x2F;&#x2F; ï¼Œè¦ä½¿ç”¨<!-- -->;</p><h2 id="javaæ–‡ä»¶ä¸­æ·»åŠ HttpServletæŠ¥é”™"><a href="#javaæ–‡ä»¶ä¸­æ·»åŠ HttpServletæŠ¥é”™" class="headerlink" title="javaæ–‡ä»¶ä¸­æ·»åŠ HttpServletæŠ¥é”™"></a>javaæ–‡ä»¶ä¸­æ·»åŠ HttpServletæŠ¥é”™</h2><p>è§£å†³åŠæ³•ï¼š</p><p>æ‰¾åˆ°è‡ªå·±çš„tomcatç›®å½•ä¸‹libç›®å½•ä¸‹çš„ servlet-api.jar</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312215111.png" alt="image-20220430151358714"></p><p><strong>ç”±äºæˆ‘çš„å·²ç»å¤„ç†å¥½ï¼Œä¸‹é¢é™„ä¸Šåˆ«çš„åšä¸»çš„ç…§ç‰‡</strong></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312215162.png" alt="img"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312215375.png" alt="img"></p><p>æœ€ååœ¨javaæ–‡ä»¶ä¸­importå³å¯è§£å†³ã€‚</p><p>å¼•ç”¨<a href="https://blog.csdn.net/lihua5419/article/details/94741500">åšå®¢é“¾æ¥</a></p><h2 id="è¿è¡Œåjavaæ˜¾ç¤ºçš„æœ‰ä¹±ç "><a href="#è¿è¡Œåjavaæ˜¾ç¤ºçš„æœ‰ä¹±ç " class="headerlink" title="è¿è¡Œåjavaæ˜¾ç¤ºçš„æœ‰ä¹±ç "></a>è¿è¡Œåjavaæ˜¾ç¤ºçš„æœ‰ä¹±ç </h2><p>åœ¨javaæ–‡ä»¶ä¸­æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="Establishing-SSL-connection-without-serverâ€™s-identity-verification-is-not-recommended"><a href="#Establishing-SSL-connection-without-serverâ€™s-identity-verification-is-not-recommended" class="headerlink" title="Establishing SSL connection without serverâ€™s identity verification is not recommended"></a>Establishing SSL connection without serverâ€™s identity verification is not recommended</h2><p>æ·»åŠ  <code>useSSL=false</code></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312215603.png" alt="image-20220513133427776"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºjavawebç¯å¢ƒï¼Œå¹¶åˆ›å»ºç¬¬ä¸€ä¸ªjavawebé¡¹ç›®</title>
      <link href="/2022/04/22/%E6%90%AD%E5%BB%BAjavaweb%E7%8E%AF%E5%A2%83%EF%BC%8C%E5%B9%B6%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAjavaweb%E9%A1%B9%E7%9B%AE/"/>
      <url>/2022/04/22/%E6%90%AD%E5%BB%BAjavaweb%E7%8E%AF%E5%A2%83%EF%BC%8C%E5%B9%B6%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAjavaweb%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="1-ä¸‹è½½tomcat"><a href="#1-ä¸‹è½½tomcat" class="headerlink" title="1.ä¸‹è½½tomcat"></a>1.ä¸‹è½½tomcat</h3><p><a href="https://tomcat.apache.org/download-80.cgi">tomcatä¸‹è½½å®˜ç½‘</a></p><p>è¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯Tomcat8</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218879.png" alt="202204221322381"></p><p>ä¸‹è½½ä¹‹åæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå°†å‹ç¼©åŒ…è§£å‹åˆ°è‡ªå·±æƒ³å­˜æ”¾çš„è·¯å¾„ã€‚</p><h5 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h5><p>å°†tomcatä¸‹é¢çš„binç›®å½•åŠ å…¥åˆ°ç¯å¢ƒå˜é‡pathä¸­</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218160.png" alt="202204221322703"></p><p><strong>Tomcaté…ç½®å®Œæˆ</strong></p><h3 id="2-ä¸‹è½½maven"><a href="#2-ä¸‹è½½maven" class="headerlink" title="2.ä¸‹è½½maven"></a>2.ä¸‹è½½maven</h3><p><a href="https://maven.apache.org/download.cgi">ä¸‹è½½åœ°å€</a></p><p>è¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯ <a href="https://archive.apache.org/dist/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.zip">maven3.6.3</a>ï¼Œä¸ºäº†é˜²æ­¢æœ€æ–°ç‰ˆæœ¬å­˜åœ¨bug </p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218877.png" alt="image-20220422124101944"></p><p>å¦‚æœè‡ªå·±åœ¨å®˜ç½‘ä¸Šä¸‹è½½ï¼Œä¸‹è½½bin.zipå³å¯ã€‚</p><p>mavenä¸‹è½½ä¹‹åä¹Ÿæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå…ˆè§£å‹åˆ°è‡ªå·±æƒ³è¦æ”¾çš„åœ°æ–¹ã€‚</p><h4 id="mavené…ç½®ç¯å¢ƒå˜é‡"><a href="#mavené…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="mavené…ç½®ç¯å¢ƒå˜é‡"></a>mavené…ç½®ç¯å¢ƒå˜é‡</h4><p>éœ€è¦é…ç½®3ä¸ªä¸œè¥¿</p><ul><li><strong>M2_HOME</strong>: mavençš„binçš„åœ°å€</li><li><strong>MAVEN_HOME</strong> : mavenæ–‡ä»¶çš„åœ°å€</li><li>åœ¨ç³»ç»Ÿå˜é‡çš„pathä¸­åŠ å…¥ <code>%MAVEN_HOME%/bin</code></li></ul><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218667.png" alt="image-20220422124442869"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218158.png" alt="image-20220422124501533"></p><p>é…ç½®ä¹‹åï¼Œæ‰“å¼€cmdï¼Œè¾“å…¥<code>mvn - v</code>ï¼Œå‡ºç°å¦‚ä¸‹ç»“æœï¼Œé…ç½®æˆåŠŸ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218969.png" alt="image-20220422124711370"></p><h4 id="mavenä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#mavenä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="mavenä¿®æ”¹é…ç½®æ–‡ä»¶"></a>mavenä¿®æ”¹é…ç½®æ–‡ä»¶</h4><h5 id="æ·»åŠ ä»“åº“ç›®å½•"><a href="#æ·»åŠ ä»“åº“ç›®å½•" class="headerlink" title="æ·»åŠ ä»“åº“ç›®å½•"></a>æ·»åŠ ä»“åº“ç›®å½•</h5><p>åœ¨mavenæ–‡ä»¶å¤¹ä¸‹ï¼Œå»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ <code>maven-repo</code>ï¼Œä½œä¸ºmavençš„ä»“åº“ç›®å½•ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312218951.png" alt="image-20220422125139927"></p><h5 id="ä¿®æ”¹settings-xmlçš„å†…å®¹"><a href="#ä¿®æ”¹settings-xmlçš„å†…å®¹" class="headerlink" title="ä¿®æ”¹settings.xmlçš„å†…å®¹"></a>ä¿®æ”¹settings.xmlçš„å†…å®¹</h5><p>æ‰“å¼€mavenæ–‡ä»¶å¤¹ä¸‹confä¸­settings.xmlæ–‡ä»¶</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219540.png" alt="image-20220422124811864"></p><ul><li><p>æ·»åŠ è‡ªå·±mavenä»“åº“çš„ä¿¡æ¯</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219106.png" alt="image-20220422125350774"></p></li><li><p>é…ç½®é˜¿é‡Œäº‘çš„é•œåƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219957.png" alt="image-20220422125612649"></p></li></ul><p><strong>mavené…ç½®å®Œæˆ</strong></p><h3 id="3-åœ¨ideaä¸Šåˆ›å»ºä¸€ä¸ªjavawebé¡¹ç›®"><a href="#3-åœ¨ideaä¸Šåˆ›å»ºä¸€ä¸ªjavawebé¡¹ç›®" class="headerlink" title="3.åœ¨ideaä¸Šåˆ›å»ºä¸€ä¸ªjavawebé¡¹ç›®"></a>3.åœ¨ideaä¸Šåˆ›å»ºä¸€ä¸ªjavawebé¡¹ç›®</h3><h5 id="æ–°å»ºä¸€ä¸ªé¡¹ç›®"><a href="#æ–°å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="æ–°å»ºä¸€ä¸ªé¡¹ç›®"></a>æ–°å»ºä¸€ä¸ªé¡¹ç›®</h5><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219605.png" alt="image-20220422125856112"></p><p>ç»™é¡¹ç›®å‘½å</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219630.png" alt="image-20220422125935909"></p><p>ç‚¹å‡»nextå</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219126.png" alt="image-20220422130114757"></p><p>ç‚¹å‡»finshï¼Œä¸€ä¸ªjavawebé¡¹ç›®å°±åˆ›å»ºå®Œäº†ã€‚</p><p>ä½†æ˜¯è¿™åªæ˜¯ç®€å•çš„mavenæ¨¡æ¿ï¼Œé¡¹ç›®ä¸­è¿˜ä¸å­˜åœ¨javaæ–‡ä»¶å¤¹å’Œresourcesæ–‡ä»¶å¤¹ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219359.png" alt="image-20220422130347744"></p><p>åˆ›å»ºå®Œæˆå</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219836.png" alt="image-20220422175950441"></p><h5 id="é…ç½®Tomcatå¯åŠ¨"><a href="#é…ç½®Tomcatå¯åŠ¨" class="headerlink" title="é…ç½®Tomcatå¯åŠ¨"></a>é…ç½®Tomcatå¯åŠ¨</h5><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219783.png" alt="image-20220422130628624"></p><p>è¿™é‡Œæˆ‘å·²ç»åˆ›å»ºå¥½äº†ï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªEditçš„é‚£ä¸ª</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219157.png" alt="image-20220422130741301"></p><p>ç„¶åä¼šå‡ºç°ï¼Œä¸Šå›¾å³ä¾§çš„ç•Œé¢</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219717.png" alt="image-20220422130947123"></p><p>é€‰æ‹©å®Œåï¼Œå‡ºç°å¦‚ä¸‹è­¦å‘Š</p><p><img src="/raqcdpcsc.hn-bkt.clouddn.com/img/202204221527183.png" alt="image-20220422131244957"></p><p>è§£å†³æ–¹æ³•ï¼Œåœ¨æ—è¾¹Deploymentä¸­æ–°å»ºä¸€ä¸ªwaråŒ…</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219261.png" alt="image-20220422131457421"></p><p>è­¦å‘Šå°±ä¼šæ¶ˆå¤±ã€‚</p><h5 id="å¯åŠ¨Tomcat"><a href="#å¯åŠ¨Tomcat" class="headerlink" title="å¯åŠ¨Tomcat"></a>å¯åŠ¨Tomcat</h5><p>ç‚¹å‡»ideaå³ä¸Šè§’çš„å¯åŠ¨</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219567.png" alt="image-20220422131612183"></p><p>æµè§ˆå™¨ä¸Š<code>localhost:8080/sec_war/</code>å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œå³å¯åŠ¨æˆåŠŸã€‚</p><h5 id="Tomcatå‡ºç°ä¹±ç ï¼Œè§£å†³æ–¹æ³•"><a href="#Tomcatå‡ºç°ä¹±ç ï¼Œè§£å†³æ–¹æ³•" class="headerlink" title="Tomcatå‡ºç°ä¹±ç ï¼Œè§£å†³æ–¹æ³•"></a>Tomcatå‡ºç°ä¹±ç ï¼Œè§£å†³æ–¹æ³•</h5><p>å¯åŠ¨Tomcatåï¼Œideaä¸‹é¢å‡ºç°ä¹±ç ï¼Œè§£å†³åŠæ³•ï¼š</p><p>æ‰“å¼€Tomcatæ–‡ä»¶å¤¹ä¸‹confçš„logging.propertiesï¼Œä¿®æ”¹é‡Œé¢çš„<code>java.util.logging.ConsoleHandler.encoding</code>ï¼Œä¸ºGBKã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219236.png" alt="image-20220422131916428"></p><p>é—®é¢˜è§£å†³</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312219144.png" alt="image-20220422131754034"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sublimeè¿è¡Œå‡ºç°é—®é¢˜è§£å†³</title>
      <link href="/2022/04/13/sublime%E8%BF%90%E8%A1%8C%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2022/04/13/sublime%E8%BF%90%E8%A1%8C%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>ç‚¹å‡»å·¥å…· &#x3D;&#x3D; ã€‹ ç¼–è¯‘ç³»ç»Ÿ &#x3D;&#x3D; ã€‹æ–°å»ºç¼–è¯‘ç³»ç»Ÿ</p><p>è¾“å…¥ä¸€ä¸‹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;encoding&quot;: &quot;utf-8&quot;,</span><br><span class="line">    &quot;working_dir&quot;: &quot;$file_path&quot;,</span><br><span class="line">    &quot;shell_cmd&quot;: &quot;g++ -Wall -std=c++11 -fexec-charset=GBK \&quot;$file_name\&quot; -o \&quot;$file_base_name\&quot;&quot;,</span><br><span class="line">    &quot;file_regex&quot;: &quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&quot;,</span><br><span class="line">    &quot;selector&quot;: &quot;source.c++&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;variants&quot;: </span><br><span class="line">    [</span><br><span class="line">        &#123;   </span><br><span class="line">        &quot;name&quot;: &quot;Run&quot;,</span><br><span class="line">            &quot;shell_cmd&quot;: &quot;g++ -Wall -std=c++11 -fexec-charset=GBK \&quot;$file\&quot; -o \&quot;$file_base_name\&quot; &amp;&amp; start cmd /c \&quot;\&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\&quot; &amp; pause\&quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> å‘½åä¸ºG++.sublime-buildï¼Œåç¼€ä¸è¦æ”¹ã€‚</p><p>ç„¶åç‚¹å‡»å·¥å…· ï¼Œé€‰æ‹©ç¼–è¯‘ç³»ç»Ÿä¸­è‡ªå·±åˆšåˆšæ–°å»ºçš„é‚£ä¸ªç³»ç»Ÿï¼Œé‡æ–°è¿è¡Œå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> sublime </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c ++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§»åŠ¨åº”ç”¨å¼€å‘æŠ€æœ¯å®éªŒä»£ç </title>
      <link href="/2022/04/06/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E5%AE%9E%E9%AA%8C%E4%BB%A3%E7%A0%81/"/>
      <url>/2022/04/06/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E5%AE%9E%E9%AA%8C%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="å®éªŒäºŒ"><a href="#å®éªŒäºŒ" class="headerlink" title="å®éªŒäºŒ"></a>å®éªŒäºŒ</h1><h2 id="å®éªŒ2-1"><a href="#å®éªŒ2-1" class="headerlink" title="å®éªŒ2.1"></a>å®éªŒ2.1</h2><h3 id="main-activity-java"><a href="#main-activity-java" class="headerlink" title="main_activity.java"></a>main_activity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.text2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.CheckBox;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">EditText</span> <span class="variable">name</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">tixing</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> CheckBox box1 , box2 , box3, box4;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;CheckBox&gt; checkBoxList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;CheckBox&gt;();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="built_in">this</span>.name = (EditText)<span class="built_in">super</span>.findViewById(R.id.edit1);</span><br><span class="line">        <span class="built_in">this</span>.tixing = (Button)<span class="built_in">super</span>.findViewById((R.id.tixing));</span><br><span class="line">        box1 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box1));</span><br><span class="line">        box2 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box2));</span><br><span class="line">        box3 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box3));</span><br><span class="line">        box4 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box4));</span><br><span class="line"></span><br><span class="line">        checkBoxList.add(box1);</span><br><span class="line">        checkBoxList.add(box2);</span><br><span class="line">        checkBoxList.add(box3);</span><br><span class="line">        checkBoxList.add(box4);</span><br><span class="line"></span><br><span class="line">        tixing.setOnClickListener(<span class="keyword">new</span> <span class="title class_">ShowListerer</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ShowListerer</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            <span class="keyword">for</span> (CheckBox checkbox : checkBoxList) &#123;</span><br><span class="line">                <span class="keyword">if</span> (checkbox.isChecked())&#123;</span><br><span class="line">                    sb.append(checkbox.getText().toString() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">info</span> <span class="operator">=</span> name.getText().toString();</span><br><span class="line">            AlertDialog.Builder builder= <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(MainActivity.<span class="built_in">this</span>);<span class="comment">//MainActivity.thisä¸ºå½“å‰ç¯å¢ƒ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(info.trim().equals(<span class="string">&quot;&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                builder.setMessage(<span class="string">&quot;è¯·è¾“å…¥å§“å&quot;</span>);<span class="comment">//æç¤ºå†…å®¹</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                builder.setMessage(<span class="string">&quot;å§“åæ˜¯: &quot;</span>+info+<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;æ€§åˆ«&quot;</span>+<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;ä¸“ä¸š&quot;</span>+<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;å…´è¶£çˆ±å¥½ &quot;</span>+<span class="string">&quot;&quot;</span>+sb.toString());<span class="comment">//æç¤ºå†…å®¹</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            builder.setPositiveButton(<span class="string">&quot;ç¡®è®¤&quot;</span>, <span class="literal">null</span>);<span class="comment">//ç¡®å®šæŒ‰é’®</span></span><br><span class="line"></span><br><span class="line">            builder.create().show();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="activity-main-xml"><a href="#activity-main-xml" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å§“å:&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;æå¤æ¾ 2012020047&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/gender&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;19dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;æ€§åˆ«&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/Radio1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;ç”·&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;å¥³&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;ä¸“ä¸š&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Spinner</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/chose&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:prompt</span>=<span class="string">&quot;@string/eduprompt&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:entries</span>=<span class="string">&quot;@array/edu&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:spinnerMode</span>=<span class="string">&quot;dialog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å…´è¶£çˆ±å¥½&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;éŸ³ä¹&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box2&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;è¿åŠ¨&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box3&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;æ¸¸æ³³&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box4&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;é˜…è¯»&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tixing&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;æäº¤&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å–æ¶ˆ&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="strings-xml"><a href="#strings-xml" class="headerlink" title="strings.xml"></a>strings.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>text2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;eduprompt&quot;</span>&gt;</span>è¯·é€‰æ‹©ä½ çš„ä¸“ä¸š<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="edu-xml"><a href="#edu-xml" class="headerlink" title="edu.xml"></a>edu.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">&quot;edu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>å¤§æ•°æ®å¼€å‘<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>ä¿¡æ¯å®‰å…¨<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>äººå·¥æ™ºèƒ½<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å®éªŒ2-2-1"><a href="#å®éªŒ2-2-1" class="headerlink" title="å®éªŒ2.2-1"></a>å®éªŒ2.2-1</h2><h3 id="MainActivity-java"><a href="#MainActivity-java" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.text22;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.SimpleAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String listdata[] = &#123;</span><br><span class="line">        <span class="string">&quot;ç§»åŠ¨åº”ç”¨å¼€å‘æŠ€æœ¯&quot;</span>,<span class="string">&quot;è®¡ç®—æœºç»„æˆåŸç†&quot;</span>,<span class="string">&quot;æ•°æ®ç»“æ„&quot;</span>,<span class="string">&quot;æ“ä½œç³»ç»Ÿ&quot;</span>,<span class="string">&quot;é¢å‘å¯¹è±¡æŠ€æœ¯&quot;</span>,<span class="string">&quot;é€»è¾‘è®¾è®¡&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    <span class="keyword">private</span> ListView listview;</span><br><span class="line">    <span class="keyword">private</span> TextView textview;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">           </span><br><span class="line">        <span class="built_in">this</span>.textview = (TextView) <span class="built_in">super</span>.findViewById(R.id.title) ;</span><br><span class="line">        <span class="built_in">this</span>.listview = (ListView) <span class="built_in">super</span>.findViewById(R.id.Mylistview);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="built_in">this</span>.listview.setAdapter(<span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>,</span><br><span class="line">                                                          android.R.layout.simple_expandable_list_item_1,</span><br><span class="line">                                                          <span class="built_in">this</span>.listdata));</span><br><span class="line">        </span><br><span class="line">        listview.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; arg0,View arg1,<span class="type">int</span> arg2,<span class="type">long</span> arg3)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> (String) listview.getItemAtPosition(arg2);</span><br><span class="line">                textview.setText(text);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="activity-main-xml-1"><a href="#activity-main-xml-1" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/title&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;MenuDemo&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/Mylistview&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒæ•ˆæœ"><a href="#å®éªŒæ•ˆæœ" class="headerlink" title="å®éªŒæ•ˆæœ"></a>å®éªŒæ•ˆæœ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326372.png" alt="image.png"></p><hr><h2 id="å®éªŒ2-2-2"><a href="#å®éªŒ2-2-2" class="headerlink" title="å®éªŒ2.2-2"></a>å®éªŒ2.2-2</h2><h3 id="Mainactivity-java"><a href="#Mainactivity-java" class="headerlink" title="Mainactivity.java"></a>Mainactivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.test22_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.ListActivity;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ListView listView;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Map&lt;String,Object&gt;&gt; list;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Map&lt;String,Object&gt;&gt;();</span><br><span class="line">        listView = (ListView) findViewById(R.id.listView);</span><br><span class="line">        </span><br><span class="line">        Map&lt;String,Object&gt; map1 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map2 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map3 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map4 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map5 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map6 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        </span><br><span class="line">        map1.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;å§“å&quot;</span>);</span><br><span class="line">        map1.put(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;æå¤æ¾&quot;</span>);</span><br><span class="line">        map1.put(<span class="string">&quot;picture&quot;</span>,R.drawable.img);</span><br><span class="line">        list.add(map1);</span><br><span class="line">        map2.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;æ€§åˆ«&quot;</span>);</span><br><span class="line">        map2.put(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        map2.put(<span class="string">&quot;picture&quot;</span>,R.drawable.img);</span><br><span class="line">        list.add(map2);</span><br><span class="line">        </span><br><span class="line">        map3.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;å­¦å·&quot;</span>);</span><br><span class="line">        map3.put(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;2012020047&quot;</span>);</span><br><span class="line">        map3.put(<span class="string">&quot;picture&quot;</span>,R.drawable.img);</span><br><span class="line">        list.add(map3);</span><br><span class="line">        map4.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;å¹´é¾„&quot;</span>);</span><br><span class="line">        map4.put(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;19&quot;</span>);</span><br><span class="line">        map4.put(<span class="string">&quot;picture&quot;</span>,R.drawable.img);</span><br><span class="line">        list.add(map4);</span><br><span class="line">        map5.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;å±…ä½åœ°&quot;</span>);</span><br><span class="line">        map5.put(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;å¼€å°&quot;</span>);</span><br><span class="line">        map5.put(<span class="string">&quot;picture&quot;</span>,R.drawable.img);</span><br><span class="line">        list.add(map5);</span><br><span class="line">        map6.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;é‚®ç®±&quot;</span>);</span><br><span class="line">        map6.put(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;2012020047@henu.edu.cn&quot;</span>);</span><br><span class="line">        map6.put(<span class="string">&quot;picture&quot;</span>,R.drawable.img);</span><br><span class="line">        list.add(map6);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//        SimpleAdapter simpleAdapter = new SimpleAdapter(this,list,R.layout.user,new String[]</span></span><br><span class="line">        <span class="comment">//                &#123;&quot;title&quot;,&quot;info&quot;,&quot;picture&quot;&#125;,</span></span><br><span class="line">        <span class="comment">//                new int[] &#123;R.id.title,R.id.info,R.id.picture&#125;);</span></span><br><span class="line">        <span class="type">MyAdapter</span> <span class="variable">adapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAdapter</span>(<span class="built_in">this</span>,list,R.layout.user);</span><br><span class="line">        listView.setAdapter(adapter);</span><br><span class="line">        listView.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                adapter.setCurrentItem(i);</span><br><span class="line">                adapter.setClick(<span class="literal">true</span>);</span><br><span class="line">                adapter.notifyDataSetChanged();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> Context context;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> resource;</span><br><span class="line">        <span class="keyword">private</span> List&lt;Map&lt;String,Object&gt;&gt; list;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> mCurrentItem=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> isClick=<span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * æœ‰å‚æ„é€ </span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">        *            ç•Œé¢</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">        *            æ•°æ®</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">        *            åˆ—è¡¨é¡¹èµ„æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyAdapter</span><span class="params">(Context context, List&lt;Map&lt;String, Object&gt;&gt; list, <span class="type">int</span> resource)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.context = context;</span><br><span class="line">            <span class="built_in">this</span>.list = list;</span><br><span class="line">            <span class="built_in">this</span>.resource = resource;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> list.size();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">            <span class="comment">// å£°æ˜å†…éƒ¨ç±»</span></span><br><span class="line">            <span class="type">Util</span> <span class="variable">util</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">flag</span> <span class="operator">=</span> i;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(view == <span class="literal">null</span>)&#123;</span><br><span class="line">                util = <span class="keyword">new</span> <span class="title class_">Util</span>();</span><br><span class="line">                <span class="comment">// ç»™xmlå¸ƒå±€æ–‡ä»¶åˆ›å»ºjavaå¯¹è±¡</span></span><br><span class="line">                <span class="type">LayoutInflater</span> <span class="variable">inflater</span> <span class="operator">=</span> LayoutInflater.from(context);</span><br><span class="line">                view = inflater.inflate(resource, <span class="literal">null</span>);</span><br><span class="line">                <span class="comment">// æŒ‡å‘å¸ƒå±€æ–‡ä»¶å†…éƒ¨ç»„ä»¶</span></span><br><span class="line">                util.picture = (ImageView) view.findViewById(R.id.picture);</span><br><span class="line">                util.info = (TextView) view.findViewById(R.id.info);</span><br><span class="line">                util.title = (TextView) view.findViewById(R.id.title);</span><br><span class="line">                <span class="comment">// å¢åŠ é¢å¤–å˜é‡</span></span><br><span class="line">                view.setTag(util);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                util = (Util) view.getTag();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// è·å–æ•°æ®æ˜¾ç¤ºåœ¨å„ç»„ä»¶</span></span><br><span class="line">            Map&lt;String, Object&gt; map = list.get(i);</span><br><span class="line">            util.info.setText((String) map.get(<span class="string">&quot;info&quot;</span>));</span><br><span class="line">            util.title.setText((String) map.get(<span class="string">&quot;title&quot;</span>));</span><br><span class="line">            util.picture.setImageResource((Integer) map.get(<span class="string">&quot;picture&quot;</span>));</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            LinearLayout parent= (LinearLayout) view.findViewById(R.id.parent1);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (mCurrentItem==i&amp;&amp;isClick)&#123;</span><br><span class="line">                parent.setBackgroundColor(Color.parseColor(<span class="string">&quot;#708090&quot;</span>));</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                parent.setBackgroundColor(Color.parseColor(<span class="string">&quot;#FFB6C1&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> view;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentItem</span><span class="params">(<span class="type">int</span> currentItem)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.mCurrentItem=currentItem;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setClick</span><span class="params">(<span class="type">boolean</span> click)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.isClick=click;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * å†…éƒ¨ç±»ï¼Œç”¨äºè¾…åŠ©é€‚é…</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@author</span> qiangzi</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Util</span>&#123;</span><br><span class="line">            TextView title;</span><br><span class="line">            TextView info;</span><br><span class="line">            ImageView picture;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="activity-xml"><a href="#activity-xml" class="headerlink" title="activity.xml"></a>activity.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;ä¸ªäººä¿¡æ¯&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/listView&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="user-xml"><a href="#user-xml" class="headerlink" title="user.xml"></a>user.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:id</span>=<span class="string">&quot;@+id/parent1&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:cacheColorHint</span> = <span class="string">&quot;#2BE4D3&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">             // <span class="attr">å›¾ç‰‡åœ¨res</span>/<span class="attr">drawabaleé‡Œé¢</span>,<span class="attr">è‡ªå·±æ”¾</span></span></span><br><span class="line"><span class="tag">             <span class="attr">android:id</span>=<span class="string">&quot;@+id/picture&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">android:layout_width</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">android:layout_height</span>=<span class="string">&quot;80dp&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">android:layout_margin</span>=<span class="string">&quot;5dip&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:id</span>=<span class="string">&quot;@+id/title&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:textSize</span>=<span class="string">&quot;22sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:id</span>=<span class="string">&quot;@+id/info&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒæ•ˆæœ-1"><a href="#å®éªŒæ•ˆæœ-1" class="headerlink" title="å®éªŒæ•ˆæœ"></a>å®éªŒæ•ˆæœ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326530.png" alt="image.png"></p><h2 id="å®éªŒ2-3"><a href="#å®éªŒ2-3" class="headerlink" title="å®éªŒ2.3"></a>å®éªŒ2.3</h2><h3 id="Mainactivity-java-1"><a href="#Mainactivity-java-1" class="headerlink" title="Mainactivity.java"></a>Mainactivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.a23;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> android.content.DialogInterface;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">fir</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">sec</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">thr</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">fou</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">fif</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">round</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">stra</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.fir = (Button)<span class="built_in">super</span>.findViewById(R.id.fir);</span><br><span class="line">        <span class="built_in">this</span>.sec = (Button)<span class="built_in">super</span>.findViewById(R.id.sec);</span><br><span class="line">        <span class="built_in">this</span>.thr = (Button)<span class="built_in">super</span>.findViewById(R.id.thr);</span><br><span class="line">        <span class="built_in">this</span>.fou = (Button)<span class="built_in">super</span>.findViewById(R.id.fou);</span><br><span class="line">        <span class="built_in">this</span>.fif = (Button)<span class="built_in">super</span>.findViewById(R.id.fif);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›åº¦æ¡</span></span><br><span class="line">        <span class="built_in">this</span>.round = (Button)<span class="built_in">super</span>.findViewById(R.id.round);</span><br><span class="line">        <span class="built_in">this</span>.stra = (Button)<span class="built_in">super</span>.findViewById(R.id.stra);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨buclick é‡Œé¢çš„alertdialogæ–¹æ³•</span></span><br><span class="line">        fir.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line">        sec.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line">        thr.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line">        fou.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line">        fif.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line"></span><br><span class="line">        round.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line">        stra.setOnClickListener(<span class="keyword">new</span> <span class="title class_">buclick</span>.click());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="buclick-java"><a href="#buclick-java" class="headerlink" title="buclick.java"></a>buclick.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.a23;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> android.app.DatePickerDialog;</span><br><span class="line"><span class="keyword">import</span> android.app.ProgressDialog;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.DialogInterface;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">buclick</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Context <span class="title function_">getContxt</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContxt</span><span class="params">(Context contxt)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.context = (MainActivity) contxt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">click</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> (v.getId()) &#123;</span><br><span class="line">                <span class="comment">// åˆ†ç±»å¯¹æ¯ä¸ªæŒ‰é’®çš„alertdialogè¿›è¡Œè®¾ç½®</span></span><br><span class="line">                <span class="keyword">case</span> R.id.fir:</span><br><span class="line">                    AlertDialog.<span class="type">Builder</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder (v.getContext());</span><br><span class="line">                    dialog.setTitle(<span class="string">&quot;åˆ é™¤å¯¹è¯æ¡†&quot;</span>);</span><br><span class="line">                    dialog.setMessage(<span class="string">&quot;ç¡®å®šè¦åˆ é™¤å¯¹è¯æ¡†å˜›&quot;</span>);</span><br><span class="line">                    dialog.setIcon(R.drawable.fir);</span><br><span class="line">                    dialog.setCancelable(<span class="literal">false</span>);</span><br><span class="line">                    dialog.setPositiveButton(<span class="string">&quot;æ˜¯&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.</span><br><span class="line">                            OnClickListener() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog, <span class="type">int</span> which)</span> &#123;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog.setNegativeButton(<span class="string">&quot;å¦&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.</span><br><span class="line">                            OnClickListener() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog, <span class="type">int</span> which)</span> &#123;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog.setNeutralButton(<span class="string">&quot;æŸ¥çœ‹è¯¦æƒ…&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog.show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.sec:</span><br><span class="line">                    AlertDialog.<span class="type">Builder</span> <span class="variable">dialog2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder (v.getContext());</span><br><span class="line">                    dialog2.setTitle(<span class="string">&quot;ä½ å–œæ¬¢åƒå“ªç§æ°´æœ&quot;</span>);</span><br><span class="line">                    dialog2.setIcon(R.drawable.fir);</span><br><span class="line">                    dialog2.setCancelable(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">                    dialog2.setItems(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;è‹¹æœ&quot;</span>,<span class="string">&quot;èŠ’æœ&quot;</span>,<span class="string">&quot;è‰è“&quot;</span>,<span class="string">&quot;é¦™è•‰&quot;</span>&#125;,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    dialog2.setNeutralButton(<span class="string">&quot;å–æ¶ˆ&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog2.show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.thr:</span><br><span class="line">                    AlertDialog.<span class="type">Builder</span> <span class="variable">dialog3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder (v.getContext());</span><br><span class="line">                    dialog3.setTitle(<span class="string">&quot;ä½ å–œæ¬¢åƒå“ªç§æ°´æœ&quot;</span>);</span><br><span class="line">                    dialog3.setIcon(R.drawable.fir);</span><br><span class="line">                    dialog3.setCancelable(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// å•é€‰æ¡†</span></span><br><span class="line">                    dialog3.setSingleChoiceItems(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;è‹¹æœ&quot;</span>,<span class="string">&quot;èŠ’æœ&quot;</span>,<span class="string">&quot;è‰è“&quot;</span>,<span class="string">&quot;é¦™è•‰&quot;</span>&#125;,<span class="number">0</span>,</span><br><span class="line">                            <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    dialog3.setPositiveButton(<span class="string">&quot;ç¡®è®¤&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog3.setNegativeButton(<span class="string">&quot;å–æ¶ˆ&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog3.show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.fou:</span><br><span class="line">                    AlertDialog.<span class="type">Builder</span> <span class="variable">dialog4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder (v.getContext());</span><br><span class="line">                    dialog4.setTitle(<span class="string">&quot;ä½ å–œæ¬¢åƒå“ªç§æ°´æœ&quot;</span>);</span><br><span class="line">                    dialog4.setIcon(R.drawable.fir);</span><br><span class="line">                    dialog4.setCancelable(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// å¤šé€‰æ¡†</span></span><br><span class="line">                    dialog4.setMultiChoiceItems(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;è‹¹æœ&quot;</span>,<span class="string">&quot;èŠ’æœ&quot;</span>,<span class="string">&quot;è‰è“&quot;</span>,<span class="string">&quot;é¦™è•‰&quot;</span>&#125;,</span><br><span class="line">                            <span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">                    dialog4.setPositiveButton(<span class="string">&quot;ç¡®è®¤&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog4.setNegativeButton(<span class="string">&quot;å–æ¶ˆ&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog,<span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog4.show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.fif:</span><br><span class="line">                    AlertDialog.<span class="type">Builder</span> <span class="variable">dialog5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder (v.getContext());</span><br><span class="line">                    dialog5.setCancelable(<span class="literal">false</span>);</span><br><span class="line">                    dialog5.setIcon(R.drawable.fir);</span><br><span class="line">                    dialog5.setTitle(<span class="string">&quot;ç”¨æˆ·ç™»å½•&quot;</span>);</span><br><span class="line">                    dialog5.setView(R.layout.dialog);</span><br><span class="line">                    dialog5.setPositiveButton(<span class="string">&quot;ç™»å½•&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog , <span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog5.setNegativeButton(<span class="string">&quot;å–æ¶ˆ&quot;</span>,<span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener()&#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialog , <span class="type">int</span> which)</span>&#123;</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    dialog5.show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.round:</span><br><span class="line">                    <span class="type">ProgressDialog</span> <span class="variable">round</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(v.getContext());</span><br><span class="line">                    round.setIcon(R.drawable.fir);</span><br><span class="line">                    round.setTitle(<span class="string">&quot;æç¤º&quot;</span>);</span><br><span class="line">                    round.setMessage(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªåœ†å½¢è¿›åº¦æ¡&quot;</span>);</span><br><span class="line">                    round.setCancelable(<span class="literal">true</span>);</span><br><span class="line">                    round.show();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.stra:</span><br><span class="line">                    <span class="type">ProgressDialog</span> <span class="variable">stra</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(v.getContext());</span><br><span class="line">                    stra.setIcon(R.drawable.fir);</span><br><span class="line">                    stra.setTitle(<span class="string">&quot;æç¤º&quot;</span>);</span><br><span class="line">                    stra.setMessage(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªé•¿æ¡å½¢è¿›åº¦å¯¹è¯æ¡†&quot;</span>);</span><br><span class="line">                    stra.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);</span><br><span class="line">                    stra.setMax(<span class="number">100</span>);</span><br><span class="line">                    stra.setCancelable(<span class="literal">true</span>);</span><br><span class="line">                    stra.show();</span><br><span class="line">                    <span class="type">Task</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Task</span>(stra);</span><br><span class="line">                    t.start();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    ä¸ºæ¡å½¢è¿›åº¦æ¡æ·»åŠ runæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"><span class="comment">//ä¸ºäº†é¿å…æ­»å¾ªç¯ï¼Œå®šä¹‰ä¸€ä¸ªæ§åˆ¶å˜é‡ï¼Œä½¿å¾—ç¨‹åºä¸ä¼šæ­»æ‰</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">run</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        ProgressDialog stra;</span><br><span class="line"></span><br><span class="line">        Task(ProgressDialog p) &#123;</span><br><span class="line">            stra = p;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (run) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                    stra.setProgress(stra.getProgress() + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (stra.getProgress() &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">                        stra.cancel();</span><br><span class="line">                        run = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                    run = <span class="literal">false</span>;<span class="comment">//äº§ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œè®©ä»–åœæ­¢</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="activity-main-xml-2"><a href="#activity-main-xml-2" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fir&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;75dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;ç¡®è®¤å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sec&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;åˆ—è¡¨å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/thr&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å•é€‰å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fou&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å¤šé€‰å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fif&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;è‡ªå®šä¹‰å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/round&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;åœ†å½¢è¿›åº¦æ¡å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/stra&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;æ¡å½¢è¿›åº¦æ¡å¯¹è¯æ¡†&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="dialog-xml"><a href="#dialog-xml" class="headerlink" title="dialog.xml"></a>dialog.xml</h3><p><strong>(åœ¨layoutæ–‡ä»¶å¤¹é‡Œé¢)</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/dialog&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;3dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;3dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span> = <span class="string">&quot;ç”¨æˆ·å:&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/name&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/mname&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;3dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;9dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span> = <span class="string">&quot;å¯†ç : &quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/password&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/mpassword&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹buttonçš„èƒŒæ™¯é¢œè‰²"><a href="#ä¿®æ”¹buttonçš„èƒŒæ™¯é¢œè‰²" class="headerlink" title="ä¿®æ”¹buttonçš„èƒŒæ™¯é¢œè‰²"></a>ä¿®æ”¹buttonçš„èƒŒæ™¯é¢œè‰²</h3><ol><li><p>æ‰“å¼€valuesæ–‡ä»¶å¤¹é‡Œé¢çš„themesé‡Œé¢ç¬¬ä¸€ä¸ªthemes.xmlæ–‡ä»¶</p></li><li><p>ä¿®æ”¹é‡Œé¢çš„ç¬¬äºŒè¡Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.23&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">æ”¹ä¸ºï¼š</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.23&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.MaterialComponents.DayNight.DarkActionBar.Bridge&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ååˆå§‹ç•Œé¢å°±å˜æˆç°è‰²äº†ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹çš„è“ç´«è‰²äº†</p></li></ol><h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326244.png" alt="image-20220420170618555"></p><h2 id="TabHost"><a href="#TabHost" class="headerlink" title="TabHost"></a>TabHost</h2><p><strong>æ³¨é‡Šï¼šæ­¤æ¬¡å¹¶éå®éªŒæŒ‡å¯¼ä¹¦ä¸Šè¦æ±‚çš„ä»£ç ï¼Œæ˜¯ä¹¦ä¸Šçš„æºç ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œ2.4å®éªŒå°±ä¸å†é‡æ–°å†™</strong></p><h3 id="activity-main-xml-é¡¶éƒ¨å¯¼èˆª"><a href="#activity-main-xml-é¡¶éƒ¨å¯¼èˆª" class="headerlink" title="activity_main.xml(é¡¶éƒ¨å¯¼èˆª)"></a>activity_main.xml(é¡¶éƒ¨å¯¼èˆª)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TabHost</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tabhost&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é¡¶éƒ¨å¯¼èˆª--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--     TabWidget   æ¯ä¸ªTabçš„é€‰é¡¹ï¼Œå³Tabæ ‡ç­¾--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TabWidget</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@android:id/tabs&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentTop</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@android:id/tabcontent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Tabé¡µ1--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/file&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/open&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;æ‰“å¼€æ–‡ä»¶&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/save&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;ä¿å­˜æ–‡ä»¶&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/saveAs&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;æ–‡ä»¶å¦å­˜ä¸º&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Tabé¡µ2--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/copy&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;å¤åˆ¶&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/paste&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;ç²˜è´´&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Tabé¡µ3--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/seek&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;è¯·è¾“å…¥æ£€ç´¢å…³é”®å­—...&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/seekbut1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;æœç´¢&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Tabé¡µ4--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/time&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimePicker</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/seekbut&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;è®¾ç½®æ—¶é—´&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">TabHost</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="activity-three-xmlï¼ˆåº•éƒ¨å¯¼èˆªï¼‰"><a href="#activity-three-xmlï¼ˆåº•éƒ¨å¯¼èˆªï¼‰" class="headerlink" title="activity_three.xmlï¼ˆåº•éƒ¨å¯¼èˆªï¼‰"></a>activity_three.xmlï¼ˆåº•éƒ¨å¯¼èˆªï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">TabHost</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tabhost&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å®ç°åº•éƒ¨å¯¼èˆª--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@android:id/tabcontent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/file&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/open&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;æ‰“å¼€æ–‡ä»¶&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/save&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;ä¿å­˜æ–‡ä»¶&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/saveAs&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;æ–‡ä»¶å¦å­˜ä¸º&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/copy&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;å¤åˆ¶&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/paste&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;ç²˜è´´&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/seek&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;è¯·è¾“å…¥æ£€ç´¢å…³é”®å­—...&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/seekbut1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;æœç´¢&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/time&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimePicker</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/seekbut&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;è®¾ç½®æ—¶é—´&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TabWidget</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@android:id/tabs&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentTop</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">TabHost</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="MainActivity-java-1"><a href="#MainActivity-java-1" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.a31;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TabHost;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TabHost myTabHost;                    <span class="comment">//å®šä¹‰TabHost</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] layRes = &#123;R.id.file, R.id.edit, R.id.seek, R.id.time&#125;;<span class="comment">//å®šä¹‰å†…åµŒå¸ƒå±€ç®¡ç†å™¨ID</span></span><br><span class="line">    <span class="keyword">private</span> Button openButton;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (v.getId()) &#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.open:</span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;è¿™æ˜¯æ‰“openæŒ‰é’®&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_three);</span><br><span class="line">        myTabHost = findViewById(R.id.tabhost); <span class="comment">//å–å¾—TabHostå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">        myTabHost.setup();</span><br><span class="line">        <span class="comment">//å»ºç«‹TabHostå¯¹è±¡</span></span><br><span class="line">        TabHost.<span class="type">TabSpec</span> <span class="variable">myTab1</span> <span class="operator">=</span> myTabHost.newTabSpec(<span class="string">&quot;æ–‡ä»¶&quot;</span>);    <span class="comment">//å®šä¹‰TabSpec</span></span><br><span class="line">        myTab1.setIndicator(<span class="string">&quot;File&quot;</span>);                            <span class="comment">//è®¾ç½®é€‰é¡¹æ–‡å­—</span></span><br><span class="line">        myTab1.setContent(layRes[<span class="number">0</span>]);                <span class="comment">//è®¾ç½®æ˜¾ç¤ºçš„ç»„ä»¶</span></span><br><span class="line">        myTabHost.addTab(myTab1);                    <span class="comment">//å¢åŠ é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        TabHost.<span class="type">TabSpec</span> <span class="variable">myTab2</span> <span class="operator">=</span> myTabHost.newTabSpec(<span class="string">&quot;ç¼–è¾‘&quot;</span>);    <span class="comment">//å®šä¹‰TabSpec</span></span><br><span class="line">        myTab2.setIndicator(<span class="string">&quot;Edit&quot;</span>).setContent(layRes[<span class="number">1</span>]);                <span class="comment">//è®¾ç½®æ˜¾ç¤ºçš„ç»„ä»¶</span></span><br><span class="line">        myTabHost.addTab(myTab2);                    <span class="comment">//å¢åŠ é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line">        TabHost.<span class="type">TabSpec</span> <span class="variable">myTab3</span> <span class="operator">=</span> myTabHost.newTabSpec(<span class="string">&quot;æŸ¥çœ‹&quot;</span>);    <span class="comment">//å®šä¹‰TabSpec</span></span><br><span class="line">        myTab3.setIndicator(<span class="string">&quot;View&quot;</span>).setContent(layRes[<span class="number">2</span>]);                <span class="comment">//è®¾ç½®æ˜¾ç¤ºçš„ç»„ä»¶</span></span><br><span class="line">        myTabHost.addTab(myTab3);                    <span class="comment">//å¢åŠ é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line">        TabHost.<span class="type">TabSpec</span> <span class="variable">myTab4</span> <span class="operator">=</span> myTabHost.newTabSpec(<span class="string">&quot;è®¾ç½®&quot;</span>)    <span class="comment">//å®šä¹‰TabSpec</span></span><br><span class="line">                .setIndicator(<span class="string">&quot;Set&quot;</span>)                   <span class="comment">//è®¾ç½®é€‰é¡¹æ–‡å­—</span></span><br><span class="line">                .setContent(layRes[<span class="number">3</span>]);                <span class="comment">//è®¾ç½®æ˜¾ç¤ºçš„ç»„ä»¶</span></span><br><span class="line">        myTabHost.addTab(myTab4);                    <span class="comment">//å¢åŠ é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line">        myTabHost.setCurrentTab(<span class="number">0</span>);                <span class="comment">//è®¾ç½®å¼€å§‹é»˜è®¤é€‰é¡¹</span></span><br><span class="line"><span class="comment">//        myTabHost.setCurrentTabByTag(&quot;æ–‡ä»¶&quot;);</span></span><br><span class="line">        openButton = findViewById(R.id.open);</span><br><span class="line">        openButton.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//é€‰é¡¹åˆ‡æ¢äº‹ä»¶å¤„ç†ï¼ŒsetOnTabChangedListener</span></span><br><span class="line">        myTabHost.setOnTabChangedListener(<span class="keyword">new</span> <span class="title class_">TabHost</span>.OnTabChangeListener() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabChanged</span><span class="params">(String tabId)</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå›¾-1"><a href="#æ•ˆæœå›¾-1" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326248.png" alt="image-20220503235657029"></p><h1 id="å®éªŒä¸‰"><a href="#å®éªŒä¸‰" class="headerlink" title="å®éªŒä¸‰"></a>å®éªŒä¸‰</h1><h2 id="å®éªŒ3-1"><a href="#å®éªŒ3-1" class="headerlink" title="å®éªŒ3.1"></a>å®éªŒ3.1</h2><h3 id="MainActivity-java-2"><a href="#MainActivity-java-2" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.a3_11;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Array;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String listdata[] = &#123;<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;ç‹äº”&quot;</span>,<span class="string">&quot;é™ˆå…­&quot;</span>,<span class="string">&quot;å®‹ä¸ƒ&quot;</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> ListView listView;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="keyword">private</span> ArrayAdapter adpter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        listView = (ListView)findViewById(R.id.listview);</span><br><span class="line">        <span class="comment">// å°†listdataçš„æ•°æ®å¯¼å…¥åˆ°listçš„ æ•°ç»„ä¸­,é€šè¿‡åˆ é™¤æ•°ç»„çš„å…ƒç´ ï¼Œæ¥å®ç°åˆ é™¤æ“ä½œ</span></span><br><span class="line">        list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;(Arrays.asList(listdata));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ArrayAdapterçš„é€‚é…å™¨</span></span><br><span class="line">        adpter = <span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>, android.R.layout.simple_expandable_list_item_1</span><br><span class="line">                ,<span class="built_in">this</span>.list);</span><br><span class="line">        <span class="built_in">this</span>.listView.setAdapter(adpter);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// listview çš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">        listView.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                <span class="comment">// å‘ MainActivity.javaä¼ å…¥æ•°æ®</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String)listView.getItemAtPosition(i);</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line">                it.putExtra(<span class="string">&quot;sendinfo&quot;</span>,name);</span><br><span class="line">                it.putExtra(<span class="string">&quot;value&quot;</span>,i);</span><br><span class="line">                startActivityForResult(it,<span class="number">1</span>);</span><br><span class="line">                adpter.notifyDataSetChanged();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥åˆ é™¤æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(ArrayAdapter adapterView, <span class="type">int</span> i)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> (String)listView.getItemAtPosition(i);</span><br><span class="line">        <span class="comment">// åˆ é™¤listview ä¸­ç¬¬iä¸ªæ•°æ®</span></span><br><span class="line">        adpter.remove(listView.getItemAtPosition(i));</span><br><span class="line">        Toast.makeText(getApplicationContext(),text+<span class="string">&quot;çš„è®°å½•å·²è¢«åˆ é™¤&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, <span class="meta">@Nullable</span> Intent data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        <span class="keyword">switch</span> (requestCode) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">if</span>(resultCode == RESULT_OK)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// è¿”å›ç‚¹å‡»è¯¥é¡¹çš„ç´¢å¼•</span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> data.getIntExtra(<span class="string">&quot;return&quot;</span>,<span class="number">1</span>);</span><br><span class="line">                    <span class="comment">// è°ƒç”¨åˆ é™¤çš„æ–¹æ³•</span></span><br><span class="line">                    delete(adpter,h);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;å–æ¶ˆæ“ä½œ&quot;</span>;</span><br><span class="line">                    Toast.makeText(getApplicationContext(),text,Toast.LENGTH_LONG).show();</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MainActivity2-java"><a href="#MainActivity2-java" class="headerlink" title="MainActivity2.java"></a>MainActivity2.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.a3_11;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å¾—Mainactivity.javaæä¾›è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">        <span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="built_in">super</span>.getIntent();</span><br><span class="line">        <span class="type">String</span> <span class="variable">info</span> <span class="operator">=</span> it.getStringExtra(<span class="string">&quot;sendinfo&quot;</span>); <span class="comment">// listviewçš„å†…å®¹</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> it.getIntExtra(<span class="string">&quot;value&quot;</span>,<span class="number">1</span>); <span class="comment">// ç‚¹å‡»çš„æ•°ç»„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯¹xmlä¸­çš„å¸ƒå±€å˜é‡è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line">        Button btn1= (Button) findViewById(R.id.fir);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn2</span> <span class="operator">=</span> (Button) findViewById(R.id.sec);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">txt</span> <span class="operator">=</span> (TextView) findViewById(R.id.txt);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        txt.setText(<span class="string">&quot;åˆ é™¤ &quot;</span>+info+<span class="string">&quot; çš„è®°å½•å—?&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨ä¸¤ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">        <span class="comment">// ç¡®å®šæŒ‰é’®</span></span><br><span class="line">        btn1.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                <span class="comment">// å‘main activity è¿”å›ç‚¹å‡»çš„çŠ¶æ€ï¼Œä»è€Œæ‰§è¡Œåˆ é™¤æ“ä½œ</span></span><br><span class="line">                getIntent().putExtra(<span class="string">&quot;return&quot;</span>,position);</span><br><span class="line">                setResult(RESULT_OK,MainActivity2.<span class="built_in">this</span>.getIntent());</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// å–æ¶ˆæŒ‰é’®</span></span><br><span class="line">        btn2.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">// æŒ‰é’®2 æ˜¯å–æ¶ˆæ“ä½œ</span></span><br><span class="line">                <span class="type">Intent</span> <span class="variable">it2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">                setResult(RESULT_CANCELED,it2);</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="activity-main-xml-3"><a href="#activity-main-xml-3" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æµ‹è¯•è¿”å›çš„å€¼--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;EditText--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        android:id=&quot;@+id/mag&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        android:text=&quot;nihao&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        android:layout_width=&quot;match_parent&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        android:layout_height=&quot;wrap_content&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/listview&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="activity-main2-xml"><a href="#activity-main2-xml" class="headerlink" title="activity_main2.xml"></a>activity_main2.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity2&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/txt&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fir&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;ç¡®è®¤&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/sec&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å–æ¶ˆ&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒç»“æœï¼š"><a href="#å®éªŒç»“æœï¼š" class="headerlink" title="å®éªŒç»“æœï¼š"></a>å®éªŒç»“æœï¼š</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326568.png" alt="image-20220504183521712"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326193.png" alt="image-20220504183531073"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326721.png" alt="image-20220504183542615"></p><h3 id="HashMap-å’ŒMapåŒºåˆ«"><a href="#HashMap-å’ŒMapåŒºåˆ«" class="headerlink" title="HashMap å’ŒMapåŒºåˆ«"></a>HashMap å’ŒMapåŒºåˆ«</h3><p>Map</p><ol><li>Mapé›†åˆä¸€æ¬¡å­˜å‚¨ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªé”®å¯¹è±¡ï¼Œä¸€ä¸ªå€¼å¯¹è±¡</li><li>é”®å¯¹è±¡åœ¨é›†åˆä¸­æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥é€šè¿‡é”®æ¥æŸ¥æ‰¾å€¼</li></ol><p>HashMap</p><ol><li>ä½¿ç”¨<a href="https://www.baidu.com/s?wd=%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao">å“ˆå¸Œç®—æ³•</a>å¯¹é”®å»é‡å¤ï¼Œæ•ˆç‡é«˜ï¼Œä½†æ— åº</li><li>HashMapæ˜¯<a href="https://www.baidu.com/s?wd=Map%E6%8E%A5%E5%8F%A3&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao">Mapæ¥å£</a>çš„ä¸»è¦å®ç°ç±»</li></ol><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p><strong>Listæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€ŒArrayListæ˜¯Listæ¥å£çš„ä¸€ä¸ªå®ç°ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;E&gt; objectName =<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();ã€€ <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"></span><br><span class="line">ArrayList&lt;String&gt; sites = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        sites.add(<span class="string">&quot;Google&quot;</span>);</span><br><span class="line">        sites.add(<span class="string">&quot;Runoob&quot;</span>);</span><br><span class="line">        sites.add(<span class="string">&quot;Taobao&quot;</span>);</span><br><span class="line">        sites.add(<span class="string">&quot;Weibo&quot;</span>);</span><br><span class="line">        sites.set(<span class="number">2</span>, <span class="string">&quot;Wiki&quot;</span>); <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç´¢å¼•ä½ç½®ï¼Œç¬¬äºŒä¸ªä¸ºè¦ä¿®æ”¹çš„å€¼</span></span><br><span class="line">sites.remove(<span class="number">3</span>); <span class="comment">// åˆ é™¤ç¬¬å››ä¸ªå…ƒç´ </span></span><br><span class="line">System.out.println(sites.size());</span><br></pre></td></tr></table></figure><ul><li><strong>E</strong>: æ³›å‹æ•°æ®ç±»å‹ï¼Œç”¨äºè®¾ç½® objectName çš„æ•°æ®ç±»å‹ï¼Œ<strong>åªèƒ½ä¸ºå¼•ç”¨æ•°æ®ç±»å‹</strong>ã€‚</li><li><strong>objectName</strong>: å¯¹è±¡åã€‚</li></ul><h2 id="å®éªŒ3-2"><a href="#å®éªŒ3-2" class="headerlink" title="å®éªŒ3.2"></a>å®éªŒ3.2</h2><h3 id="MainActivity"><a href="#MainActivity" class="headerlink" title="MainActivity"></a>MainActivity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a3_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.NotificationCompat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Notification;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationChannel;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationManager;</span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapFactory;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.channels.Channel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span><span class="string">&quot;&quot;</span> ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line">    <span class="keyword">private</span> NotificationManager notificationManager;</span><br><span class="line">    <span class="keyword">private</span> Notification notification;</span><br><span class="line">    <span class="keyword">private</span> String Channeld;</span><br><span class="line">    <span class="keyword">private</span> CharSequence ChannelName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;my_channel_01&quot;</span>;</span><br><span class="line">        String name=<span class="string">&quot;æˆ‘æ˜¯æ¸ é“åå­—&quot;</span>;</span><br><span class="line">        notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">        notification = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123;</span><br><span class="line">            <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, NotificationManager.IMPORTANCE_LOW);</span><br><span class="line">            notificationManager.createNotificationChannel(mChannel);</span><br><span class="line">            notification = <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(<span class="built_in">this</span>,<span class="string">&quot;chat&quot;</span>)</span><br><span class="line">                    .setChannelId(id)</span><br><span class="line">                    .setLargeIcon(BitmapFactory.decodeResource(getResources(),R.mipmap.ic_launcher))</span><br><span class="line">                    .setContentTitle(<span class="string">&quot;5 new messages&quot;</span>)</span><br><span class="line">                    .setWhen(System.currentTimeMillis())</span><br><span class="line">                    .setContentText(<span class="string">&quot;2012020047 - lks&quot;</span>)</span><br><span class="line">                    .setPriority(NotificationCompat.PRIORITY_HIGH)</span><br><span class="line">                    .setSmallIcon(R.drawable.fir).build();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            NotificationCompat.<span class="type">Builder</span> <span class="variable">notificationBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(<span class="built_in">this</span>,<span class="string">&quot;subscribe&quot;</span>)</span><br><span class="line">                    .setContentTitle(<span class="string">&quot;5 new messages&quot;</span>)</span><br><span class="line">                    .setContentText(<span class="string">&quot;hahaha&quot;</span>)</span><br><span class="line">                    .setSmallIcon(R.drawable.fir)</span><br><span class="line">                    .setOngoing(<span class="literal">true</span>);</span><br><span class="line">            notification = notificationBuilder.build();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">(View view)</span>&#123;</span><br><span class="line">        notificationManager.notify(id ++, notification);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clean</span><span class="params">(View view)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;i &lt;= id ;i ++)&#123;</span><br><span class="line">            notificationManager.cancel(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MyRecevier-java"><a href="#MyRecevier-java" class="headerlink" title="MyRecevier.java"></a>MyRecevier.java</h3><p>æ–°å»ºä¸€ä¸ªå¹¿æ’­ç±»</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326935.png" alt="image-20220518110309259"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a3_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Notification;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationChannel;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationManager;</span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.RequiresApi;</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.NotificationCompat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyReceiver</span> <span class="keyword">extends</span> <span class="title class_">BroadcastReceiver</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> NotificationManager notificationManager;</span><br><span class="line">    <span class="keyword">private</span> Notification notification;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequiresApi(api = Build.VERSION_CODES.O)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onReceive</span><span class="params">(Context context, Intent intent)</span> &#123;</span><br><span class="line">        Toast.makeText(context, <span class="string">&quot;111&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> This method is called when the BroadcastReceiver is receiving</span></span><br><span class="line">        <span class="comment">// an Intent broadcast.</span></span><br><span class="line"><span class="comment">//        throw new UnsupportedOperationException(&quot;Not yet implemented&quot;);</span></span><br><span class="line"><span class="comment">//        Intent service = new Intent(context,MyService.class);</span></span><br><span class="line"><span class="comment">//        context.startService(service);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;my_channel_01&quot;</span>;</span><br><span class="line">        String name=<span class="string">&quot;æˆ‘æ˜¯æ¸ é“åå­—&quot;</span>;</span><br><span class="line">        notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line">        notification = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, NotificationManager.IMPORTANCE_LOW);</span><br><span class="line">        notificationManager.createNotificationChannel(mChannel);</span><br><span class="line">        notification = <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(context)</span><br><span class="line">                .setChannelId(id)</span><br><span class="line">                .setContentTitle(<span class="string">&quot;5 new messages&quot;</span>)</span><br><span class="line">                .setWhen(System.currentTimeMillis())</span><br><span class="line">                .setContentText(<span class="string">&quot;2012020047 - lks&quot;</span>)</span><br><span class="line">                .setPriority(NotificationCompat.PRIORITY_HIGH)</span><br><span class="line">                .setSmallIcon(R.drawable.fir).build();</span><br><span class="line"></span><br><span class="line">        notificationManager.notify(<span class="number">1</span>,notification);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="activity-main-xml-4"><a href="#activity-main-xml-4" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;send&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å‘é€å¹¿æ’­æ¶ˆæ¯&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;clean&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;æ¸…é™¤é€šçŸ¥å›¾æ ‡&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="AndroidManifest-xml-ï¼ˆåœ¨é‡Œé¢æ³¨å†Œå¹¿æ’­å’Œå¼€æœºè‡ªå¯åŠ¨ï¼‰"><a href="#AndroidManifest-xml-ï¼ˆåœ¨é‡Œé¢æ³¨å†Œå¹¿æ’­å’Œå¼€æœºè‡ªå¯åŠ¨ï¼‰" class="headerlink" title="AndroidManifest.xml ï¼ˆåœ¨é‡Œé¢æ³¨å†Œå¹¿æ’­å’Œå¼€æœºè‡ªå¯åŠ¨ï¼‰"></a>AndroidManifest.xml ï¼ˆåœ¨é‡Œé¢æ³¨å†Œå¹¿æ’­å’Œå¼€æœºè‡ªå¯åŠ¨ï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.henu.a3_2&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;</span> /&gt;</span> <span class="comment">&lt;!--æ¥æ”¶å¼€æœºçš„å¹¿æ’­--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:roundIcon</span>=<span class="string">&quot;@mipmap/ic_launcher_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/Theme.32&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ¥æ”¶å¼€æœºçš„å¹¿æ’­--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">&quot;.MyReceiver&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h3><h4 id="æ­£å¸¸è¿è¡Œ"><a href="#æ­£å¸¸è¿è¡Œ" class="headerlink" title="æ­£å¸¸è¿è¡Œ"></a>æ­£å¸¸è¿è¡Œ</h4><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327744.png" alt="image-20220518110526138"></p><h4 id="å¼€æœºå¯åŠ¨å"><a href="#å¼€æœºå¯åŠ¨å" class="headerlink" title="å¼€æœºå¯åŠ¨å"></a>å¼€æœºå¯åŠ¨å</h4><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327315.png" alt="image-20220518110540026"></p><h4 id="ç‚¹å‡»å‘é€å¹¿æ’­å"><a href="#ç‚¹å‡»å‘é€å¹¿æ’­å" class="headerlink" title="ç‚¹å‡»å‘é€å¹¿æ’­å"></a>ç‚¹å‡»å‘é€å¹¿æ’­å</h4><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327572.png" alt="image-20220518110604196"></p><h1 id="å®éªŒå››"><a href="#å®éªŒå››" class="headerlink" title="å®éªŒå››"></a>å®éªŒå››</h1><h2 id="å®éªŒ4-1"><a href="#å®éªŒ4-1" class="headerlink" title="å®éªŒ4.1"></a>å®éªŒ4.1</h2><h3 id="MainActivity-java-3"><a href="#MainActivity-java-3" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a4_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">start1</span> <span class="operator">=</span> (Button) <span class="built_in">super</span>.findViewById(R.id.fir);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">end1</span> <span class="operator">=</span> (Button) <span class="built_in">super</span>.findViewById(R.id.sec);</span><br><span class="line"></span><br><span class="line">        start1.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        end1.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (v.getId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.fir:</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">start</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MyService.class);</span><br><span class="line">                startService(start);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.sec:</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">stop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MyService.class);</span><br><span class="line">                stopService(stop);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MyService-java"><a href="#MyService-java" class="headerlink" title="MyService.java"></a>MyService.java</h3><p>æ–°å»ºä¸€ä¸ªServiceç±»ï¼Œé€‰ç¬¬ä¸€ä¸ªserviceï¼Œä¼šè‡ªåŠ¨å¸®ä½ åœ¨ <code>AndroidManifest.xml</code> ä¸­æ³¨å†Œå¥½</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327509.png" alt="image-20220518210756830"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a4_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Notification;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationChannel;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationManager;</span><br><span class="line"><span class="keyword">import</span> android.app.PendingIntent;</span><br><span class="line"><span class="keyword">import</span> android.app.Service;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapFactory;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.IBinder;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.RequiresApi;</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.NotificationCompat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> <span class="keyword">extends</span> <span class="title class_">Service</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;MyService&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> NotificationManager notificationManager;</span><br><span class="line">    <span class="keyword">private</span> Notification notification;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">time</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequiresApi(api = Build.VERSION_CODES.O)</span></span><br><span class="line">    <span class="comment">// è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ï¼Œç”¨æ¥å¾ªç¯æ˜¾ç¤ºä¸¤ä¸ªé€šçŸ¥</span></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">notice</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@RequiresApi(api = Build.VERSION_CODES.O)</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            Log.d(TAG,<span class="string">&quot;å¯åŠ¨æˆåŠŸ&quot;</span>);</span><br><span class="line">            <span class="comment">// å½“timeä¸ä¸ºç©ºï¼Œå°±ä¸€ç›´å¾ªç¯</span></span><br><span class="line">            <span class="keyword">while</span>(!time)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// åˆ©ç”¨flag è¿›è¡Œä¸¤ä¸ªé€šçŸ¥ä¹‹é—´çš„åˆ‡æ¢</span></span><br><span class="line">                <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;my_channel_01&quot;</span>;</span><br><span class="line">                    String name=<span class="string">&quot;æˆ‘æ˜¯æ¸ é“åå­—&quot;</span>;</span><br><span class="line">                    notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">                    notification = <span class="literal">null</span>;</span><br><span class="line">                    <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, NotificationManager.IMPORTANCE_LOW);</span><br><span class="line">                    notificationManager.createNotificationChannel(mChannel);</span><br><span class="line">                    notification = <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(getApplicationContext())</span><br><span class="line">                            .setChannelId(id)</span><br><span class="line">                            .setContentTitle(<span class="string">&quot;fir&quot;</span>)</span><br><span class="line">                            .setWhen(System.currentTimeMillis())</span><br><span class="line">                            .setContentText(<span class="string">&quot;2012020047 - lks&quot;</span>)</span><br><span class="line">                            .setSmallIcon(R.drawable.fir).build();</span><br><span class="line">                    notificationManager.notify(<span class="number">1</span>,notification);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;my_channel_01&quot;</span>;</span><br><span class="line">                    String name=<span class="string">&quot;æˆ‘æ˜¯æ¸ é“åå­—&quot;</span>;</span><br><span class="line">                    notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">                    notification = <span class="literal">null</span>;</span><br><span class="line">                    <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, NotificationManager.IMPORTANCE_LOW);</span><br><span class="line">                    notificationManager.createNotificationChannel(mChannel);</span><br><span class="line">                    notification = <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(getApplicationContext())</span><br><span class="line">                            .setChannelId(id)</span><br><span class="line">                            .setContentTitle(<span class="string">&quot;sec&quot;</span>)</span><br><span class="line">                            .setWhen(System.currentTimeMillis())</span><br><span class="line">                            .setContentText(<span class="string">&quot;2012020047 - lks&quot;</span>)</span><br><span class="line">                            .setSmallIcon(R.drawable.time).build();</span><br><span class="line">                    notificationManager.notify(<span class="number">1</span>,notification);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// è®¾ç½®å»¶è¿Ÿæ—¶é—´</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequiresApi(api = Build.VERSION_CODES.O)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">onStartCommand</span><span class="params">(Intent intent, <span class="type">int</span> flags, <span class="type">int</span> startId)</span> &#123;</span><br><span class="line">        Log.d(TAG,<span class="string">&quot;onstart &quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(notice);</span><br><span class="line">        <span class="keyword">if</span>(!thread.isAlive())&#123;</span><br><span class="line">            thread.start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onStartCommand(intent, flags, startId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æœåŠ¡</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.d(TAG,<span class="string">&quot;destroy&quot;</span>);</span><br><span class="line">        <span class="comment">// time = true å…³é—­çº¿ç¨‹</span></span><br><span class="line">        time = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// q</span></span><br><span class="line">        notificationManager.cancel(<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.d(TAG,<span class="string">&quot;oncreate &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onCreate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IBinder <span class="title function_">onBind</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Return the communication channel to the service.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="antivity-main-xml"><a href="#antivity-main-xml" class="headerlink" title="antivity_main.xml"></a>antivity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fir&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å¯åŠ¨æœåŠ¡&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sec&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å…³é—­æœåŠ¡&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒç»“æœï¼š-1"><a href="#å®éªŒç»“æœï¼š-1" class="headerlink" title="å®éªŒç»“æœï¼š"></a>å®éªŒç»“æœï¼š</h3><p>ç‚¹å‡»å¯åŠ¨ä¹‹åï¼Œæ¯ä¸ªä¸€ç§’æ›´æ–°é€šçŸ¥æ ä¸­çš„é€šçŸ¥ï¼Œäº¤æ›¿æ˜¾ç¤ºä¸¤ä¸ªä¸åŒçš„å›¾æ ‡ï¼Œç‚¹å‡»å…³é—­æœåŠ¡ï¼ŒæœåŠ¡åœæ­¢ï¼Œé€šçŸ¥æ å›¾æ ‡è¢«å…³é—­</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327113.png" alt="image-20220518211114055"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327660.png" alt="image-20220518211128192"></p><h2 id="å®éªŒ4-2"><a href="#å®éªŒ4-2" class="headerlink" title="å®éªŒ4.2"></a>å®éªŒ4.2</h2><h3 id="MainActivity-java-4"><a href="#MainActivity-java-4" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a4_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.ComponentName;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.content.ServiceConnection;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.IBinder;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;MainActivity&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> MyService.MyBinder mybinder;</span><br><span class="line">    <span class="comment">// è·å–æœåŠ¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">MyService</span> <span class="variable">myService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyService</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ServiceConnection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServiceConnection</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onServiceConnected</span><span class="params">(ComponentName componentName, IBinder iBinder)</span> &#123;</span><br><span class="line">            Log.i(<span class="string">&quot;MainActivity&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†onServiceConnected(),å½“å‰Acitivityä¸æœåŠ¡è¿æ¥æˆåŠŸ&quot;</span>);</span><br><span class="line">            mybinder =(MyService.MyBinder) iBinder;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onServiceDisconnected</span><span class="params">(ComponentName componentName)</span> &#123;</span><br><span class="line">            Log.i(<span class="string">&quot;MainActivity&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†onServiceDisconnected(),å½“å‰Acitivityä¸æœåŠ¡æ–­å¼€è¿æ¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span> <span class="variable">fir</span> <span class="operator">=</span> (Button) <span class="built_in">super</span>.findViewById(R.id.fir);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">sec</span> <span class="operator">=</span> (Button) <span class="built_in">super</span>.findViewById(R.id.sec);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">thr</span> <span class="operator">=</span> (Button) <span class="built_in">super</span>.findViewById(R.id.thr);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">fou</span> <span class="operator">=</span> (Button) <span class="built_in">super</span>.findViewById(R.id.fou);</span><br><span class="line"></span><br><span class="line">        fir.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        sec.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        thr.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        fou.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (view.getId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.fir:</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">bindIntent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MyService.class);</span><br><span class="line">                bindService(bindIntent,connection,BIND_AUTO_CREATE);</span><br><span class="line">                contant.nh = <span class="number">1000</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.sec:</span><br><span class="line">                unbindService(connection);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.thr:</span><br><span class="line">                myService.fast();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.fou:</span><br><span class="line">                myService.slow();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MyService-java-1"><a href="#MyService-java-1" class="headerlink" title="MyService.java"></a>MyService.java</h3><p>åˆ›å»ºä¸€ä¸ªserviceï¼Œæ–¹æ³•å‚è€ƒä¸Šæ–‡4.1<code>MyService</code>çš„åˆ›å»ºæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a4_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Notification;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationChannel;</span><br><span class="line"><span class="keyword">import</span> android.app.NotificationManager;</span><br><span class="line"><span class="keyword">import</span> android.app.Service;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Binder;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.IBinder;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.RequiresApi;</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.NotificationCompat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> <span class="keyword">extends</span> <span class="title class_">Service</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;MyService&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">MyBinder</span> <span class="variable">mBinder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBinder</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> NotificationManager notificationManager;</span><br><span class="line">    <span class="keyword">private</span> Notification notification;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">time</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">notice</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@RequiresApi(api = Build.VERSION_CODES.O)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            Log.d(TAG,<span class="string">&quot;å¯åŠ¨æˆåŠŸ&quot;</span>);</span><br><span class="line">            <span class="comment">// å½“timeä¸ä¸ºç©ºï¼Œå°±ä¸€ç›´å¾ªç¯</span></span><br><span class="line">            <span class="keyword">while</span>(!time)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// åˆ©ç”¨flag è¿›è¡Œä¸¤ä¸ªé€šçŸ¥ä¹‹é—´çš„åˆ‡æ¢</span></span><br><span class="line">                <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;my_channel_01&quot;</span>;</span><br><span class="line">                    String name=<span class="string">&quot;æˆ‘æ˜¯æ¸ é“åå­—&quot;</span>;</span><br><span class="line">                    notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">                    notification = <span class="literal">null</span>;</span><br><span class="line">                    <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, NotificationManager.IMPORTANCE_LOW);</span><br><span class="line">                    notificationManager.createNotificationChannel(mChannel);</span><br><span class="line">                    notification = <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(getApplicationContext())</span><br><span class="line">                            .setChannelId(id)</span><br><span class="line">                            .setContentTitle(<span class="string">&quot;fir&quot;</span>)</span><br><span class="line">                            .setWhen(System.currentTimeMillis())</span><br><span class="line">                            .setContentText(<span class="string">&quot;2012020047 - lks&quot;</span>)</span><br><span class="line">                            .setSmallIcon(R.drawable.fir).build();</span><br><span class="line">                    notificationManager.notify(<span class="number">1</span>,notification);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;my_channel_01&quot;</span>;</span><br><span class="line">                    String name=<span class="string">&quot;æˆ‘æ˜¯æ¸ é“åå­—&quot;</span>;</span><br><span class="line">                    notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">                    notification = <span class="literal">null</span>;</span><br><span class="line">                    <span class="type">NotificationChannel</span> <span class="variable">mChannel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NotificationChannel</span>(id, name, NotificationManager.IMPORTANCE_LOW);</span><br><span class="line">                    notificationManager.createNotificationChannel(mChannel);</span><br><span class="line">                    notification = <span class="keyword">new</span> <span class="title class_">NotificationCompat</span>.Builder(getApplicationContext())</span><br><span class="line">                            .setChannelId(id)</span><br><span class="line">                            .setContentTitle(<span class="string">&quot;sec&quot;</span>)</span><br><span class="line">                            .setWhen(System.currentTimeMillis())</span><br><span class="line">                            .setContentText(<span class="string">&quot;2012020047 - lks&quot;</span>)</span><br><span class="line">                            .setSmallIcon(R.drawable.time).build();</span><br><span class="line">                    notificationManager.notify(<span class="number">1</span>,notification);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// è®¾ç½®å»¶è¿Ÿæ—¶é—´</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> contant.nh;</span><br><span class="line">                Log.i(TAG,<span class="string">&quot;&quot;</span>+h);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(h);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æ¥æ”¹å˜contantä¸­çš„nhå€¼ï¼Œä»è€Œæ”¹å˜threadçš„ç¡çœ æ—¶é—´</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fast</span><span class="params">()</span>&#123;</span><br><span class="line">        contant.nh = <span class="number">333</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">slow</span><span class="params">()</span>&#123;</span><br><span class="line">        contant.nh = <span class="number">2000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBinder</span> <span class="keyword">extends</span> <span class="title class_">Binder</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IBinder <span class="title function_">onBind</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Return the communication channel to the service.</span></span><br><span class="line"><span class="comment">//        throw new UnsupportedOperationException(&quot;Not yet implemented&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> mBinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onUnbind</span><span class="params">(Intent intent)</span> &#123;</span><br><span class="line">        Log.i(<span class="string">&quot;MyService&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†onUnbind(),æœåŠ¡è§£ç»‘æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onUnbind(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(<span class="string">&quot;MyService&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†onCreste(),æœåŠ¡åˆ›å»ºæˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(notice);</span><br><span class="line">        <span class="keyword">if</span>(!thread.isAlive())&#123;</span><br><span class="line">            thread.start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">super</span>.onCreate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">onStartCommand</span><span class="params">(Intent intent, <span class="type">int</span> flags, <span class="type">int</span> startId)</span> &#123;</span><br><span class="line">        Log.i(<span class="string">&quot;MyService&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†onStartCommand(),æœåŠ¡å¯åŠ¨æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onStartCommand(intent, flags, startId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        time = <span class="literal">true</span>;</span><br><span class="line">        notificationManager.cancel(<span class="number">1</span>);</span><br><span class="line">        Log.i(<span class="string">&quot;MyService&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†onDestroy(),æœåŠ¡è¢«é”€&quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="contant-java"><a href="#contant-java" class="headerlink" title="contant.java"></a>contant.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.henu.a4_2;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®é™æ€ç±»ï¼Œç”¨æ¥è®¾ç½®threadçš„sleepé€Ÿç‡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">contant</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>  nh ;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="activity-main-xml-5"><a href="#activity-main-xml-5" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fir&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;ç»‘å®šæœåŠ¡&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sec&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å–æ¶ˆç»‘å®š&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/thr&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;åŠ é€Ÿ&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fou&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;å‡é€Ÿ&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒæ•ˆæœ-2"><a href="#å®éªŒæ•ˆæœ-2" class="headerlink" title="å®éªŒæ•ˆæœ"></a>å®éªŒæ•ˆæœ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327168.png" alt="image-20220519171434213"></p><h1 id="å®éªŒäº”"><a href="#å®éªŒäº”" class="headerlink" title="å®éªŒäº”"></a>å®éªŒäº”</h1><h2 id="å®éªŒ5-1"><a href="#å®éªŒ5-1" class="headerlink" title="å®éªŒ5.1"></a>å®éªŒ5.1</h2><h3 id="MainActivity-java-5"><a href="#MainActivity-java-5" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.a5_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.ContentValues;</span><br><span class="line"><span class="keyword">import</span> android.content.DialogInterface;</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteDatabase;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.CheckBox;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Spinner;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Database dbt; <span class="comment">// æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">    <span class="keyword">private</span> String info; <span class="comment">// å§“å</span></span><br><span class="line">    <span class="keyword">private</span> Spinner textspinner;</span><br><span class="line">    <span class="keyword">private</span> String getContent; <span class="comment">// è·å–ä¸‹æ‹‰æ¡†çš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> String gender1; <span class="comment">// è·å–æ€§åˆ«</span></span><br><span class="line">    <span class="keyword">private</span> StringBuffer sbt; <span class="comment">// è·å–çˆ±å¥½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">EditText</span> <span class="variable">name</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Button</span> <span class="variable">tixing</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> RadioGroup rex;<span class="comment">// å•é€‰æ¡†çš„ç»„</span></span><br><span class="line">    <span class="keyword">private</span> RadioButton man,women;</span><br><span class="line">    <span class="keyword">private</span> CheckBox box1 , box2 , box3, box4;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;CheckBox&gt; checkBoxList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;CheckBox&gt;();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        dbt = <span class="keyword">new</span> <span class="title class_">Database</span>(<span class="built_in">this</span>,<span class="string">&quot;people.db&quot;</span>,<span class="literal">null</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.name = (EditText)<span class="built_in">super</span>.findViewById(R.id.edit1);</span><br><span class="line"></span><br><span class="line">        man = (RadioButton) <span class="built_in">super</span>.findViewById(R.id.man);</span><br><span class="line">        women = (RadioButton) <span class="built_in">super</span>.findViewById(R.id.women);</span><br><span class="line">        rex = (RadioGroup) <span class="built_in">super</span>.findViewById(R.id.Radio1);</span><br><span class="line">        textspinner = (Spinner) <span class="built_in">super</span>.findViewById(R.id.chose) ;</span><br><span class="line">        tixing = (Button)<span class="built_in">super</span>.findViewById((R.id.tixing));</span><br><span class="line">        box1 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box1));</span><br><span class="line">        box2 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box2));</span><br><span class="line">        box3 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box3));</span><br><span class="line">        box4 = (CheckBox)<span class="built_in">super</span>.findViewById((R.id.box4));</span><br><span class="line"></span><br><span class="line">        checkBoxList.add(box1);</span><br><span class="line">        checkBoxList.add(box2);</span><br><span class="line">        checkBoxList.add(box3);</span><br><span class="line">        checkBoxList.add(box4);</span><br><span class="line"></span><br><span class="line">        tixing.setOnClickListener(<span class="keyword">new</span> <span class="title class_">ShowListerer</span>());</span><br><span class="line">        man.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        women.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        textspinner.setOnItemSelectedListener(<span class="keyword">new</span> <span class="title class_">Spinner</span>.OnItemSelectedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="comment">/*public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemSelected</span><span class="params">(AdapterView&lt;?&gt; arg0, View arg1, <span class="type">int</span> arg2, <span class="type">long</span> arg3)</span> &#123;</span><br><span class="line">                getContent = MainActivity.<span class="built_in">this</span>.getResources().getStringArray(R.array.edu)[arg2];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNothingSelected</span><span class="params">(AdapterView&lt;?&gt; parent)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (view.getId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.man:</span><br><span class="line">                gender1 = man.getText().toString().trim();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.women:</span><br><span class="line">                gender1 = women.getText().toString().trim();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ShowListerer</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span></span><br><span class="line">        &#123;</span><br><span class="line">            sbt = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            <span class="keyword">for</span> (CheckBox checkbox : checkBoxList) &#123;</span><br><span class="line">                <span class="keyword">if</span> (checkbox.isChecked())&#123;</span><br><span class="line">                    sbt.append(checkbox.getText().toString() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            info = name.getText().toString();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(info.trim().equals(<span class="string">&quot;&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>,<span class="string">&quot;è¯·è¾“å…¥å§“å&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                add(info,gender1,getContent,sbt.toString());</span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>,<span class="string">&quot;å§“åæ˜¯: &quot;</span>+info+<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;æ€§åˆ«: &quot;</span> +gender1+<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;ä¸“ä¸š&quot;</span>+getContent+<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;å…´è¶£çˆ±å¥½ &quot;</span>+sbt.toString(),Toast.LENGTH_LONG).show();</span><br><span class="line">                clean();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹æ•°æ®åº“è¿›è¡Œæ’å…¥æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String name,String gender,String major,String hobby)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> dbt.getWritableDatabase();</span><br><span class="line">        <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">        values.put(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        values.put(<span class="string">&quot;gender&quot;</span>,gender);</span><br><span class="line">        values.put(<span class="string">&quot;major&quot;</span>,major);</span><br><span class="line">        values.put(<span class="string">&quot;hobby&quot;</span>,hobby);</span><br><span class="line">        db.insert(<span class="string">&quot;peopleinfo&quot;</span>,<span class="literal">null</span>,values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…æ¥šæ‰€æœ‰çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clean</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®åå­—ä¸ºç©º</span></span><br><span class="line">        name.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®ä¸‹æ‹‰èœå•ä¸æ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®å•é€‰æ¡†ä¸é€‰ä¸­</span></span><br><span class="line">        rex.clearCheck();</span><br><span class="line">        <span class="comment">// è®¾ç½®å¤šé€‰æ¡†å–æ¶ˆé€‰ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (CheckBox checkbox : checkBoxList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (checkbox.isChecked())&#123;</span><br><span class="line">                checkbox.setChecked(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Database-java"><a href="#Database-java" class="headerlink" title="Database.java"></a>Database.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// databaseæ“ä½œ</span></span><br><span class="line"><span class="keyword">package</span> com.example.a5_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteDatabase;</span><br><span class="line"><span class="keyword">import</span> android.database.sqlite.SQLiteOpenHelper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Database</span> <span class="keyword">extends</span> <span class="title class_">SQLiteOpenHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Database</span><span class="params">(<span class="meta">@Nullable</span> Context context, <span class="meta">@Nullable</span> String name, <span class="meta">@Nullable</span> SQLiteDatabase.CursorFactory factory, <span class="type">int</span> version)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, name, factory, version);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase db)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ•°æ®åº“sqlè¯­å¥å¹¶æ‰§è¡Œ</span></span><br><span class="line">        String sql=<span class="string">&quot;create table peopleinfo (id integer primary key autoincrement, name text not null, gender text, major text, hobby text )&quot;</span>;</span><br><span class="line">        db.execSQL(sql);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase sqLiteDatabase, <span class="type">int</span> i, <span class="type">int</span> i1)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="activity-main-xml-6"><a href="#activity-main-xml-6" class="headerlink" title="activity_main.xml"></a>activity_main.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å§“å:&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/edit1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;æå¤æ¾ 2012020047&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/gender&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;19dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;æ€§åˆ«&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/Radio1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/man&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;ç”·&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/women&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;å¥³&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;ä¸“ä¸š&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Spinner</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/chose&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:prompt</span>=<span class="string">&quot;@string/eduprompt&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:entries</span>=<span class="string">&quot;@array/edu&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:spinnerMode</span>=<span class="string">&quot;dialog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å…´è¶£çˆ±å¥½&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;éŸ³ä¹&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box2&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;è¿åŠ¨&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box3&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;æ¸¸æ³³&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/box4&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;é˜…è¯»&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tixing&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;æäº¤&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;å–æ¶ˆ&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="strings-xml-1"><a href="#strings-xml-1" class="headerlink" title="strings.xml"></a>strings.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>5_1<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;eduprompt&quot;</span>&gt;</span>è¯·é€‰æ‹©ä½ çš„ä¸“ä¸š<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="edu-xml-åœ¨resä¸­çš„valuesä¸­æ–°å»ºä¸€ä¸ªedu-xmlæ–‡ä»¶"><a href="#edu-xml-åœ¨resä¸­çš„valuesä¸­æ–°å»ºä¸€ä¸ªedu-xmlæ–‡ä»¶" class="headerlink" title="edu.xml(åœ¨resä¸­çš„valuesä¸­æ–°å»ºä¸€ä¸ªedu.xmlæ–‡ä»¶)"></a>edu.xml(åœ¨resä¸­çš„valuesä¸­æ–°å»ºä¸€ä¸ªedu.xmlæ–‡ä»¶)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">&quot;edu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>å¤§æ•°æ®å¼€å‘<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>ä¿¡æ¯å®‰å…¨<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>äººå·¥æ™ºèƒ½<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒæ•ˆæœ-3"><a href="#å®éªŒæ•ˆæœ-3" class="headerlink" title="å®éªŒæ•ˆæœ"></a>å®éªŒæ•ˆæœ</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327043.png" alt="img"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327019.png" alt="img"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172327597.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mongoDBè°ƒç ”</title>
      <link href="/2022/04/04/mongoDB%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
      <url>/2022/04/04/mongoDB%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="mongoDBå’ŒCouchDBçš„åŒºåˆ«"><a href="#mongoDBå’ŒCouchDBçš„åŒºåˆ«" class="headerlink" title="mongoDBå’ŒCouchDBçš„åŒºåˆ«"></a>mongoDBå’ŒCouchDBçš„åŒºåˆ«</h1><table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">CouchDB</th><th align="left">MongoDB</th></tr></thead><tbody><tr><td align="left">æ•°æ®æ¨¡å‹</td><td align="left">å®ƒéµå¾ªé¢å‘æ–‡æ¡£çš„æ¨¡å‹ï¼Œæ•°æ®ä»¥JSONæ ¼å¼è¡¨ç¤ºã€‚</td><td align="left">å®ƒéµå¾ªé¢å‘æ–‡æ¡£çš„æ¨¡å‹ï¼Œä½†æ•°æ®ä»¥BSONæ ¼å¼è¡¨ç¤º</td></tr><tr><td align="left">æ¥å£</td><td align="left">CouchDBä½¿ç”¨åŸºäºHTTP&#x2F; RESTçš„æ¥å£ã€‚å®ƒéå¸¸ç›´è§‚ï¼Œè®¾è®¡éå¸¸å¥½ã€‚</td><td align="left">MongoDBåœ¨TCP&#x2F;IPä¸Šä½¿ç”¨äºŒè¿›åˆ¶åè®®å’Œè‡ªå®šä¹‰åè®®ã€‚</td></tr><tr><td align="left">å¯¹è±¡å­˜å‚¨</td><td align="left">åœ¨CouchDBä¸­ï¼Œæ•°æ®åº“åŒ…å«æ–‡æ¡£ã€‚</td><td align="left">åœ¨MongoDBä¸­ï¼Œæ•°æ®åº“åŒ…å«é›†åˆï¼Œè€Œé›†åˆåŒ…å«æ–‡æ¡£ã€‚</td></tr><tr><td align="left">é€Ÿåº¦</td><td align="left">å®ƒçš„è¯»å–é€Ÿåº¦æ˜¯å…³é”®çš„æ•°æ®åº“ï¼ŒMongoDBæ¯”CouchDBå¿«</td><td align="left">MongoDBæä¾›äº†æ›´å¿«çš„è¯»å–é€Ÿåº¦ã€‚</td></tr><tr><td align="left">æ‰‹æœºæ”¯æŒ</td><td align="left">CouchDBå¯ä»¥è¿è¡Œåœ¨è‹¹æœiOSå’ŒAndroidè®¾å¤‡ä¸Šï¼Œä¸ºç§»åŠ¨è®¾å¤‡æä¾›æ”¯æŒã€‚</td><td align="left">æ²¡æœ‰æä¾›ç§»åŠ¨æ”¯æ´</td></tr><tr><td align="left">å¤§å°</td><td align="left">æ•°æ®åº“å¯ä»¥éšç€CouchDBè€Œå¢é•¿;å½“ç»“æ„ä»ä¸€å¼€å§‹å°±æ²¡æœ‰æ˜ç¡®å®šä¹‰æ—¶ï¼ŒMongoDBæ›´é€‚åˆå¿«é€Ÿå¢é•¿ã€‚</td><td align="left">å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¿«é€Ÿå¢é•¿çš„æ•°æ®åº“ï¼ŒMongoDBæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</td></tr><tr><td align="left">æŸ¥è¯¢æ–¹æ³•</td><td align="left">æŸ¥è¯¢ä½¿ç”¨map-reduceå‡½æ•°ã€‚è™½ç„¶å®ƒå¯èƒ½æ˜¯ä¸€ç§ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å¯¹äºå…·æœ‰ä¼ ç»ŸSQLç»éªŒçš„äººæ¥è¯´ï¼Œå­¦ä¹ å®ƒå¯èƒ½æ›´åŠ å›°éš¾ã€‚</td><td align="left">MongoDBé‡‡ç”¨Map&#x2F;Reduce (JavaScript)åˆ›å»ºåŸºäºé›†åˆ+å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ã€‚å¯¹äºæœ‰SQLçŸ¥è¯†çš„ç”¨æˆ·ï¼ŒMongoDBæ›´å®¹æ˜“å­¦ä¹ ï¼Œå› ä¸ºå®ƒæ›´æ¥è¿‘è¯­æ³•ã€‚</td></tr><tr><td align="left">å¤åˆ¶</td><td align="left">CouchDBæ”¯æŒä½¿ç”¨è‡ªå®šä¹‰å†²çªè§£å†³åŠŸèƒ½çš„ä¸»-ä¸»å¤åˆ¶ã€‚</td><td align="left">MongoDBæ”¯æŒä¸»ä»å¤åˆ¶ã€‚</td></tr><tr><td align="left">å¹¶å‘æ€§</td><td align="left">å®ƒéµå¾ªMVCC(å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)ã€‚</td><td align="left">å°±åœ°æ›´æ–°ã€‚</td></tr><tr><td align="left">é¦–é€‰é¡¹</td><td align="left">CouchDBæ”¯æŒå¯ç”¨æ€§ã€‚</td><td align="left">MongoDBæ”¯æŒä¸€è‡´æ€§</td></tr><tr><td align="left">æ€§èƒ½çš„ä¸€è‡´æ€§</td><td align="left">CouchDBæ¯”MongoDBæ›´å®‰å…¨</td><td align="left"></td></tr><tr><td align="left">ä¸€è‡´æ€§</td><td align="left">CouchDBæœ€ç»ˆæ˜¯ä¸€è‡´çš„ã€‚</td><td align="left">MongoDBæ˜¯å¼ºä¸€è‡´æ€§çš„ã€‚</td></tr><tr><td align="left">ç¼–å†™è¯­è¨€</td><td align="left">Erlang</td><td align="left">C++.</td></tr><tr><td align="left">åˆ†æ</td><td align="left">å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œçš„æ•°æ®åº“ï¼Œéœ€è¦ä¸»-ä¸»å¤åˆ¶æˆ–å•æœåŠ¡å™¨æŒä¹…æ€§ï¼Œé‚£ä¹ˆCouchDBæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</td><td align="left">å¦‚æœæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾æœ€å¤§çš„ååé‡ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå¿«é€Ÿå¢é•¿çš„æ•°æ®åº“ï¼ŒMongoDBæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</td></tr></tbody></table><h1 id="mongodbçš„è°ƒç ”"><a href="#mongodbçš„è°ƒç ”" class="headerlink" title="mongodbçš„è°ƒç ”"></a>mongodbçš„è°ƒç ”</h1><h2 id="mongodbæ˜¯é¢å‘æ–‡æ¡£çš„nosqlã€‚"><a href="#mongodbæ˜¯é¢å‘æ–‡æ¡£çš„nosqlã€‚" class="headerlink" title="mongodbæ˜¯é¢å‘æ–‡æ¡£çš„nosqlã€‚"></a>mongodbæ˜¯é¢å‘æ–‡æ¡£çš„nosqlã€‚</h2><h3 id="ä»æ€»ä½“ä¸Šçœ‹"><a href="#ä»æ€»ä½“ä¸Šçœ‹" class="headerlink" title="ä»æ€»ä½“ä¸Šçœ‹"></a>ä»æ€»ä½“ä¸Šçœ‹</h3><ol><li>mongodbæ˜¯æœ€äº²å’ŒRDBMSçš„ä¸€ä¸ªNoSQLï¼Œèƒ½è§£å†³å¤§éƒ¨åˆ†å…³ç³»å‹æ•°æ®åº“è§£å†³çš„é—®é¢˜ã€‚</li><li>è·Ÿé¢å‘åˆ—å­˜å‚¨çš„HBaseç›¸æ¯”ï¼Œé¢å‘æ–‡æ¡£å­˜å‚¨çš„å’Œé¢å‘è¡Œå­˜å‚¨æ¯”è¾ƒæ¥è¿‘ï¼Œæ¯”å¦‚åœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæ‰«ææ•´ä¸ªè¡¨å†…è®°å½•ï¼ŒåŒæ ·æ˜¯æ‰«é¢å…¨æ–‡æ¡£ï¼ŒåŠæ–‡æ¡£çš„æ¯ä¸ªå­—æ®µã€‚</li><li>mongodbçš„ç´¢å¼•åŒæ ·ä¹Ÿæ˜¯Bæ ‘ï¼Œåœ¨ä¸€äº›ç´¢å¼•çš„ä¼˜åŒ–å’Œè®¾è®¡ä¸Šå’ŒMySQLæ¯”è¾ƒç›¸ä¼¼ã€‚</li><li>mongodbçš„æŸ¥è¯¢ä¸­ä¹Ÿæœ‰mysqlçš„inï¼Œwhereï¼Œgroupç­‰å­—æ®µï¼Œè€Œä¸”å‘groupé‚£æ ·çš„æŸ¥è¯¢ä¼šæ¯”mysqlæ›´å¼ºå¤§</li></ol><h3 id="mongodbçš„æ•°æ®å†—ä½™æœºåˆ¶"><a href="#mongodbçš„æ•°æ®å†—ä½™æœºåˆ¶" class="headerlink" title="mongodbçš„æ•°æ®å†—ä½™æœºåˆ¶"></a>mongodbçš„æ•°æ®å†—ä½™æœºåˆ¶</h3><p>Mongodbçš„æ•°æ®å†—ä½™æœºåˆ¶åˆ†ä¸ºä¸¤ç§ï¼Œä¸»ä»å¤åˆ¶ï¼ˆMaster-Slaveï¼‰å’Œå‰¯æœ¬é›†ï¼ˆReplicaSetï¼‰çš„æ–¹å¼ã€‚è¿™ä¸¤ç§æ“ä½œæ–¹å¼éƒ½æ˜¯é€šè¿‡å›æ”¾ä¸»èŠ‚ç‚¹æ“ä½œæ—¥å¿—çš„å¼‚æ­¥æ•°æ®åŒæ­¥æ–¹å¼ã€‚</p><p>ä¸»èŠ‚ç‚¹ä¼šå°†æ“ä½œæ—¥å¿—è®°å½•åˆ°oplogä¸­ï¼Œä»èŠ‚ç‚¹ä»ä¸»èŠ‚ç‚¹è¯·æ±‚oplogæ—¥å¿—ï¼Œç„¶ååœ¨èŠ‚ç‚¹ä¸Šå›æ”¾æ¥æ„å»ºæ•°æ®ï¼›å¦‚æœä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹æ•°æ®è¶…è¿‡oplogçš„èŒƒå›´ï¼Œåˆ™éœ€è¦ä»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹å…ˆè¿›è¡Œsyncåå†åæ¼”oplogæ—¥å¿—ã€‚</p><p>ReloicaSetæ˜¯åœ¨Master-SalveåŒæ­¥æœºåˆ¶çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†é€‰ä¸¾æœºåˆ¶ã€‚ä¸€ä¸ªReplicaSetä¸­çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰å¿ƒè·³ä¿¡æ¯ï¼Œå½“ä¸»èŠ‚ç‚¹å¤±è´¥æ—¶ï¼Œä»èŠ‚ç‚¹å‘èµ·ä¸€è½®ä¸»èŠ‚ç‚¹çš„é€‰å–è¿‡ç¨‹ï¼Œé‡æ–°é€‰å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚ä¸»èŠ‚ç‚¹çš„é€‰å–è·Ÿå„ä¸ªèŠ‚ç‚¹çš„é…ç½®ä¼˜å…ˆçº§å’Œæ•°æ®çš„æ›´æ–°ç¨‹åº¦æœ‰å…³ã€‚é€‰ä¸»èŠ‚ç‚¹å…ˆè€ƒè™‘ä¼˜å…ˆçº§ï¼Œå†è€ƒè™‘æ‹¥æœ‰æœ€æ–°æ•°æ®çš„èŠ‚ç‚¹ï¼Œç„¶åé€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ã€‚å„ä¸ªèŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œæ—§çš„ä¸»èŠ‚ç‚¹é‡æ–°åŠ å…¥ReplicaSetåï¼Œä¼šä½œä¸ºä»èŠ‚ç‚¹ä¸æ–°çš„ä¸»èŠ‚ç‚¹è¿›è¡Œæ•°æ®åŒæ­¥ã€‚</p><p>Mongodbé€šè¿‡è¿™ç§æ“ä½œæ—¥å¿—å›æ”¾è¿›è¡Œæ•°æ®åŒæ­¥çš„æ–¹å¼ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚ä¸»èŠ‚ç‚¹ä¸ºäº†æ•°æ®çš„å®‰å…¨æ€§åŠ å…¥äº†journalæœºåˆ¶ï¼Œä½†æ˜¯ç”±äºä¸åŒèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®æ˜¯å¼‚æ­¥åŒæ­¥çš„ï¼Œåœ¨ä¸»èŠ‚ç‚¹å®•æœºæˆ–è€…ç½‘ç»œæ•…éšœæ—¶æœ‰å¯èƒ½ä¸¢å¤±æ•°æ®ã€‚</p><h3 id="mongodbçš„æ•°æ®åˆ†ç‰‡æœºåˆ¶"><a href="#mongodbçš„æ•°æ®åˆ†ç‰‡æœºåˆ¶" class="headerlink" title="mongodbçš„æ•°æ®åˆ†ç‰‡æœºåˆ¶"></a>mongodbçš„æ•°æ®åˆ†ç‰‡æœºåˆ¶</h3><p>Nosqlç³»ç»Ÿçš„æ°´å¹³æ‹“å±•æ€§ä¾èµ–äºå…¶æ•°æ®çš„åˆ†ç‰‡æœºåˆ¶å’Œæ•°æ®è¿ç§»æœºåˆ¶ã€‚Mongodbé›†ç¾¤é€šè¿‡è‡ªåŠ¨åˆ†ç‰‡æœºåˆ¶æ¥è¿›è¡Œæ•°æ®çš„åˆ†ç‰‡å’Œæ•°æ®è¿ç§»ã€‚</p><h3 id="mongodbçš„å­˜å‚¨ç»“æ„"><a href="#mongodbçš„å­˜å‚¨ç»“æ„" class="headerlink" title="mongodbçš„å­˜å‚¨ç»“æ„"></a>mongodbçš„å­˜å‚¨ç»“æ„</h3><p>Mongodbå°†æ•°æ®æŒ‰ç…§æ•°æ®åº“ï¼ˆdatabaseï¼‰ï¼Œé›†åˆï¼ˆcollectionï¼‰å’Œæ–‡æ¡£ï¼ˆdocumentï¼‰çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œåˆ†åˆ«å¯¹åº”RDBMSä¸­çš„æ•°æ®åº“ï¼Œè¡¨å’Œè®°å½•çš„æ¦‚å¿µã€‚Mongodbä¸ºæ¯ä¸ªæ•°æ®åº“å»ºç«‹ä¸€ä¸ªnamespaceï¼ˆ.nsç»“å°¾ï¼‰æ–‡ä»¶ï¼Œå­˜å‚¨è¯¥æ•°æ®åº“çš„å…ƒä¿¡æ¯ï¼Œæ¯”å¦‚è¯¥æ•°æ®éƒ½æœ‰é‚£äº›collectionsï¼Œå„ä¸ªcollcetionsçš„æ•°æ®æ–‡ä»¶ï¼Œç´¢å¼•æ–‡ä»¶ä¿¡æ¯ç­‰ã€‚</p><p>MongoDBçš„è®°å½•æ˜¯ä¸ªæ–‡æ¡£ï¼Œå®ƒæ˜¯ç”±å­—æ®µå¯¹å€¼çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼JSONï¼ŒåŒæ—¶å­—æ®µçš„å€¼å¯ä»¥åŒ…æ‹¬å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„å’Œæ–‡æ¡£æ•°æ®ï¼Œå³æ–‡æ¡£çš„åµŒå¥—ã€‚</p><p>Mongodbæ¯ä¸ªdbä¸­æœ‰å¤šä¸ªcollectionï¼Œç›¸å½“äºtableï¼Œæ¯ä¸ªcollectionå†…æ˜¯è®¸è®¸å¤šå¤šçš„documentï¼ŒMongdbå¯¹æ•°æ®æ ¼å¼è¦æ±‚å®½æ¾ï¼Œå› æ­¤documentçš„schemalessçš„ã€‚</p><p>åŒæ—¶mongodbçš„æ‰€æœ‰æ•°æ®éƒ½å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼ŒMongodbçš„æ–‡ä»¶é‡‡ç”¨é¢„åˆ†é…çš„æ–¹å¼æ¥é¿å…ç£ç›˜ç¢ç‰‡åŒ–å’Œä¿è¯æ“ä½œæ€§èƒ½ã€‚ç¬¬ä¸€æ¬¡åˆ†é…æ•°æ®æ–‡ä»¶æ˜¯64Mï¼Œåç»­åˆ†é…æ–‡ä»¶çš„æ•°æ®æŒ‡æ•°çº§é€’å¢ï¼ŒçŸ¥é“é¢„åˆ†é…çš„æ•°æ®æ–‡ä»¶å¤§å°è¾¾åˆ°2Gã€‚</p><p>Mongodbé€šè¿‡mmapæ¥æ“ä½œæ‰€æœ‰ç£ç›˜æ–‡ä»¶ï¼ŒMongodbå¯åŠ¨æ—¶å°†æ‰€nsæ–‡ä»¶å’Œæ‰€æœ‰æ•°æ®æ–‡ä»¶é€šè¿‡mmapçš„æ–¹å¼å…¨éƒ¨æ˜ å°„åˆ°è¿›ç¨‹é€»è¾‘åœ°å€ç©ºé—´ï¼Œåç»­é€šè¿‡å†…å­˜çš„æ“ä½œæ¥æ“ä½œç‰©ç†æ–‡ä»¶ã€‚</p><p>Mongodbå­˜å‚¨å¼•æ“çš„ä¼˜ç¼ºç‚¹</p><p>Mongodbé‡‡ç”¨mmapå°†å­˜å‚¨æ–‡ä»¶å…¨éƒ¨æ˜ å°„åˆ°è¿›ç¨‹é€»è¾‘åœ°å€ç©ºé—´ï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿçš„page cache å’Œ ç¼ºé¡µä¸­æ–­æœºåˆ¶æ¥å®ç°æ•°æ®åœ¨å†…å­˜å’Œç£ç›˜ä¹‹é—´çš„è¿ç§»ã€‚</p><p>è¿™ç§å®ç°ç»“æ„æ˜¯å°†ç³»ç»Ÿçš„å†…å­˜ä½œä¸ºå­˜å‚¨ç³»ç»Ÿçš„ç¼“å­˜ï¼Œè€Œç¼“å­˜çš„ç®¡ç†å®Œå…¨ç”±æ“ä½œç³»ç»Ÿçš„ç•Œé¢ç¼“å­˜æœºåˆ¶æ¥ç®¡ç†ï¼Œå¤§å¤§ç®€åŒ–äº†Mongodbçš„å­˜å‚¨å¼•æ“è®¾è®¡å’Œå®ç°ã€‚</p><p>è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯åœ¨ç³»ç»Ÿå†…å­˜å……è¶³çš„æ—¶å€™ï¼Œä¼šå°†æ‰€æœ‰çš„æ•°æ®å’Œç´¢å¼•æ–‡ä»¶éƒ½æ”¾åœ¨å†…å­˜ä¸­ï¼Œè¯»å†™é€Ÿåº¦ä¼šéå¸¸å¿«ã€‚å¦å¤–ï¼Œç”±äºå°†å†…å­˜ç®¡ç†ä»»åŠ¡äº¤ç»™æ“ä½œç³»ç»Ÿçš„ç•Œé¢ç¼“å­˜æ¥å®Œæˆï¼Œä½¿å¾—Mongodbçš„å­˜å‚¨å¼•æ“å®ç°ç®€å•æ˜äº†ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ol><li>é€šè¿‡mmapçš„å½¢å¼å°†ç´¢å¼•å’Œæ•°æ®æ–‡ä»¶å…¨éƒ¨æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œä½¿ç”¨é¡µç¼“å­˜æ¥ç®¡ç†å†…å­˜ï¼Œæ˜¯çš„mongodbä¼šå ç”¨å¤§é‡çš„å†…å­˜ï¼Œéšç€æ•°æ®çš„å¢åŠ ï¼Œç³»ç»Ÿå†…å­˜éƒ½ä¼šè¢«mongodbå ç”¨ã€‚</li><li>mongodbå†æ•°æ®å’Œç´¢å¼•çš„é‡è¶…è¿‡ç³»ç»Ÿå†…å­˜æ—¶ï¼Œä¼šé€ æˆå¤§é‡çš„ç¼ºé¡µä¸­æ–­ï¼Œå¯¼è‡´æ•°æ®åœ¨ç£ç›˜å’Œå†…å­˜ä¹‹é—´é¢‘ç¹æ¢å…¥æ¢å‡ºï¼Œå¢åŠ ç£ç›˜çš„IOå‹åŠ›ï¼Œå¢åŠ è®¿é—®å»¶è¿Ÿã€‚</li></ol><h3 id="å¯¹mongodbå•èŠ‚ç‚¹çš„æ€§èƒ½æµ‹è¯•"><a href="#å¯¹mongodbå•èŠ‚ç‚¹çš„æ€§èƒ½æµ‹è¯•" class="headerlink" title="å¯¹mongodbå•èŠ‚ç‚¹çš„æ€§èƒ½æµ‹è¯•"></a>å¯¹mongodbå•èŠ‚ç‚¹çš„æ€§èƒ½æµ‹è¯•</h3><p>æµ‹è¯•æœºå™¨ä¸ºï¼šVMWareè™šæ‹ŸæœºCentOS6.4 CPUï¼š4æ ¸  å†…å­˜ï¼š8G</p><p>å½“æ•°æ®é‡è¾¾åˆ°åƒä¸‡çº§çš„æ—¶å€™æœ€å¤§è®¿é—®æ—¶é—´å°äº1msï¼Œè®¿é—®æ€§èƒ½å¾ˆå¥½ï¼›</p><p>å½“æ•°æ®é‡è¾¾åˆ°4äº¿çº§çš„æ—¶ï¼Œå¤šå®¢æˆ·ç«¯è®¿é—®æ—¶é—´æœ€å¤§è¾¾åˆ°6sï¼Œåœ¨æ•°æ®é›†è¿‡å¤§çš„æ—¶å€™ï¼Œmongodbä¼šé€ æˆå¤§é‡çš„ç£ç›˜IOå’Œé¢‘ç¹çš„å†…å­˜æ¢å…¥æ¢å‡ºï¼Œå¯¼è‡´mongodbçš„æ€§èƒ½ä¸‹é™ã€‚</p><p>è€ƒè™‘åˆ°ä½¿ç”¨mongodbçš„æ•°æ®é‡ä¸ä¼šå¾ˆå¤§ï¼Œè¶…è¿‡ä¸Šäº¿çº§åˆ«ï¼ŒåŠ ä¸Šmongodbåœ¨åƒä¸‡çº§æ•°æ®é‡çš„æ—¶å€™è®¿é—®é€Ÿåº¦å¾ˆå¥½ï¼Œæ‰€ä»¥é€‰æ‹©ä½¿ç”¨mongodbã€‚</p><h1 id="MongoDBå®‰è£…"><a href="#MongoDBå®‰è£…" class="headerlink" title="MongoDBå®‰è£…"></a>MongoDBå®‰è£…</h1><p><a href="https://www.mongodb.com/try">windows ä¸‹è½½åœ°å€</a></p><p>ä¸€è·¯ç›´æ¥å®‰è£…å³å¯ï¼Œ<strong>è‡ªè¡Œä¿®æ”¹ä¸‹è½½è·¯å¾„ï¼Œä¸‹çš„æ—¶å€™é€‰æ‹©è‡ªå®šä¹‰å®‰è£…</strong>ï¼Œå®‰è£…å®Œæ¯•ä¹‹åéœ€è¦åœ¨server&#x2F;bin&#x2F;dataç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªdbæ–‡ä»¶å¤¹</p><h2 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ ç¯å¢ƒå˜é‡"></a>æ·»åŠ ç¯å¢ƒå˜é‡</h2><p>æ‰¾åˆ°ä¸‹è½½mongodbçš„binç›®å½• <code>E:\env\mongodb\bin</code>å°†è¯¥ç›®å½•æ·»åŠ åˆ°<strong>ç³»ç»Ÿå˜é‡çš„path</strong>ç›®å½•ä¸­ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315330.png" alt="image-20220610110905817"></p><h2 id="è¿è¡ŒmongoDB"><a href="#è¿è¡ŒmongoDB" class="headerlink" title="è¿è¡ŒmongoDB"></a>è¿è¡ŒmongoDB</h2><p>æ‰“å¼€ä¸€ä¸ªcmdçª—å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mongod -dbpath &quot;E:\env\mongodb\data\db&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œæ­¤è¡Œå‘½ä»¤è¿ç”¨ä¸€ç›´å¼€å¯mongoDBæœåŠ¡ï¼Œä½†æ˜¯å‘½ä»¤è¡Œçª—å£ä¸èƒ½å…³é—­</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315188.png" alt="image-20220610111228148"></p><p>ä¹‹ååœ¨æµè§ˆå™¨ä¸Šè¿è¡Œ   <code>localhost:27017</code><br><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202204221756354.png" alt="image.png"></p><p>è¿è¡Œä¹‹ååœ¨é‡æ–°æ‰“å¼€ä¸€ä¸ªcmdæŒ‡ä»¤çª—å£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ mongo  å³å¯å¯¹mongodbæ•°æ®åº“è¿›è¡Œæ“ä½œ</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315226.png" alt="image-20220610111203834"></p><h2 id="å®‰è£…mongoDB-compass-å¯è§†åŒ–ç•Œé¢"><a href="#å®‰è£…mongoDB-compass-å¯è§†åŒ–ç•Œé¢" class="headerlink" title="å®‰è£…mongoDB compass å¯è§†åŒ–ç•Œé¢"></a>å®‰è£…mongoDB compass å¯è§†åŒ–ç•Œé¢</h2><p> <a href="https://www.mongodb.com/try/download/compass">å¯è§†åŒ–ç•Œé¢</a>   </p><p>æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹åï¼Œç›´æ¥è¿è¡Œé‡Œé¢çš„exeå³å¯æ‰“å¼€ç•Œé¢ï¼Œç„¶åç‚¹å‡»connect ï¼ŒmongoDBé»˜è®¤çš„ç«¯å£æ˜¯ï¼š<a href="https://localhost:27017/">https://localhost:27017/</a> ï¼Œè¿æ¥ä¹‹åæ˜¯å¦‚ä¸‹ç•Œé¢<br><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315580.png" alt="img"></p><h2 id="mongoDBçš„åŸºæœ¬å‘½ä»¤"><a href="#mongoDBçš„åŸºæœ¬å‘½ä»¤" class="headerlink" title="mongoDBçš„åŸºæœ¬å‘½ä»¤"></a>mongoDBçš„åŸºæœ¬å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># åˆ›å»ºæ•°æ®åº“</span></span></span><br><span class="line">use DATABASE_NAME // å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºæ•°æ®åº“ï¼Œå¦åˆ™è¿›å…¥åˆ°æŒ‡å®šçš„æ•°æ®åº“</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># ä½†æ˜¯åˆšåˆšåˆ›å»ºçš„æ•°æ®åº“æ²¡æœ‰æ˜¾ç¤ºåœ¨æ‰€æœ‰æ•°æ®åº“ä¸­ï¼Œå› ä¸ºè¿˜æ²¡æœ‰æ’å…¥æ•°æ®ï¼Œæ’å…¥æ•°æ®åå³å¯æ˜¾ç¤º</span></span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315111.png" alt="image.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åˆ é™¤æ•°æ®åº“ </span><br><span class="line">db.dropDatabase() #éœ€è¦å…ˆè¿›å…¥æ•°æ®åº“ä¸­åœ¨è¿›è¡Œåˆ é™¤</span><br><span class="line"></span><br><span class="line">åˆ é™¤æ•°æ®åº“ä¸­çš„é›†åˆ</span><br><span class="line">db.collection.drop()</span><br><span class="line"></span><br><span class="line">å¯¹æ•°æ®åº“è¿›è¡Œæ’å…¥æ–‡æ¡£</span><br><span class="line">db.COLLEECTION_NAME.insert(document</span><br><span class="line"></span><br><span class="line">COLLECTION_NAME æ˜¯æ–‡æ¡£çš„åå­—ã€‚</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å·²ç»æ’å…¥çš„æ–‡æ¡£</span><br><span class="line">db.COLLECTION_NAME.find()</span><br><span class="line">db.COLLECTION_NAME.find().pretty()  #å‡ºç°çš„æ–‡æ¡£ä¿¡æ¯æ›´æœ‰æ¡ç†</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥å°†æ•°æ®å˜æˆä¸€ä¸ªå˜é‡å†è¿›è¡Œæ’å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">document=(&#123;title: <span class="string">&#x27;MongoDB æ•™ç¨‹&#x27;</span>,</span> </span><br><span class="line">    description: &#x27;MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“&#x27;,</span><br><span class="line">    by: &#x27;w3cschool&#x27;,</span><br><span class="line">    url: &#x27;http://www.w3cschool.cn&#x27;,</span><br><span class="line">    tags: [&#x27;mongodb&#x27;, &#x27;database&#x27;, &#x27;NoSQL&#x27;],</span><br><span class="line">    likes: 100</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåçš„ç»“æœæ˜¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;title&quot; : &quot;MongoDB æ•™ç¨‹&quot;,</span><br><span class="line">        &quot;description&quot; : &quot;MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“&quot;,</span><br><span class="line">        &quot;by&quot; : &quot;w3cschool&quot;,</span><br><span class="line">        &quot;url&quot; : &quot;http://www.w3cschool.cn&quot;,</span><br><span class="line">        &quot;tags&quot; : [</span><br><span class="line">                &quot;mongodb&quot;,</span><br><span class="line">                &quot;database&quot;,</span><br><span class="line">                &quot;NoSQL&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;likes&quot; : 100</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿›è¡Œæ’å…¥æ“ä½œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">db.col.insert(document)</span></span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br><span class="line"><span class="meta prompt_">&gt; </span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“çš„å¤‡ä»½å¯¼å‡º"><a href="#æ•°æ®åº“çš„å¤‡ä»½å¯¼å‡º" class="headerlink" title="æ•°æ®åº“çš„å¤‡ä»½å¯¼å‡º"></a>æ•°æ®åº“çš„å¤‡ä»½å¯¼å‡º</h2><p><strong>æ–°æ‰“å¼€ä¸€ä¸ªcmdçª—å£</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mongodump -h dbhost -d dbname -o dbdirectory</span><br><span class="line"></span><br><span class="line">## å¤‡ä»½æ•´ä¸ªæ•°æ®åº“</span><br><span class="line"></span><br><span class="line">- -hï¼š</span><br><span class="line">  MongoDB æ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚ï¼š127.0.0.1ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šç«¯å£å·ï¼š127.0.0.1:27017</span><br><span class="line"></span><br><span class="line">- -dï¼š</span><br><span class="line">  éœ€è¦å¤‡ä»½çš„æ•°æ®åº“å®ä¾‹ï¼Œä¾‹å¦‚ï¼štest</span><br><span class="line"></span><br><span class="line">- -oï¼š</span><br><span class="line">  å¤‡ä»½çš„æ•°æ®å­˜æ”¾ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\data\dumpï¼Œå½“ç„¶è¯¥ç›®å½•éœ€è¦æå‰å»ºç«‹ï¼Œåœ¨å¤‡ä»½å®Œæˆåï¼Œç³»ç»Ÿè‡ªåŠ¨åœ¨dumpç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªtestç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢å­˜æ”¾è¯¥æ•°æ®åº“å®ä¾‹çš„å¤‡ä»½æ•°æ®ã€‚</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®å¯¼å‡ºå¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#æ•°æ®å¯¼å‡ºå¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="æ•°æ®å¯¼å‡ºå¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>æ•°æ®å¯¼å‡ºå¯èƒ½é‡åˆ°çš„é—®é¢˜</h2><blockquote><p>uncaught exception: SyntaxError: unexpected token: numeric literal : @(shell):1:13</p></blockquote><p><strong>åŸå› ï¼š</strong>ä¸‹è½½mongodbçš„æ—¶å€™æ²¡æœ‰ä¸‹è½½å¯¹åº”çš„mongodumpçš„exeï¼Œæ‰€ä»¥ä¼šæŠ¥é”™</p><p><strong>è§£å†³åŠæ³•ï¼š</strong></p><p>ä¸‹è½½æ–‡ä»¶çš„binç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶, å¤åˆ¶åˆ°mongodbçš„binç›®å½•, å°±å¯ä»¥ç”¨å‘½ä»¤å¯¼å…¥äº†<br><a href="https://www.mongodb.com/try/download/database-tools">https://www.mongodb.com/try/download/database-tools</a></p><h1 id="springboot-æ•´åˆ-Mongodb"><a href="#springboot-æ•´åˆ-Mongodb" class="headerlink" title="springboot æ•´åˆ Mongodb"></a>springboot æ•´åˆ Mongodb</h1><blockquote><ol><li>å¯¼å…¥pomä¾èµ–</li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶  properties</li><li>ç¼–å†™å®ä½“ç±» pojo</li><li>ç¼–å†™ daoå±‚å’Œdaoçš„å®ç°ç±»</li><li>ç¼–å†™serviceå±‚å’Œserviceçš„å®ç°</li><li>ç¼–å†™controller</li><li>æµ‹è¯•</li></ol></blockquote><h2 id="å¯¼å…¥pomä¾èµ–"><a href="#å¯¼å…¥pomä¾èµ–" class="headerlink" title="å¯¼å…¥pomä¾èµ–"></a>å¯¼å…¥pomä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mongodb--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-mongodb<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--çƒ­éƒ¨ç½²--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--jsonè½¬æ¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mongodbé…ç½®</span></span><br><span class="line"><span class="attr">spring.data.mongodb.uri</span>=<span class="string">mongodb://localhost:27017/Test</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™å®ä½“ç±»"><a href="#ç¼–å†™å®ä½“ç±»" class="headerlink" title="ç¼–å†™å®ä½“ç±»"></a>ç¼–å†™å®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Document(collection = &quot;test1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String _id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;test2&gt; test2List;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Document(collection = &quot;test2&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String _id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™daoå±‚"><a href="#ç¼–å†™daoå±‚" class="headerlink" title="ç¼–å†™daoå±‚"></a>ç¼–å†™daoå±‚</h2><h3 id="daoå±‚æ¥å£"><a href="#daoå±‚æ¥å£" class="headerlink" title="daoå±‚æ¥å£"></a>daoå±‚æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SiteFlowDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®åå­—æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤šè¡¨è”æŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="daoå±‚æ¥å£å®ç°"><a href="#daoå±‚æ¥å£å®ç°" class="headerlink" title="daoå±‚æ¥å£å®ç°"></a>daoå±‚æ¥å£å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SiteFlowDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">SiteFlowDao</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MongoTemplate mongoTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        mongoTemplate.save(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;id&quot;</span>).is(id));</span><br><span class="line">        mongoTemplate.remove(query,test1.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;name&quot;</span>).is(name));</span><br><span class="line">        <span class="type">test1</span> <span class="variable">one</span> <span class="operator">=</span> mongoTemplate.findOne(query, test1.class);</span><br><span class="line">        <span class="keyword">return</span> one;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;id&quot;</span>).is(s1.getId()));</span><br><span class="line">        <span class="type">Update</span> <span class="variable">update</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Update</span>();</span><br><span class="line">        update.set(<span class="string">&quot;name&quot;</span>,s1.getName()).set(<span class="string">&quot;age&quot;</span>,s1.getAge());</span><br><span class="line">        <span class="type">UpdateResult</span> <span class="variable">updateResult</span> <span class="operator">=</span> mongoTemplate.updateMulti(query, update, test1.class);</span><br><span class="line">        <span class="keyword">if</span>(updateResult.getModifiedCount()&gt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">LookupOperation</span> <span class="variable">lookupOperation</span> <span class="operator">=</span> LookupOperation.newLookup()</span><br><span class="line">                .from(<span class="string">&quot;test2&quot;</span>) <span class="comment">//å…³è”ä»è¡¨å</span></span><br><span class="line">                .localField(<span class="string">&quot;id&quot;</span>) <span class="comment">//ä¸»è¡¨å…³è”å­—æ®µ</span></span><br><span class="line">                .foreignField(<span class="string">&quot;id&quot;</span>)<span class="comment">//ä»è¡¨å…³è”çš„å­—æ®µ</span></span><br><span class="line">                .as(<span class="string">&quot;test2List&quot;</span>); <span class="comment">//æŸ¥è¯¢ç»“æœå</span></span><br><span class="line">        <span class="comment">// è·å–æŒ‡å®šå­—æ®µçš„æ•°æ®  ProjectionOperation project = Aggregation.project(&quot;id&quot;,&quot;name&quot;,&quot;age&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> Criteria.where(<span class="string">&quot;test2List&quot;</span>).not().size(<span class="number">0</span>); <span class="comment">// ä¸ºè¾“å‡ºçš„list æ·»åŠ æ¡ä»¶</span></span><br><span class="line">        <span class="type">AggregationOperation</span> <span class="variable">match</span> <span class="operator">=</span> Aggregation.match(criteria);</span><br><span class="line">        <span class="comment">//UnwindOperation unwind = Aggregation.unwind(&quot;test2List&quot;); // åˆ†è§£å­—æ®µ ï¼Œ ä¾‹å¦‚ å°†æ•°ç»„å¤§å°ä¸ºnçš„å…ƒç´ ï¼Œåˆ†è§£ä¸ºnä¸ªæ–‡æ¡£</span></span><br><span class="line">        <span class="type">Aggregation</span> <span class="variable">aggregation</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,match);</span><br><span class="line">        List&lt;test1&gt; deto = mongoTemplate.aggregate(aggregation, <span class="string">&quot;test1&quot;</span>,test1.class).getMappedResults();</span><br><span class="line">        <span class="comment">//// ä¸Šé¢ test1 å¿…é¡»æ˜¯ ä¸»è¡¨çš„åå­—</span></span><br><span class="line">        <span class="comment">//for (test1 test1 : deto) &#123;</span></span><br><span class="line">        <span class="comment">//    System.out.println(test1);</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="keyword">return</span> deto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™serviceå±‚"><a href="#ç¼–å†™serviceå±‚" class="headerlink" title="ç¼–å†™serviceå±‚"></a>ç¼–å†™serviceå±‚</h2><h3 id="serviceå±‚æ¥å£"><a href="#serviceå±‚æ¥å£" class="headerlink" title="serviceå±‚æ¥å£"></a>serviceå±‚æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SiteFlowService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="serviceå±‚æ¥å£å®ç°"><a href="#serviceå±‚æ¥å£å®ç°" class="headerlink" title="serviceå±‚æ¥å£å®ç°"></a>serviceå±‚æ¥å£å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SiteFlowServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SiteFlowService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SiteFlowDao siteFlowDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        siteFlowDao.add(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        siteFlowDao.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> test1 <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> siteFlowDao.findByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(test1 s1)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> siteFlowDao.update(s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;test1&gt; <span class="title function_">findListByTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> siteFlowDao.findListByTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="controllerå±‚"><a href="#controllerå±‚" class="headerlink" title="controllerå±‚"></a>controllerå±‚</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SiteFlowService siteFlowService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(test1 ss1)</span>&#123;</span><br><span class="line">        siteFlowService.add(ss1);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">        siteFlowService.remove(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;delete&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        siteFlowService.remove(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;delete&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(test1 ss1)</span>&#123;</span><br><span class="line">        siteFlowService.update(ss1);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;update&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/TwoList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;test1&gt; listByTest = siteFlowService.findListByTest();</span><br><span class="line">        System.out.println(<span class="string">&quot;=======================&quot;</span>+listByTest+<span class="string">&quot;============================&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="springbootä½¿ç”¨Mongodbè¿›è¡ŒCRUD"><a href="#springbootä½¿ç”¨Mongodbè¿›è¡ŒCRUD" class="headerlink" title="springbootä½¿ç”¨Mongodbè¿›è¡ŒCRUD"></a>springbootä½¿ç”¨Mongodbè¿›è¡ŒCRUD</h1><h2 id="å¢åŠ "><a href="#å¢åŠ " class="headerlink" title="å¢åŠ "></a>å¢åŠ </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">test1</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">test1</span>();</span><br><span class="line">    s1.setId(<span class="number">3</span>);</span><br><span class="line">    s1.setName(<span class="string">&quot;ff&quot;</span>);</span><br><span class="line">    s1.setAge(<span class="number">18</span>);</span><br><span class="line">    mongoTemplate.save(s1);</span><br><span class="line"></span><br><span class="line">    List&lt;test1&gt; all = mongoTemplate.findAll(test1.class);</span><br><span class="line">    <span class="keyword">for</span> (test1 ss1 : all) &#123;</span><br><span class="line">        System.out.println(ss1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;siteflow_author&quot;</span>).is(<span class="string">&quot;é˜¿æ–¯å…°&quot;</span>));</span><br><span class="line">    mongoTemplate.remove(query,siteflow.class);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ›´æ–°</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * updateFirst åªæ›´æ–°æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡æ•°æ®</span></span><br><span class="line"><span class="comment">         * updateMulti æ›´æ–°æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„æ•°æ®</span></span><br><span class="line"><span class="comment">         * upsert  æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„è®°å½•å°±æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * getMatchedCount   åŒ¹é…çš„è®°å½•æ•°</span></span><br><span class="line"><span class="comment">         * getModifiedCount  ä¿®æ”¹çš„è®°å½•æ•°</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    <span class="type">Update</span> <span class="variable">update</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Update</span>();</span><br><span class="line">    update.set(<span class="string">&quot;siteflow_author&quot;</span>,<span class="string">&quot;æäºšè¾‰&quot;</span>);</span><br><span class="line">    <span class="type">Query</span> <span class="variable">query4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;id&quot;</span>).gte(<span class="number">154</span>));</span><br><span class="line">    <span class="type">UpdateResult</span> <span class="variable">updateResult</span> <span class="operator">=</span> mongoTemplate.updateMulti(query4, update, siteflow.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;=====&gt;&quot;</span>+updateResult.getMatchedCount()); <span class="comment">// åŒ¹é…çš„è®°å½•æ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;=====&gt;&quot;</span>+updateResult.getModifiedCount());  <span class="comment">// ä¿®æ”¹çš„è®°å½•æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">    List&lt;siteflow&gt; all = mongoTemplate.findAll(siteflow.class);</span><br><span class="line">    <span class="keyword">for</span> (siteflow siteflow : all) &#123;</span><br><span class="line">        System.out.println(siteflow);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">    List&lt;siteflow&gt; all = mongoTemplate.findAll(siteflow.class);</span><br><span class="line">    <span class="keyword">for</span> (siteflow siteflow : all) &#123;</span><br><span class="line">        System.out.println(siteflow);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®å…·ä½“å†…å®¹æŸ¥è¯¢</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *  gte:å¤§äºç­‰äº  gt:å¤§äº  is ç­‰äº  lte å°äºç­‰äº  lt å°äº</span></span><br><span class="line"><span class="comment">         *  æ­£åˆ™æŸ¥è¯¢  regex æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         *  æ’åºï¼š</span></span><br><span class="line"><span class="comment">         *      query.with(Sort.by(Sort.Order.desc(&quot;id&quot;)));</span></span><br><span class="line"><span class="comment">         *  åˆ†é¡µ</span></span><br><span class="line"><span class="comment">         *      query.skip(0) // è·³è¿‡æŒ‡å®šè®°å½•æ•°</span></span><br><span class="line"><span class="comment">         *             .limit(4); // æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">Query</span> <span class="variable">query1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;id&quot;</span>).gte(<span class="number">155</span>).lte(<span class="number">155</span>));</span><br><span class="line">    <span class="type">Query</span> <span class="variable">query2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;siteflow_author&quot;</span>).is(<span class="string">&quot;lks&quot;</span>));</span><br><span class="line">    <span class="type">Query</span> <span class="variable">query3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;park&quot;</span>).regex(<span class="string">&quot;å»Š&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Criteria</span>();</span><br><span class="line">    <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(criteria);</span><br><span class="line">    query.with(Sort.by(Sort.Order.desc(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line"></span><br><span class="line">    query.skip(<span class="number">0</span>) <span class="comment">// è·³è¿‡æŒ‡å®šè®°å½•æ•°</span></span><br><span class="line">        .limit(<span class="number">4</span>); <span class="comment">// æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    List&lt;siteflow&gt; siteflows = mongoTemplate.find(query3, siteflow.class);</span><br><span class="line">    <span class="keyword">for</span> (siteflow siteflow : siteflows) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=======&gt;&quot;</span>+siteflow);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">siteflow_name</span> <span class="operator">=</span> <span class="string">&quot;åŒ—äº¬ç«™ç‚¹456867&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">siteflow_author</span> <span class="operator">=</span> <span class="string">&quot;æäºšè¾‰&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">reges</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s%s%s&quot;</span>,<span class="string">&quot;^.*&quot;</span>,siteflow_name,<span class="string">&quot;.*$&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">reges2</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s%s%s&quot;</span>,<span class="string">&quot;^.*&quot;</span>,siteflow_author,<span class="string">&quot;.*$&quot;</span>);</span><br><span class="line">    <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(reges,Pattern.CASE_INSENSITIVE);<span class="comment">//æ­£åˆ™åŒ¹é…</span></span><br><span class="line">    <span class="type">Pattern</span> <span class="variable">pattern2</span> <span class="operator">=</span> Pattern.compile(reges2,Pattern.CASE_INSENSITIVE);</span><br><span class="line">    <span class="type">Criteria</span> <span class="variable">cr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Criteria</span>();</span><br><span class="line">    <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>();</span><br><span class="line">    <span class="keyword">if</span>(siteflow_author!=<span class="literal">null</span>&amp;&amp;siteflow_author!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">        cr.and(<span class="string">&quot;siteflow_author&quot;</span>).regex(pattern2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(siteflow_name!=<span class="literal">null</span>&amp;&amp;siteflow_name!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">        cr.and(<span class="string">&quot;siteflow_name&quot;</span>).regex(pattern);</span><br><span class="line">    &#125;</span><br><span class="line">    query.addCriteria(cr);</span><br><span class="line">    List&lt;SiteFlow&gt; siteflow = mongoTemplate.find(query, SiteFlow.class, <span class="string">&quot;siteflow&quot;</span>);</span><br><span class="line">    System.out.println(siteflow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šè¡¨è”æŸ¥"><a href="#å¤šè¡¨è”æŸ¥" class="headerlink" title="å¤šè¡¨è”æŸ¥"></a>å¤šè¡¨è”æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">LookupOperation</span> <span class="variable">lookupOperation</span> <span class="operator">=</span> LookupOperation.newLookup()</span><br><span class="line">        .from(<span class="string">&quot;test2&quot;</span>) <span class="comment">//å…³è”ä»è¡¨å</span></span><br><span class="line">        .localField(<span class="string">&quot;id&quot;</span>) <span class="comment">//ä¸»è¡¨å…³è”å­—æ®µ</span></span><br><span class="line">        .foreignField(<span class="string">&quot;id&quot;</span>)<span class="comment">//ä»è¡¨å…³è”çš„å­—æ®µ</span></span><br><span class="line">        .as(<span class="string">&quot;test2List&quot;</span>); <span class="comment">//æŸ¥è¯¢ç»“æœå</span></span><br><span class="line">    <span class="comment">// è·å–æŒ‡å®šå­—æ®µçš„æ•°æ®  ProjectionOperation project = Aggregation.project(&quot;id&quot;,&quot;name&quot;,&quot;age&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> Criteria.where(<span class="string">&quot;test2List&quot;</span>).not().size(<span class="number">0</span>); <span class="comment">// ä¸ºè¾“å‡ºçš„list æ·»åŠ æ¡ä»¶</span></span><br><span class="line">    <span class="type">AggregationOperation</span> <span class="variable">match</span> <span class="operator">=</span> Aggregation.match(criteria);</span><br><span class="line">    <span class="type">UnwindOperation</span> <span class="variable">unwind</span> <span class="operator">=</span> Aggregation.unwind(<span class="string">&quot;test2List&quot;</span>); <span class="comment">// åˆ†è§£å­—æ®µ ï¼Œ ä¾‹å¦‚ å°†æ•°ç»„å¤§å°ä¸ºnçš„å…ƒç´ ï¼Œåˆ†è§£ä¸ºnä¸ªæ–‡æ¡£</span></span><br><span class="line">    <span class="type">Aggregation</span> <span class="variable">aggregation</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,match);</span><br><span class="line">    <span class="type">Aggregation</span> <span class="variable">aggregation1</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,match,unwind);</span><br><span class="line">    List&lt;test1&gt; deto = mongoTemplate.aggregate(aggregation, <span class="string">&quot;test1&quot;</span>,test1.class).getMappedResults();</span><br><span class="line">    List&lt;Map&gt; deto1 = mongoTemplate.aggregate(aggregation1, <span class="string">&quot;test1&quot;</span>,Map.class).getMappedResults();</span><br><span class="line">    <span class="comment">// ä¸Šé¢ test1 å¿…é¡»æ˜¯ ä¸»è¡¨çš„åå­—</span></span><br><span class="line">    <span class="keyword">for</span> (test1 test1 : deto) &#123;</span><br><span class="line">        System.out.println(test1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;====================================&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Map map : deto1) &#123;</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315530.png" alt="image-20220709213220673"></p><h2 id="Mongodbä¸¤è¡¨è”æŸ¥"><a href="#Mongodbä¸¤è¡¨è”æŸ¥" class="headerlink" title="Mongodbä¸¤è¡¨è”æŸ¥"></a>Mongodbä¸¤è¡¨è”æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> <span class="comment">// ä¸¤è¡¨è”æŸ¥</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  mongodb ä¸èƒ½åƒ mysqlä¸€æ ·ï¼Œèƒ½åœ¨å®ä½“ç±»ä¸­ç›´æ¥å¼•ç”¨åˆ«çš„å®ä½“ç±»ï¼Œå¹¶æŸ¥è¯¢åˆ°ï¼ˆæˆ–è€…æˆ‘è¿˜æ²¡å‘ç°æ€ä¹ˆæï¼‰</span></span><br><span class="line"><span class="comment">     *      ä¾‹å¦‚  ï¼š  private User user; è¿™æ ·åœ¨å¤šè¡¨è”æŸ¥ä¸­mongodbä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">     *  å¦‚æœæƒ³è¦æ˜¾ç¤º è”æŸ¥åå…¶ä»–å®ä½“ç±»çš„æ•°æ® ï¼Œå¯ä»¥ private List&lt;User&gt; userï¼› è”æŸ¥åæ•°æ®ä¼šæ³¨å…¥åœ¨ user çš„æ•°ç»„ä¸­ï¼Œä½†æ˜¯å¦‚ä½•å–å‡ºæ¥é‡Œé¢çš„å…·ä½“æ•°å€¼å¾ˆéº»çƒ¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  æ‰€ä»¥ä½¿ç”¨äº†åˆ›å»ºç¬¬ä¸‰ä¸ªå®ä½“ç±»ä½œä¸ºä¸­ä»‹</span></span><br><span class="line"><span class="comment">     *      ä¾‹å¦‚ :  test1 å’Œ test2 è”æŸ¥ï¼Œåˆ™å°†test1 å’Œtest2 æ•´åˆï¼ˆä¸åŒçš„å…ƒç´ ï¼Œç›¸åŒçš„å…ƒç´ åªå–ä¸€ä¸ªï¼‰åˆ°ä¸€ä¸ªæ–°å»ºçš„ç±» sumä¸­ï¼Œåœ¨mongodbè”æŸ¥çš„æ—¶å€™ï¼Œç›´æ¥å°†æ•°æ®æ³¨å…¥åœ¨ sumç±»ä¸­</span></span><br><span class="line"><span class="comment">     *      æ³¨æ„ï¼š æ–°å»ºçš„sumæ•´åˆç±»ä¸­ï¼Œint ç±»å‹ è¦æ¢ä¸º Integer ç±»å‹ï¼Œä¸ç„¶ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  æŠŠè¦åœ¨sumä¸­æ˜¾ç¤ºçš„å…ƒç´  å–å‡ºæ¥ï¼Œ    test2Listæ˜¯æŸ¥è¯¢çš„ç»“æœå åé¢çš„åç¼€æ˜¯ ä»è¡¨ä¸­çš„è¦æ˜¾ç¤ºçš„æ•°æ® ä¸å†™ å‰ç¼€ test2List ã€‚ç»“æœä¼šä¸ºç©ºæŸ¥ä¸å‡ºæ¥</span></span><br><span class="line"><span class="comment">     *  ProjectionOperation project = Aggregation.project(</span></span><br><span class="line"><span class="comment">     &quot;id&quot;,&quot;name&quot;,</span></span><br><span class="line"><span class="comment">     &quot;test2List.siflow_id&quot;,&quot;test2List.external_port&quot;,&quot;test2List.ternal_port&quot;);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">LookupOperation</span> <span class="variable">lookupOperation</span> <span class="operator">=</span> LookupOperation.newLookup()</span><br><span class="line">        .from(<span class="string">&quot;test6&quot;</span>) <span class="comment">//å…³è”ä»è¡¨å</span></span><br><span class="line">        .localField(<span class="string">&quot;id&quot;</span>) <span class="comment">//ä¸»è¡¨å…³è”å­—æ®µ</span></span><br><span class="line">        .foreignField(<span class="string">&quot;id&quot;</span>)<span class="comment">//ä»è¡¨å…³è”çš„å­—æ®µ</span></span><br><span class="line">        .as(<span class="string">&quot;test2List&quot;</span>); <span class="comment">//æŸ¥è¯¢ç»“æœå</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠè¦åœ¨ sumç±»ä¸­æ˜¾ç¤ºçš„æ•°æ®</span></span><br><span class="line">    <span class="type">ProjectionOperation</span> <span class="variable">project</span> <span class="operator">=</span> Aggregation.project(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;test2List.siflow_id&quot;</span>,<span class="string">&quot;test2List.external_port&quot;</span>,<span class="string">&quot;test2List.ternal_port&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">Aggregation</span> <span class="variable">aggregation</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,project);</span><br><span class="line">    <span class="type">Aggregation</span> <span class="variable">aggregation1</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,project);</span><br><span class="line">    List&lt;Sum2&gt; deto = mongoTemplate.aggregate(aggregation, <span class="string">&quot;test1&quot;</span>,Sum2.class).getMappedResults();</span><br><span class="line">    List&lt;Map&gt; deto1 = mongoTemplate.aggregate(aggregation1, <span class="string">&quot;test1&quot;</span>,Map.class).getMappedResults();</span><br><span class="line">    <span class="comment">// ä¸Šé¢ test1 å¿…é¡»æ˜¯ ä¸»è¡¨çš„åå­—</span></span><br><span class="line">    <span class="keyword">for</span> (Sum2 test1 : deto) &#123;</span><br><span class="line">        System.out.println(test1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;====================================&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Map map : deto1) &#123;</span><br><span class="line">        System.out.println(map.get(<span class="string">&quot;siflow_id&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315198.png" alt="image-20220711133201615"></p><h2 id="ä¸‰è¡¨è”æŸ¥"><a href="#ä¸‰è¡¨è”æŸ¥" class="headerlink" title="ä¸‰è¡¨è”æŸ¥"></a>ä¸‰è¡¨è”æŸ¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Criteria</span>();</span><br><span class="line">    criteria.orOperator(Criteria.where(<span class="string">&quot;siteflow_name&quot;</span>).is(<span class="string">&quot;åŒ—äº¬ç«™ç‚¹456867&quot;</span>));</span><br><span class="line">    <span class="type">LookupOperation</span> <span class="variable">lookupOperation</span> <span class="operator">=</span> LookupOperation.newLookup()</span><br><span class="line">        .from(<span class="string">&quot;server_configure&quot;</span>)  <span class="comment">// è¢«å…³è”è¡¨</span></span><br><span class="line">        .localField(<span class="string">&quot;id&quot;</span>)<span class="comment">// ä¸»è¡¨å…³è”å­—æ®µ</span></span><br><span class="line">        .foreignField(<span class="string">&quot;siteflow_id&quot;</span>)<span class="comment">// è¢«å…³è”å­—æ®µ</span></span><br><span class="line">        .as(<span class="string">&quot;ss&quot;</span>);<span class="comment">// åˆ«å</span></span><br><span class="line">    <span class="type">LookupOperation</span> <span class="variable">lookupOperation2</span> <span class="operator">=</span> LookupOperation.newLookup()</span><br><span class="line">        .from(<span class="string">&quot;system_number&quot;</span>)  <span class="comment">// è¢«å…³è”è¡¨</span></span><br><span class="line">        .localField(<span class="string">&quot;id&quot;</span>)<span class="comment">// ä¸»è¡¨å…³è”å­—æ®µ</span></span><br><span class="line">        .foreignField(<span class="string">&quot;id&quot;</span>)<span class="comment">// è¢«å…³è”å­—æ®µ</span></span><br><span class="line">        .as(<span class="string">&quot;sa&quot;</span>);<span class="comment">// åˆ«å</span></span><br><span class="line"></span><br><span class="line">    <span class="type">ProjectionOperation</span> <span class="variable">project</span> <span class="operator">=</span> Aggregation.project(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="type">ProjectionOperation</span> <span class="variable">project2</span> <span class="operator">=</span> Aggregation.project(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;sa.system_name&quot;</span>,<span class="string">&quot;siteflow_id&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Map2Bean&lt;SiteFlowSum&gt; sumMap2Bean = <span class="keyword">new</span> <span class="title class_">Map2Bean</span>&lt;&gt;();</span><br><span class="line">    <span class="type">Aggregation</span> <span class="variable">aggregation</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation,Aggregation.unwind(<span class="string">&quot;ss&quot;</span>)</span><br><span class="line">                                                         ,Aggregation.match(criteria),project);</span><br><span class="line">    <span class="type">Aggregation</span> <span class="variable">aggregation2</span> <span class="operator">=</span> Aggregation.newAggregation(lookupOperation2,Aggregation.unwind(<span class="string">&quot;sa&quot;</span>)</span><br><span class="line">                                                          ,Aggregation.match(Criteria.where(<span class="string">&quot;sa&quot;</span>).ne(<span class="literal">null</span>)),project2);</span><br><span class="line">    <span class="comment">// siteflow å’Œ server_configure è”æŸ¥  å¾—åˆ° siteflow çš„id === siteflow_id</span></span><br><span class="line">    List&lt;Map&gt; siteflow1 = mongoTemplate.aggregate(aggregation, <span class="string">&quot;siteflow&quot;</span>, Map.class).getMappedResults();</span><br><span class="line">    <span class="comment">// å¾—åˆ°  siteflow_id å’Œ system_name</span></span><br><span class="line">    List&lt;Map&gt; siteflow2 = mongoTemplate.aggregate(aggregation2, <span class="string">&quot;server_configure&quot;</span>, Map.class).getMappedResults();</span><br><span class="line">    <span class="comment">// åˆæˆçš„æ–°æ•°ç»„</span></span><br><span class="line">    List&lt;Map&gt; test = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Map map : siteflow1) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">i</span> <span class="operator">=</span> map.get(<span class="string">&quot;id&quot;</span>).toString();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">h</span> <span class="operator">=</span> Integer.valueOf(i);</span><br><span class="line">        <span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Query</span>(Criteria.where(<span class="string">&quot;siteflow_id&quot;</span>).is(h));</span><br><span class="line">        List&lt;SiteServerConfigure&gt; siteServerConfigures = mongoTemplate.find(query, SiteServerConfigure.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ® siteserver å’Œ system_number ä¹‹é—´çš„å…³ç³» æ¥è¿›è¡Œ åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">for</span> (SiteServerConfigure siteServerConfigure : siteServerConfigures) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Map map1 : siteflow2) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">ih</span> <span class="operator">=</span> map1.get(<span class="string">&quot;id&quot;</span>).toString();</span><br><span class="line">                <span class="keyword">if</span>(siteServerConfigure.getId() == Integer.valueOf(ih))&#123;</span><br><span class="line">                    Map&lt;String,Object&gt; map2 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                    map2.put(<span class="string">&quot;id&quot;</span>,map.get(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                    map2.put(<span class="string">&quot;system_name&quot;</span>,map1.get(<span class="string">&quot;system_name&quot;</span>));</span><br><span class="line">                    test.add(map2);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">SiteFlowSum</span> <span class="variable">convert</span> <span class="operator">=</span> sumMap2Bean.convert(test.get(<span class="number">0</span>), SiteFlowSum.class,<span class="literal">true</span>,<span class="literal">true</span>);</span><br><span class="line">    System.out.println(convert);</span><br><span class="line">    System.out.println(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">//System.out.println(siteflow1);</span></span><br><span class="line">    <span class="comment">//System.out.println(&quot;==============================&quot;);</span></span><br><span class="line">    <span class="comment">//System.out.println(siteflow2);</span></span><br><span class="line">    <span class="comment">//System.out.println(&quot;===============================&quot;);</span></span><br><span class="line">    System.out.println(test);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»“æœ-1"><a href="#ç»“æœ-1" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315844.png" alt="image-20220711132914156"></p>]]></content>
      
      
      <categories>
          
          <category> NoSql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NoSql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo ç§å¯†æ–‡ç« è®¾ç½®</title>
      <link href="/2022/03/29/textpasss/"/>
      <url>/2022/03/29/textpasss/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹è½½hexoæ’ä»¶</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-blog-<span class="built_in">encrypt</span> <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>å®‰è£…ä¹‹åè®¾ç½®å¯†ç å³å¯</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">password:</span> mikej</span><br><span class="line"><span class="symbol">abstract:</span> æœ‰ä¸œè¥¿è¢«åŠ å¯†äº†, è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</span><br><span class="line"><span class="symbol">message:</span> æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span><br><span class="line"><span class="symbol">wrong_pass_message:</span> å¯†ç é”™è¯¯.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨dockeråœ¨tomcaté•œåƒä¸Šæ”¾webæ–‡ä»¶</title>
      <link href="/2022/02/16/%E4%BD%BF%E7%94%A8docker%E5%9C%A8tomcat%E9%95%9C%E5%83%8F%E4%B8%8A%E6%94%BEweb%E6%96%87%E4%BB%B6/"/>
      <url>/2022/02/16/%E4%BD%BF%E7%94%A8docker%E5%9C%A8tomcat%E9%95%9C%E5%83%8F%E4%B8%8A%E6%94%BEweb%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<ul><li><p>ä½¿ç”¨dockeråœ¨dockerhubå®˜ç½‘ä¸Šæ‹‰å–ä¸€ä¸ªtomcaté•œåƒ<code>docker pull tomcat</code></p></li><li><p>åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½œä¸ºå·æŒ‚è½½çš„æœ¬åœ°ï¼Œç»™tomcatæš´éœ²ä¸€ä¸ªé’å£ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker -d -p 8080:8080 --name firtomcat -v /home/likunsong/build/tomcat02/test:/usr/local/tomcat/webapps/test -v /home/likunsong/build/tomcat02/tomcatlogs:/usr/local/tomcat/webapps/tomcatlogs tomcat</span><br><span class="line"></span><br><span class="line">-d åœ¨åå°è¿è¡Œ</span><br><span class="line">-p 8080:8080 å¤–ç½‘çš„8080ç«¯å£æ˜ å°„å†…ç½‘çš„8080ç«¯å£</span><br><span class="line">--name å®¹å™¨çš„åå­—</span><br><span class="line">-v è¿›è¡Œå·æŒ‚è½½ ç¬¬ä¸€ä¸ªæ˜¯webçš„æŒ‚è½½ï¼Œç¬¬äºŒä¸ªæ˜¯è¿è¡Œæ—¥å¿—çš„æŒ‚è½½</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹tomcatæ–‡ä»¶ä½ç½®ï¼ˆè§£å†³è¿è¡Œç«¯å£å‡ºç°404çš„é—®é¢˜ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å› ä¸ºtomcatå®˜æ–¹æ–‡ä»¶webappsæ²¡æœ‰ä¸œè¥¿ï¼Œæ‰€ä»¥æ‰“å¼€ä¼šæŠ¥404çš„é”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ã€‚</span><br><span class="line"></span><br><span class="line">docker exec -it &lt;å®¹å™¨åæˆ–å®¹å™¨ID&gt;</span><br><span class="line"></span><br><span class="line">è¿›å…¥åï¼Œcp -r webapps.dist/* webapps,å°†å¤–éƒ¨çš„webappsæ–‡ä»¶å¤åˆ¶åˆ°webappsé‡Œé¢</span><br><span class="line"></span><br><span class="line">ç„¶åå†è¿è¡Œ8080ç«¯å£å°±ä¸ä¼šæŠ¥404çš„é”™è¯¯äº†</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326591.png" alt="image-20220413173215155"></p></li><li><p>è®¾ç½®web.xmlæ–‡ä»¶ï¼Œè¿è¡Œwebç¨‹åº</p><p>åœ¨testæ–‡ä»¶ä¸‹å»ºä¸€ä¸ªWEB-INFçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾web.xmlã€‚å…·ä½“å†…å®¹å¯ä»¥åœ¨ç½‘ä¸Šè‡ªå·±æ‰¾ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">&quot;2.4&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee </span></span></span><br><span class="line"><span class="string"><span class="tag">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨testæ–‡ä»¶å¤¹é‡Œé¢æ”¾htmlæ–‡ä»¶å°±å¯ä»¥è¿è¡Œäº† ï¼Œ æ³¨**:é¦–é¡µçš„htmlæ–‡ä»¶å‘½åä¸€å®šæ˜¯index.htmlï¼Œè¦ä¸ç„¶ä¼šæ˜¾ç¤ºä¸å‡ºæ¥**</p></li></ul><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326238.png" alt="1"></p><p>æœ€åå°±å¯ä»¥åœ¨8080ç«¯å£çš„testä¸­çœ‹åˆ°ä½ æ”¾çš„webæ–‡ä»¶äº†</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172326005.png" alt="3"></p>]]></content>
      
      
      <categories>
          
          <category> docker web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yamlæ–‡ä»¶çš„ä¹¦å†™</title>
      <link href="/2022/02/05/yaml%E6%96%87%E4%BB%B6%E7%9A%84%E4%B9%A6%E5%86%99/"/>
      <url>/2022/02/05/yaml%E6%96%87%E4%BB%B6%E7%9A%84%E4%B9%A6%E5%86%99/</url>
      
        <content type="html"><![CDATA[<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yamlæ ¼å¼çš„podå®šä¹‰æ–‡ä»¶å®Œæ•´å†…å®¹ï¼š</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>       <span class="comment">#å¿…é€‰ï¼Œç‰ˆæœ¬å·ï¼Œä¾‹å¦‚v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span>       <span class="comment">#å¿…é€‰ï¼ŒPod</span></span><br><span class="line"><span class="attr">metadata:</span>       <span class="comment">#å¿…é€‰ï¼Œå…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">string</span>       <span class="comment">#å¿…é€‰ï¼ŒPodåç§°</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">string</span>    <span class="comment">#å¿…é€‰ï¼ŒPodæ‰€å±çš„å‘½åç©ºé—´</span></span><br><span class="line">  <span class="attr">labels:</span>      <span class="comment">#è‡ªå®šä¹‰æ ‡ç­¾</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#è‡ªå®šä¹‰æ ‡ç­¾åå­—</span></span><br><span class="line">  <span class="attr">annotations:</span>       <span class="comment">#è‡ªå®šä¹‰æ³¨é‡Šåˆ—è¡¨</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line"><span class="attr">spec:</span>         <span class="comment">#å¿…é€‰ï¼ŒPodä¸­å®¹å™¨çš„è¯¦ç»†å®šä¹‰</span></span><br><span class="line">  <span class="attr">containers:</span>      <span class="comment">#å¿…é€‰ï¼ŒPodä¸­å®¹å™¨åˆ—è¡¨</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#å¿…é€‰ï¼Œå®¹å™¨åç§°</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">string</span>    <span class="comment">#å¿…é€‰ï¼Œå®¹å™¨çš„é•œåƒåç§°</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> [<span class="string">Always</span> <span class="string">|</span> <span class="string">Never</span> <span class="string">|</span> <span class="string">IfNotPresent</span>] <span class="comment">#è·å–é•œåƒçš„ç­–ç•¥ Alawysè¡¨ç¤ºä¸‹è½½é•œåƒ IfnotPresentè¡¨ç¤ºä¼˜å…ˆä½¿ç”¨æœ¬åœ°é•œåƒï¼Œå¦åˆ™ä¸‹è½½é•œåƒï¼ŒNerverè¡¨ç¤ºä»…ä½¿ç”¨æœ¬åœ°é•œåƒ</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">string</span>]    <span class="comment">#å®¹å™¨çš„å¯åŠ¨å‘½ä»¤åˆ—è¡¨ï¼Œå¦‚ä¸æŒ‡å®šï¼Œä½¿ç”¨æ‰“åŒ…æ—¶ä½¿ç”¨çš„å¯åŠ¨å‘½ä»¤</span></span><br><span class="line">    <span class="attr">args:</span> [<span class="string">string</span>]     <span class="comment">#å®¹å™¨çš„å¯åŠ¨å‘½ä»¤å‚æ•°åˆ—è¡¨</span></span><br><span class="line">    <span class="attr">workingDir:</span> <span class="string">string</span>     <span class="comment">#å®¹å™¨çš„å·¥ä½œç›®å½•</span></span><br><span class="line">    <span class="attr">volumeMounts:</span>    <span class="comment">#æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„å­˜å‚¨å·é…ç½®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#å¼•ç”¨podå®šä¹‰çš„å…±äº«å­˜å‚¨å·çš„åç§°ï¼Œéœ€ç”¨volumes[]éƒ¨åˆ†å®šä¹‰çš„çš„å·å</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">string</span>    <span class="comment">#å­˜å‚¨å·åœ¨å®¹å™¨å†…mountçš„ç»å¯¹è·¯å¾„ï¼Œåº”å°‘äº512å­—ç¬¦</span></span><br><span class="line">      <span class="attr">readOnly:</span> <span class="string">boolean</span>    <span class="comment">#æ˜¯å¦ä¸ºåªè¯»æ¨¡å¼</span></span><br><span class="line">    <span class="attr">ports:</span>       <span class="comment">#éœ€è¦æš´éœ²çš„ç«¯å£åº“å·åˆ—è¡¨</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#ç«¯å£å·åç§°</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="string">int</span>   <span class="comment">#å®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£å·</span></span><br><span class="line">      <span class="attr">hostPort:</span> <span class="string">int</span>    <span class="comment">#å®¹å™¨æ‰€åœ¨ä¸»æœºéœ€è¦ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸Containerç›¸åŒ</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">string</span>     <span class="comment">#ç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤TCP</span></span><br><span class="line">    <span class="attr">env:</span>       <span class="comment">#å®¹å™¨è¿è¡Œå‰éœ€è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#ç¯å¢ƒå˜é‡åç§°</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">string</span>    <span class="comment">#ç¯å¢ƒå˜é‡çš„å€¼</span></span><br><span class="line">    <span class="attr">resources:</span>       <span class="comment">#èµ„æºé™åˆ¶å’Œè¯·æ±‚çš„è®¾ç½®</span></span><br><span class="line">      <span class="attr">limits:</span>      <span class="comment">#èµ„æºé™åˆ¶çš„è®¾ç½®</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">string</span>    <span class="comment">#Cpuçš„é™åˆ¶ï¼Œå•ä½ä¸ºcoreæ•°ï¼Œå°†ç”¨äºdocker run --cpu-shareså‚æ•°</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">string</span>     <span class="comment">#å†…å­˜é™åˆ¶ï¼Œå•ä½å¯ä»¥ä¸ºMib/Gibï¼Œå°†ç”¨äºdocker run --memoryå‚æ•°</span></span><br><span class="line">      <span class="attr">requests:</span>      <span class="comment">#èµ„æºè¯·æ±‚çš„è®¾ç½®</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">string</span>    <span class="comment">#Cpuè¯·æ±‚ï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">string</span>     <span class="comment">#å†…å­˜æ¸…æ¥šï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡</span></span><br><span class="line">    <span class="attr">livenessProbe:</span>     <span class="comment">#å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥çš„è®¾ç½®ï¼Œå½“æ¢æµ‹æ— å“åº”å‡ æ¬¡åå°†è‡ªåŠ¨é‡å¯è¯¥å®¹å™¨ï¼Œæ£€æŸ¥æ–¹æ³•æœ‰execã€httpGetå’ŒtcpSocketï¼Œå¯¹ä¸€ä¸ªå®¹å™¨åªéœ€è®¾ç½®å…¶ä¸­ä¸€ç§æ–¹æ³•å³å¯</span></span><br><span class="line">      <span class="attr">exec:</span>      <span class="comment">#å¯¹Podå®¹å™¨å†…æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºexecæ–¹å¼</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">string</span>]  <span class="comment">#execæ–¹å¼éœ€è¦åˆ¶å®šçš„å‘½ä»¤æˆ–è„šæœ¬</span></span><br><span class="line">      <span class="attr">httpGet:</span>       <span class="comment">#å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹æ³•è®¾ç½®ä¸ºHttpGetï¼Œéœ€è¦åˆ¶å®šPathã€port</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">port:</span> <span class="string">number</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">HttpHeaders:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">string</span></span><br><span class="line">      <span class="attr">tcpSocket:</span>     <span class="comment">#å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºtcpSocketæ–¹å¼</span></span><br><span class="line">         <span class="attr">port:</span> <span class="string">number</span></span><br><span class="line">       <span class="attr">initialDelaySeconds:</span> <span class="number">0</span>  <span class="comment">#å®¹å™¨å¯åŠ¨å®Œæˆåé¦–æ¬¡æ¢æµ‹çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span></span><br><span class="line">       <span class="attr">timeoutSeconds:</span> <span class="number">0</span>   <span class="comment">#å¯¹å®¹å™¨å¥åº·æ£€æŸ¥æ¢æµ‹ç­‰å¾…å“åº”çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤1ç§’</span></span><br><span class="line">       <span class="attr">periodSeconds:</span> <span class="number">0</span>    <span class="comment">#å¯¹å®¹å™¨ç›‘æ§æ£€æŸ¥çš„å®šæœŸæ¢æµ‹æ—¶é—´è®¾ç½®ï¼Œå•ä½ç§’ï¼Œé»˜è®¤10ç§’ä¸€æ¬¡</span></span><br><span class="line">       <span class="attr">successThreshold:</span> <span class="number">0</span></span><br><span class="line">       <span class="attr">failureThreshold:</span> <span class="number">0</span></span><br><span class="line">       <span class="attr">securityContext:</span></span><br><span class="line">         <span class="string">privileged:false</span></span><br><span class="line">    <span class="attr">restartPolicy:</span> [<span class="string">Always</span> <span class="string">|</span> <span class="string">Never</span> <span class="string">|</span> <span class="string">OnFailure</span>]<span class="comment">#Podçš„é‡å¯ç­–ç•¥ï¼ŒAlwaysè¡¨ç¤ºä¸€æ—¦ä¸ç®¡ä»¥ä½•ç§æ–¹å¼ç»ˆæ­¢è¿è¡Œï¼Œkubeletéƒ½å°†é‡å¯ï¼ŒOnFailureè¡¨ç¤ºåªæœ‰Podä»¥é0é€€å‡ºç é€€å‡ºæ‰é‡å¯ï¼ŒNerverè¡¨ç¤ºä¸å†é‡å¯è¯¥Pod</span></span><br><span class="line">    <span class="attr">nodeSelector:</span> <span class="string">obeject</span>  <span class="comment">#è®¾ç½®NodeSelectorè¡¨ç¤ºå°†è¯¥Podè°ƒåº¦åˆ°åŒ…å«è¿™ä¸ªlabelçš„nodeä¸Šï¼Œä»¥keyï¼švalueçš„æ ¼å¼æŒ‡å®š</span></span><br><span class="line">    <span class="attr">imagePullSecrets:</span>    <span class="comment">#Pullé•œåƒæ—¶ä½¿ç”¨çš„secretåç§°ï¼Œä»¥keyï¼šsecretkeyæ ¼å¼æŒ‡å®š</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line">    <span class="string">hostNetwork:false</span>      <span class="comment">#æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ</span></span><br><span class="line">    <span class="attr">volumes:</span>       <span class="comment">#åœ¨è¯¥podä¸Šå®šä¹‰å…±äº«å­˜å‚¨å·åˆ—è¡¨</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">string</span>     <span class="comment">#å…±äº«å­˜å‚¨å·åç§° ï¼ˆvolumesç±»å‹æœ‰å¾ˆå¤šç§ï¼‰</span></span><br><span class="line">      <span class="attr">emptyDir:</span> &#123;&#125;     <span class="comment">#ç±»å‹ä¸ºemtyDirçš„å­˜å‚¨å·ï¼Œä¸PodåŒç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ã€‚ä¸ºç©ºå€¼</span></span><br><span class="line">      <span class="attr">hostPath:</span> <span class="string">string</span>     <span class="comment">#ç±»å‹ä¸ºhostPathçš„å­˜å‚¨å·ï¼Œè¡¨ç¤ºæŒ‚è½½Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">string</span>     <span class="comment">#Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•ï¼Œå°†è¢«ç”¨äºåŒæœŸä¸­mountçš„ç›®å½•</span></span><br><span class="line">      <span class="attr">secret:</span>      <span class="comment">#ç±»å‹ä¸ºsecretçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é›†ç¾¤ä¸å®šä¹‰çš„secreå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨</span></span><br><span class="line">        <span class="attr">scretname:</span> <span class="string">string</span>  </span><br><span class="line">        <span class="attr">items:</span>     </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">string</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">string</span></span><br><span class="line">      <span class="attr">configMap:</span>     <span class="comment">#ç±»å‹ä¸ºconfigMapçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é¢„å®šä¹‰çš„configMapå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">string</span></span><br><span class="line">        <span class="attr">items:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">string</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">string</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> yaml </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yaml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>k8s</title>
      <link href="/2022/02/05/k8s/"/>
      <url>/2022/02/05/k8s/</url>
      
        <content type="html"><![CDATA[<h1 id="KubernetesåŸºç¡€æ¦‚å¿µ"><a href="#KubernetesåŸºç¡€æ¦‚å¿µ" class="headerlink" title="KubernetesåŸºç¡€æ¦‚å¿µ"></a>KubernetesåŸºç¡€æ¦‚å¿µ</h1><p>ç»™å‡ºæ¥æºç½‘å€<a href="https://www.yuque.com/leifengyang/oncloud/kgheaf">Kuberneteså®æˆ˜å…¥é—¨ Â· è¯­é›€ (yuque.com)</a> å›¾ç‰‡ä¸æ˜¾ç¤ºå¯ä»¥å»åŸç½‘ç«™çœ‹</p><h2 id="1ã€æ˜¯ä»€ä¹ˆ"><a href="#1ã€æ˜¯ä»€ä¹ˆ" class="headerlink" title="1ã€æ˜¯ä»€ä¹ˆ"></a>1ã€æ˜¯ä»€ä¹ˆ</h2><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172314591.png" alt="img"></p><p>æˆ‘ä»¬æ€¥éœ€ä¸€ä¸ªå¤§è§„æ¨¡å®¹å™¨ç¼–æ’ç³»ç»Ÿ</p><p>kuberneteså…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li><p><strong>æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡</strong><br>Kubernetes å¯ä»¥ä½¿ç”¨ DNS åç§°æˆ–è‡ªå·±çš„ IP åœ°å€å…¬å¼€å®¹å™¨ï¼Œå¦‚æœè¿›å…¥å®¹å™¨çš„æµé‡å¾ˆå¤§ï¼Œ Kubernetes å¯ä»¥è´Ÿè½½å‡è¡¡å¹¶åˆ†é…ç½‘ç»œæµé‡ï¼Œä»è€Œä½¿éƒ¨ç½²ç¨³å®šã€‚</p></li><li><p><strong>å­˜å‚¨ç¼–æ’</strong><br>Kubernetes å…è®¸ä½ è‡ªåŠ¨æŒ‚è½½ä½ é€‰æ‹©çš„å­˜å‚¨ç³»ç»Ÿï¼Œä¾‹å¦‚æœ¬åœ°å­˜å‚¨ã€å…¬å…±äº‘æä¾›å•†ç­‰ã€‚</p></li><li><p><strong>è‡ªåŠ¨éƒ¨ç½²å’Œå›æ»š</strong><br>ä½ å¯ä»¥ä½¿ç”¨ Kubernetes æè¿°å·²éƒ¨ç½²å®¹å™¨çš„æ‰€éœ€çŠ¶æ€ï¼Œå®ƒå¯ä»¥ä»¥å—æ§çš„é€Ÿç‡å°†å®é™…çŠ¶æ€ æ›´æ”¹ä¸ºæœŸæœ›çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è‡ªåŠ¨åŒ– Kubernetes æ¥ä¸ºä½ çš„éƒ¨ç½²åˆ›å»ºæ–°å®¹å™¨ï¼Œ åˆ é™¤ç°æœ‰å®¹å™¨å¹¶å°†å®ƒä»¬çš„æ‰€æœ‰èµ„æºç”¨äºæ–°å®¹å™¨ã€‚</p></li><li><p><strong>è‡ªåŠ¨å®Œæˆè£…ç®±è®¡ç®—</strong><br>Kubernetes å…è®¸ä½ æŒ‡å®šæ¯ä¸ªå®¹å™¨æ‰€éœ€ CPU å’Œå†…å­˜ï¼ˆRAMï¼‰ã€‚ å½“å®¹å™¨æŒ‡å®šäº†èµ„æºè¯·æ±‚æ—¶ï¼ŒKubernetes å¯ä»¥åšå‡ºæ›´å¥½çš„å†³ç­–æ¥ç®¡ç†å®¹å™¨çš„èµ„æºã€‚</p></li><li><p><strong>è‡ªæˆ‘ä¿®å¤</strong><br>Kubernetes é‡æ–°å¯åŠ¨å¤±è´¥çš„å®¹å™¨ã€æ›¿æ¢å®¹å™¨ã€æ€æ­»ä¸å“åº”ç”¨æˆ·å®šä¹‰çš„ è¿è¡ŒçŠ¶å†µæ£€æŸ¥çš„å®¹å™¨ï¼Œå¹¶ä¸”åœ¨å‡†å¤‡å¥½æœåŠ¡ä¹‹å‰ä¸å°†å…¶é€šå‘Šç»™å®¢æˆ·ç«¯ã€‚</p></li><li><p><strong>å¯†é’¥ä¸é…ç½®ç®¡ç†</strong><br>Kubernetes å…è®¸ä½ å­˜å‚¨å’Œç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€OAuth ä»¤ç‰Œå’Œ ssh å¯†é’¥ã€‚ ä½ å¯ä»¥åœ¨ä¸é‡å»ºå®¹å™¨é•œåƒçš„æƒ…å†µä¸‹éƒ¨ç½²å’Œæ›´æ–°å¯†é’¥å’Œåº”ç”¨ç¨‹åºé…ç½®ï¼Œä¹Ÿæ— éœ€åœ¨å †æ ˆé…ç½®ä¸­æš´éœ²å¯†é’¥ã€‚</p></li></ul><p>*<strong>Kubernetes ä¸ºä½ æä¾›äº†ä¸€ä¸ªå¯å¼¹æ€§è¿è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¡†æ¶ã€‚ Kubernetes ä¼šæ»¡è¶³ä½ çš„æ‰©å±•è¦æ±‚ã€æ•…éšœè½¬ç§»ã€éƒ¨ç½²æ¨¡å¼ç­‰ã€‚ ä¾‹å¦‚ï¼ŒKubernetes å¯ä»¥è½»æ¾ç®¡ç†ç³»ç»Ÿçš„ Canary éƒ¨ç½²ã€‚*</strong></p><h2 id="2ã€æ¶æ„"><a href="#2ã€æ¶æ„" class="headerlink" title="2ã€æ¶æ„"></a>2ã€æ¶æ„</h2><h3 id="1ã€å·¥ä½œæ–¹å¼"><a href="#1ã€å·¥ä½œæ–¹å¼" class="headerlink" title="1ã€å·¥ä½œæ–¹å¼"></a>1ã€å·¥ä½œæ–¹å¼</h3><p>Kubernetes <strong>Cluster</strong> <strong>&#x3D;</strong> N <strong>Master</strong> Node <strong>+</strong> N <strong>Worker</strong> Nodeï¼šNä¸»èŠ‚ç‚¹+Nå·¥ä½œèŠ‚ç‚¹ï¼› N&gt;&#x3D;1</p><h3 id="2ã€ç»„ä»¶æ¶æ„"><a href="#2ã€ç»„ä»¶æ¶æ„" class="headerlink" title="2ã€ç»„ä»¶æ¶æ„"></a>2ã€ç»„ä»¶æ¶æ„</h3><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172314632.png" alt="img"></p><h3 id="1ã€æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl-Plane-Componentsï¼‰"><a href="#1ã€æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl-Plane-Componentsï¼‰" class="headerlink" title="1ã€æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰"></a>1ã€æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰</h3><p>æ§åˆ¶å¹³é¢çš„ç»„ä»¶å¯¹é›†ç¾¤åšå‡ºå…¨å±€å†³ç­–(æ¯”å¦‚è°ƒåº¦)ï¼Œä»¥åŠæ£€æµ‹å’Œå“åº”é›†ç¾¤äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œå½“ä¸æ»¡è¶³éƒ¨ç½²çš„ <code>replicas</code> å­—æ®µæ—¶ï¼Œå¯åŠ¨æ–°çš„ <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">pod</a>ï¼‰ã€‚</p><p>æ§åˆ¶å¹³é¢ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ ç„¶è€Œï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œè®¾ç½®è„šæœ¬é€šå¸¸ä¼šåœ¨åŒä¸€ä¸ªè®¡ç®—æœºä¸Šå¯åŠ¨æ‰€æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œ å¹¶ä¸”ä¸ä¼šåœ¨æ­¤è®¡ç®—æœºä¸Šè¿è¡Œç”¨æˆ·å®¹å™¨ã€‚ è¯·å‚é˜…<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/high-availability/">ä½¿ç”¨ kubeadm æ„å»ºé«˜å¯ç”¨æ€§é›†ç¾¤</a> ä¸­å…³äºå¤š VM æ§åˆ¶å¹³é¢è®¾ç½®çš„ç¤ºä¾‹ã€‚</p><h4 id="kube-apiserver"><a href="#kube-apiserver" class="headerlink" title="kube-apiserver"></a>kube-apiserver</h4><p>API æœåŠ¡å™¨æ˜¯ Kubernetes <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-control-plane">æ§åˆ¶é¢</a>çš„ç»„ä»¶ï¼Œ è¯¥ç»„ä»¶å…¬å¼€äº† Kubernetes APIã€‚ API æœåŠ¡å™¨æ˜¯ Kubernetes æ§åˆ¶é¢çš„å‰ç«¯ã€‚</p><p>Kubernetes API æœåŠ¡å™¨çš„ä¸»è¦å®ç°æ˜¯ <a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-apiserver/">kube-apiserver</a>ã€‚ kube-apiserver è®¾è®¡ä¸Šè€ƒè™‘äº†æ°´å¹³ä¼¸ç¼©ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯é€šè¿‡éƒ¨ç½²å¤šä¸ªå®ä¾‹è¿›è¡Œä¼¸ç¼©ã€‚ ä½ å¯ä»¥è¿è¡Œ kube-apiserver çš„å¤šä¸ªå®ä¾‹ï¼Œå¹¶åœ¨è¿™äº›å®ä¾‹ä¹‹é—´å¹³è¡¡æµé‡ã€‚</p><h4 id="etcd"><a href="#etcd" class="headerlink" title="etcd"></a>etcd</h4><p>etcd æ˜¯å…¼å…·ä¸€è‡´æ€§å’Œé«˜å¯ç”¨æ€§çš„é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥ä½œä¸ºä¿å­˜ Kubernetes æ‰€æœ‰é›†ç¾¤æ•°æ®çš„åå°æ•°æ®åº“ã€‚</p><p>æ‚¨çš„ Kubernetes é›†ç¾¤çš„ etcd æ•°æ®åº“é€šå¸¸éœ€è¦æœ‰ä¸ªå¤‡ä»½è®¡åˆ’ã€‚</p><p>è¦äº†è§£ etcd æ›´æ·±å±‚æ¬¡çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="https://etcd.io/docs/">etcd æ–‡æ¡£</a>ã€‚</p><h4 id="kube-scheduler"><a href="#kube-scheduler" class="headerlink" title="kube-scheduler"></a>kube-scheduler</h4><p>æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œè´Ÿè´£ç›‘è§†æ–°åˆ›å»ºçš„ã€æœªæŒ‡å®šè¿è¡Œ<a href="https://kubernetes.io/zh/docs/concepts/architecture/nodes/">èŠ‚ç‚¹ï¼ˆnodeï¼‰</a>çš„ <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">Pods</a>ï¼Œé€‰æ‹©èŠ‚ç‚¹è®© Pod åœ¨ä¸Šé¢è¿è¡Œã€‚</p><p>è°ƒåº¦å†³ç­–è€ƒè™‘çš„å› ç´ åŒ…æ‹¬å•ä¸ª Pod å’Œ Pod é›†åˆçš„èµ„æºéœ€æ±‚ã€ç¡¬ä»¶&#x2F;è½¯ä»¶&#x2F;ç­–ç•¥çº¦æŸã€äº²å’Œæ€§å’Œåäº²å’Œæ€§è§„èŒƒã€æ•°æ®ä½ç½®ã€å·¥ä½œè´Ÿè½½é—´çš„å¹²æ‰°å’Œæœ€åæ—¶é™ã€‚</p><h4 id="kube-controller-manager"><a href="#kube-controller-manager" class="headerlink" title="kube-controller-manager"></a>kube-controller-manager</h4><p>åœ¨ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œ <a href="https://kubernetes.io/zh/docs/concepts/architecture/controller/">æ§åˆ¶å™¨</a> çš„ç»„ä»¶ã€‚</p><p>ä»é€»è¾‘ä¸Šè®²ï¼Œæ¯ä¸ª<a href="https://kubernetes.io/zh/docs/concepts/architecture/controller/">æ§åˆ¶å™¨</a>éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œ ä½†æ˜¯ä¸ºäº†é™ä½å¤æ‚æ€§ï¼Œå®ƒä»¬éƒ½è¢«ç¼–è¯‘åˆ°åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œã€‚</p><p>è¿™äº›æ§åˆ¶å™¨åŒ…æ‹¬:</p><ul><li><p>èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: è´Ÿè´£åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”</p></li><li><p>ä»»åŠ¡æ§åˆ¶å™¨ï¼ˆJob controllerï¼‰: ç›‘æµ‹ä»£è¡¨ä¸€æ¬¡æ€§ä»»åŠ¡çš„ Job å¯¹è±¡ï¼Œç„¶ååˆ›å»º Pods æ¥è¿è¡Œè¿™äº›ä»»åŠ¡ç›´è‡³å®Œæˆ</p></li><li><p>ç«¯ç‚¹æ§åˆ¶å™¨ï¼ˆEndpoints Controllerï¼‰: å¡«å……ç«¯ç‚¹(Endpoints)å¯¹è±¡(å³åŠ å…¥ Service ä¸ Pod)</p></li><li><p>æœåŠ¡å¸æˆ·å’Œä»¤ç‰Œæ§åˆ¶å™¨ï¼ˆService Account &amp; Token Controllersï¼‰: ä¸ºæ–°çš„å‘½åç©ºé—´åˆ›å»ºé»˜è®¤å¸æˆ·å’Œ API è®¿é—®ä»¤ç‰Œ</p></li></ul><h4 id="cloud-controller-manager"><a href="#cloud-controller-manager" class="headerlink" title="cloud-controller-manager"></a>cloud-controller-manager</h4><p>äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯æŒ‡åµŒå…¥ç‰¹å®šäº‘çš„æ§åˆ¶é€»è¾‘çš„ <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-control-plane">æ§åˆ¶å¹³é¢</a>ç»„ä»¶ã€‚ äº‘æ§åˆ¶å™¨ç®¡ç†å™¨å…è®¸æ‚¨é“¾æ¥é›†ç¾¤åˆ°äº‘æä¾›å•†çš„åº”ç”¨ç¼–ç¨‹æ¥å£ä¸­ï¼Œ å¹¶æŠŠå’Œè¯¥äº‘å¹³å°äº¤äº’çš„ç»„ä»¶ä¸åªå’Œæ‚¨çš„é›†ç¾¤äº¤äº’çš„ç»„ä»¶åˆ†ç¦»å¼€ã€‚</p><p><code>cloud-controller-manager</code> ä»…è¿è¡Œç‰¹å®šäºäº‘å¹³å°çš„æ§åˆ¶å›è·¯ã€‚ å¦‚æœä½ åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­è¿è¡Œ Kubernetesï¼Œæˆ–è€…åœ¨æœ¬åœ°è®¡ç®—æœºä¸­è¿è¡Œå­¦ä¹ ç¯å¢ƒï¼Œ æ‰€éƒ¨ç½²çš„ç¯å¢ƒä¸­ä¸éœ€è¦äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ã€‚</p><p>ä¸ <code>kube-controller-manager</code> ç±»ä¼¼ï¼Œ<code>cloud-controller-manager</code> å°†è‹¥å¹²é€»è¾‘ä¸Šç‹¬ç«‹çš„ æ§åˆ¶å›è·¯ç»„åˆåˆ°åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œä¾›ä½ ä»¥åŒä¸€è¿›ç¨‹çš„æ–¹å¼è¿è¡Œã€‚ ä½ å¯ä»¥å¯¹å…¶æ‰§è¡Œæ°´å¹³æ‰©å®¹ï¼ˆè¿è¡Œä¸æ­¢ä¸€ä¸ªå‰¯æœ¬ï¼‰ä»¥æå‡æ€§èƒ½æˆ–è€…å¢å¼ºå®¹é”™èƒ½åŠ›ã€‚</p><p>ä¸‹é¢çš„æ§åˆ¶å™¨éƒ½åŒ…å«å¯¹äº‘å¹³å°é©±åŠ¨çš„ä¾èµ–ï¼š</p><ul><li><p>èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: ç”¨äºåœ¨èŠ‚ç‚¹ç»ˆæ­¢å“åº”åæ£€æŸ¥äº‘æä¾›å•†ä»¥ç¡®å®šèŠ‚ç‚¹æ˜¯å¦å·²è¢«åˆ é™¤</p></li><li><p>è·¯ç”±æ§åˆ¶å™¨ï¼ˆRoute Controllerï¼‰: ç”¨äºåœ¨åº•å±‚äº‘åŸºç¡€æ¶æ„ä¸­è®¾ç½®è·¯ç”±</p></li><li><p>æœåŠ¡æ§åˆ¶å™¨ï¼ˆService Controllerï¼‰: ç”¨äºåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤äº‘æä¾›å•†è´Ÿè½½å‡è¡¡å™¨</p></li></ul><h3 id="2ã€Node-ç»„ä»¶"><a href="#2ã€Node-ç»„ä»¶" class="headerlink" title="2ã€Node ç»„ä»¶"></a>2ã€Node ç»„ä»¶</h3><p>èŠ‚ç‚¹ç»„ä»¶åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œç»´æŠ¤è¿è¡Œçš„ Pod å¹¶æä¾› Kubernetes è¿è¡Œç¯å¢ƒã€‚</p><h4 id="kubelet"><a href="#kubelet" class="headerlink" title="kubelet"></a>kubelet</h4><p>ä¸€ä¸ªåœ¨é›†ç¾¤ä¸­æ¯ä¸ª<a href="https://kubernetes.io/zh/docs/concepts/architecture/nodes/">èŠ‚ç‚¹ï¼ˆnodeï¼‰</a>ä¸Šè¿è¡Œçš„ä»£ç†ã€‚ å®ƒä¿è¯<a href="https://kubernetes.io/zh/docs/concepts/overview/what-is-kubernetes/#why-containers">å®¹å™¨ï¼ˆcontainersï¼‰</a>éƒ½ è¿è¡Œåœ¨ <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">Pod</a> ä¸­ã€‚</p><p>kubelet æ¥æ”¶ä¸€ç»„é€šè¿‡å„ç±»æœºåˆ¶æä¾›ç»™å®ƒçš„ PodSpecsï¼Œç¡®ä¿è¿™äº› PodSpecs ä¸­æè¿°çš„å®¹å™¨å¤„äºè¿è¡ŒçŠ¶æ€ä¸”å¥åº·ã€‚ kubelet ä¸ä¼šç®¡ç†ä¸æ˜¯ç”± Kubernetes åˆ›å»ºçš„å®¹å™¨ã€‚</p><h4 id="kube-proxy"><a href="#kube-proxy" class="headerlink" title="kube-proxy"></a>kube-proxy</h4><p><a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-proxy/">kube-proxy</a> æ˜¯é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç½‘ç»œä»£ç†ï¼Œ å®ç° Kubernetes <a href="https://kubernetes.io/zh/docs/concepts/services-networking/service/">æœåŠ¡ï¼ˆServiceï¼‰</a> æ¦‚å¿µçš„ä¸€éƒ¨åˆ†ã€‚</p><p>kube-proxy ç»´æŠ¤èŠ‚ç‚¹ä¸Šçš„ç½‘ç»œè§„åˆ™ã€‚è¿™äº›ç½‘ç»œè§„åˆ™å…è®¸ä»é›†ç¾¤å†…éƒ¨æˆ–å¤–éƒ¨çš„ç½‘ç»œä¼šè¯ä¸ Pod è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚</p><p>å¦‚æœæ“ä½œç³»ç»Ÿæä¾›äº†æ•°æ®åŒ…è¿‡æ»¤å±‚å¹¶å¯ç”¨çš„è¯ï¼Œkube-proxy ä¼šé€šè¿‡å®ƒæ¥å®ç°ç½‘ç»œè§„åˆ™ã€‚å¦åˆ™ï¼Œ kube-proxy ä»…è½¬å‘æµé‡æœ¬èº«ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172314888.png" alt="img"></p><h2 id="3ã€kubeadmåˆ›å»ºé›†ç¾¤"><a href="#3ã€kubeadmåˆ›å»ºé›†ç¾¤" class="headerlink" title="3ã€kubeadmåˆ›å»ºé›†ç¾¤"></a>3ã€kubeadmåˆ›å»ºé›†ç¾¤</h2><p>è¯·å‚ç…§ä»¥å‰Dockerå®‰è£…ã€‚å…ˆæå‰ä¸ºæ‰€æœ‰æœºå™¨å®‰è£…Docker</p><h3 id="dockerå®‰è£…"><a href="#dockerå®‰è£…" class="headerlink" title="dockerå®‰è£…"></a>dockerå®‰è£…</h3><hr><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">å®‰è£…å‘½ä»¤ï¼š</span><br><span class="line">ï¼ˆå¸è½½ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰ï¼š</span><br><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br><span class="line">                  </span><br><span class="line">1.éœ€è¦çš„å®‰è£…åŒ…</span><br><span class="line"> sudo yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br><span class="line"></span><br><span class="line">2.è®¾ç½®é•œåƒä»“åº“</span><br><span class="line">ï¼ˆå›½å¤–çš„ä»“åº“ï¼Œæ¯”è¾ƒæ…¢ï¼‰</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">    </span><br><span class="line">ï¼ˆé˜¿é‡Œäº‘çš„é•œåƒä»“åº“ï¼Œæ¯”è¾ƒå¿«ï¼Œæ¨èä½¿ç”¨ï¼‰</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°yumè½¯ä»¶åŒ…çš„ç´¢å¼•</span> </span><br><span class="line">sudo yum makecache fast</span><br><span class="line"></span><br><span class="line">3.å®‰è£…dockeræœ€æ–°ç‰ˆæœ¬çš„</span><br><span class="line"></span><br><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br><span class="line"></span><br><span class="line">yum install -y docker-ce-20.10.7 docker-ce-cli-20.10.7 containerd.io-1.4.6</span><br><span class="line"></span><br><span class="line">4.é…ç½®é˜¿é‡Œäº‘é•œåƒæœåŠ¡</span><br><span class="line">  1.sudo mkdir -p /etc/docker</span><br><span class="line">  </span><br><span class="line">  2.sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;registry-mirrors&quot;: [&quot;https://4tbypv0e.mirror.aliyuncs.com&quot;],</span><br><span class="line">      &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">      &quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class="line">      &quot;log-opts&quot;: &#123;</span><br><span class="line">        &quot;max-size&quot;: &quot;100m&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;storage-driver&quot;: &quot;overlay2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    EOF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://4tbypv0e.mirror.aliyuncs.com&quot;],</span><br><span class="line">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">  &quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class="line">  &quot;log-opts&quot;: &#123;</span><br><span class="line">    &quot;max-size&quot;: &quot;100m&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;storage-driver&quot;: &quot;overlay2&quot;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">   3.sudo systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">   4.sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="dockerå¸è½½"><a href="#dockerå¸è½½" class="headerlink" title="dockerå¸è½½"></a>dockerå¸è½½</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åœæ­¢dockerè¿è¡Œï¼š</span><br><span class="line">systemctl stop docker</span><br><span class="line">åˆ é™¤å®‰è£…åŒ…:</span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line">åˆ é™¤é•œåƒï¼Œå®¹å™¨ï¼Œé…ç½®æ–‡ä»¶ç­‰å†…å®¹:</span><br><span class="line">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure><h3 id="1ã€å®‰è£…kubeadm"><a href="#1ã€å®‰è£…kubeadm" class="headerlink" title="1ã€å®‰è£…kubeadm"></a>1ã€å®‰è£…kubeadm</h3><ul><li><p>ä¸€å°å…¼å®¹çš„ Linux ä¸»æœºã€‚Kubernetes é¡¹ç›®ä¸ºåŸºäº Debian å’Œ Red Hat çš„ Linux å‘è¡Œç‰ˆä»¥åŠä¸€äº›ä¸æä¾›åŒ…ç®¡ç†å™¨çš„å‘è¡Œç‰ˆæä¾›é€šç”¨çš„æŒ‡ä»¤</p></li><li><p>æ¯å°æœºå™¨ 2 GB æˆ–æ›´å¤šçš„ RAM ï¼ˆå¦‚æœå°‘äºè¿™ä¸ªæ•°å­—å°†ä¼šå½±å“ä½ åº”ç”¨çš„è¿è¡Œå†…å­˜)</p></li><li><p>2 CPU æ ¸æˆ–æ›´å¤š</p></li><li><p>é›†ç¾¤ä¸­çš„æ‰€æœ‰æœºå™¨çš„ç½‘ç»œå½¼æ­¤å‡èƒ½ç›¸äº’è¿æ¥(å…¬ç½‘å’Œå†…ç½‘éƒ½å¯ä»¥)</p></li><li><ul><li><strong>è®¾ç½®é˜²ç«å¢™æ”¾è¡Œè§„åˆ™</strong></li></ul></li><li><p>èŠ‚ç‚¹ä¹‹ä¸­ä¸å¯ä»¥æœ‰é‡å¤çš„ä¸»æœºåã€MAC åœ°å€æˆ– product_uuidã€‚è¯·å‚è§<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#verify-mac-address">è¿™é‡Œ</a>äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p></li><li><ul><li><strong>è®¾ç½®ä¸åŒhostname</strong></li></ul></li><li><p>å¼€å¯æœºå™¨ä¸Šçš„æŸäº›ç«¯å£ã€‚è¯·å‚è§<a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#check-required-ports">è¿™é‡Œ</a> äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p></li><li><ul><li><strong>å†…ç½‘äº’ä¿¡</strong></li></ul></li><li><p>ç¦ç”¨äº¤æ¢åˆ†åŒºã€‚ä¸ºäº†ä¿è¯ kubelet æ­£å¸¸å·¥ä½œï¼Œä½  <strong>å¿…é¡»</strong> ç¦ç”¨äº¤æ¢åˆ†åŒºã€‚</p></li><li><ul><li><strong>æ°¸ä¹…å…³é—­</strong></li></ul></li></ul><h4 id="1ã€åŸºç¡€ç¯å¢ƒ"><a href="#1ã€åŸºç¡€ç¯å¢ƒ" class="headerlink" title="1ã€åŸºç¡€ç¯å¢ƒ"></a>1ã€åŸºç¡€ç¯å¢ƒ</h4><p>æ‰€æœ‰æœºå™¨æ‰§è¡Œä»¥ä¸‹æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å„ä¸ªæœºå™¨è®¾ç½®è‡ªå·±çš„åŸŸå</span></span><br><span class="line">hostnamectl set-hostname xxxx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† SELinux è®¾ç½®ä¸º permissive æ¨¡å¼ï¼ˆç›¸å½“äºå°†å…¶ç¦ç”¨ï¼‰</span></span><br><span class="line">sudo setenforce 0</span><br><span class="line">sudo sed -i <span class="string">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span> /etc/selinux/config</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…³é—­swap</span></span><br><span class="line">swapoff -a  </span><br><span class="line">sed -ri <span class="string">&#x27;s/.*swap.*/#&amp;/&#x27;</span> /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…è®¸ iptables æ£€æŸ¥æ¡¥æ¥æµé‡</span></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/modules-load.d/k8s.conf</span></span><br><span class="line"><span class="string">br_netfilter</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/sysctl.d/k8s.conf</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables = 1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables = 1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">sudo sysctl --system</span><br></pre></td></tr></table></figure><h4 id="2ã€å®‰è£…kubeletã€kubeadmã€kubectl"><a href="#2ã€å®‰è£…kubeletã€kubeadmã€kubectl" class="headerlink" title="2ã€å®‰è£…kubeletã€kubeadmã€kubectl"></a>2ã€å®‰è£…kubeletã€kubeadmã€kubectl</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/yum.repos.d/kubernetes.repo</span></span><br><span class="line"><span class="string">[kubernetes]</span></span><br><span class="line"><span class="string">name=Kubernetes</span></span><br><span class="line"><span class="string">baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">repo_gpgcheck=0</span></span><br><span class="line"><span class="string">gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span></span><br><span class="line"><span class="string">   http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span><br><span class="line"><span class="string">exclude=kubelet kubeadm kubectl</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sudo yum install -y kubelet-1.20.9 kubeadm-1.20.9 kubectl-1.20.9 --disableexcludes=kubernetes</span><br><span class="line"></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> --now kubelet</span><br></pre></td></tr></table></figure><p>kubelet ç°åœ¨æ¯éš”å‡ ç§’å°±ä¼šé‡å¯ï¼Œå› ä¸ºå®ƒé™·å…¥äº†ä¸€ä¸ªç­‰å¾… kubeadm æŒ‡ä»¤çš„æ­»å¾ªç¯</p><h3 id="2ã€ä½¿ç”¨kubeadmå¼•å¯¼é›†ç¾¤"><a href="#2ã€ä½¿ç”¨kubeadmå¼•å¯¼é›†ç¾¤" class="headerlink" title="2ã€ä½¿ç”¨kubeadmå¼•å¯¼é›†ç¾¤"></a>2ã€ä½¿ç”¨kubeadmå¼•å¯¼é›†ç¾¤</h3><h4 id="1ã€ä¸‹è½½å„ä¸ªæœºå™¨éœ€è¦çš„é•œåƒ"><a href="#1ã€ä¸‹è½½å„ä¸ªæœºå™¨éœ€è¦çš„é•œåƒ" class="headerlink" title="1ã€ä¸‹è½½å„ä¸ªæœºå™¨éœ€è¦çš„é•œåƒ"></a>1ã€ä¸‹è½½å„ä¸ªæœºå™¨éœ€è¦çš„é•œåƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">tee</span> ./images.sh &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">images=(</span><br><span class="line">kube-apiserver:v1.20.9</span><br><span class="line">kube-proxy:v1.20.9</span><br><span class="line">kube-controller-manager:v1.20.9</span><br><span class="line">kube-scheduler:v1.20.9</span><br><span class="line">coredns:1.7.0</span><br><span class="line">etcd:3.4.13-0</span><br><span class="line">pause:3.2</span><br><span class="line">)</span><br><span class="line"><span class="keyword">for</span> imageName <span class="keyword">in</span> <span class="variable">$&#123;images[@]&#125;</span> ; <span class="keyword">do</span></span><br><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images/<span class="variable">$imageName</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">EOF</span><br><span class="line">   </span><br><span class="line"><span class="built_in">chmod</span> +x ./images.sh &amp;&amp; ./images.sh</span><br></pre></td></tr></table></figure><h4 id="2ã€åˆå§‹åŒ–ä¸»èŠ‚ç‚¹"><a href="#2ã€åˆå§‹åŒ–ä¸»èŠ‚ç‚¹" class="headerlink" title="2ã€åˆå§‹åŒ–ä¸»èŠ‚ç‚¹"></a>2ã€åˆå§‹åŒ–ä¸»èŠ‚ç‚¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰€æœ‰æœºå™¨æ·»åŠ masteråŸŸåæ˜ å°„ï¼Œä»¥ä¸‹éœ€è¦ä¿®æ”¹ä¸ºè‡ªå·±çš„</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;172.31.0.7  cluster-endpoint&quot;</span> &gt;&gt; /etc/hosts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸»èŠ‚ç‚¹åˆå§‹åŒ–</span></span><br><span class="line">kubeadm init \</span><br><span class="line">--apiserver-advertise-address=172.31.0.3 \</span><br><span class="line">--control-plane-endpoint=cluster-endpoint \</span><br><span class="line">--image-repository registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images \ <span class="comment"># é…ç½®é˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿ</span></span><br><span class="line">--kubernetes-version v1.20.9 \    <span class="comment"># kubernetesçš„ç‰ˆæœ¬</span></span><br><span class="line">--service-cidr=10.96.0.0/16 \     <span class="comment"># ç»™serviceæä¾›ä¸€ä¸ªç½‘å€</span></span><br><span class="line">--pod-network-cidr=192.168.0.0/16 <span class="comment"># ç»™podæä¾›ä¸€ä¸ªç½‘å€</span></span><br><span class="line"></span><br><span class="line">kubeadm init \</span><br><span class="line">--apiserver-advertise-address=172.31.0.3 \</span><br><span class="line">--control-plane-endpoint=cluster-endpoint \</span><br><span class="line">--image-repository registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images \</span><br><span class="line">--kubernetes-version v1.20.9 \</span><br><span class="line">--service-cidr=10.96.0.0/16 \</span><br><span class="line">--pod-network-cidr=192.168.0.0/16</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰€æœ‰ç½‘ç»œèŒƒå›´ä¸é‡å </span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Your Kubernetes control-plane has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  sudo <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">Alternatively, <span class="keyword">if</span> you are the root user, you can run:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run <span class="string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line"></span><br><span class="line">You can now <span class="built_in">join</span> any number of control-plane nodes by copying certificate authorities</span><br><span class="line">and service account keys on each node and <span class="keyword">then</span> running the following as root:</span><br><span class="line"></span><br><span class="line">  kubeadm <span class="built_in">join</span> cluster-endpoint:6443 --token t71ijf.1dovemcs27kj6z7q \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:f38c8bd241f0551c322bd6060b9cb4a17a5a547b9d98a907626bc257383f508f \</span><br><span class="line">    --control-plane </span><br><span class="line"></span><br><span class="line">Then you can <span class="built_in">join</span> any number of worker nodes by running the following on each as root:</span><br><span class="line"></span><br><span class="line">kubeadm <span class="built_in">join</span> cluster-endpoint:6443 --token t71ijf.1dovemcs27kj6z7q \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:f38c8bd241f0551c322bd6060b9cb4a17a5a547b9d98a907626bc257383f508f </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">kubectl get nodes</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œç»™é›†ç¾¤åˆ›å»ºèµ„æº</span></span><br><span class="line">kubectl apply -f xxxx.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹é›†ç¾¤éƒ¨ç½²äº†å“ªäº›åº”ç”¨ï¼Ÿ</span></span><br><span class="line">docker ps   ===   kubectl get pods -A</span><br><span class="line"><span class="comment"># è¿è¡Œä¸­çš„åº”ç”¨åœ¨dockeré‡Œé¢å«å®¹å™¨ï¼Œåœ¨k8sé‡Œé¢å«Pod</span></span><br><span class="line">kubectl get pods -A</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥podä¸­</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it podåå­— -- /bin/bash</span><br></pre></td></tr></table></figure><h3 id="3ã€æ ¹æ®æç¤ºç»§ç»­"><a href="#3ã€æ ¹æ®æç¤ºç»§ç»­" class="headerlink" title="3ã€æ ¹æ®æç¤ºç»§ç»­"></a>3ã€æ ¹æ®æç¤ºç»§ç»­</h3><p>masteræˆåŠŸåæç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172314663.png" alt="img"></p><h4 id="1ã€è®¾ç½®-kube-config"><a href="#1ã€è®¾ç½®-kube-config" class="headerlink" title="1ã€è®¾ç½®.kube&#x2F;config"></a>1ã€è®¾ç½®.kube&#x2F;config</h4><p>å¤åˆ¶ä¸Šé¢å‘½ä»¤</p><h4 id="2ã€å®‰è£…ç½‘ç»œç»„ä»¶"><a href="#2ã€å®‰è£…ç½‘ç»œç»„ä»¶" class="headerlink" title="2ã€å®‰è£…ç½‘ç»œç»„ä»¶"></a>2ã€å®‰è£…ç½‘ç»œç»„ä»¶</h4><p><a href="https://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises#install-calico-with-kubernetes-api-datastore-more-than-50-nodes">calicoå®˜ç½‘</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://docs.projectcalico.org/manifests/calico.yaml -O</span><br><span class="line"></span><br><span class="line">kubectl apply -f calico.yaml</span><br></pre></td></tr></table></figure><h3 id="4ã€åŠ å…¥nodeèŠ‚ç‚¹"><a href="#4ã€åŠ å…¥nodeèŠ‚ç‚¹" class="headerlink" title="4ã€åŠ å…¥nodeèŠ‚ç‚¹"></a>4ã€åŠ å…¥nodeèŠ‚ç‚¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸ªæ˜¯è‡ªå·±ä¸»èŠ‚ç‚¹ç”Ÿæˆçš„ä»¤ç‰Œ</span></span><br><span class="line"></span><br><span class="line">kubeadm <span class="built_in">join</span> cluster-endpoint:6443 --token x5g4uy.wpjjdbgra92s25pp \</span><br><span class="line">--discovery-token-ca-cert-hash sha256:6255797916eaee52bf9dda9429db616fcd828436708345a308f4b917d3457a22</span><br><span class="line"></span><br><span class="line">kubeadm <span class="built_in">join</span> cluster-endpoint:6443 --token 7iddx8.3lm5h19gt0pavf50 \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:38e403fc9a2f7554db2fc09c4304e08960a22391277962b511bc04fcbc02e396 </span><br></pre></td></tr></table></figure><p>æ–°ä»¤ç‰Œ</p><p>kubeadm token create â€“print-join-command</p><p>*<strong>é«˜å¯ç”¨éƒ¨ç½²æ–¹å¼ï¼Œä¹Ÿæ˜¯åœ¨è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œä½¿ç”¨æ·»åŠ ä¸»èŠ‚ç‚¹çš„å‘½ä»¤å³å¯*</strong></p><h3 id="5ã€éªŒè¯é›†ç¾¤"><a href="#5ã€éªŒè¯é›†ç¾¤" class="headerlink" title="5ã€éªŒè¯é›†ç¾¤"></a>5ã€éªŒè¯é›†ç¾¤</h3><ul><li><p>éªŒè¯é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€</p></li><li><ul><li>kubectl get nodes</li></ul></li></ul><h3 id="6ã€éƒ¨ç½²dashboard"><a href="#6ã€éƒ¨ç½²dashboard" class="headerlink" title="6ã€éƒ¨ç½²dashboard"></a>6ã€éƒ¨ç½²dashboard</h3><h4 id="1ã€éƒ¨ç½²"><a href="#1ã€éƒ¨ç½²" class="headerlink" title="1ã€éƒ¨ç½²"></a>1ã€éƒ¨ç½²</h4><p>kuberneteså®˜æ–¹æä¾›çš„å¯è§†åŒ–ç•Œé¢</p><p><a href="https://github.com/kubernetes/dashboard">https://github.com/kubernetes/dashboard</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.3.1/aio/deploy/recommended.yaml</span><br></pre></td></tr></table></figure><p><strong>yamlçš„å†…å®¹ï¼Œä¸ºäº†é˜²æ­¢ä¸‹è½½ä¸ä¸‹æ¥ï¼Œå¯ä»¥è‡ªè¡Œå¤åˆ¶ç„¶åè¿è¡Œ</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright 2017 The Kubernetes Authors.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"># you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"># You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8443</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard-csrf</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">csrf:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard-key-holder</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard-settings</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="comment"># Allow Dashboard to get, update and delete Dashboard exclusive secrets.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    <span class="attr">resources:</span> [<span class="string">&quot;secrets&quot;</span>]</span><br><span class="line">    <span class="attr">resourceNames:</span> [<span class="string">&quot;kubernetes-dashboard-key-holder&quot;</span>, <span class="string">&quot;kubernetes-dashboard-certs&quot;</span>, <span class="string">&quot;kubernetes-dashboard-csrf&quot;</span>]</span><br><span class="line">    <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;update&quot;</span>, <span class="string">&quot;delete&quot;</span>]</span><br><span class="line">    <span class="comment"># Allow Dashboard to get and update &#x27;kubernetes-dashboard-settings&#x27; config map.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    <span class="attr">resources:</span> [<span class="string">&quot;configmaps&quot;</span>]</span><br><span class="line">    <span class="attr">resourceNames:</span> [<span class="string">&quot;kubernetes-dashboard-settings&quot;</span>]</span><br><span class="line">    <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;update&quot;</span>]</span><br><span class="line">    <span class="comment"># Allow Dashboard to get metrics.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    <span class="attr">resources:</span> [<span class="string">&quot;services&quot;</span>]</span><br><span class="line">    <span class="attr">resourceNames:</span> [<span class="string">&quot;heapster&quot;</span>, <span class="string">&quot;dashboard-metrics-scraper&quot;</span>]</span><br><span class="line">    <span class="attr">verbs:</span> [<span class="string">&quot;proxy&quot;</span>]</span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    <span class="attr">resources:</span> [<span class="string">&quot;services/proxy&quot;</span>]</span><br><span class="line">    <span class="attr">resourceNames:</span> [<span class="string">&quot;heapster&quot;</span>, <span class="string">&quot;http:heapster:&quot;</span>, <span class="string">&quot;https:heapster:&quot;</span>, <span class="string">&quot;dashboard-metrics-scraper&quot;</span>, <span class="string">&quot;http:dashboard-metrics-scraper&quot;</span>]</span><br><span class="line">    <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="comment"># Allow Metrics Scraper to get metrics from the Metrics server</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;metrics.k8s.io&quot;</span>]</span><br><span class="line">    <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>, <span class="string">&quot;nodes&quot;</span>]</span><br><span class="line">    <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">kubernetesui/dashboard:v2.3.1</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8443</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">          <span class="attr">args:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--auto-generate-certificates</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--namespace=kubernetes-dashboard</span></span><br><span class="line">            <span class="comment"># Uncomment the following line to manually specify Kubernetes API server Host</span></span><br><span class="line">            <span class="comment"># If not specified, Dashboard will attempt to auto discover the API server and connect</span></span><br><span class="line">            <span class="comment"># to it. Uncomment only if the default does not work.</span></span><br><span class="line">            <span class="comment"># - --apiserver-host=http://my-address:port</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/certs</span></span><br><span class="line">              <span class="comment"># Create on-disk volume to store exec logs</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/tmp</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">tmp-volume</span></span><br><span class="line">          <span class="attr">livenessProbe:</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">scheme:</span> <span class="string">HTTPS</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">8443</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">            <span class="attr">timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">runAsUser:</span> <span class="number">1001</span></span><br><span class="line">            <span class="attr">runAsGroup:</span> <span class="number">2001</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line">          <span class="attr">secret:</span></span><br><span class="line">            <span class="attr">secretName:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tmp-volume</span></span><br><span class="line">          <span class="attr">emptyDir:</span> &#123;&#125;</span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">      <span class="attr">nodeSelector:</span></span><br><span class="line">        <span class="attr">&quot;kubernetes.io/os&quot;:</span> <span class="string">linux</span></span><br><span class="line">      <span class="comment"># Comment the following tolerations if Dashboard must not be deployed on master</span></span><br><span class="line">      <span class="attr">tolerations:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">node-role.kubernetes.io/master</span></span><br><span class="line">          <span class="attr">effect:</span> <span class="string">NoSchedule</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8000</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8000</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">      <span class="attr">annotations:</span></span><br><span class="line">        <span class="attr">seccomp.security.alpha.kubernetes.io/pod:</span> <span class="string">&#x27;runtime/default&#x27;</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">kubernetesui/metrics-scraper:v1.0.6</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8000</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">          <span class="attr">livenessProbe:</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">8000</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">            <span class="attr">timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/tmp</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">tmp-volume</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">runAsUser:</span> <span class="number">1001</span></span><br><span class="line">            <span class="attr">runAsGroup:</span> <span class="number">2001</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">      <span class="attr">nodeSelector:</span></span><br><span class="line">        <span class="attr">&quot;kubernetes.io/os&quot;:</span> <span class="string">linux</span></span><br><span class="line">      <span class="comment"># Comment the following tolerations if Dashboard must not be deployed on master</span></span><br><span class="line">      <span class="attr">tolerations:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">node-role.kubernetes.io/master</span></span><br><span class="line">          <span class="attr">effect:</span> <span class="string">NoSchedule</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tmp-volume</span></span><br><span class="line">          <span class="attr">emptyDir:</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="2ã€è®¾ç½®è®¿é—®ç«¯å£"><a href="#2ã€è®¾ç½®è®¿é—®ç«¯å£" class="headerlink" title="2ã€è®¾ç½®è®¿é—®ç«¯å£"></a>2ã€è®¾ç½®è®¿é—®ç«¯å£</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl edit svc kubernetes-dashboard -n kubernetes-dashboard</span><br></pre></td></tr></table></figure><p>type: ClusterIP æ”¹ä¸º type: NodePort</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get svc -A |grep kubernetes-dashboard</span><br><span class="line"><span class="comment">## æ‰¾åˆ°ç«¯å£ï¼Œåœ¨å®‰å…¨ç»„æ”¾è¡Œ</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š https:&#x2F;&#x2F;é›†ç¾¤ä»»æ„IP:ç«¯å£      <a href="https://139.198.165.238:32759/">https://139.198.165.238:32759</a></p><h4 id="3ã€åˆ›å»ºè®¿é—®è´¦å·"><a href="#3ã€åˆ›å»ºè®¿é—®è´¦å·" class="headerlink" title="3ã€åˆ›å»ºè®¿é—®è´¦å·"></a>3ã€åˆ›å»ºè®¿é—®è´¦å·</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºè®¿é—®è´¦å·ï¼Œå‡†å¤‡ä¸€ä¸ªyamlæ–‡ä»¶ï¼› vi dash.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">admin-user</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">admin-user</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cluster-admin</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">admin-user</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="string">kubectl</span> <span class="string">apply</span> <span class="string">-f</span> <span class="string">dash.yaml</span></span><br></pre></td></tr></table></figure><h4 id="4ã€ä»¤ç‰Œè®¿é—®"><a href="#4ã€ä»¤ç‰Œè®¿é—®" class="headerlink" title="4ã€ä»¤ç‰Œè®¿é—®"></a>4ã€ä»¤ç‰Œè®¿é—®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è·å–è®¿é—®ä»¤ç‰Œ</span></span><br><span class="line">kubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/admin-user -o jsonpath=<span class="string">&quot;&#123;.secrets[0].name&#125;&quot;</span>) -o go-template=<span class="string">&quot;&#123;&#123;.data.token | base64decode&#125;&#125;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJSUzI1NiIsImtpZCI6InpXSkU0TjhCUmVKQzBJaC03Nk9ES2NMZ1daRTRmQ1FMZU9rRUJ3VXRnM3MifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLXgyczhmIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIzOTZmYjdlNS0wMjA2LTQxMjctOGQzYS0xMzRlODVmYjU0MDAiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.Hf5mhl35_R0iBfBW7fF198h_klEnN6pRKfk_roAzOtAN-Aq21E4804PUhe9Rr9e_uFzLfoFDXacjJrHCuhiML8lpHIfJLK_vSD2pZNaYc2NWZq2Mso-BMGpObxGA23hW0nLQ5gCxlnxIAcyE76aYTAB6U8PxpvtVdgUknBVrwXG8UC_D8kHm9PTwa9jgbZfSYAfhOHWmZxNYo7CF2sHH-AT_WmIE8xLmB7J11vDzaunv92xoUoI0ju7OBA2WRr61bOmSd8WJgLCDcyBblxz4Wa<span class="number">-3</span>zghfKlp0Rgb8l56AAI7ML_snF59X6JqaCuAcCJjIu0FUTS5DuyIObEeXY-z-Rw</span><br></pre></td></tr></table></figure><h4 id="5ã€ç•Œé¢"><a href="#5ã€ç•Œé¢" class="headerlink" title="5ã€ç•Œé¢"></a>5ã€ç•Œé¢</h4><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172314578.png" alt="img"></p><p>å¯ä»¥é€šè¿‡dashboardæ¥è¿›è¡Œk8sçš„æ“ä½œ</p><h1 id="Kubernetesæ ¸å¿ƒå®æˆ˜"><a href="#Kubernetesæ ¸å¿ƒå®æˆ˜" class="headerlink" title="Kubernetesæ ¸å¿ƒå®æˆ˜"></a>Kubernetesæ ¸å¿ƒå®æˆ˜</h1><h2 id="1ã€èµ„æºåˆ›å»ºæ–¹å¼"><a href="#1ã€èµ„æºåˆ›å»ºæ–¹å¼" class="headerlink" title="1ã€èµ„æºåˆ›å»ºæ–¹å¼"></a>1ã€èµ„æºåˆ›å»ºæ–¹å¼</h2><ul><li>å‘½ä»¤è¡Œ</li><li>YAML</li></ul><h2 id="2ã€Namespace"><a href="#2ã€Namespace" class="headerlink" title="2ã€Namespace"></a>2ã€Namespace</h2><p>åç§°ç©ºé—´ç”¨æ¥éš”ç¦»èµ„æº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kubectl create ns hello</span><br><span class="line">kubectl delete ns hello</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Namespace</span><br><span class="line">metadata:</span><br><span class="line">  name: hello</span><br></pre></td></tr></table></figure><h2 id="3ã€Pod"><a href="#3ã€Pod" class="headerlink" title="3ã€Pod"></a>3ã€Pod</h2><p>è¿è¡Œä¸­çš„ä¸€ç»„å®¹å™¨ï¼ŒPodæ˜¯kubernetesä¸­åº”ç”¨çš„æœ€å°å•ä½.</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172314559.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">kubectl run mynginx --image=nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹defaultåç§°ç©ºé—´çš„Pod</span></span><br><span class="line">kubectl get pod </span><br><span class="line"><span class="comment"># æè¿°</span></span><br><span class="line">kubectl describe pod ä½ è‡ªå·±çš„Podåå­—</span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">kubectl delete pod Podåå­—</span><br><span class="line"><span class="comment"># æŸ¥çœ‹Podçš„è¿è¡Œæ—¥å¿—</span></span><br><span class="line">kubectl logs Podåå­—</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯ä¸ªPod - k8séƒ½ä¼šåˆ†é…ä¸€ä¸ªip</span></span><br><span class="line">kubectl get pod -owide</span><br><span class="line"><span class="comment"># ä½¿ç”¨Podçš„ip+podé‡Œé¢è¿è¡Œå®¹å™¨çš„ç«¯å£</span></span><br><span class="line">curl 192.168.169.136</span><br><span class="line"></span><br><span class="line"><span class="comment"># é›†ç¾¤ä¸­çš„ä»»æ„ä¸€ä¸ªæœºå™¨ä»¥åŠä»»æ„çš„åº”ç”¨éƒ½èƒ½é€šè¿‡Podåˆ†é…çš„ipæ¥è®¿é—®è¿™ä¸ªPod</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    run: mynginx</span><br><span class="line">  name: mynginx</span><br><span class="line"><span class="comment">#  namespace: default</span></span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - image: nginx</span><br><span class="line">    name: mynginx</span><br><span class="line">   </span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    run: myapp</span><br><span class="line">  name: myapp</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - image: nginx</span><br><span class="line">    name: nginx</span><br><span class="line">  - image: tomcat:8.5.68</span><br><span class="line">    name: tomcat</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315400.png" alt="img"></p><p>*<strong>æ­¤æ—¶çš„åº”ç”¨è¿˜ä¸èƒ½å¤–éƒ¨è®¿é—®*</strong></p><h2 id="4ã€Deployment"><a href="#4ã€Deployment" class="headerlink" title="4ã€Deployment"></a>4ã€Deployment</h2><p>æ§åˆ¶Podï¼Œä½¿Podæ‹¥æœ‰å¤šå‰¯æœ¬ï¼Œè‡ªæ„ˆï¼Œæ‰©ç¼©å®¹ç­‰èƒ½åŠ›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…é™¤æ‰€æœ‰Podï¼Œæ¯”è¾ƒä¸‹é¢ä¸¤ä¸ªå‘½ä»¤æœ‰ä½•ä¸åŒæ•ˆæœï¼Ÿ</span></span><br><span class="line">kubectl run mynginx --image=nginx</span><br><span class="line"></span><br><span class="line">kubectl create deployment mytomcat --image=tomcat:8.5.68</span><br><span class="line"><span class="comment"># è‡ªæ„ˆèƒ½åŠ›</span></span><br></pre></td></tr></table></figure><h3 id="1ã€å¤šå‰¯æœ¬"><a href="#1ã€å¤šå‰¯æœ¬" class="headerlink" title="1ã€å¤šå‰¯æœ¬"></a>1ã€å¤šå‰¯æœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">kubectl create deployment my-dep --image=nginx --replicas=3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    app: my-dep</span><br><span class="line">  name: my-dep</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: my-dep</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: my-dep</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - image: nginx</span><br><span class="line">        name: nginx</span><br></pre></td></tr></table></figure><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attribute">apiVersion</span><span class="punctuation">:</span> <span class="string">v1</span></span><br><span class="line"><span class="attribute">kind</span><span class="punctuation">:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attribute">metadata</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">labels</span><span class="punctuation">:</span></span><br><span class="line">    <span class="attribute">run</span><span class="punctuation">:</span> <span class="string">mynginx</span></span><br><span class="line">  <span class="attribute">name</span><span class="punctuation">:</span> <span class="string">mynginx</span></span><br><span class="line"><span class="comment">#  namespace: default</span></span><br><span class="line"><span class="attribute">spec</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">containers</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">image: nginx</span></span><br><span class="line">    <span class="attribute">name</span><span class="punctuation">:</span> <span class="string">mynginx</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æ‰©ç¼©å®¹"><a href="#2ã€æ‰©ç¼©å®¹" class="headerlink" title="2ã€æ‰©ç¼©å®¹"></a>2ã€æ‰©ç¼©å®¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl scale --replicas=5 deployment/my-dep</span><br><span class="line">kubectl edit deployment my-dep</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ replicas</span></span><br></pre></td></tr></table></figure><h3 id="3ã€è‡ªæ„ˆ-æ•…éšœè½¬ç§»"><a href="#3ã€è‡ªæ„ˆ-æ•…éšœè½¬ç§»" class="headerlink" title="3ã€è‡ªæ„ˆ&amp;æ•…éšœè½¬ç§»"></a>3ã€è‡ªæ„ˆ&amp;æ•…éšœè½¬ç§»</h3><ul><li><p>åœæœº</p></li><li><p>åˆ é™¤Pod</p></li><li><p>å®¹å™¨å´©æºƒ</p></li><li><p>â€¦.</p></li></ul><h3 id="4ã€æ»šåŠ¨æ›´æ–°"><a href="#4ã€æ»šåŠ¨æ›´æ–°" class="headerlink" title="4ã€æ»šåŠ¨æ›´æ–°"></a>4ã€æ»šåŠ¨æ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="built_in">set</span> image deployment/my-dep nginx=nginx:1.16.1 --record</span><br><span class="line">kubectl rollout status deployment/my-dep</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹ kubectl edit deployment/my-dep</span></span><br></pre></td></tr></table></figure><h3 id="5ã€ç‰ˆæœ¬å›é€€"><a href="#5ã€ç‰ˆæœ¬å›é€€" class="headerlink" title="5ã€ç‰ˆæœ¬å›é€€"></a>5ã€ç‰ˆæœ¬å›é€€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å†å²è®°å½•</span></span><br><span class="line">kubectl rollout <span class="built_in">history</span> deployment/my-dep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æŸä¸ªå†å²è¯¦æƒ…</span></span><br><span class="line">kubectl rollout <span class="built_in">history</span> deployment/my-dep --revision=2</span><br><span class="line"></span><br><span class="line"><span class="comment">#å›æ»š(å›åˆ°ä¸Šæ¬¡)</span></span><br><span class="line">kubectl rollout undo deployment/my-dep</span><br><span class="line"></span><br><span class="line"><span class="comment">#å›æ»š(å›åˆ°æŒ‡å®šç‰ˆæœ¬)</span></span><br><span class="line">kubectl rollout undo deployment/my-dep --to-revision=2</span><br></pre></td></tr></table></figure><p>æ›´å¤šï¼š</p><p>é™¤äº†Deploymentï¼Œk8sè¿˜æœ‰ <code>StatefulSet</code> ã€<code>DaemonSet</code> ã€<code>Job</code>  ç­‰ ç±»å‹èµ„æºã€‚æˆ‘ä»¬éƒ½ç§°ä¸º <code>å·¥ä½œè´Ÿè½½</code>ã€‚</p><p>æœ‰çŠ¶æ€åº”ç”¨ä½¿ç”¨  <code>StatefulSet</code>  éƒ¨ç½²ï¼Œæ— çŠ¶æ€åº”ç”¨ä½¿ç”¨ <code>Deployment</code> éƒ¨ç½²</p><p><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/">https://kubernetes.io/zh/docs/concepts/workloads/controllers/</a></p><h2 id="5ã€Service"><a href="#5ã€Service" class="headerlink" title="5ã€Service"></a>5ã€Service</h2><p>å°†ä¸€ç»„ <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">Pods</a> å…¬å¼€ä¸ºç½‘ç»œæœåŠ¡çš„æŠ½è±¡æ–¹æ³•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æš´éœ²Deploy</span></span><br><span class="line">kubectl expose deployment my-dep --port=8000 --target-port=80</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨æ ‡ç­¾æ£€ç´¢Pod</span></span><br><span class="line">kubectl get pod -l app=my-dep</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    app: my-dep</span><br><span class="line">  name: my-dep</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    app: my-dep</span><br><span class="line">  ports:</span><br><span class="line">  - port: 8000</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 80</span><br></pre></td></tr></table></figure><h3 id="1ã€ClusterIP"><a href="#1ã€ClusterIP" class="headerlink" title="1ã€ClusterIP"></a>1ã€ClusterIP</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç­‰åŒäºæ²¡æœ‰--typeçš„  åœ¨å†…ç½‘ä¸­å¯ä»¥è®¿é—®ï¼Œå¤–ç½‘ä¸èƒ½è®¿é—®</span></span><br><span class="line">kubectl expose deployment my-dep --port=8000 --target-port=80 --<span class="built_in">type</span>=ClusterIP</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    app: my-dep</span><br><span class="line">  name: my-dep</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">  - port: 8000</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 80</span><br><span class="line">  selector:</span><br><span class="line">    app: my-dep</span><br><span class="line">  <span class="built_in">type</span>: ClusterIP</span><br></pre></td></tr></table></figure><h3 id="2ã€NodePort"><a href="#2ã€NodePort" class="headerlink" title="2ã€NodePort"></a>2ã€NodePort</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å¤–ç½‘å¯ä»¥è®¿é—®</span></span><br><span class="line">kubectl expose deployment my-dep --port=8000 --target-port=80 --<span class="built_in">type</span>=NodePort</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    app: my-dep</span><br><span class="line">  name: my-dep</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">  - port: 8000</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 80</span><br><span class="line">  selector:</span><br><span class="line">    app: my-dep</span><br><span class="line">  <span class="built_in">type</span>: NodePort</span><br></pre></td></tr></table></figure><p>NodePortèŒƒå›´åœ¨ 30000-32767 ä¹‹é—´</p><h2 id="6ã€Ingress"><a href="#6ã€Ingress" class="headerlink" title="6ã€Ingress"></a>6ã€Ingress</h2><h3 id="1ã€å®‰è£…"><a href="#1ã€å®‰è£…" class="headerlink" title="1ã€å®‰è£…"></a>1ã€å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.47.0/deploy/static/provider/baremetal/deploy.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹é•œåƒ</span></span><br><span class="line">vi deploy.yaml</span><br><span class="line"><span class="comment">#å°†imageçš„å€¼æ”¹ä¸ºå¦‚ä¸‹å€¼ï¼š</span></span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images/ingress-nginx-controller:v0.46.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å®‰è£…çš„ç»“æœ</span></span><br><span class="line">kubectl get pod,svc -n ingress-nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€ååˆ«å¿˜è®°æŠŠsvcæš´éœ²çš„ç«¯å£è¦æ”¾è¡Œ</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172315406.png" alt="img"></p><p>å¦‚æœä¸‹è½½ä¸åˆ°ï¼Œç”¨ä»¥ä¸‹æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-serviceaccount.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">automountServiceAccountToken:</span> <span class="literal">true</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-configmap.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/clusterrole.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">configmaps</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">endpoints</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nodes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">pods</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nodes</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">services</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">extensions</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">networking.k8s.io</span>   <span class="comment"># k8s 1.14+</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">events</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">extensions</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">networking.k8s.io</span>   <span class="comment"># k8s 1.14+</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingresses/status</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">networking.k8s.io</span>   <span class="comment"># k8s 1.14+</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingressclasses</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/clusterrolebinding.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-role.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">namespaces</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">configmaps</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">pods</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">endpoints</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">services</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">extensions</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">networking.k8s.io</span>   <span class="comment"># k8s 1.14+</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">extensions</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">networking.k8s.io</span>   <span class="comment"># k8s 1.14+</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingresses/status</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">networking.k8s.io</span>   <span class="comment"># k8s 1.14+</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingressclasses</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">configmaps</span></span><br><span class="line">    <span class="attr">resourceNames:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ingress-controller-leader-nginx</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">configmaps</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">events</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-rolebinding.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-service-webhook.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">https-webhook</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="string">webhook</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-service.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="string">http</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="string">https</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/controller-deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">minReadySeconds:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">dnsPolicy:</span> <span class="string">ClusterFirst</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">controller</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images/ingress-nginx-controller:v0.46.0</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">lifecycle:</span></span><br><span class="line">            <span class="attr">preStop:</span></span><br><span class="line">              <span class="attr">exec:</span></span><br><span class="line">                <span class="attr">command:</span></span><br><span class="line">                  <span class="bullet">-</span> <span class="string">/wait-shutdown</span></span><br><span class="line">          <span class="attr">args:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/nginx-ingress-controller</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--election-id=ingress-controller-leader</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--ingress-class=nginx</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--configmap=$(POD_NAMESPACE)/ingress-nginx-controller</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--validating-webhook=:8443</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--validating-webhook-certificate=/usr/local/certificates/cert</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--validating-webhook-key=/usr/local/certificates/key</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">capabilities:</span></span><br><span class="line">              <span class="attr">drop:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">              <span class="attr">add:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">NET_BIND_SERVICE</span></span><br><span class="line">            <span class="attr">runAsUser:</span> <span class="number">101</span></span><br><span class="line">            <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAME</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">metadata.name</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">LD_PRELOAD</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/usr/local/lib/libmimalloc.so</span></span><br><span class="line">          <span class="attr">livenessProbe:</span></span><br><span class="line">            <span class="attr">failureThreshold:</span> <span class="number">5</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/healthz</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">10254</span></span><br><span class="line">              <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">            <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">readinessProbe:</span></span><br><span class="line">            <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/healthz</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">10254</span></span><br><span class="line">              <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">            <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">443</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">webhook</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">8443</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">webhook-cert</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/usr/local/certificates/</span></span><br><span class="line">              <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">resources:</span></span><br><span class="line">            <span class="attr">requests:</span></span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">100m</span></span><br><span class="line">              <span class="attr">memory:</span> <span class="string">90Mi</span></span><br><span class="line">      <span class="attr">nodeSelector:</span></span><br><span class="line">        <span class="attr">kubernetes.io/os:</span> <span class="string">linux</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">ingress-nginx</span></span><br><span class="line">      <span class="attr">terminationGracePeriodSeconds:</span> <span class="number">300</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">webhook-cert</span></span><br><span class="line">          <span class="attr">secret:</span></span><br><span class="line">            <span class="attr">secretName:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/validating-webhook.yaml</span></span><br><span class="line"><span class="comment"># before changing this value, check the required kubernetes version</span></span><br><span class="line"><span class="comment"># https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#prerequisites</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">admissionregistration.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ValidatingWebhookConfiguration</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">webhooks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">validate.nginx.ingress.kubernetes.io</span></span><br><span class="line">    <span class="attr">matchPolicy:</span> <span class="string">Equivalent</span></span><br><span class="line">    <span class="attr">rules:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">        <span class="attr">apiVersions:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">v1beta1</span></span><br><span class="line">        <span class="attr">operations:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">CREATE</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">UPDATE</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">    <span class="attr">failurePolicy:</span> <span class="string">Fail</span></span><br><span class="line">    <span class="attr">sideEffects:</span> <span class="string">None</span></span><br><span class="line">    <span class="attr">admissionReviewVersions:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">v1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">v1beta1</span></span><br><span class="line">    <span class="attr">clientConfig:</span></span><br><span class="line">      <span class="attr">service:</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">ingress-nginx-controller-admission</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/networking/v1beta1/ingresses</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/serviceaccount.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">pre-install,pre-upgrade,post-install,post-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/clusterrole.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">pre-install,pre-upgrade,post-install,post-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">admissionregistration.k8s.io</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">validatingwebhookconfigurations</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/clusterrolebinding.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">pre-install,pre-upgrade,post-install,post-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/role.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">pre-install,pre-upgrade,post-install,post-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">    <span class="attr">verbs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/rolebinding.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">pre-install,pre-upgrade,post-install,post-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/job-createSecret.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Job</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission-create</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">pre-install,pre-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">ingress-nginx-admission-create</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">docker.io/jettech/kube-webhook-certgen:v1.5.1</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">args:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--host=ingress-nginx-controller-admission,ingress-nginx-controller-admission.$(POD_NAMESPACE).svc</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--namespace=$(POD_NAMESPACE)</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--secret-name=ingress-nginx-admission</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">OnFailure</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">      <span class="attr">securityContext:</span></span><br><span class="line">        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">runAsUser:</span> <span class="number">2000</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: ingress-nginx/templates/admission-webhooks/job-patch/job-patchWebhook.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Job</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission-patch</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">helm.sh/hook:</span> <span class="string">post-install,post-upgrade</span></span><br><span class="line">    <span class="attr">helm.sh/hook-delete-policy:</span> <span class="string">before-hook-creation,hook-succeeded</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">ingress-nginx-admission-patch</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">helm.sh/chart:</span> <span class="string">ingress-nginx-3.33.0</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/version:</span> <span class="number">0.47</span><span class="number">.0</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">patch</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">docker.io/jettech/kube-webhook-certgen:v1.5.1</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">args:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--webhook-name=ingress-nginx-admission</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--namespace=$(POD_NAMESPACE)</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--patch-mutating=false</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--secret-name=ingress-nginx-admission</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">--patch-failure-policy=Fail</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">OnFailure</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">      <span class="attr">securityContext:</span></span><br><span class="line">        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">runAsUser:</span> <span class="number">2000</span></span><br></pre></td></tr></table></figure><h3 id="2ã€ä½¿ç”¨"><a href="#2ã€ä½¿ç”¨" class="headerlink" title="2ã€ä½¿ç”¨"></a>2ã€ä½¿ç”¨</h3><p>å®˜ç½‘åœ°å€ï¼š<a href="https://kubernetes.github.io/ingress-nginx/">https://kubernetes.github.io/ingress-nginx/</a></p><p>å°±æ˜¯nginxåšçš„</p><p><a href="https://139.198.163.211:32401/">https://139.198.163.211:32401/</a></p><p><a href="https://139.198.163.211:32401/">http://139.198.163.211:31405/</a></p><h4 id="æµ‹è¯•ç¯å¢ƒ"><a href="#æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æµ‹è¯•ç¯å¢ƒ"></a>æµ‹è¯•ç¯å¢ƒ</h4><p>åº”ç”¨å¦‚ä¸‹yamlï¼Œå‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">hello-server</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">hello-server</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">hello-server</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hello-server</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">registry.cn-hangzhou.aliyuncs.com/lfy_k8s_images/hello-server</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">9000</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-demo</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-demo</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-demo</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-demo</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-demo</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-demo</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-demo</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8000</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">hello-server</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">hello-server</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">hello-server</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8000</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">9000</span></span><br></pre></td></tr></table></figure><h4 id="1ã€åŸŸåè®¿é—®"><a href="#1ã€åŸŸåè®¿é—®" class="headerlink" title="1ã€åŸŸåè®¿é—®"></a>1ã€åŸŸåè®¿é—®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span>  </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-host-bar</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ingressClassName:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">&quot;hello.atguigu.com&quot;</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">hello-server</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">&quot;demo.atguigu.com&quot;</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">&quot;/nginx&quot;</span>  <span class="comment"># æŠŠè¯·æ±‚ä¼šè½¬ç»™ä¸‹é¢çš„æœåŠ¡ï¼Œä¸‹é¢çš„æœåŠ¡ä¸€å®šè¦èƒ½å¤„ç†è¿™ä¸ªè·¯å¾„ï¼Œä¸èƒ½å¤„ç†å°±æ˜¯404</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">nginx-demo</span>  <span class="comment">## javaï¼Œæ¯”å¦‚ä½¿ç”¨è·¯å¾„é‡å†™ï¼Œå»æ‰å‰ç¼€nginx</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8000</span></span><br></pre></td></tr></table></figure><p>é—®é¢˜ï¼š path: â€œ&#x2F;nginxâ€ ä¸  path: â€œ&#x2F;â€œ ä¸ºä»€ä¹ˆä¼šæœ‰ä¸åŒçš„æ•ˆæœï¼Ÿ</p><h4 id="2ã€è·¯å¾„é‡å†™"><a href="#2ã€è·¯å¾„é‡å†™" class="headerlink" title="2ã€è·¯å¾„é‡å†™"></a>2ã€è·¯å¾„é‡å†™</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span>  </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/rewrite-target:</span> <span class="string">/$2</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-host-bar</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ingressClassName:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">&quot;hello.atguigu.com&quot;</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">hello-server</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">&quot;demo.atguigu.com&quot;</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">&quot;/nginx(/|$)(.*)&quot;</span>  <span class="comment"># æŠŠè¯·æ±‚ä¼šè½¬ç»™ä¸‹é¢çš„æœåŠ¡ï¼Œä¸‹é¢çš„æœåŠ¡ä¸€å®šè¦èƒ½å¤„ç†è¿™ä¸ªè·¯å¾„ï¼Œä¸èƒ½å¤„ç†å°±æ˜¯404</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">nginx-demo</span>  <span class="comment">## javaï¼Œæ¯”å¦‚ä½¿ç”¨è·¯å¾„é‡å†™ï¼Œå»æ‰å‰ç¼€nginx</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8000</span></span><br></pre></td></tr></table></figure><h4 id="3ã€æµé‡é™åˆ¶"><a href="#3ã€æµé‡é™åˆ¶" class="headerlink" title="3ã€æµé‡é™åˆ¶"></a>3ã€æµé‡é™åˆ¶</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-limit-rate</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/limit-rps:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ingressClassName:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">&quot;haha.atguigu.com&quot;</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pathType:</span> <span class="string">Exact</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">nginx-demo</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8000</span></span><br></pre></td></tr></table></figure><h2 id="7ã€å­˜å‚¨æŠ½è±¡"><a href="#7ã€å­˜å‚¨æŠ½è±¡" class="headerlink" title="7ã€å­˜å‚¨æŠ½è±¡"></a>7ã€å­˜å‚¨æŠ½è±¡</h2><h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><h4 id="1ã€æ‰€æœ‰èŠ‚ç‚¹"><a href="#1ã€æ‰€æœ‰èŠ‚ç‚¹" class="headerlink" title="1ã€æ‰€æœ‰èŠ‚ç‚¹"></a>1ã€æ‰€æœ‰èŠ‚ç‚¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰€æœ‰æœºå™¨å®‰è£…</span></span><br><span class="line">yum install -y nfs-utils</span><br></pre></td></tr></table></figure><h4 id="2ã€ä¸»èŠ‚ç‚¹"><a href="#2ã€ä¸»èŠ‚ç‚¹" class="headerlink" title="2ã€ä¸»èŠ‚ç‚¹"></a>2ã€ä¸»èŠ‚ç‚¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#nfsä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/nfs/data/ *(insecure,rw,sync,no_root_squash)&quot;</span> &gt; /etc/exports</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p /nfs/data</span><br><span class="line">systemctl <span class="built_in">enable</span> rpcbind --now</span><br><span class="line">systemctl <span class="built_in">enable</span> nfs-server --now</span><br><span class="line"><span class="comment">#é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">exportfs -r</span><br></pre></td></tr></table></figure><h4 id="3ã€ä»èŠ‚ç‚¹"><a href="#3ã€ä»èŠ‚ç‚¹" class="headerlink" title="3ã€ä»èŠ‚ç‚¹"></a>3ã€ä»èŠ‚ç‚¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 172.31.0.4</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŒ‚è½½ nfs æœåŠ¡å™¨ä¸Šçš„å…±äº«ç›®å½•åˆ°æœ¬æœºè·¯å¾„ /root/nfsmount</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /nfs/data</span><br><span class="line"></span><br><span class="line">mount -t nfs 172.31.0.4:/nfs/data /nfs/data</span><br><span class="line"><span class="comment"># å†™å…¥ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello nfs server&quot;</span> &gt; /nfs/data/test.txt</span><br></pre></td></tr></table></figure><h4 id="4ã€åŸç”Ÿæ–¹å¼æ•°æ®æŒ‚è½½"><a href="#4ã€åŸç”Ÿæ–¹å¼æ•°æ®æŒ‚è½½" class="headerlink" title="4ã€åŸç”Ÿæ–¹å¼æ•°æ®æŒ‚è½½"></a>4ã€åŸç”Ÿæ–¹å¼æ•°æ®æŒ‚è½½</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-pv-demo</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-pv-demo</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pv-demo</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pv-demo</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">html</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/usr/share/nginx/html</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">html</span></span><br><span class="line">          <span class="attr">nfs:</span></span><br><span class="line">            <span class="attr">server:</span> <span class="number">172.31</span><span class="number">.0</span><span class="number">.4</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/nfs/data/nginx-pv</span></span><br></pre></td></tr></table></figure><h3 id="1ã€PV-PVC"><a href="#1ã€PV-PVC" class="headerlink" title="1ã€PV&amp;PVC"></a>1ã€PV&amp;PVC</h3><p><em>PVï¼šæŒä¹…å·ï¼ˆPersistent Volumeï¼‰ï¼Œå°†åº”ç”¨éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ä¿å­˜åˆ°æŒ‡å®šä½ç½®</em></p><p><em>PVCï¼šæŒä¹…å·ç”³æ˜ï¼ˆ<strong>Persistent Volume Claim</strong>ï¼‰ï¼Œç”³æ˜éœ€è¦ä½¿ç”¨çš„æŒä¹…å·è§„æ ¼</em></p><h4 id="1ã€åˆ›å»ºpvæ± "><a href="#1ã€åˆ›å»ºpvæ± " class="headerlink" title="1ã€åˆ›å»ºpvæ± "></a>1ã€åˆ›å»ºpvæ± </h4><p>é™æ€ä¾›åº”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#nfsä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /nfs/data/01</span><br><span class="line"><span class="built_in">mkdir</span> -p /nfs/data/02</span><br><span class="line"><span class="built_in">mkdir</span> -p /nfs/data/03</span><br></pre></td></tr></table></figure><p>åˆ›å»ºPV</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pv01-10m</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">10M</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nfs</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/nfs/data/01</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">172.31</span><span class="number">.0</span><span class="number">.4</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pv02-1gi</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">1Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nfs</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/nfs/data/02</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">172.31</span><span class="number">.0</span><span class="number">.4</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pv03-3gi</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">3Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nfs</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/nfs/data/03</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">172.31</span><span class="number">.0</span><span class="number">.4</span></span><br></pre></td></tr></table></figure><h4 id="2ã€PVCåˆ›å»ºä¸ç»‘å®š"><a href="#2ã€PVCåˆ›å»ºä¸ç»‘å®š" class="headerlink" title="2ã€PVCåˆ›å»ºä¸ç»‘å®š"></a>2ã€PVCåˆ›å»ºä¸ç»‘å®š</h4><p>åˆ›å»ºPVC</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-pvc</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">200Mi</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nfs</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºPodç»‘å®šPVC</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-deploy-pvc</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-deploy-pvc</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-deploy-pvc</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-deploy-pvc</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">html</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/usr/share/nginx/html</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">html</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">nginx-pvc</span></span><br></pre></td></tr></table></figure><h3 id="2ã€ConfigMap"><a href="#2ã€ConfigMap" class="headerlink" title="2ã€ConfigMap"></a>2ã€ConfigMap</h3><p>æŠ½å–åº”ç”¨é…ç½®ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨æ›´æ–°</p><h4 id="1ã€redisç¤ºä¾‹"><a href="#1ã€redisç¤ºä¾‹" class="headerlink" title="1ã€redisç¤ºä¾‹"></a>1ã€redisç¤ºä¾‹</h4><h5 id="1ã€æŠŠä¹‹å‰çš„é…ç½®æ–‡ä»¶åˆ›å»ºä¸ºé…ç½®é›†"><a href="#1ã€æŠŠä¹‹å‰çš„é…ç½®æ–‡ä»¶åˆ›å»ºä¸ºé…ç½®é›†" class="headerlink" title="1ã€æŠŠä¹‹å‰çš„é…ç½®æ–‡ä»¶åˆ›å»ºä¸ºé…ç½®é›†"></a>1ã€æŠŠä¹‹å‰çš„é…ç½®æ–‡ä»¶åˆ›å»ºä¸ºé…ç½®é›†</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé…ç½®ï¼Œredisä¿å­˜åˆ°k8sçš„etcdï¼›</span></span><br><span class="line">kubectl create cm redis-conf --from-file=redis.conf</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">data:</span>    <span class="comment">#dataæ˜¯æ‰€æœ‰çœŸæ­£çš„æ•°æ®ï¼Œkeyï¼šé»˜è®¤æ˜¯æ–‡ä»¶å   valueï¼šé…ç½®æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">  <span class="attr">redis.conf:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    appendonly yes</span></span><br><span class="line"><span class="string"></span><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">redis-conf</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br></pre></td></tr></table></figure><h5 id="2ã€åˆ›å»ºPod"><a href="#2ã€åˆ›å»ºPod" class="headerlink" title="2ã€åˆ›å»ºPod"></a>2ã€åˆ›å»ºPod</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis-server</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/redis-master/redis.conf&quot;</span>  <span class="comment">#æŒ‡çš„æ˜¯rediså®¹å™¨å†…éƒ¨çš„ä½ç½®</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/data</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/redis-master</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">      <span class="attr">emptyDir:</span> &#123;&#125;</span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">      <span class="attr">configMap:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">redis-conf</span></span><br><span class="line">        <span class="attr">items:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">redis.conf</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">redis.conf</span></span><br></pre></td></tr></table></figure><h5 id="3ã€æ£€æŸ¥é»˜è®¤é…ç½®"><a href="#3ã€æ£€æŸ¥é»˜è®¤é…ç½®" class="headerlink" title="3ã€æ£€æŸ¥é»˜è®¤é…ç½®"></a>3ã€æ£€æŸ¥é»˜è®¤é…ç½®</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="built_in">exec</span> -it redis -- redis-cli</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; CONFIG GET appendonly</span><br><span class="line">127.0.0.1:6379&gt; CONFIG GET requirepass</span><br></pre></td></tr></table></figure><h5 id="4ã€ä¿®æ”¹ConfigMap"><a href="#4ã€ä¿®æ”¹ConfigMap" class="headerlink" title="4ã€ä¿®æ”¹ConfigMap"></a>4ã€ä¿®æ”¹ConfigMap</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">example-redis-config</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">redis-config:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    maxmemory 2mb</span></span><br><span class="line"><span class="string">    maxmemory-policy allkeys-lru </span></span><br></pre></td></tr></table></figure><h5 id="5ã€æ£€æŸ¥é…ç½®æ˜¯å¦æ›´æ–°"><a href="#5ã€æ£€æŸ¥é…ç½®æ˜¯å¦æ›´æ–°" class="headerlink" title="5ã€æ£€æŸ¥é…ç½®æ˜¯å¦æ›´æ–°"></a>5ã€æ£€æŸ¥é…ç½®æ˜¯å¦æ›´æ–°</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="built_in">exec</span> -it redis -- redis-cli</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; CONFIG GET maxmemory</span><br><span class="line">127.0.0.1:6379&gt; CONFIG GET maxmemory-policy</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æŒ‡å®šæ–‡ä»¶å†…å®¹æ˜¯å¦å·²ç»æ›´æ–°</p><p>ä¿®æ”¹äº†CMã€‚Podé‡Œé¢çš„é…ç½®æ–‡ä»¶ä¼šè·Ÿç€å˜</p><p>*<strong>é…ç½®å€¼æœªæ›´æ”¹ï¼Œå› ä¸ºéœ€è¦é‡æ–°å¯åŠ¨ Pod æ‰èƒ½ä»å…³è”çš„ ConfigMap ä¸­è·å–æ›´æ–°çš„å€¼ã€‚*</strong> </p><p>*<strong>åŸå› ï¼šæˆ‘ä»¬çš„Podéƒ¨ç½²çš„ä¸­é—´ä»¶è‡ªå·±æœ¬èº«æ²¡æœ‰çƒ­æ›´æ–°èƒ½åŠ›*</strong></p><h3 id="3ã€Secret"><a href="#3ã€Secret" class="headerlink" title="3ã€Secret"></a>3ã€Secret</h3><p>Secret å¯¹è±¡ç±»å‹ç”¨æ¥ä¿å­˜æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€OAuth ä»¤ç‰Œå’Œ SSH å¯†é’¥ã€‚ å°†è¿™äº›ä¿¡æ¯æ”¾åœ¨ secret ä¸­æ¯”æ”¾åœ¨ <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">Pod</a> çš„å®šä¹‰æˆ–è€… <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-image">å®¹å™¨é•œåƒ</a> ä¸­æ¥è¯´æ›´åŠ å®‰å…¨å’Œçµæ´»ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret docker-registry leifengyang-docker \</span><br><span class="line">--docker-username=leifengyang \</span><br><span class="line">--docker-password=Lfy123456 \</span><br><span class="line">--docker-email=534096094@qq.com</span><br><span class="line"></span><br><span class="line"><span class="comment">##å‘½ä»¤æ ¼å¼</span></span><br><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">  --docker-server=&lt;ä½ çš„é•œåƒä»“åº“æœåŠ¡å™¨&gt; \</span><br><span class="line">  --docker-username=&lt;ä½ çš„ç”¨æˆ·å&gt; \</span><br><span class="line">  --docker-password=&lt;ä½ çš„å¯†ç &gt; \</span><br><span class="line">  --docker-email=&lt;ä½ çš„é‚®ç®±åœ°å€&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: private-nginx</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: private-nginx</span><br><span class="line">    image: leifengyang/guignginx:v1.0</span><br><span class="line">  imagePullSecrets:</span><br><span class="line">  - name: leifengyang-docker</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerè¿›é˜¶</title>
      <link href="/2022/02/05/docker%E8%BF%9B%E9%98%B6/"/>
      <url>/2022/02/05/docker%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h3><hr><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>dockerfile build run æ‰‹åŠ¨æ“ä½œå•ä¸ªå®¹å™¨</p><p>Docker Compose ç”¨æ¥é«˜æ•ˆçš„ç®¡ç†å®¹å™¨ã€‚å®šä¹‰å¤šä¸ªå®¹å™¨çš„è¿è¡Œ</p><blockquote><p>å®˜æ–¹æ–‡æ¡£</p></blockquote><p>å®šä¹‰ã€è¿è¡Œå¤šä¸ªå®¹å™¨ã€‚</p><p>YAML file é…ç½®æ–‡ä»¶</p><p>single command ã€‚ å‘½ä»¤æœ‰å“ªäº›</p><p>Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your applicationâ€™s services. Then, with a single command, you create and start all the services from your configuration. To learn more about all the features of Compose, see <a href="https://docs.docker.com/compose/#features">the list of features</a>.</p><p>æ‰€æœ‰ç¯å¢ƒéƒ½å¯ä»¥ä½¿ç”¨dockercompose</p><p>Compose works in all environments: production, staging, development, testing, as well as CI workflows. You can learn more about each case in <a href="https://docs.docker.com/compose/#common-use-cases">Common Use Cases</a>.</p><p><strong>ä¸‰ä¸ªæ­¥éª¤</strong></p><p>Using Compose is basically a three-step process:</p><ol><li>Define your appâ€™s environment with a <code>Dockerfile</code> so it can be reproduced anywhere.<ul><li>dockerfile ä¿è¯æˆ‘ä»¬çš„é¡¹ç›®å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ</li></ul></li><li>Define the services that make up your app in <code>docker-compose.yml</code> so they can be run together in an isolated environment.<ul><li>serviceæœåŠ¡</li><li>docker-compose.yml æ–‡ä»¶æ€ä¹ˆå†™</li></ul></li><li>Run <code>docker compose up</code> and the <a href="https://docs.docker.com/compose/cli-command/">Docker compose command</a> starts and runs your entire app. You can alternatively run <code>docker-compose up</code> using the docker-compose binary.<ul><li>å¯åŠ¨é¡¹ç›®</li></ul></li></ol><p>ä½œç”¨ï¼šæ‰¹é‡å®¹å™¨ç¼–æ’ã€‚</p><hr><p>Compose æ˜¯dockerå®˜æ–¹çš„å¼€æºé¡¹ç›®ã€‚éœ€è¦å®‰è£…ã€‚</p><p><code>dockerfile</code>å¯ä»¥è®©ç¨‹åºåœ¨ä»»ä½•åœ°æ–¹è¿è¡Œã€‚webæœåŠ¡ï¼Œredisï¼Œmysqlï¼Œnignxâ€¦å¤šä¸ªå®¹å™¨</p><p>Compose</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.9&quot;</span>  <span class="comment"># optional since v1.27.0</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5000:5000&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.:/code</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">logvolume01:/var/log</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">logvolume01:</span> &#123;&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>DockerComposeä¸‹è½½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½</span></span><br><span class="line">åœ¨GitHubä¸Šä¸‹è½½ï¼Œä¸‹è½½é€Ÿåº¦æ¯”è¾ƒæ…¢</span><br><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/v1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªå¯èƒ½å¿«ä¸€ç‚¹</span><br><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/1.29.2/docker-compose-`uname -s`-`uname -m`  &gt; /usr/local/bin/docker-compose</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ“ä½œæƒé™</span> </span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line"> </span><br><span class="line">docker-compose --help</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸ</p><p><a href="https://docs.docker.com/compose/install/">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="ä½“éªŒ"><a href="#ä½“éªŒ" class="headerlink" title="ä½“éªŒ"></a>ä½“éªŒ</h4><hr><p>1.å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªappæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir composetest</span><br><span class="line">cd composetest</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line"></span><br><span class="line">import redis</span><br><span class="line">from flask import Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">cache = redis.Redis(host=&#x27;redis&#x27;, port=6379)</span><br><span class="line"></span><br><span class="line">def get_hit_count():</span><br><span class="line">    retries = 5</span><br><span class="line">    while True:</span><br><span class="line">        try:</span><br><span class="line">            return cache.incr(&#x27;hits&#x27;)</span><br><span class="line">        except redis.exceptions.ConnectionError as exc:</span><br><span class="line">            if retries == 0:</span><br><span class="line">                raise exc</span><br><span class="line">            retries -= 1</span><br><span class="line">            time.sleep(0.5)</span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/&#x27;)</span><br><span class="line">def hello():</span><br><span class="line">    count = get_hit_count()</span><br><span class="line">    return &#x27;Hello World! I have been seen &#123;&#125; times.\n&#x27;.format(count)</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flask</span><br><span class="line">redis</span><br></pre></td></tr></table></figure><p>2.åˆ›å»ºä¸€ä¸ªDockerfileæ–‡ä»¶ åº”ç”¨æ‰“åŒ…ä¸ºé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">syntax=docker/dockerfile:1</span></span><br><span class="line">FROM python:3.7-alpine</span><br><span class="line">WORKDIR /code</span><br><span class="line">ENV FLASK_APP=app.py</span><br><span class="line">ENV FLASK_RUN_HOST=0.0.0.0</span><br><span class="line">RUN apk add --no-cache gcc musl-dev linux-headers</span><br><span class="line">COPY requirements.txt requirements.txt</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">EXPOSE 5000</span><br><span class="line">COPY . .</span><br><span class="line">CMD [&quot;flask&quot;, &quot;run&quot;]</span><br></pre></td></tr></table></figure><p>3.å†™ä¸€ä¸ªymlæ–‡ä»¶  å®šä¹‰æ•´ä¸ªæœåŠ¡éœ€è¦çš„ç¯å¢ƒ web redis</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.9&quot;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5000:5000&quot;</span><br><span class="line">  redis:</span><br><span class="line">    image: &quot;redis:alpine&quot;</span><br></pre></td></tr></table></figure><p>4.å¯åŠ¨compose</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨docker-compose up çš„æ—¶å€™ä¼šå‡ºç°ä¸€ç›´å¡åœ¨æŸä¸€ä¸ªä¸‹è½½è¿›åº¦ä¸Š ç›®å‰æ²¡æœ‰å¾ˆå¥½çš„è§£å†³åŠæ³• åªèƒ½æ…¢æ…¢ç­‰</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸï¼š</p><p>åœæ­¢dockercompose</p><p>docker-compose down   æˆ–è€… Ctrl + C</p><p><strong>docker-compose</strong> </p><p>ä»¥å‰éƒ½æ˜¯é€šè¿‡docker run å•ä¸ªå¯åŠ¨å®¹å™¨</p><p>docker-compose ã€‚ é€šè¿‡docker-compose ç¼–å†™ymlé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡composeä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼Œæˆ–è€…åœæ­¢ã€‚</p><h4 id="dockerå°ç»“"><a href="#dockerå°ç»“" class="headerlink" title="dockerå°ç»“"></a>dockerå°ç»“</h4><ol><li>Docker é•œåƒã€‚ run &#x3D;&#x3D; &gt; å®¹å™¨</li><li>Dockerfile æ„å»ºé•œåƒï¼ˆæœåŠ¡æ‰“åŒ…ï¼‰</li><li>docker-compose  å¯åŠ¨é¡¹ç›®ï¼ˆç¼–æ’ ï¼Œ å¤šä¸ªå¾®æœåŠ¡&#x2F; ç¯å¢ƒï¼‰</li><li>dockerç½‘ç»œ</li></ol><h4 id="yamlè§„åˆ™"><a href="#yamlè§„åˆ™" class="headerlink" title="yamlè§„åˆ™"></a>yamlè§„åˆ™</h4><p>docker-compose æ ¸å¿ƒã€‚</p><p>servicesä¸­çš„å†…å®¹å¯ä»¥å‚è€ƒ<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå³ä¾§å¯æ»‘åŠ¨çš„åŒºåŸŸå°±æ˜¯å¯ä»¥æ·»åŠ çš„services</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‰å±‚</span></span><br><span class="line"></span><br><span class="line">version:&#x27;&#x27;  # docker-compose çš„ç‰ˆæœ¬</span><br><span class="line">services: # æœåŠ¡</span><br><span class="line">æœåŠ¡1: web</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨é…ç½®</span></span><br><span class="line">    images</span><br><span class="line">    build</span><br><span class="line">    network</span><br><span class="line">......</span><br><span class="line">æœåŠ¡2: redis</span><br><span class="line">.....</span><br><span class="line">æœåŠ¡3: </span><br><span class="line">......</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¶ä»–é…ç½®  ç½‘ç»œ/å·ã€å…¨å±€è§„åˆ™</span></span><br><span class="line">volumes:</span><br><span class="line">networks:</span><br><span class="line">config:</span><br></pre></td></tr></table></figure><h4 id="å¼€æºé¡¹ç›®"><a href="#å¼€æºé¡¹ç›®" class="headerlink" title="å¼€æºé¡¹ç›®"></a>å¼€æºé¡¹ç›®</h4><hr><h5 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h5><ol><li>ä¸‹è½½é¡¹ç›®ï¼ˆdocker-compose.ymlï¼‰</li><li>å¦‚æœéœ€è¦æ–‡ä»¶ã€‚Dockerfile</li><li>æ–‡ä»¶å‡†å¤‡é½å…¨ï¼ˆç›´æ¥ä¸€é”®å¯åŠ¨ï¼‰</li></ol><p>åå°å¯åŠ¨ <code>docker-compose up -d</code></p><h4 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h4><hr><ol><li>ç¼–å†™è‡ªå·±çš„springbootæœåŠ¡</li><li>ä½¿ç”¨dockerfile æ„å»ºå¯¹è±¡</li><li>ä½¿ç”¨docker-compose.yml ç¼–æ’é¡¹ç›®ï¼ˆymlæ–‡ä»¶ä¸€å®šè¦å†™æ¸…æ¥šï¼‰</li><li>æ”¾åˆ°æœåŠ¡å™¨ä¸Š docker-compose up</li></ol><p>é¡¹ç›®éƒ¨ç½²è¦é‡æ–°éƒ¨ç½²æ‰“åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up --build #é‡æ–°æ„å»º</span><br></pre></td></tr></table></figure><p>åœ¨xshell ä¸Šè¾“å…¥ <code>curl localhost:8080/hello</code>   å³å¯æµ‹è¯•è®¿é—®ï¼Œæˆ–è€…ç™»å½•äº‘æœåŠ¡å™¨ipåœ°å€è®¿é—®</p><p><strong>é‡åˆ°ä¸ä¼šçš„å‘½ä»¤å°±â€“help</strong></p><h3 id="Swarm"><a href="#Swarm" class="headerlink" title="Swarm"></a>Swarm</h3><p>Docker Engine 1.12 introduces swarm mode that enables you to create a cluster of one or more Docker Engines called a swarm. A swarm consists of one or more nodes: physical or virtual machines running Docker Engine 1.12 or later in swarm mode.</p><p>There are two types of nodes: <a href="https://docs.docker.com/engine/swarm/how-swarm-mode-works/nodes/#manager-nodes"><strong>managers</strong></a> and <a href="https://docs.docker.com/engine/swarm/how-swarm-mode-works/nodes/#worker-nodes"><strong>workers</strong></a>.</p><p>If you havenâ€™t already, read through the <a href="https://docs.docker.com/engine/swarm/">swarm mode overview</a> and <a href="https://docs.docker.com/engine/swarm/key-concepts/">key concepts</a>.</p><p>éœ€è¦å››ä¸ªæœåŠ¡å™¨ï¼Œ1ä¸»3ä»</p><p>è®¾ç½®ä¸»æœºï¼š<code>docker swarm init --advertise-addr  å…¬ç½‘ipåœ°å€</code></p><p><code>docker swarm join</code> åŠ å…¥ä¸€ä¸ªèŠ‚ç‚¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–ä»¤ç‰Œ(éœ€è¦å…³é—­ä¸»èŠ‚ç‚¹çš„é˜²ç«å¢™ systemctl stop firewalld.service  å…³é—­é˜²ç«å¢™)</span> </span><br><span class="line">docker swarm join-token manager</span><br><span class="line">docker swarm join-taken worker</span><br></pre></td></tr></table></figure><h4 id="Raftåè®®"><a href="#Raftåè®®" class="headerlink" title="Raftåè®®"></a>Raftåè®®</h4><p>åŒä¸»åŒä»ï¼šå‡è®¾ä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œå…¶ä»–èŠ‚ç‚¹èƒ½å¦èƒ½ç”¨</p><p>Raftåè®®ï¼šä¿è¯å¤§å¤šæ•°èŠ‚ç‚¹å¯ä»¥ç”¨ã€‚åªè¦&gt;1ï¼Œé›†ç¾¤æ•°å¤§äº3å°</p><p>å®éªŒï¼š</p><ol><li>å°†ä¸€ä¸ªä¸»èŠ‚ç‚¹åœæ­¢ï¼Œå¦å¤–ä¸€ä¸ªä¸»èŠ‚ç‚¹ä¹Ÿä¸èƒ½ç”¨äº†</li><li>å¯ä»¥å°†å…¶ä»–èŠ‚ç‚¹ç¦»å¼€</li><li>é›†ç¾¤å¯ç”¨ï¼š3ä¸ªä¸»èŠ‚ç‚¹ã€‚è‡³å°‘æœ‰ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¯ç”¨çš„ï¼ˆä¸»èŠ‚ç‚¹æœ€å¥½æ˜¯å¥‡æ•°ï¼Œä¿è¯å­˜æ´»ä¸€åŠä»¥ä¸Šï¼‰</li></ol><p>Raftåè®®ï¼šä¿è¯å¤§å¤šæ•°èŠ‚ç‚¹å­˜æ´»ï¼Œæ‰å¯ä»¥ä½¿ç”¨ï¼Œé«˜å¯ç”¨ã€‚</p><p>ä½“éªŒï¼šåˆ›å»ºæœåŠ¡ï¼ŒåŠ¨æ€æ‰©å±•æœåŠ¡ï¼ŒåŠ¨æ€æ›´æ–°æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run å¯åŠ¨å®¹å™¨ï¼ ä¸å…·æœ‰æ‰©ç¼©å®¹åŠŸèƒ½</span><br><span class="line">docker service å¯åŠ¨æœåŠ¡ï¼ å…·æœ‰æ‰©ç¼©å®¹åŠŸèƒ½</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker service ps æœåŠ¡å</span><br><span class="line">docker service ls</span><br></pre></td></tr></table></figure><p>åŠ¨æ€æ‰©å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker service update --replicas 10 å·²å¼€å¯çš„æœåŠ¡å   # å¼€å¯10å°æœåŠ¡</span><br><span class="line">docker service scale å·²å¼€å¯çš„æœåŠ¡å=10               #å¼€å¯10å°æœåŠ¡ï¼ˆä¸€å…±10å°ï¼Œä¸æ˜¯å¤šå¼€å¯10å°ï¼‰å’Œupdateä¸€æ ·</span><br></pre></td></tr></table></figure><h4 id="æ¦‚å¿µæ€»ç»“"><a href="#æ¦‚å¿µæ€»ç»“" class="headerlink" title="æ¦‚å¿µæ€»ç»“"></a>æ¦‚å¿µæ€»ç»“</h4><hr><p><strong>swarmï¼š</strong></p><p>é›†ç¾¤çš„ç®¡ç†å’Œç¼–å·ã€‚dockerå¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªswarmé›†ç¾¤ï¼Œå…¶ä»–èŠ‚ç‚¹å¯ä»¥åŠ å…¥ï¼ˆå·¥ä½œè€…ï¼Œç®¡ç†è€…ï¼‰</p><p><strong>Node</strong></p><p>å°±æ˜¯ä¸€ä¸ªdockerèŠ‚ç‚¹ã€‚å¤šä¸ªèŠ‚ç‚¹å°±ç»„æˆäº†ä¸€ä¸ªç½‘ç»œé›†ç¾¤ã€‚ï¼ˆç®¡ç†ï¼Œå·¥ä½œè€…ï¼‰</p><p><strong>Service</strong></p><p>ä»»åŠ¡ï¼Œå¯ä»¥åœ¨ç®¡ç†èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹æ¥è¿è¡Œã€‚æ ¸å¿ƒï¼ç”¨æˆ·è®¿é—®</p><p><strong>Task</strong></p><p>å®¹å™¨å†…çš„å‘½ä»¤ï¼Œç»†èŠ‚ä»»åŠ¡</p><h3 id="Docker-Stack"><a href="#Docker-Stack" class="headerlink" title="Docker     Stack"></a>Docker     Stack</h3><p>docker-compose å•æœºéƒ¨ç½²</p><p>docker stacéƒ¨ç½²ï¼Œé›†ç¾¤éƒ¨ç½²</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springbootå¾®æœåŠ¡æ‰“åŒ…åˆ°docker</title>
      <link href="/2022/02/05/springboot%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%89%93%E5%8C%85%E5%88%B0docker/"/>
      <url>/2022/02/05/springboot%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%89%93%E5%8C%85%E5%88%B0docker/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªspringbootå¾®æœåŠ¡é¡¹ç›®</p><ul><li>åœ¨springbootå®˜ç½‘ä¸Šåˆ›å»ºä¸€ä¸ªspringbooté¡¹ç›®</li><li>è‡ªå·±åˆ›å»ºä¸€ä¸ªæ¥å£ï¼ˆ&#x2F;helloï¼‰</li><li>æµ‹è¯•è¿è¡Œï¼Œæµ‹è¯•æˆåŠŸåï¼Œç”ŸæˆjaråŒ…</li><li>ç¼–å†™Dockerfileæ–‡ä»¶</li><li>ä½¿ç”¨dockerå°†å¾®æœåŠ¡éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Š</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> java:<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> *.jar /app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°†jaråŒ…å’Œdockerfileéƒ½æ”¾åœ¨æœåŠ¡å™¨ä¸Š</p><p>ç”Ÿæˆä¸€ä¸ªdockeré•œåƒ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319219.png" alt="image-20220116123114879"></p><p>æœ€ååœ¨äº‘æœåŠ¡å™¨ä¸Šè¿è¡Œè¿™ä¸ªé•œåƒ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202306172319588.png" alt="image-20220116123100296"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerçš„å®‰è£…å’Œä½¿ç”¨</title>
      <link href="/2022/02/05/docker%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/02/05/docker%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="Docker-åŸºæœ¬ç»„æˆ"><a href="#Docker-åŸºæœ¬ç»„æˆ" class="headerlink" title="Docker åŸºæœ¬ç»„æˆ"></a>Docker åŸºæœ¬ç»„æˆ</h3><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202204221756629.UaGmkp_GVreTU451sPj6OwHaD-" alt="æŸ¥çœ‹æºå›¾åƒ" style="zoom:150%;"><h5 id="é•œåƒï¼ˆimageï¼‰ï¼š"><a href="#é•œåƒï¼ˆimageï¼‰ï¼š" class="headerlink" title="é•œåƒï¼ˆimageï¼‰ï¼š"></a>é•œåƒï¼ˆimageï¼‰ï¼š</h5><p>ç›¸å½“äºä¸€ä¸ªæ¨¡æ¿ï¼Œé€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡ï¼Œtomcaté•œåƒ&#x3D;&#x3D;&gt;run&#x3D;&#x3D;&gt;tomcat01å®¹å™¨ï¼ˆæä¾›æœåŠ¡å™¨ï¼‰ï¼Œé€šè¿‡é•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ã€‚</p><p>æœåŠ¡è¿è¡Œåœ¨å®¹å™¨ä¸­è¿è¡Œ</p><h5 id="å®¹å™¨-container-ï¼š"><a href="#å®¹å™¨-container-ï¼š" class="headerlink" title="å®¹å™¨(container)ï¼š"></a>å®¹å™¨(container)ï¼š</h5><p>dockeråˆ©ç”¨å®¹å™¨æŠ€æœ¯ï¼Œç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œé€šè¿‡é•œåƒæ¥åˆ›å»ºçš„ï¼Œ</p><p>å¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ï¼ŒåŸºæœ¬å‘½ä»¤</p><p>å¯ä»¥ç†è§£ä¸ºå»ºè®®çš„Linuxç³»ç»Ÿ</p><h5 id="ä»“åº“-repository-ï¼š"><a href="#ä»“åº“-repository-ï¼š" class="headerlink" title="ä»“åº“(repository)ï¼š"></a>ä»“åº“(repository)ï¼š</h5><p>å­˜æ”¾é•œåƒçš„åœ°æ–¹</p><p>åˆ†ä¸ºå…¬æœ‰ä»“åº“å’Œç§æœ‰ä»“åº“</p><p>éœ€è¦é…ç½®é•œåƒåŠ é€Ÿ</p><h3 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h3><blockquote><p>ç¯å¢ƒå‡†å¤‡</p></blockquote><ol><li>ä¼šlinuxç³»ç»Ÿ</li><li>CentOS 7</li><li>ä½¿ç”¨Xshellè¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼ˆä½œä¸ºå­¦ä¹ ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºé‡Œé¢å®‰è£…centOS 7ï¼‰</li></ol><blockquote><p>ç¯å¢ƒæŸ¥çœ‹</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç³»ç»Ÿå†…æ ¸æ˜¯3.10ä»¥ä¸Šçš„</span><br></pre></td></tr></table></figure><blockquote><p>å®‰è£…</p></blockquote><h5 id="å®‰è£…æ—¶å‡ºç°é”™è¯¯-å¦‚ä¸‹å›¾ï¼š"><a href="#å®‰è£…æ—¶å‡ºç°é”™è¯¯-å¦‚ä¸‹å›¾ï¼š" class="headerlink" title="å®‰è£…æ—¶å‡ºç°é”™è¯¯ å¦‚ä¸‹å›¾ï¼š"></a>å®‰è£…æ—¶å‡ºç°é”™è¯¯ å¦‚ä¸‹å›¾ï¼š</h5><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202204221756630.png" alt="image-20211204143405152"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³åŠæ³•ï¼š</span><br><span class="line">1.å…ˆç”¨suå‘½ä»¤è¿›å…¥rootç”¨æˆ·ä¸‹</span><br><span class="line">2.è¾“å…¥visudo è¿›å…¥é…ç½®æ–‡ä»¶</span><br><span class="line">3.åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°â€œrootALL = (ALL)  ALLâ€è¡Œï¼Œåœ¨ä¸‹é¢æ·»åŠ ç”¨æˆ·â€œ ç”¨æˆ·å ALL=(ALL)  ALL &quot;</span><br><span class="line">4.é€€å‡ºï¼Œé‡æ–°è¾“å…¥å‘½ä»¤å³å¯</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">å®‰è£…å‘½ä»¤ï¼š</span><br><span class="line">ï¼ˆå¸è½½ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰ï¼š</span><br><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br><span class="line">                  </span><br><span class="line">1.éœ€è¦çš„å®‰è£…åŒ…</span><br><span class="line"> sudo yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br><span class="line"></span><br><span class="line">2.è®¾ç½®é•œåƒä»“åº“</span><br><span class="line">ï¼ˆå›½å¤–çš„ä»“åº“ï¼Œæ¯”è¾ƒæ…¢ï¼‰</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">    </span><br><span class="line">ï¼ˆé˜¿é‡Œäº‘çš„é•œåƒä»“åº“ï¼Œæ¯”è¾ƒå¿«ï¼Œæ¨èä½¿ç”¨ï¼‰</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°yumè½¯ä»¶åŒ…çš„ç´¢å¼•</span> </span><br><span class="line">sudo yum makecache fast</span><br><span class="line"></span><br><span class="line">3.å®‰è£…dockeræœ€æ–°ç‰ˆæœ¬çš„</span><br><span class="line"></span><br><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><h5 id="å¯åŠ¨docker"><a href="#å¯åŠ¨docker" class="headerlink" title="å¯åŠ¨docker"></a>å¯åŠ¨docker</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4.è¿è¡Œ sudo systemctl start docker  </span><br><span class="line"></span><br><span class="line">5.è¾“å…¥  docker version åˆ¤æ–­docker æ˜¯ä¸æ˜¯å¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312210476.png" alt="image-20211204145808906" style="zoom:80%;"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6.è¿è¡Œä¸€ä¸ª hello-worlç¨‹åº</span><br></pre></td></tr></table></figure><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312210104.png" alt="image-20211204145948215" style="zoom:80%;"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">7.æŸ¥çœ‹ä¸‹è½½çš„ hello-world é•œåƒ</span><br><span class="line">è¾“å…¥çš„å‘½ä»¤ï¼š</span><br><span class="line">[root@docker01 docker01]# docker images</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºçš„ç»“æœï¼š</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="dockerçš„å¸è½½"><a href="#dockerçš„å¸è½½" class="headerlink" title="dockerçš„å¸è½½"></a>dockerçš„å¸è½½</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åˆ é™¤å®‰è£…åŒ…:</span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line">åˆ é™¤é•œåƒï¼Œå®¹å™¨ï¼Œé…ç½®æ–‡ä»¶ç­‰å†…å®¹:</span><br><span class="line">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure><h5 id="é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"><a href="#é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ" class="headerlink" title="é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ"></a>é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</h5><p>1.ç™»å½•é˜¿é‡Œäº‘æ‰¾åˆ°å®¹å™¨æœåŠ¡ï¼Œæ‰¾åˆ°é•œåƒåŠ é€Ÿåœ°å€</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312205221.png" alt="image-20211204154604509"></p><p>2.é…ç½®ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.sudo mkdir -p /etc/docker</span><br><span class="line"></span><br><span class="line">2.sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://4tbypv0e.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">3.sudo systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">4.sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h5 id="åº•å±‚åŸç†"><a href="#åº•å±‚åŸç†" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h5><p>Dockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šã€‚é€šè¿‡Sockerä»å®¢æˆ·ç«¯è®¿é—®ã€‚</p><p>DockerServeræ¥æ”¶åˆ°Docker-Clientçš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312205458.png" alt="image-20211204160702631"></p><h3 id="dockerçš„å¸¸ç”¨å‘½ä»¤"><a href="#dockerçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="dockerçš„å¸¸ç”¨å‘½ä»¤"></a>dockerçš„å¸¸ç”¨å‘½ä»¤</h3><h4 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h4><hr><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version   #æ˜¾ç¤ºdockerçš„ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">docker info      #æ˜¾ç¤ºdockerçš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡</span><br><span class="line">docker å‘½ä»¤ --help    #æŸ¥è¯¢å„ç§å‘½ä»¤</span><br></pre></td></tr></table></figure><p>dockerå‘½ä»¤å¸®åŠ©æ–‡æ¡£çš„åœ°å€ï¼š<a href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p><h4 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h4><hr><h5 id="docker-images-æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ"><a href="#docker-images-æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ" class="headerlink" title="docker images æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ"></a><strong>docker images</strong> æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01 docker01]# docker images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£é‡Š</span></span><br><span class="line">REPOSITORYé•œåƒçš„ä»“åº“æº</span><br><span class="line">TAG é•œåƒçš„æ ‡ç­¾</span><br><span class="line">IMAGE IDé•œåƒçš„ID</span><br><span class="line">CREATEDé•œåƒçš„åˆ›å»ºæ—¶é—´</span><br><span class="line">SIZEé•œåƒçš„å¤§å°</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯é€‰é¡¹</span></span><br><span class="line">-a, --all             åˆ—å‡ºæ‰€æœ‰é•œåƒ</span><br><span class="line">-q, --quiet           åªæ˜¾ç¤ºé•œåƒçš„ID</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="docker-search-æœç´¢é•œåƒå‘½ä»¤"><a href="#docker-search-æœç´¢é•œåƒå‘½ä»¤" class="headerlink" title="docker search æœç´¢é•œåƒå‘½ä»¤"></a><strong>docker search æœç´¢é•œåƒå‘½ä»¤</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">mysql                             MySQL is a widely used, open-source relationâ€¦   11777     [OK]       </span><br><span class="line">mariadb                           MariaDB Server is a high performing open souâ€¦   4487      [OK]   </span><br></pre></td></tr></table></figure><h5 id="docker-pull-ä¸‹è½½é•œåƒ"><a href="#docker-pull-ä¸‹è½½é•œåƒ" class="headerlink" title="docker pull ä¸‹è½½é•œåƒ"></a><strong>docker pull ä¸‹è½½é•œåƒ</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql  [:tag] ä¸‹è½½mysqlé•œåƒ,å¦‚æœä¸å†™tagï¼Œä¼šé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</span><br><span class="line">docker pull mysql:5.7     ä¸‹è½½mysql5.7ç‰ˆæœ¬çš„é•œåƒ</span><br></pre></td></tr></table></figure><h5 id="docker-rmi-åˆ é™¤é•œåƒ"><a href="#docker-rmi-åˆ é™¤é•œåƒ" class="headerlink" title="docker rmi åˆ é™¤é•œåƒ"></a><strong>docker rmi åˆ é™¤é•œåƒ</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f é•œåƒid#åˆ é™¤æŒ‡å®šé•œåƒ</span><br><span class="line">docker rmi -f é•œåƒid é•œåƒid é•œåƒid #åˆ é™¤å¤šä¸ªé•œåƒ</span><br><span class="line">docker rmi -f $(docker images -aq)   #åˆ é™¤å…¨éƒ¨é•œåƒ</span><br></pre></td></tr></table></figure><h4 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h4><hr><p><strong>è¯´æ˜ï¼šæœ‰äº†é•œåƒæ‰èƒ½åˆ›å»ºå®¹å™¨ï¼Œä¸‹è½½ä¸€ä¸ªLinuxï¼ŒcentOSé•œåƒæ¥æµ‹è¯•å­¦ä¹ </strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure><h5 id="æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨"><a href="#æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨" class="headerlink" title="æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨"></a><strong>æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">docker run [å¯é€‰å‚æ•°] image</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‚æ•°è¯´æ˜</span></span><br><span class="line">--name=&quot;Name&quot;     å®¹å™¨çš„åå­—ï¼Œ tomcat01 tomcat02 ï¼Œç”¨æ¥åŒºåˆ†å®¹å™¨</span><br><span class="line">-d  åå°äº¤äº’å¼è¿è¡Œ</span><br><span class="line">-it  ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œï¼Œè¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹</span><br><span class="line">-p  æŒ‡å®šå®¹å™¨ç«¯å£ -p   8080:8080</span><br><span class="line">-p ip: ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£  ï¼ˆå¸¸ç”¨ï¼‰</span><br><span class="line">-p å®¹å™¨ç«¯å£</span><br><span class="line">å®¹å™¨ç«¯å£</span><br><span class="line">-p  éšæœºæŒ‡å®šç«¯å£</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•ï¼Œå¯åŠ¨å¹¶è¿›å…¥å®¹å™¨</span></span><br><span class="line">[root@docker01 docker01]# docker run -it centos /bin/bash </span><br><span class="line">[root@870a4fc7d3c0 /]# ls  #æŸ¥çœ‹å®¹å™¨å†…çš„centosï¼ŒåŸºç¡€ç‰ˆæœ¬</span><br><span class="line">bin  etc   lib  lost+found  mnt  proc  run   srv  tmp  var</span><br><span class="line">dev  home  lib64  media       opt  root  sbin  sys  usr</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»å®¹å™¨ä¸­é€€å‡º</span></span><br><span class="line">[root@870a4fc7d3c0 /]# quit</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="åˆ—å‡ºæ‰€æœ‰è¿è¡Œè¿‡çš„å®¹å™¨"><a href="#åˆ—å‡ºæ‰€æœ‰è¿è¡Œè¿‡çš„å®¹å™¨" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰è¿è¡Œè¿‡çš„å®¹å™¨"></a><strong>åˆ—å‡ºæ‰€æœ‰è¿è¡Œè¿‡çš„å®¹å™¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker ps å‘½ä»¤</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨o</span></span><br><span class="line">-a      # åˆ—å‡ºè¿è¡Œè¿‡çš„å®¹å™¨</span><br><span class="line">-n=?    #æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨</span><br><span class="line">-q      # åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‘½ä»¤å¯ä»¥æ··åˆä½¿ç”¨  docker ps -aq  æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œè¿‡çš„å®¹å™¨çš„ç¼–å·</span></span><br><span class="line"></span><br><span class="line">[root@docker01 docker01]# docker ps  # åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS     PORTS     NAMES</span><br><span class="line"></span><br><span class="line">[root@docker01 docker01]# docker ps -a   # åˆ—å‡ºè¿è¡Œè¿‡çš„å®¹å™¨</span><br><span class="line">CONTAINER ID   IMAGE         COMMAND       CREATED         STATUS                            PORTS     NAMES</span><br><span class="line">870a4fc7d3c0   centos        &quot;/bin/bash&quot;   3 minutes ago   Exited (130) About a minute ago             optimistic_kalam</span><br><span class="line">e767aeb92078   hello-world   &quot;/hello&quot;      7 minutes ago   Exited (0) 7 minutes ago                    keen_yonath</span><br><span class="line">eaa74af3c185   hello-world   &quot;/hello&quot;      2 hours ago     Exited (0) 2 hours ago                      cranky_goldwasser</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="é€€å‡ºå®¹å™¨"><a href="#é€€å‡ºå®¹å™¨" class="headerlink" title="é€€å‡ºå®¹å™¨"></a><strong>é€€å‡ºå®¹å™¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit   #ç›´æ¥åœæ­¢å®¹å™¨é€€å‡º</span><br><span class="line">Ctrl + q + p #å®¹å™¨ä¸åœæ­¢ä½†é€€å‡º</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤å®¹å™¨"><a href="#åˆ é™¤å®¹å™¨" class="headerlink" title="åˆ é™¤å®¹å™¨"></a><strong>åˆ é™¤å®¹å™¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm å®¹å™¨id   #åˆ é™¤æŒ‡å®šçš„å®¹å™¨ï¼Œä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¼ºåˆ¶åˆ é™¤ rm -f</span><br><span class="line">docker rm -f $(docker ps -aq)#åˆ é™¤å…¨éƒ¨çš„å®¹å™¨</span><br><span class="line">docker ps -a -q|xargs docker rm#åˆ é™¤å…¨éƒ¨çš„å®¹å™¨</span><br></pre></td></tr></table></figure><h5 id="å¯åŠ¨å’Œåœæ­¢å®¹å™¨çš„æ“ä½œ"><a href="#å¯åŠ¨å’Œåœæ­¢å®¹å™¨çš„æ“ä½œ" class="headerlink" title="å¯åŠ¨å’Œåœæ­¢å®¹å™¨çš„æ“ä½œ"></a><strong>å¯åŠ¨å’Œåœæ­¢å®¹å™¨çš„æ“ä½œ</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start å®¹å™¨id#å¯åŠ¨å®¹å™¨</span><br><span class="line">docker restart å®¹å™¨id#é‡æ–°å¯åŠ¨å®¹å™¨</span><br><span class="line">docker stop å®¹å™¨id#åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker kill å®¹å™¨id#å¼ºåˆ¶åœæ­¢å®¹å™¨</span><br></pre></td></tr></table></figure><h4 id="å¸¸ç”¨å…¶ä»–å‘½ä»¤"><a href="#å¸¸ç”¨å…¶ä»–å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å…¶ä»–å‘½ä»¤"></a>å¸¸ç”¨å…¶ä»–å‘½ä»¤</h4><hr><h5 id="åå°å¯åŠ¨å®¹å™¨"><a href="#åå°å¯åŠ¨å®¹å™¨" class="headerlink" title="åå°å¯åŠ¨å®¹å™¨"></a><strong>åå°å¯åŠ¨å®¹å™¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker run -d é•œåƒå</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é—®é¢˜docker ps ,å‘ç° é•œåƒåœæ­¢äº†</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¸¸è§çš„å‘ï¼šdocker å®¹å™¨åœ¨åç«¯è¿è¡Œï¼Œå°±å¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°çš„è¿›ç¨‹ï¼Œå°±ä¼šè‡ªåŠ¨åœæ­¢</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nginxï¼Œå®¹å™¨å¯åŠ¨åï¼Œå‘ç°è‡ªå·±æ²¡æœ‰æä¾›æœåŠ¡ï¼Œå°±ä¼šç«‹å³åœæ­¢ï¼Œå°±æ˜¯æ²¡æœ‰ç¨‹åºäº†</span></span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹æ—¥å¿—"><a href="#æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æ—¥å¿—"></a><strong>æŸ¥çœ‹æ—¥å¿—</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker logs -t -f --<span class="built_in">tail</span>=n -a(nä»£è¡¨æŸ¥è¯¢æ—¥å¿—çš„æ•°é‡)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker logs -t -f --<span class="built_in">tail</span>=n å®¹å™¨<span class="built_in">id</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ˜¾ç¤ºæ—¥å¿—</span></span><br><span class="line">-a # æŸ¥è¯¢æ‰€æœ‰å®¹å™¨çš„æ—¥å¿—</span><br><span class="line">- tf # æ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—</span><br><span class="line">-- tail num     # è¦æ˜¾ç¤ºæ—¥å¿—çš„æ¡æ•°</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯"><a href="#æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯"></a><strong>æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top å®¹å™¨id</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹é•œåƒçš„æºæ•°æ®"><a href="#æŸ¥çœ‹é•œåƒçš„æºæ•°æ®" class="headerlink" title="æŸ¥çœ‹é•œåƒçš„æºæ•°æ®"></a>æŸ¥çœ‹é•œåƒçš„æºæ•°æ®</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤</span></span><br><span class="line">docker inspect å®¹å™¨id</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[root@docker01 docker01]# docker inspect 42f22ae12579 </span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;42f22ae12579008a7c3d161273cce8bf4ad4746d9acd2e40923f2745d463a626&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2021-12-04T09:54:04.229855998Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/bin/bash&quot;,</span><br><span class="line">        &quot;Args&quot;: [],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;exited&quot;,</span><br><span class="line">            &quot;Running&quot;: false,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 0,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2021-12-04T09:54:04.56940188Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;2021-12-04T09:55:31.08471425Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/42f22ae12579008a7c3d161273cce8bf4ad4746d9acd2e40923f2745d463a626/resolv.conf&quot;,</span><br><span class="line">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/42f22ae12579008a7c3d161273cce8bf4ad4746d9acd2e40923f2745d463a626/hostname&quot;,</span><br><span class="line">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/42f22ae12579008a7c3d161273cce8bf4ad4746d9acd2e40923f2745d463a626/hosts&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/42f22ae12579008a7c3d161273cce8bf4ad4746d9acd2e40923f2745d463a626/42f22ae12579008a7c3d161273cce8bf4ad4746d9acd2e40923f2745d463a626-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;/hungry_noether&quot;,</span><br><span class="line">        &quot;RestartCount&quot;: 0,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ExecIDs&quot;: null,</span><br><span class="line">        &quot;HostConfig&quot;: &#123;</span><br><span class="line">            &quot;Binds&quot;: null,</span><br><span class="line">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LogConfig&quot;: &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class="line">                &quot;Config&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class="line">            &quot;RestartPolicy&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class="line">                &quot;MaximumRetryCount&quot;: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;AutoRemove&quot;: false,</span><br><span class="line">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class="line">            &quot;VolumesFrom&quot;: null,</span><br><span class="line">            &quot;CapAdd&quot;: null,</span><br><span class="line">            &quot;CapDrop&quot;: null,</span><br><span class="line">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class="line">            &quot;Dns&quot;: [],</span><br><span class="line">            &quot;DnsOptions&quot;: [],</span><br><span class="line">            &quot;DnsSearch&quot;: [],</span><br><span class="line">            &quot;ExtraHosts&quot;: null,</span><br><span class="line">            &quot;GroupAdd&quot;: null,</span><br><span class="line">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class="line">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Links&quot;: null,</span><br><span class="line">            &quot;OomScoreAdj&quot;: 0,</span><br><span class="line">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Privileged&quot;: false,</span><br><span class="line">            &quot;PublishAllPorts&quot;: false,</span><br><span class="line">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class="line">            &quot;SecurityOpt&quot;: null,</span><br><span class="line">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;ShmSize&quot;: 67108864,</span><br><span class="line">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class="line">            &quot;ConsoleSize&quot;: [</span><br><span class="line">                0,</span><br><span class="line">                0</span><br><span class="line">            ],</span><br><span class="line">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpuShares&quot;: 0,</span><br><span class="line">            &quot;Memory&quot;: 0,</span><br><span class="line">            &quot;NanoCpus&quot;: 0,</span><br><span class="line">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class="line">            &quot;BlkioWeight&quot;: 0,</span><br><span class="line">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class="line">            &quot;CpuPeriod&quot;: 0,</span><br><span class="line">            &quot;CpuQuota&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class="line">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Devices&quot;: [],</span><br><span class="line">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class="line">            &quot;DeviceRequests&quot;: null,</span><br><span class="line">            &quot;KernelMemory&quot;: 0,</span><br><span class="line">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class="line">            &quot;MemoryReservation&quot;: 0,</span><br><span class="line">            &quot;MemorySwap&quot;: 0,</span><br><span class="line">            &quot;MemorySwappiness&quot;: null,</span><br><span class="line">            &quot;OomKillDisable&quot;: false,</span><br><span class="line">            &quot;PidsLimit&quot;: null,</span><br><span class="line">            &quot;Ulimits&quot;: null,</span><br><span class="line">            &quot;CpuCount&quot;: 0,</span><br><span class="line">            &quot;CpuPercent&quot;: 0,</span><br><span class="line">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class="line">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class="line">            &quot;MaskedPaths&quot;: [</span><br><span class="line">                &quot;/proc/asound&quot;,</span><br><span class="line">                &quot;/proc/acpi&quot;,</span><br><span class="line">                &quot;/proc/kcore&quot;,</span><br><span class="line">                &quot;/proc/keys&quot;,</span><br><span class="line">                &quot;/proc/latency_stats&quot;,</span><br><span class="line">                &quot;/proc/timer_list&quot;,</span><br><span class="line">                &quot;/proc/timer_stats&quot;,</span><br><span class="line">                &quot;/proc/sched_debug&quot;,</span><br><span class="line">                &quot;/proc/scsi&quot;,</span><br><span class="line">                &quot;/sys/firmware&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ReadonlyPaths&quot;: [</span><br><span class="line">                &quot;/proc/bus&quot;,</span><br><span class="line">                &quot;/proc/fs&quot;,</span><br><span class="line">                &quot;/proc/irq&quot;,</span><br><span class="line">                &quot;/proc/sys&quot;,</span><br><span class="line">                &quot;/proc/sysrq-trigger&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/31be9ff3ac2da6207f80d25f317db896cfc693020a84eb098efb024c8e0df2e4-init/diff:/var/lib/docker/overlay2/c34b4aa3040fde719ffc648c55ec1bb8f4ba831f980fcbb9b37a30051b4d5910/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/31be9ff3ac2da6207f80d25f317db896cfc693020a84eb098efb024c8e0df2e4/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/31be9ff3ac2da6207f80d25f317db896cfc693020a84eb098efb024c8e0df2e4/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/31be9ff3ac2da6207f80d25f317db896cfc693020a84eb098efb024c8e0df2e4/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Mounts&quot;: [],</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;42f22ae12579&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: true,</span><br><span class="line">            &quot;AttachStdout&quot;: true,</span><br><span class="line">            &quot;AttachStderr&quot;: true,</span><br><span class="line">            &quot;Tty&quot;: true,</span><br><span class="line">            &quot;OpenStdin&quot;: true,</span><br><span class="line">            &quot;StdinOnce&quot;: true,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/bash&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;org.label-schema.build-date&quot;: &quot;20210915&quot;,</span><br><span class="line">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class="line">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class="line">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class="line">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SandboxID&quot;: &quot;e4fd3d35da7d401a907c0fb46b987679106b02613ed4bcc3b83fbc2ddbccff72&quot;,</span><br><span class="line">            &quot;HairpinMode&quot;: false,</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class="line">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/e4fd3d35da7d&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;a52d4e4bff610bdcbca9763774038725794ae4910aeac74f5fe3b7587d2509f3&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 0,</span><br><span class="line">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;DriverOpts&quot;: null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h5 id="è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨"><a href="#è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨" class="headerlink" title="è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨"></a><strong>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨é€šå¸¸éƒ½æ˜¯ä½¿ç”¨åå°è¿è¡Œçš„ï¼Œéœ€è¦è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹ä¸€äº›é…ç½®</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤</span></span><br><span class="line">docker exec -it å®¹å™¨id bashShell</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[root@docker01 docker01]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">1c1e914eb3cb   centos    &quot;/bin/bash&quot;   12 seconds ago   Up 11 seconds             romantic_bartik</span><br><span class="line">[root@docker01 docker01]# docker exec -it 1c1e914eb3cb /bin/bash</span><br><span class="line">[root@1c1e914eb3cb /]# ps -ef</span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root          1      0  0 10:00 pts/0    00:00:00 /bin/bash</span><br><span class="line">root         15      0  0 10:01 pts/1    00:00:00 /bin/bash</span><br><span class="line">root         29     15  0 10:02 pts/1    00:00:00 ps -ef</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼äºŒ</span></span><br><span class="line">docker attach å®¹å™¨id</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[root@docker01 docker01]# docker attach 1c1e914eb3cb </span><br><span class="line">æ­£åœ¨æ‰§è¡Œå½“å‰çš„ä»£ç ....</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker <span class="built_in">exec</span>  <span class="comment">#è¿›å…¥ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œï¼ˆå¸¸ç”¨ï¼‰</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker attach <span class="comment"># è¿›å…¥å®¹å™¨ä¸­æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</span></span></span><br></pre></td></tr></table></figure><h5 id="ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº"><a href="#ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº" class="headerlink" title="ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº"></a>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„   ç›®çš„ä¸»æœºè·¯å¾„</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰ä¸»æœºç›®å½•</span></span><br><span class="line">[root@docker01 home]# ls</span><br><span class="line">docker01  likunsong.java</span><br><span class="line">[root@docker01 home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS         PORTS     NAMES</span><br><span class="line">620084e2d74d   centos    &quot;/bin/bash&quot;   3 minutes ago   Up 3 minutes             elated_antonelli</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥docker å†…éƒ¨</span></span><br><span class="line">[root@docker01 home]# docker attach 20084e2d74d </span><br><span class="line">Error: No such container: 20084e2d74d</span><br><span class="line">[root@docker01 home]# docker attach 620084e2d74d </span><br><span class="line">[root@620084e2d74d /]# cd /home</span><br><span class="line">[root@620084e2d74d home]# ls</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨å®¹å™¨å†…æ–°å»ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@620084e2d74d home]# touch text.java</span><br><span class="line">[root@620084e2d74d home]# exit</span><br><span class="line">exit</span><br><span class="line">[root@docker01 home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@docker01 home]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS                      PORTS     NAMES</span><br><span class="line">620084e2d74d   centos    &quot;/bin/bash&quot;   5 minutes ago   Exited (0) 22 seconds ago             elated_antonelli</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å®¹å™¨å†…çš„æ–‡ä»¶æ‹·è´åˆ°ä¸»æœºä¸Š</span></span><br><span class="line">[root@docker01 home]# docker cp 620084e2d74d:/home/text.java /home</span><br><span class="line">[root@docker01 home]# ls</span><br><span class="line">docker01  likunsong.java  text.java </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h4><blockquote><p>Docker å®‰è£… Nginx</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. æœç´¢é•œåƒï¼Œ search</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. ä¸‹è½½é•œåƒ pull</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3. è¿è¡Œæµ‹è¯•</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-d åå°è¿è¡Œ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-- name ç»™å®¹å™¨å‘½å</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-p å®¿ä¸»æœºç«¯å£ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£</span></span><br><span class="line">[root@iZ0jl26t6u4l56lb52dskvZ ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED      SIZE</span><br><span class="line">nginx        latest    f652ca386ed1   2 days ago   141MB</span><br><span class="line"></span><br><span class="line">[root@iZ0jl26t6u4l56lb52dskvZ ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                  NAMES</span><br><span class="line">52cc76a3f6e5   nginx     &quot;/docker-entrypoint.â€¦&quot;   14 seconds ago   Up 14 seconds   0.0.0.0:3344-&gt;80/tcp   nginx01</span><br><span class="line"></span><br><span class="line">[root@iZ0jl26t6u4l56lb52dskvZ ~]# curl localhost:3344</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">[root@iZ0jl26t6u4l56lb52dskvZ ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                  NAMES</span><br><span class="line">52cc76a3f6e5   nginx     &quot;/docker-entrypoint.â€¦&quot;   12 minutes ago   Up 12 minutes   0.0.0.0:3344-&gt;80/tcp   nginx01</span><br><span class="line">[root@iZ0jl26t6u4l56lb52dskvZ ~]# docker exec -it nginx01 /bin/bash</span><br><span class="line">root@52cc76a3f6e5:/# whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>docker å®‰è£… tomcat</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®˜æ–¹çš„ä½¿ç”¨</span></span><br><span class="line">docker run -it --rm tomcat:9.0</span><br><span class="line">ï¼ˆä¸€èˆ¬ç”¨äºæµ‹è¯•ï¼Œç”¨å®Œè‡ªåŠ¨åˆ é™¤ï¼‰</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½å†å¯åŠ¨</span></span><br><span class="line">docker pull tomcat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨</span></span><br><span class="line">docker run -d -p 3355:8080 --name tomcat01 tomcat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•è®¿é—®ï¼Œæ²¡æœ‰é—®é¢˜</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker exec -it tocat01 /bin/bash</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>éƒ¨ç½² es + kibana</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">es æš´éœ²çš„ç«¯å£å¾ˆå¤š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">es ååˆ†è€—å†…å­˜</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">es çš„æ•°æ®ä¸€èˆ¬éœ€è¦æ”¾ç½®åœ¨å®‰å…¨ç›®å½• æŒ‚è½½</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--net somenetword ç½‘ç»œé…ç½®</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ elasticsearch</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span> elasticsearch:tag</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ä¹‹å LinuxæœåŠ¡å™¨å°±ä¼šå¡  docker stats æŸ¥çœ‹cpuçš„çŠ¶æ€</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">es æ˜¯ååˆ†è€—å†…å­˜çš„</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span> -e ES_JAVA_OPTS=<span class="string">&quot;-Xms64m _Xmx512m&quot;</span> elasticsearch:tag</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-e ES_JAVA_OPTS=<span class="string">&quot;-Xms64m _Xmx512m&quot;</span> è®¾ç½®é…ç½®æ–‡ä»¶ï¼Œä¸ºäº†ä¸è®©æœåŠ¡å™¨è¢«å ç”¨å†…å­˜å¤ªå¤§</span></span><br></pre></td></tr></table></figure><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312211972.png" alt="image-20211209210523336" style="zoom:150%;"><h4 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h4><hr><ul><li><p>portainerï¼ˆä¸æ˜¯æœ€ä½³é€‰æ‹©ï¼‰</p></li><li><p>Rancherï¼ˆCI&#x2F;CDå†ç”¨ï¼‰ </p><p>Dockeræ˜¯å›¾å½¢åŒ–ç•Œé¢ç®¡ç†å·¥å…·</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8088:9000 \</span><br><span class="line">--restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®¿é—®æµ‹è¯•ï¼šè‡ªå·±å¤–ç½‘ç«¯å£:8088&#x2F;</p><p>é€šè¿‡å®ƒæ¥è®¿é—®ï¼ˆè®¿é—®ç•Œé¢ï¼‰ï¼šï¼ˆè´¦å·ï¼š admin  å¯†ç ï¼š12345678ï¼‰</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312211197.png" alt="image-20211209211702279"></p><p>æ³¨å†Œå®Œå¯†ç åï¼Œé€‰æ‹©æœ¬åœ°çš„</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212128.png" alt="image-20211210154759637"></p><p>è¿›å»ä¹‹åä¼šå±•ç¤ºè¿™æ ·çš„ä¸€ä¸ªé¢æ¿</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312211681.png" alt="image-20211210154836546"></p><p>ç‚¹å¼€å</p><p><img src="https://github-1308115823.cos.ap-nanjing.myqcloud.com/images/202204221756639.png" alt="image-20211210155406811"></p><p>å¯è§†åŒ–ä¸€èˆ¬ä¸ä¼šç”¨</p><h3 id="Dockeré•œåƒ"><a href="#Dockeré•œåƒ" class="headerlink" title="Dockeré•œåƒ"></a>Dockeré•œåƒ</h3><hr><h4 id="é•œåƒæ˜¯ä»€ä¹ˆ"><a href="#é•œåƒæ˜¯ä»€ä¹ˆ" class="headerlink" title="é•œåƒæ˜¯ä»€ä¹ˆ"></a>é•œåƒæ˜¯ä»€ä¹ˆ</h4><hr><p>æ‰€æœ‰çš„åº”ç”¨ï¼Œç›´æ¥æ‰“åŒ…dockeré•œåƒï¼Œå°±å¯ä»¥ç›´æ¥è·‘èµ·æ¥</p><p>å¦‚ä½•å¾—åˆ°é•œåƒï¼š</p><ul><li>ä»è¿œç¨‹ä»“åº“ä¸‹è½½</li><li>æœ‹å‹ æ‹·è´</li><li>è‡ªå·±åˆ¶ä½œä¸€ä¸ªé•œåƒ DockerFile</li></ul><h4 id="é•œåƒåŠ è½½åŸç†"><a href="#é•œåƒåŠ è½½åŸç†" class="headerlink" title="é•œåƒåŠ è½½åŸç†"></a>é•œåƒåŠ è½½åŸç†</h4><blockquote><p>UnionFS ï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰</p></blockquote><p>è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼ˆunite serveral directories into a single virtual filesystemï¼‰ã€‚è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒ</p><p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢åªèƒ½çœ‹è§ä¸€ä¸ªæ–‡ä»¶ï¼Œè”åˆåŠ è½½ä¼šæŠŠå„ä¸ªæ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆæ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•</p><blockquote><p>docker é•œåƒåŠ è½½åŸç†</p></blockquote><p>Dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚</p><p>åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><p>bootfsï¼ˆboot file systemï¼‰ï¼šä¸»è¦åŒ…å«bootloaderå’Œkernelï¼ˆLinuxå†…æ ¸ï¼‰ï¼Œbootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernelï¼ŒLinuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œè€Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚ä¹Ÿæ˜¯bootfsè¿™ä¸€å±‚ï¼Œè¿™ä¸æˆ‘ä»¬å…¸å‹çš„Linux&#x2F;Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åï¼Œæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚</p><p>å³ï¼šç³»ç»Ÿå¯åŠ¨æ—¶éœ€è¦çš„å¼•å¯¼åŠ è½½ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šéœ€è¦ä¸€å®šæ—¶é—´ã€‚å°±æ˜¯é»‘å±åˆ°å¼€æœºä¹‹é—´çš„è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ã€‚ç”µè„‘ã€è™šæ‹Ÿæœºã€Dockerå®¹å™¨å¯åŠ¨éƒ½éœ€è¦çš„è¿‡ç¨‹ã€‚åœ¨è¯´å›é•œåƒï¼Œæ‰€ä»¥è¿™ä¸€éƒ¨åˆ†ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆé•œåƒéƒ½æ˜¯å…¬ç”¨çš„ã€‚</p></li><li><p>rootfsï¼ˆroot file systemï¼‰ï¼šrootfsåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿä¸­çš„&#x2F;devï¼Œ&#x2F;procï¼Œ&#x2F;binï¼Œ&#x2F;etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰ã€‚</p><p>å³ï¼šé•œåƒå¯åŠ¨ä¹‹åçš„ä¸€ä¸ªå°çš„åº•å±‚ç³»ç»Ÿï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„ï¼Œå®¹å™¨å°±æ˜¯ä¸€ä¸ªå°çš„è™šæ‹Ÿæœºç¯å¢ƒï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ï¼Œè¿™ä¸ªå°çš„è™šæ‹Ÿæœºç¯å¢ƒå°±ç›¸å½“äºrootfsã€‚</p></li></ul><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212420.png" alt="img"></p><p>å¯¹äºä¸€ä¸ªç²¾ç®€çš„OSç³»ç»Ÿï¼Œrootfså¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…å«æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ï¼Œå› ä¸ºåº•å±‚ç›´æ¥ç”¨Hostï¼ˆå®¿ä¸»æœºï¼‰çš„kernelï¼ˆä¹Ÿå°±æ˜¯å®¿ä¸»æœºæˆ–è€…æœåŠ¡å™¨çš„boosfs+å†…æ ¸ï¼‰ï¼Œè‡ªå·±åªéœ€è¦æä¾›rootfså°±å¯ä»¥äº†ã€‚</p><p>ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„linuxå‘è¡Œç‰ˆï¼ŒbootfsåŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œrootfsä¼šæœ‰å·®åˆ«ï¼Œå› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨bootfséƒ¨åˆ†</p><p><strong>è¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰è¯´ï¼šè™šæ‹Ÿæœºçš„å¯åŠ¨æ˜¯åˆ†é’Ÿçº§çš„ï¼Œå®¹å™¨çš„å¯åŠ¨æ˜¯ç§’çº§çš„</strong>**</p><h4 id="åˆ†å±‚ç†è§£"><a href="#åˆ†å±‚ç†è§£" class="headerlink" title="åˆ†å±‚ç†è§£"></a>åˆ†å±‚ç†è§£</h4><blockquote><p>åˆ†å±‚çš„é•œåƒ</p></blockquote><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212569.png" alt="image-20211210161710037"></p><p>æ˜¯ä¸€å±‚ä¸€å±‚çš„å®‰è£…çš„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@nanxing ~]# docker image inspect redis:latest</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:aea9b698d7d1d2fb22fe74868e27e767334b2cc629a8c6f9db8cc1747ba299fd&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;redis:latest&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [</span><br><span class="line">            &quot;redis@sha256:2f502d27c3e9b54295f1c591b3970340d02f8a5824402c8179dcd20d4076b796&quot;</span><br><span class="line">        ],</span><br><span class="line">Â·Â·Â·# ä¸­é—´çœç•¥</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:9321ff862abbe8e1532076e5fdc932371eff562334ac86984a836d77dfb717f5&quot;,</span><br><span class="line">                &quot;sha256:aa2858ea5edc9c0981901a1b63b49a8f4a6e7099b4304b49e680ffdcc6b71b3e&quot;,</span><br><span class="line">                &quot;sha256:93079bf13a6d5fe7c4bd9f00cb96183f9d1db9968c4bd15b395df2f3867bf8e5&quot;,</span><br><span class="line">                &quot;sha256:9ca504b88e256aa6f6c04ec65aeeed6b926661ea30a0b97f829fbe230155241a&quot;,</span><br><span class="line">                &quot;sha256:9468a3f0498bd5cc298ce25ea6ce9c6adf14aa2ce152856b5f389510a9bb9e01&quot;,</span><br><span class="line">                &quot;sha256:b7851a62867d82784052d7662862adc0b47b2bddcddc89ae78307f75ba1b29ae&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Metadata&quot;: &#123;</span><br><span class="line">            &quot;LastTagTime&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç†è§£</strong></p><p>æ‰€æœ‰çš„Dockeré•œåƒéƒ½èµ·å§‹äºä¸€ä¸ªåŸºç¡€é•œåƒå±‚ï¼Œå½“è¿›è¡Œä¿®æ”¹æˆ–å¢åŠ æ–°çš„å†…å®¹æ—¶ï¼Œå°±ä¼šåœ¨å½“å‰é•œåƒå±‚ä¹‹ä¸Šï¼Œåˆ›å»ºæ–°çš„é•œåƒå±‚ã€‚<br>â€ƒâ€ƒä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡å¦‚åŸºäºUbuntu Linux 16.04åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œè¿™å°±æ˜¯æ–°é•œåƒçš„ç¬¬ä¸€å±‚ï¼›å¦‚æœåœ¨è¯¥é•œåƒä¸­æ·»åŠ PythonåŒ…ï¼Œå°±ä¼šåœ¨åŸºç¡€é•œåƒå±‚ä¹‹ä¸Šåˆ›å»ºç¬¬äºŒä¸ªé•œåƒå±‚ï¼›å¦‚æœç»§ç»­æ·»åŠ ä¸€ä¸ªå®‰å…¨è¡¥ä¸ï¼Œå°±ä¼šåˆ›å»ºç¬¬ä¸‰ä¸ªé•œåƒå±‚ã€‚<br>â€ƒâ€ƒè¯¥é•œåƒå½“å‰å·²ç»åŒ…å«3ä¸ªé•œåƒå±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç”¨äºæ¼”ç¤ºçš„å¾ˆç®€å•çš„ä¾‹å­ï¼‰ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212607.png" alt="img"></p><p>åœ¨æ·»åŠ é¢å¤–çš„é•œåƒå±‚çš„åŒæ—¶ï¼Œé•œåƒå§‹ç»ˆä¿æŒæ˜¯å½“å‰æ‰€æœ‰é•œåƒçš„ç»„åˆï¼Œç†è§£è¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚ä¸‹å›¾ä¸­ä¸¾äº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯ä¸ªé•œåƒå±‚åŒ…å«3ä¸ªæ–‡ä»¶ï¼Œè€Œæ•´ä½“çš„é•œåƒåŒ…å«äº†æ¥è‡ªä¸¤ä¸ªé•œåƒå±‚çš„6ä¸ªæ–‡ä»¶ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212167.png" alt="img"></p><p>ä¸Šå›¾ä¸­çš„é¡åƒå±‚è·Ÿä¹‹å‰å›¾ä¸­çš„ç•¥æœ‰åŒºåˆ«ï¼Œä¸»è¦ç›®çš„æ˜¯ä¾¿äºå±•ç¤ºæ–‡ä»¶ã€‚</p><p>ä¸‹å›¾ä¸­å±•ç¤ºäº†ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¸‰å±‚é•œåƒï¼Œåœ¨å¤–éƒ¨çœ‹æ¥æ•´ä¸ªé•œåƒåªæœ‰6ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºæœ€ä¸Šå±‚ä¸­çš„æ–‡ä»¶7æ˜¯æ–‡ä»¶5çš„ä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬ã€‚</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212087.png" alt="img"></p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œä¸Šå±‚é•œåƒå±‚ä¸­çš„æ–‡ä»¶è¦†ç›–äº†åº•å±‚é•œåƒå±‚ä¸­çš„æ–‡ä»¶ã€‚è¿™æ ·å°±ä½¿å¾—æ–‡ä»¶çš„æ›´æ–°ç‰ˆæœ¬ä½œä¸ºä¸€ä¸ªæ–°é•œåƒå±‚æ·»åŠ åˆ°é•œåƒå½“ä¸­ã€‚<br>â€ƒâ€ƒDockeré€šè¿‡å­˜å‚¨å¼•æ“ï¼ˆæ–°ç‰ˆæœ¬é‡‡ç”¨å¿«ç…§æœºåˆ¶ï¼‰çš„æ–¹å¼æ¥å®ç°é•œåƒå±‚å †æ ˆï¼Œå¹¶ä¿è¯å¤šé•œåƒå±‚å¯¹å¤–å±•ç¤ºä¸ºç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>å¦‚ä¸Šè¾¹çš„ä¸‰å±‚é•œåƒï¼ŒDockeræœ€ç»ˆä¼šæŠŠæ‰€æœ‰é•œåƒå±‚å †å å¹¶åˆå¹¶ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„è§†å›¾ï¼Œå¦‚ä¸‹å›¾<br><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212407.png" alt="img"></p><blockquote><p>ç‰¹ç‚¹</p></blockquote><p>Dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚ä¼šè¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨</p><p>è¿™ä¸€å±‚æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹éƒ½å«é•œåƒå±‚ï¼</p><h4 id="commité•œåƒ"><a href="#commité•œåƒ" class="headerlink" title="commité•œåƒ"></a>commité•œåƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker commit æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°å‰¯æœ¬</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤å’Œgitç›¸ä¼¼</span></span><br><span class="line">docker commit -m=&quot;æäº¤æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨id ç›®æ ‡é•œåƒåï¼š[TAG]</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ä¸€ä¸ªtomcat</span></span><br><span class="line">docker run -it -p 8080:8080 tomcat</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°é»˜è®¤çš„tomcat æ²¡æœ‰webappsåº”ç”¨ é•œåƒçš„åŸå›  å®˜æ–¹é•œåƒä¸‹é»˜è®¤tomcatæ˜¯æ²¡æœ‰æ–‡ä»¶çš„</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡ªå·±æ‹·è´è¿›å»åŸºæœ¬çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212007.png" alt="image-20211210165543754"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æˆ‘ä»¬ä¿®æ”¹åçš„å®¹å™¨é€šè¿‡commit æäº¤ä½œä¸ºä¸€ä¸ªé•œåƒã€‚æˆ‘ä»¬ä»¥åå¯ä»¥ä½¿ç”¨æˆ‘ä»¬ä¿®æ”¹è¿‡çš„é•œåƒï¼Œè¿™æ˜¯æˆ‘ä»¬è‡ªå·±ä¿®æ”¹çš„é•œåƒ</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212937.png" alt="image-20211210170143024"></p><h3 id="å®¹å™¨æ•°æ®å·"><a href="#å®¹å™¨æ•°æ®å·" class="headerlink" title="å®¹å™¨æ•°æ®å·"></a>å®¹å™¨æ•°æ®å·</h3><hr><h4 id="ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·"><a href="#ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·" class="headerlink" title="ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·"></a>ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·</h4><p><strong>dockerç†å¿µå›é¡¾</strong></p><p>Dockerå®¹å™¨æ•°æ®å·ï¼Œå³Docker Volumeï¼ˆå·ï¼‰ã€‚</p><p>å½“Dockerå®¹å™¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„æ•°æ®æ–‡ä»¶ï¼Œè¿™äº›æ•°æ®æ–‡ä»¶ä¼šåœ¨å…³é—­Dockerå®¹å™¨æ—¶ï¼Œç›´æ¥æ¶ˆå¤±çš„ã€‚ä½†æ˜¯å…¶ä¸­äº§ç”Ÿéƒ¨åˆ†çš„æ•°æ®å†…å®¹ï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›èƒ½å¤ŸæŠŠå®ƒç»™ä¿å­˜èµ·æ¥ï¼Œå¦ä½œå®ƒç”¨çš„ã€‚å…³é—­Dockerå®¹å™¨&#x3D;åˆ é™¤å†…éƒ¨é™¤äº†imageåº•å±‚æ•°æ®çš„å…¶ä»–å…¨éƒ¨å†…å®¹ï¼Œå³åˆ åº“è·‘è·¯</p><blockquote><ol><li>å°†åº”ç”¨ä¸è¿è¡Œçš„ç¯å¢ƒæ‰“åŒ…å½¢æˆå®¹å™¨è¿è¡Œï¼Œä¼´éšç€å®¹å™¨è¿è¡Œäº§ç”Ÿçš„æ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™äº›æ•°æ®èƒ½å¤ŸæŒä¹…åŒ–ã€‚</li><li>å¸Œæœ›å®¹å™¨ä¹‹é—´ä¹Ÿèƒ½å¤Ÿå®ç°æ•°æ®çš„å…±äº«</li></ol></blockquote><p>Dockerå®¹å™¨äº§ç”Ÿçš„æ•°æ®åŒæ­¥åˆ°æœ¬åœ°,è¿™æ ·å…³é—­å®¹å™¨çš„æ—¶å€™ï¼Œæ•°æ®æ˜¯åœ¨æœ¬åœ°çš„ï¼Œä¸ä¼šå½±å“æ•°æ®çš„å®‰å…¨æ€§ã€‚<br>dockerçš„å®¹å™¨å·æŠ€æœ¯ä¹Ÿå°±æ˜¯å°†å®¹å™¨å†…éƒ¨ç›®å½•å’Œæœ¬åœ°ç›®å½•è¿›è¡Œä¸€ä¸ªåŒæ­¥ï¼Œå³æŒ‚è½½ã€‚</p><blockquote><p>æ€»ç»“ï¼š å®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥åŒ–æ“ä½œï¼Œå®¹å™¨ä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥æ•°æ®å…±äº«çš„ï¼ˆä½†æ˜¯æ³¨æ„æŒ‚è½½ä¸æ˜¯ç­‰åŒäºåŒæ­¥ï¼ï¼ï¼ï¼‰</p></blockquote><h4 id="ä½¿ç”¨æ•°æ®å·"><a href="#ä½¿ç”¨æ•°æ®å·" class="headerlink" title="ä½¿ç”¨æ•°æ®å·"></a>ä½¿ç”¨æ•°æ®å·</h4><blockquote><p>ç›´æ¥ä½¿ç”¨å‘½ä»¤è¿›è¡ŒæŒ‚è½½  -v</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v ä¸»æœºç›®å½•ï¼šå®¹å™¨å†…ç›®å½•</span><br><span class="line"></span><br><span class="line">[root@nanxing home]# docker run -it -v /home/ceshi:/home centos /bin/bash</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312212602.png" alt="image-20211210172813793"></p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213633.png" alt="image-20211210172834931"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨èµ·æ¥åå¯ä»¥é€šè¿‡docker inspect å®¹å™¨<span class="built_in">id</span> æŸ¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸ</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213568.png" alt="image-20211210173211453"></p><p>æµ‹è¯•æ–‡ä»¶çš„åŒæ­¥</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213484.png" alt="image-20211210173708604"></p><p>å†æ¥æµ‹è¯•</p><ol><li>åœæ­¢å®¹å™¨</li><li>å®¿ä¸»æœºä¸Šä¿®æ”¹æ–‡ä»¶</li><li>å¯åŠ¨å®¹å™¨</li><li>å®¹å™¨å†…çš„æ•°æ®ä¾æ—§æ˜¯åŒæ­¥çš„</li></ol><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213742.png" alt="image-20211210174437507"></p><p>ä¼˜ç‚¹ï¼šåªç”¨åœ¨æœ¬åœ°ä¿®æ”¹ï¼Œå®¹å™¨ä¸Šå°±ä¼šè‡ªåŠ¨åŒæ­¥</p><h4 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h4><p>MysQLçš„æ•°æ®æŒä¹…åŒ–çš„é—®é¢˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–é•œåƒ</span></span><br><span class="line">[root@nanxing ceshi]# docker pull mysql:5.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œå®¹å™¨ï¼Œ åšæ•°æ®æŒ‚è½½  <span class="comment"># å®‰è£…å¯åŠ¨mysqléœ€è¦è®¾ç½®å¯†ç </span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®˜æ–¹æµ‹è¯• docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨mysql</span></span><br><span class="line"> -d åå°è¿è¡Œ</span><br><span class="line"> -p ç«¯å£æ˜ å°„</span><br><span class="line"> -v å·æŒ‚è½½  é€šè¿‡ä¸¤ä¸ª-v æŒ‚è½½ä¸¤ä¸ªç›®å½•</span><br><span class="line"> -e ç¯å¢ƒé…ç½®</span><br><span class="line"> --name å®¹å™¨çš„åå­—</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">è¯¥å‘½ä»¤è¡Œæ— æ³•æ­£å¸¸å¯åŠ¨mysql</span></span><br><span class="line"> </span><br><span class="line">[root@nanxing ~]# docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e SQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span><br><span class="line">ï¼ˆé—®é¢˜ï¼šè¯¥æ®µä»£ç è¿è¡Œåå‘ç°æ²¡æœ‰dockerå®¹å™¨è¿è¡Œï¼Œé€šè¿‡æŸ¥é˜…ä¹¦ç±ï¼Œå‘ç°åº”è¯¥æŒ‚è½½ä¸€ä¸ªåœ°å€å³å¯æ­£ç¡®è¿è¡Œmysqlï¼‰</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­£ç¡®è¿è¡Œçš„å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"> docker run --name mysql03 -p 3310:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /my/custom:/etc/mysql/conf.d -d mysql:5.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">é€šè¿‡Navicatè½¯ä»¶è¿›è¡Œè¿æ¥æµ‹è¯•ï¼Œ</span><br></pre></td></tr></table></figure><h4 id="å…·åå’ŒåŒ¿åæŒ‚è½½"><a href="#å…·åå’ŒåŒ¿åæŒ‚è½½" class="headerlink" title="å…·åå’ŒåŒ¿åæŒ‚è½½"></a>å…·åå’ŒåŒ¿åæŒ‚è½½</h4><hr><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¿åæŒ‚è½½</span></span><br><span class="line">-v å®¹å™¨å†…è·¯å¾„</span><br><span class="line">docker run -d -P --name nginx01 -v /etc/nginx nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰volumeçš„æƒ…å†µ</span></span><br><span class="line">docker volume ls</span><br><span class="line"></span><br><span class="line">[root@nanxing ~]# docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx</span><br><span class="line">666e563c18473783613a5c11459ac7cd869742eb74b5b77b4218fdbf3b8487e4</span><br><span class="line">[root@nanxing ~]# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME   </span><br><span class="line">local     juming-nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡ -v å·åï¼šå®¹å™¨å†…è·¯å¾„</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ä¸€ä¸‹å·</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213051.png" alt="image-20211211001040946"></p><p>æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨ &#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;xxx</p><p>æˆ‘ä»¬é€šè¿‡å…·åæŒ‚è½½æ‰¾åˆ°æˆ‘ä»¬çš„å·ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨å…·åæŒ‚è½½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚ä½•ç¡®å®šæ˜¯å…·åæŒ‚è½½è¿˜æ˜¯åŒ¿åæŒ‚è½½ï¼Œè¿˜æ˜¯æŒ‡å®šè·¯å¾„æŒ‚è½½</span></span><br><span class="line">-v å®¹å™¨å†…è·¯å¾„    # åŒ¿åæŒ‚è½½</span><br><span class="line">-v å·å:å®¹å™¨å†…è·¯å¾„  # å…·åæŒ‚è½½</span><br><span class="line">-v /å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„  # æŒ‡å®šè·¯å¾„æŒ‚è½½</span><br></pre></td></tr></table></figure><p>æ‹“å±•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡ -v å®¹å™¨å†…è·¯å¾„ ï¼Œro rw æ”¹å˜æƒé™</span></span><br><span class="line">ro  readonly # åªè¯»</span><br><span class="line">rw  readwrite # å¯è¯»å¯å†™</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸€æ—¦è®¾å®šäº†å®¹å™¨çš„æƒé™ï¼Œå®¹å™¨å¯¹æˆ‘ä»¬æŒ‚è½½å‡ºæ¥çš„æ–‡ä»¶å°±æœ‰é™å®šäº†</span></span><br><span class="line">docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginx </span><br><span class="line">docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ro åªè¦çœ‹åˆ°äº†roå°±è¯´æ˜åªèƒ½é€šè¿‡å®¿ä¸»æœºè¿›è¡Œæ“ä½œï¼Œå®¹å™¨å†…æ˜¯æ— æ³•æ“ä½œçš„</span></span><br></pre></td></tr></table></figure><h4 id="åˆè¯†DockerFIle"><a href="#åˆè¯†DockerFIle" class="headerlink" title="åˆè¯†DockerFIle"></a>åˆè¯†DockerFIle</h4><hr><p>DockerFile å°±æ˜¯ç”¨æ¥æ„å»ºdocker é•œåƒçš„æ„å»ºæ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤è„šæœ¬</p><p>é€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒï¼Œé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè€Œè„šæœ¬ä¹Ÿæ˜¯ä¸€ä¸ªä¸ªçš„å‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æ˜¯ä¸€å±‚ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªdockerfileæ–‡ä»¶ï¼Œåå­—éšæœºï¼Œå»ºè®®dockerfile</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–‡ä»¶ä¸­çš„å†…å®¹ æŒ‡ä»¤ï¼ˆå¤§å†™ï¼‰ å‚æ•°</span></span><br><span class="line"></span><br><span class="line">FROM centos # æ·»åŠ åŸºç¡€é•œåƒ</span><br><span class="line">VOLUME [&quot;volume01&quot;, &quot;volume02&quot;] # æ·»åŠ ä¸¤ä¸ªå®¹å™¨æ•°æ®å·ï¼Œå±äºåŒ¿åæŒ‚è½½</span><br><span class="line">CMD echo &quot;--finished----success--&quot; # å®¹å™¨æ„å»ºå®Œæˆè¾“å‡ºçš„ä¿¡æ¯</span><br><span class="line">CMD /bin/bash # æŒ‡å®šç»ˆç«¯å‘½ä»¤</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™é‡Œçš„æ¯ä¸ªå‘½ä»¤å°±æ˜¯å•ä¸ªçš„ä¸€å±‚</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213429.png" alt="image-20211211111056018"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨æˆ‘ä»¬è‡ªå·±å†™çš„å®¹å™¨</span></span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213357.png" alt="image-20211211111603629"></p><p>è¿™ä¸ªå·å’Œå¤–éƒ¨ä¸€å®šæœ‰ä¸€ä¸ªåŒæ­¥çš„ç›®å½•</p><p>æŸ¥çœ‹ä¸€ä¸‹æŒ‚è½½çš„è·¯å¾„</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213293.png" alt="image-20211211112221253"></p><p>æµ‹è¯•ä¸€ä¸‹æ˜¯å¦åŒæ­¥äº†</p><p>è¿™ç§æ–¹å¼æˆ‘ä»¬æœªæ¥ä½¿ç”¨çš„ååˆ†å¤šï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ„å»ºè‡ªå·±çš„é•œåƒ</p><p>å‡è®¾æ„å»ºé•œåƒçš„æ—¶å€™æ²¡æœ‰æŒ‚è½½å·ï¼Œæ‰‹åŠ¨é•œåƒæŒ‚è½½ -v å·åï¼šå®¹å™¨å†…è·¯å¾„</p><h4 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="headerlink" title="æ•°æ®å·å®¹å™¨"></a>æ•°æ®å·å®¹å™¨</h4><hr><p>ä¸¤ä¸ªmysql åŒæ­¥æ•°æ®</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213135.png" alt="image-20211211113148244"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ä¸‰ä¸ªå®¹å™¨ï¼Œé€šè¿‡è‡ªå·±å†™çš„é•œåƒå¯åŠ¨</span></span><br></pre></td></tr></table></figure><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213745.png" alt="image-20211211113544539" style="zoom:80%;"><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213702.png" alt="image-20211211151428336" style="zoom:80%;"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•ï¼Œåˆ é™¤docker01ï¼ˆçˆ¶å®¹å™¨ï¼‰ docker02 å’Œdocker03 æ–‡ä»¶ä¾æ—§å­˜åœ¨ï¼Œä¸”å¯ä»¥è®¿é—®</span></span><br></pre></td></tr></table></figure><p>ç”¨äºå®ç°å¤šä¸ªmysql å®ç°æ•°æ®å…±äº«</p><h3 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h3><hr><p>dockerfile æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼Œå‘½ä»¤å‚æ•°è„šæœ¬</p><p>æ„å»ºæ­¥éª¤ï¼š</p><ol><li>ç¼–å†™ä¸€ä¸ªDockerfile æ–‡ä»¶</li><li>docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ</li><li>docker run è¿è¡Œé•œåƒ</li><li>docker push å‘å¸ƒé•œåƒï¼ˆDockerHub,é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼‰</li></ol><p>å®˜æ–¹çš„é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬é€šå¸¸è¦è‡ªå·±æ­å»ºè‡ªå·±çš„é•œåƒï¼</p><h4 id="DockerFileçš„æ„å»ºè¿‡ç¨‹"><a href="#DockerFileçš„æ„å»ºè¿‡ç¨‹" class="headerlink" title="DockerFileçš„æ„å»ºè¿‡ç¨‹"></a>DockerFileçš„æ„å»ºè¿‡ç¨‹</h4><hr><p><strong>åŸºç¡€çŸ¥è¯†</strong></p><ol><li>æ¯ä¸ªä¿ç•™å…³é”®å­—ï¼ˆæŒ‡ä»¤ï¼‰ éƒ½å¿…é¡»æ˜¯å¤§å†™å­—æ¯</li><li>æŒ‡ä»¤æ˜¯ä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œçš„</li><li>#è¡¨ç¤ºæ³¨é‡Š</li><li>æ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šæäº¤ä¸€ä¸ªé•œåƒå±‚</li></ol><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213626.png" alt="img"></p><p>dockerfileæ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™dockerfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å•ã€‚</p><p>æ­¥éª¤ï¼šå¼€å‘ï¼Œéƒ¨ç½²ï¼Œè¿ç»´ </p><p>DokerFileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç </p><p>DockerImagsï¼šé€šè¿‡dockerfileæ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“</p><p>Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡å™¨</p><h4 id="DockerFileçš„æŒ‡ä»¤"><a href="#DockerFileçš„æŒ‡ä»¤" class="headerlink" title="DockerFileçš„æŒ‡ä»¤"></a>DockerFileçš„æŒ‡ä»¤</h4><hr><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM           # åŸºç¡€é•œåƒï¼Œä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»º</span><br><span class="line">MAINTAINER     # é•œåƒæ˜¯è°å†™çš„ï¼Œå§“å+é‚®ç®±</span><br><span class="line">RUN            # é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤</span><br><span class="line">ADD            # æ­¥éª¤ï¼Œtomcaté•œåƒï¼Œè¿™ä¸ªtomcatå‹ç¼©åŒ…ï¼Œæ·»åŠ å†…å®¹</span><br><span class="line">WORKDIR        # é•œåƒçš„å·¥ä½œç›®å½•</span><br><span class="line">VOLUME         # è®¾ç½®å®¹å™¨å·ï¼ŒæŒ‚è½½åˆ°ç›®å½•</span><br><span class="line">EXPOSE         # æš´éœ²ç«¯å£</span><br><span class="line">CMD            # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£</span><br><span class="line">ENTRYPOINT     # æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</span><br><span class="line">ONBUILD        # å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡ŒONBUILD å‘½ä»¤ã€‚è§¦å‘å‘½ä»¤</span><br><span class="line">COPY           # ç±»ä¼¼ADD ï¼Œ å°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</span><br><span class="line">ENV            # ç‹—é…±çš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡  ç”¨æˆ·åï¼Œå¯†ç </span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213686.png" alt="æŸ¥çœ‹æºå›¾åƒ"></p><h4 id="å®æˆ˜æµ‹è¯•"><a href="#å®æˆ˜æµ‹è¯•" class="headerlink" title="å®æˆ˜æµ‹è¯•"></a>å®æˆ˜æµ‹è¯•</h4><p>Docker Hub ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯ä»ä¸€ä¸ªåŸºç¡€é•œåƒå‡ºæ¥çš„FROM scratchï¼Œç„¶åé…ç½®éœ€è¦çš„è½¯ä»¶å’Œé…ç½®è¿›è¡Œæ„å»º</p><blockquote><p>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„centos</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 1.ç¼–å†™ä¸€ä¸ªdockerfile æ–‡ä»¶</span></span><br><span class="line">[root@nanxing dockerfile]# cat mydockerfile-centos</span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER likunsong&lt;1537628435@qq.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo &quot;-----end-----&quot;</span><br><span class="line">CMD /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ„å»ºé•œåƒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤ docker build -f dockerfileæ–‡ä»¶ -t é•œåƒå:[tag]</span></span><br><span class="line"></span><br><span class="line">Successfully built 298fb113f5dd</span><br><span class="line">Successfully tagged mycentos:0.1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.æµ‹è¯•è¿è¡Œ</span></span><br><span class="line">docker run -it centos </span><br><span class="line">docker run -it mycentos:0.1</span><br></pre></td></tr></table></figure><p><strong>å¯¹æ¯”</strong>ï¼šæˆ‘ä»¬ä¹‹å‰åŸç”Ÿçš„centos</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213176.png" alt="image-20211211162441961"></p><p>æˆ‘ä»¬å¢åŠ åçš„é•œåƒ</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213846.png" alt="image-20211211162522230"></p><p>æˆ‘ä»¬å¯ä»¥åˆ—å‡ºæˆ‘ä»¬çš„ç»™æœ¬åœ°é•œåƒçš„ä¸€ä¸ªå˜æ›´å†å²</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213330.png" alt="image-20211211162751360"></p><p>å¯ä»¥ç ”ç©¶é•œåƒæ˜¯æ€ä¹ˆåšçš„</p><blockquote><p>CMD å’Œ ENTRYPOINT çš„åŒºåˆ«</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CMD            # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£</span><br><span class="line">ENTRYPOINT     # æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</span><br></pre></td></tr></table></figure><p>æµ‹è¯•cmd</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># ç¼–å†™dockerfileæ–‡ä»¶</span></span><br><span class="line">[root<span class="symbol">@nanxing</span> dockerfile]<span class="meta"># vim dockerfile-cmd-test</span></span><br><span class="line">FROM centos</span><br><span class="line">CMD [<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-a&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta"># æ„å»ºé•œåƒ</span></span><br><span class="line">[root<span class="symbol">@nanxing</span> dockerfile]<span class="meta"># docker build -f dockerfile-cmd-test -t mdtest .</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"># runè¿è¡Œ å‘ç°ls-aå®ç°æˆåŠŸ</span></span><br><span class="line">Successfully built fb8dd831cb5d</span><br><span class="line">Successfully tagged mdtest:latest</span><br><span class="line">[root<span class="symbol">@nanxing</span> dockerfile]<span class="meta"># docker run fb8dd831cb5d</span></span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">.dockerenv</span><br><span class="line">bin</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">lib</span><br><span class="line">lib64</span><br><span class="line"></span><br><span class="line"><span class="meta"># æƒ³è¿½åŠ ä¸€ä¸ªå‘½ä»¤ -l  ls-al</span></span><br><span class="line">[root<span class="symbol">@nanxing</span> dockerfile]<span class="meta"># docker run fb8dd831cb5d -l</span></span><br><span class="line">docker: Error response from daemon: OCI runtime create failed: container_linux.go:<span class="number">380</span>: starting container process caused: exec: <span class="string">&quot;-l&quot;</span>: executable file <span class="literal">not</span> found <span class="keyword">in</span> $PATH: unknown.</span><br><span class="line">ERRO[<span class="number">0000</span>] error waiting <span class="keyword">for</span> container: context canceled </span><br><span class="line"></span><br><span class="line"><span class="meta"># cmdçš„æ¸…ç†ä¸‹ -l æ›¿æ¢äº†CMD[<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-a&quot;</span>]å‘½ä»¤ï¼Œ-lä¸æ˜¯å‘½ä»¤ï¼Œæ‰€ä»¥æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ENTRYPOINT</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@nanxing dockerfile]# vim dockerfile-cmd-entrypoint</span><br><span class="line">FROM centos</span><br><span class="line">ENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;]</span><br><span class="line"></span><br><span class="line">[root@nanxing dockerfile]# docker build -f dockerfile-cmd-entrypoint -t entrypoint-test .</span><br><span class="line">Sending build context to Docker daemon  4.096kB</span><br><span class="line">Step 1/2 : FROM centos</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">5d0da3dc9764</span></span><br><span class="line">Step 2/2 : ENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;]</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> e97b12187fc8</span></span><br><span class="line">Removing intermediate container e97b12187fc8</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">9d0e6bdfc7d7</span></span><br><span class="line">Successfully built 9d0e6bdfc7d7</span><br><span class="line">Successfully tagged entrypoint-test:latest</span><br><span class="line">[root@nanxing dockerfile]# docker run 9d0e6bdfc7d7</span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">.dockerenv</span><br><span class="line">bin</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">lib</span><br><span class="line">lib64</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ‘ä»¬çš„è¿½åŠ å‘½ä»¤æ˜¯ç›´æ¥æ‹¼æ¥åˆ°æˆ‘ä»¬çš„ ENTRYPOINT å‘½ä»¤åé¢</span></span><br><span class="line">[root@nanxing dockerfile]# docker run 9d0e6bdfc7d7 -l</span><br><span class="line">total 56</span><br><span class="line">drwxr-xr-x   1 root root 4096 Dec 12 01:54 .</span><br><span class="line">drwxr-xr-x   1 root root 4096 Dec 12 01:54 ..</span><br><span class="line">-rwxr-xr-x   1 root root    0 Dec 12 01:54 .dockerenv</span><br><span class="line">lrwxrwxrwx   1 root root    7 Nov  3  2020 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x   5 root root  340 Dec 12 01:54 dev</span><br><span class="line">drwxr-xr-x   1 root root 4096 Dec 12 01:54 etc</span><br><span class="line">drwxr-xr-x   2 root root 4096 Nov  3  2020 home</span><br><span class="line">lrwxrwxrwx   1 root root    7 Nov  3  2020 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx   1 root root    9 Nov  3  2020 lib64 -&gt; usr/lib64</span><br><span class="line">drwx------   2 root root 4096 Sep 15 14:17 lost+found</span><br><span class="line">drwxr-xr-x   2 root root 4096 Nov  3  2020 media</span><br><span class="line">drwxr-xr-x   2 root root 4096 Nov  3  2020 mnt</span><br><span class="line">drwxr-xr-x   2 root root 4096 Nov  3  2020 opt</span><br><span class="line">dr-xr-xr-x 187 root root    0 Dec 12 01:54 proc</span><br><span class="line">dr-xr-x---   2 root root 4096 Sep 15 14:17 root</span><br><span class="line">drwxr-xr-x  11 root root 4096 Sep 15 14:17 run</span><br><span class="line">lrwxrwxrwx   1 root root    8 Nov  3  2020 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x   2 root root 4096 Nov  3  2020 srv</span><br><span class="line">dr-xr-xr-x  13 root root    0 Dec 12 01:54 sys</span><br><span class="line">drwxrwxrwt   7 root root 4096 Sep 15 14:17 tmp</span><br><span class="line">drwxr-xr-x  12 root root 4096 Sep 15 14:17 usr</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®æˆ˜ï¼šåˆ¶ä½œtomcaté•œåƒ"><a href="#å®æˆ˜ï¼šåˆ¶ä½œtomcaté•œåƒ" class="headerlink" title="å®æˆ˜ï¼šåˆ¶ä½œtomcaté•œåƒ"></a>å®æˆ˜ï¼šåˆ¶ä½œtomcaté•œåƒ</h4><hr><ol><li><p>å‡†å¤‡ä¸€ä¸ªé•œåƒæ–‡ä»¶ tomcat çš„å‹ç¼©åŒ…ï¼Œjdkçš„å‹ç¼©åŒ…  ï¼ˆä¸‹é¢æ˜¯jdkå’Œtomcatçš„å‹ç¼©åŒ…ï¼‰</p><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213987.png" alt="image-20211212122840181"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>KvWWj1xS5DVL-uGcQYQEsA            æå–ç ï¼šabcd</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™dockerfileï¼Œå®˜æ–¹å‘½å Dockerfileï¼Œbuildçš„æ—¶å€™ä¼šè‡ªåŠ¨å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œä¸éœ€è¦ - f  æŒ‡å®š</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">COPY readme.txt /usr/local/readme.txt</span><br><span class="line"></span><br><span class="line">ADD jdk-8u11-linux-x64.tar.gz /usr/local/</span><br><span class="line">ADD apache-tomcat-9.0.22.tar.gz /usr/local/</span><br><span class="line"></span><br><span class="line">RUN yum -y install -vim</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk1.8.0_11</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.22</span><br><span class="line">ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.22</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin/:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /usr/local/apache-tomcat-9.0.22/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-9.0.22/bin/logs/catalina.out</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>æ„å»ºé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker build -t diytomcat .</span></span><br></pre></td></tr></table></figure><ol start="4"><li>å¯åŠ¨é•œåƒ</li><li>è®¿é—®æµ‹è¯•</li><li>å‘å¸ƒé¡¹ç›®ï¼ˆç”±äºåšäº†å·æŒ‚è½½ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ç¼–å†™é¡¹ç›®å°±å¯ä»¥å‘å¸ƒï¼‰</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app version=&quot;2.4&quot; </span><br><span class="line">    xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; </span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee </span><br><span class="line">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä¹ä¹ä¹˜æ³•å£è¯€è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">&quot;white&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> &gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;purple red&quot;</span> <span class="attr">face</span>=<span class="string">&quot;åæ–‡æ¥·ä½“&quot;</span> <span class="attr">size</span>=<span class="string">&quot;10&quot;</span>&gt;</span>ä¹˜æ³•å£è¯€è¡¨<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;700&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">bgcolor</span>=<span class="string">&quot;white&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;red purple&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*1=1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;purple&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*2=2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*2=4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;purple green&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*3=3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*3=6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*3=9<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;white purple&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*4=4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*4=8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*4=12<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>4*4=16<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;purple green&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*5=5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*5=10<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*5=15<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>4*5=20<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>5*5=25<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;green purple&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*6=6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*6=12<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*6=18<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>4*6=24<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>5*6=30<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>6*6=36<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;black blue&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*7=7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*7=14<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*7=21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>4*7=28<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>5*7=35<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>6*7=42<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>7*7=49<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;blue black&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*8=8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*8=16<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*8=24<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>4*8=32<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>5*8=40<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>6*8=48<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>7*8=56<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>8*8=64<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;white blue&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>1*9=9<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>2*9=18<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>3*9=27<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>4*9=36<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>5*9=45<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>6*9=54<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>7*9=63<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>8*9=72<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">td</span>&gt;</span>9*9=81<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¡¹ç›®éƒ¨ç½²å®Œæˆï¼Œç›´æ¥è®¿é—®å°±ok</p><p>éœ€è¦æŒæ¡Dockerfileçš„ç¼–å†™ï¼Œä¹‹åéƒ½æ˜¯ä½¿ç”¨dockeré•œåƒæ¥è¿›è¡Œå‘å¸ƒè¿è¡Œ</p><h4 id="å‘å¸ƒè‡ªå·±çš„é•œåƒ"><a href="#å‘å¸ƒè‡ªå·±çš„é•œåƒ" class="headerlink" title="å‘å¸ƒè‡ªå·±çš„é•œåƒ"></a>å‘å¸ƒè‡ªå·±çš„é•œåƒ</h4><hr><blockquote><p>DockerHub</p></blockquote><ol><li>æ³¨å†Œè‡ªå·±çš„è´¦å·</li><li>ç™»å½•è´¦å·</li><li>åœ¨æˆ‘ä»¬æœåŠ¡å™¨ä¸Šæäº¤é•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@nanxing tomcat]# docker login --help</span><br><span class="line"></span><br><span class="line">Usage:  docker login [OPTIONS] [SERVER]</span><br><span class="line"></span><br><span class="line">Log in to a Docker registry.</span><br><span class="line">If no server is specified, the default is defined by the daemon.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -p, --password string   Password</span><br><span class="line">      --password-stdin    Take the password from stdin</span><br><span class="line">  -u, --username string   Username</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>ç™»å½•å®Œä¹‹åå°±å¯ä»¥æäº¤é•œåƒäº†</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨dockerhubä¸Šåˆ›å»ºä¸€ä¸ªè‡ªå·±ä»“åº“</span><br><span class="line">2.ç»™æœ¬åœ°é•œåƒåŠ æ ‡ç­¾</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker tag æœ¬åœ°é•œåƒåå­— [hub-name]/[repository-name]:[Tag]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[hub-name]ä¸ºæ³¨å†Œæ—¶ä½¿ç”¨çš„è´¦å·</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[repository-name]ä¸ºå»ºç«‹çš„ä»“åº“å</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[Tag]ä¸ºç‰ˆæœ¬å·</span></span><br><span class="line">docker tag diytomcat  lilunsong/ditomcat:1.0</span><br><span class="line">3.ä¸Šä¼ é•œåƒ</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker push [hub-name]/[repository-name]:[Tag]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¶ä¸­[hub-name]/[repository-name]:[Tag]ä¸ºä¸Šæ–‡Tagå®Œæˆçš„é•œåƒ</span></span><br><span class="line"></span><br><span class="line">docker push likunsong/ditomcat:1.0</span><br></pre></td></tr></table></figure><p><img src="https://github-shanghai.oss-cn-shanghai.aliyuncs.com/images/202305312213063.png" alt="image-20211212142933024"></p><h3 id="Dockerç½‘ç»œ"><a href="#Dockerç½‘ç»œ" class="headerlink" title="Dockerç½‘ç»œ"></a>Dockerç½‘ç»œ</h3><p><strong>pdfç‰ˆæœ¬</strong></p><p><strong>ç™¾åº¦ç½‘ç›˜</strong></p><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1B25GH8L8WGhRKS49J0Jagw">https://pan.baidu.com/s/1B25GH8L8WGhRKS49J0Jagw</a><br>æå–ç ï¼šabcd</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
